/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvZXh0L2pxdWVyeS5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIGpRdWVyeSB2Mi4yLjQgfCAoYykgalF1ZXJ5IEZvdW5kYXRpb24gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cclxuIWZ1bmN0aW9uKGEsYil7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIpO3JldHVybiBiKGEpfTpiKGEpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZD1hLmRvY3VtZW50LGU9Yy5zbGljZSxmPWMuY29uY2F0LGc9Yy5wdXNoLGg9Yy5pbmRleE9mLGk9e30saj1pLnRvU3RyaW5nLGs9aS5oYXNPd25Qcm9wZXJ0eSxsPXt9LG09XCIyLjIuNFwiLG49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IG4uZm4uaW5pdChhLGIpfSxvPS9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxwPS9eLW1zLS8scT0vLShbXFxkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6XCJcIixsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIGUuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPzA+YT90aGlzW2ErdGhpcy5sZW5ndGhdOnRoaXNbYV06ZS5jYWxsKHRoaXMpfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSl7dmFyIGI9bi5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksYSk7cmV0dXJuIGIucHJldk9iamVjdD10aGlzLGIuY29udGV4dD10aGlzLmNvbnRleHQsYn0sZWFjaDpmdW5jdGlvbihhKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSl9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcigpfSxwdXNoOmcsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7dmFyIGI9YSYmYS50b1N0cmluZygpO3JldHVybiFuLmlzQXJyYXkoYSkmJmItcGFyc2VGbG9hdChiKSsxPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2lmKFwib2JqZWN0XCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7aWYoYS5jb25zdHJ1Y3RvciYmIWsuY2FsbChhLFwiY29uc3RydWN0b3JcIikmJiFrLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGV8fHt9LFwiaXNQcm90b3R5cGVPZlwiKSlyZXR1cm4hMTtmb3IoYiBpbiBhKTtyZXR1cm4gdm9pZCAwPT09Ynx8ay5jYWxsKGEsYil9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hK1wiXCI6XCJvYmplY3RcIj09dHlwZW9mIGF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHxcIm9iamVjdFwiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGM9ZXZhbDthPW4udHJpbShhKSxhJiYoMT09PWEuaW5kZXhPZihcInVzZSBzdHJpY3RcIik/KGI9ZC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGIudGV4dD1hLGQuaGVhZC5hcHBlbmRDaGlsZChiKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTpjKGEpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCxcIm1zLVwiKS5yZXBsYWNlKHEscil9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MDtpZihzKGEpKXtmb3IoYz1hLmxlbmd0aDtjPmQ7ZCsrKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVha31lbHNlIGZvcihkIGluIGEpaWYoYi5jYWxsKGFbZF0sZCxhW2RdKT09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShvLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHMoT2JqZWN0KGEpKT9uLm1lcmdlKGMsXCJzdHJpbmdcIj09dHlwZW9mIGE/W2FdOmEpOmcuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbD09Yj8tMTpoLmNhbGwoYixhLGMpfSxtZXJnZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7Yz5kO2QrKylhW2UrK109YltkXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxnPTAsaD1bXTtpZihzKGEpKWZvcihkPWEubGVuZ3RoO2Q+ZztnKyspZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7ZWxzZSBmb3IoZyBpbiBhKWU9YihhW2ddLGcsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO3JldHVybiBmLmFwcGx5KFtdLGgpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGY7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksbi5pc0Z1bmN0aW9uKGEpPyhkPWUuY2FsbChhcmd1bWVudHMsMiksZj1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZC5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZi5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGYpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6bH0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKG4uZm5bU3ltYm9sLml0ZXJhdG9yXT1jW1N5bWJvbC5pdGVyYXRvcl0pLG4uZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aVtcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJlwibGVuZ3RoXCJpbiBhJiZhLmxlbmd0aCxjPW4udHlwZShhKTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1jfHxuLmlzV2luZG93KGEpPyExOlwiYXJyYXlcIj09PWN8fDA9PT1ifHxcIm51bWJlclwiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgdD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PVwic2l6emxlXCIrMSpuZXcgRGF0ZSx2PWEuZG9jdW1lbnQsdz0wLHg9MCx5PWdhKCksej1nYSgpLEE9Z2EoKSxCPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1iJiYobD0hMCksMH0sQz0xPDwzMSxEPXt9Lmhhc093blByb3BlcnR5LEU9W10sRj1FLnBvcCxHPUUucHVzaCxIPUUucHVzaCxJPUUuc2xpY2UsSj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSz1cImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsTD1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsTT1cIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLE49XCJcXFxcW1wiK0wrXCIqKFwiK00rXCIpKD86XCIrTCtcIiooWypeJHwhfl0/PSlcIitMK1wiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIrTStcIikpfClcIitMK1wiKlxcXFxdXCIsTz1cIjooXCIrTStcIikoPzpcXFxcKCgoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXwoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIrTitcIikqKXwuKilcXFxcKXwpXCIsUD1uZXcgUmVnRXhwKEwrXCIrXCIsXCJnXCIpLFE9bmV3IFJlZ0V4cChcIl5cIitMK1wiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIitMK1wiKyRcIixcImdcIiksUj1uZXcgUmVnRXhwKFwiXlwiK0wrXCIqLFwiK0wrXCIqXCIpLFM9bmV3IFJlZ0V4cChcIl5cIitMK1wiKihbPit+XXxcIitMK1wiKVwiK0wrXCIqXCIpLFQ9bmV3IFJlZ0V4cChcIj1cIitMK1wiKihbXlxcXFxdJ1xcXCJdKj8pXCIrTCtcIipcXFxcXVwiLFwiZ1wiKSxVPW5ldyBSZWdFeHAoTyksVj1uZXcgUmVnRXhwKFwiXlwiK00rXCIkXCIpLFc9e0lEOm5ldyBSZWdFeHAoXCJeIyhcIitNK1wiKVwiKSxDTEFTUzpuZXcgUmVnRXhwKFwiXlxcXFwuKFwiK00rXCIpXCIpLFRBRzpuZXcgUmVnRXhwKFwiXihcIitNK1wifFsqXSlcIiksQVRUUjpuZXcgUmVnRXhwKFwiXlwiK04pLFBTRVVETzpuZXcgUmVnRXhwKFwiXlwiK08pLENISUxEOm5ldyBSZWdFeHAoXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiK0wrXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIitMK1wiKig/OihbKy1dfClcIitMK1wiKihcXFxcZCspfCkpXCIrTCtcIipcXFxcKXwpXCIsXCJpXCIpLGJvb2w6bmV3IFJlZ0V4cChcIl4oPzpcIitLK1wiKSRcIixcImlcIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoXCJeXCIrTCtcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrTCtcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrTCtcIipcXFxcKXwpKD89W14tXXwkKVwiLFwiaVwiKX0sWD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFk9L15oXFxkJC9pLFo9L15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LywkPS9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLF89L1srfl0vLGFhPS8nfFxcXFwvZyxiYT1uZXcgUmVnRXhwKFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIrTCtcIj98KFwiK0wrXCIpfC4pXCIsXCJpZ1wiKSxjYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9XCIweFwiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6MD5kP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxkYT1mdW5jdGlvbigpe20oKX07dHJ5e0guYXBwbHkoRT1JLmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLEVbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZWEpe0g9e2FwcGx5OkUubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ry5hcHBseShhLEkuY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGZhKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHMsdz1iJiZiLm93bmVyRG9jdW1lbnQseD1iP2Iubm9kZVR5cGU6OTtpZihkPWR8fFtdLFwic3RyaW5nXCIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErXCIgXCJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09eCl3PWIscz1hO2Vsc2UgaWYoXCJvYmplY3RcIiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7KGs9Yi5nZXRBdHRyaWJ1dGUoXCJpZFwiKSk/az1rLnJlcGxhY2UoYWEsXCJcXFxcJCZcIik6Yi5zZXRBdHRyaWJ1dGUoXCJpZFwiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/XCIjXCIrazpcIltpZD0nXCIraytcIiddXCI7d2hpbGUoaC0tKXJbaF09bCtcIiBcIitxYShyW2hdKTtzPXIuam9pbihcIixcIiksdz1fLnRlc3QoYSkmJm9hKGIucGFyZW50Tm9kZSl8fGJ9aWYocyl0cnl7cmV0dXJuIEguYXBwbHkoZCx3LnF1ZXJ5U2VsZWN0b3JBbGwocykpLGR9Y2F0Y2goeSl7fWZpbmFsbHl7az09PXUmJmIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSxcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBnYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGphKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1jLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEMpLSh+YS5zb3VyY2VJbmRleHx8Qyk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIGxhKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBuYShhKXtyZXR1cm4gaGEoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaGEoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP1wiSFRNTFwiIT09Yi5ub2RlTmFtZTohMX0sbT1mYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSwoZT1uLmRlZmF1bHRWaWV3KSYmZS50b3AhPT1lJiYoZS5hZGRFdmVudExpc3RlbmVyP2UuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLGRhLCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChuLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9Wi50ZXN0KG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIW4uZ2V0RWxlbWVudHNCeU5hbWV8fCFuLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGM/W2NdOltdfX0sZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGJhLGNhKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBjJiZjLnZhbHVlPT09Yn19KSxkLmZpbmQuVEFHPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKFwiKlwiPT09YSl7d2hpbGUoYz1mW2UrK10pMT09PWMubm9kZVR5cGUmJmQucHVzaChjKTtyZXR1cm4gZH1yZXR1cm4gZn0sZC5maW5kLkNMQVNTPWMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oYSxiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZwP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHI9W10scT1bXSwoYy5xc2E9Wi50ZXN0KG4ucXVlcnlTZWxlY3RvckFsbCkpJiYoaWEoZnVuY3Rpb24oYSl7by5hcHBlbmRDaGlsZChhKS5pbm5lckhUTUw9XCI8YSBpZD0nXCIrdStcIic+PC9hPjxzZWxlY3QgaWQ9J1wiK3UrXCItXFxyXFxcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK0wrXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK0wrXCIqKD86dmFsdWV8XCIrSytcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkfj1cIit1K1wiLV1cIikubGVuZ3RofHxxLnB1c2goXCJ+PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcImEjXCIrdStcIisqXCIpLmxlbmd0aHx8cS5wdXNoKFwiLiMuK1srfl1cIil9KSxpYShmdW5jdGlvbihhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZxLnB1c2goXCJuYW1lXCIrTCtcIipbKl4kfCF+XT89XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHEucHVzaChcIiwuKjpcIil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSxcImRpdlwiKSxzLmNhbGwoYSxcIltzIT0nJ106eFwiKSxyLnB1c2goXCIhPVwiLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oXCJ8XCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbihcInxcIikpLGI9Wi50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8Wi50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09bnx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1ufHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0ooayxhKS1KKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsZz1bYV0saD1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09bj8tMTpiPT09bj8xOmU/LTE6Zj8xOms/SihrLGEpLUooayxiKTowO2lmKGU9PT1mKXJldHVybiBrYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSlnLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTt3aGlsZShnW2RdPT09aFtkXSlkKys7cmV0dXJuIGQ/a2EoZ1tkXSxoW2RdKTpnW2RdPT09dj8tMTpoW2RdPT09dj8xOjB9LG4pOm59LGZhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZmEoYSxudWxsLG51bGwsYil9LGZhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShULFwiPSckMSddXCIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiK1wiIFwiXSYmKCFyfHwhci50ZXN0KGIpKSYmKCFxfHwhcS50ZXN0KGIpKSl0cnl7dmFyIGQ9cy5jYWxsKGEsYik7aWYoZHx8Yy5kaXNjb25uZWN0ZWRNYXRjaHx8YS5kb2N1bWVudCYmMTEhPT1hLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBkfWNhdGNoKGUpe31yZXR1cm4gZmEoYixuLG51bGwsW2FdKS5sZW5ndGg+MH0sZmEuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4oYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSksdChhLGIpfSxmYS5hdHRyPWZ1bmN0aW9uKGEsYil7KGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpO3ZhciBlPWQuYXR0ckhhbmRsZVtiLnRvTG93ZXJDYXNlKCldLGY9ZSYmRC5jYWxsKGQuYXR0ckhhbmRsZSxiLnRvTG93ZXJDYXNlKCkpP2UoYSxiLCFwKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWY/ZjpjLmF0dHJpYnV0ZXN8fCFwP2EuZ2V0QXR0cmlidXRlKGIpOihmPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmYuc3BlY2lmaWVkP2YudmFsdWU6bnVsbH0sZmEuZXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIrYSl9LGZhLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1mYS5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9XCJcIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYS50ZXh0Q29udGVudClyZXR1cm4gYS50ZXh0Q29udGVudDtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpYys9ZShhKX1lbHNlIGlmKDM9PT1mfHw0PT09ZilyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSB3aGlsZShiPWFbZCsrXSljKz1lKGIpO3JldHVybiBjfSxkPWZhLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOmhhLG1hdGNoOlcsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOntcIj5cIjp7ZGlyOlwicGFyZW50Tm9kZVwiLGZpcnN0OiEwfSxcIiBcIjp7ZGlyOlwicGFyZW50Tm9kZVwifSxcIitcIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCIsZmlyc3Q6ITB9LFwiflwiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fFwiXCIpLnJlcGxhY2UoYmEsY2EpLFwifj1cIj09PWFbMl0mJihhWzNdPVwiIFwiK2FbM10rXCIgXCIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLFwibnRoXCI9PT1hWzFdLnNsaWNlKDAsMyk/KGFbM118fGZhLmVycm9yKGFbMF0pLGFbNF09KyhhWzRdP2FbNV0rKGFbNl18fDEpOjIqKFwiZXZlblwiPT09YVszXXx8XCJvZGRcIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHxcIm9kZFwiPT09YVszXSkpOmFbM10mJmZhLmVycm9yKGFbMF0pLGF9LFBTRVVETzpmdW5jdGlvbihhKXt2YXIgYixjPSFhWzZdJiZhWzJdO3JldHVybiBXLkNISUxELnRlc3QoYVswXSk/bnVsbDooYVszXT9hWzJdPWFbNF18fGFbNV18fFwiXCI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKFwiKVwiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGJhLGNhKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiKlwiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYStcIiBcIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoXCIoXnxcIitMK1wiKVwiK2ErXCIoXCIrTCtcInwkKVwiKSkmJnkoYSxmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KFwic3RyaW5nXCI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWZhLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT9cIiE9XCI9PT1iOmI/KGUrPVwiXCIsXCI9XCI9PT1iP2U9PT1jOlwiIT1cIj09PWI/ZSE9PWM6XCJePVwiPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOlwiKj1cIj09PWI/YyYmZS5pbmRleE9mKGMpPi0xOlwiJD1cIj09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09YzpcIn49XCI9PT1iPyhcIiBcIitlLnJlcGxhY2UoUCxcIiBcIikrXCIgXCIpLmluZGV4T2YoYyk+LTE6XCJ8PVwiPT09Yj9lPT09Y3x8ZS5zbGljZSgwLGMubGVuZ3RoKzEpPT09YytcIi1cIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPVwibnRoXCIhPT1hLnNsaWNlKDAsMyksZz1cImxhc3RcIiE9PWEuc2xpY2UoLTQpLGg9XCJvZi10eXBlXCI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixxPWIucGFyZW50Tm9kZSxyPWgmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxzPSFpJiYhaCx0PSExO2lmKHEpe2lmKGYpe3doaWxlKHApe209Yjt3aGlsZShtPW1bcF0paWYoaD9tLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1tLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe209cSxsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uJiZqWzJdLG09biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKDE9PT1tLm5vZGVUeXBlJiYrK3QmJm09PT1iKXtrW2FdPVt3LG4sdF07YnJlYWt9fWVsc2UgaWYocyYmKG09YixsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uKSx0PT09ITEpd2hpbGUobT0rK24mJm0mJm1bcF18fCh0PW49MCl8fG8ucG9wKCkpaWYoKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSkmJisrdCYmKHMmJihsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxrW2FdPVt3LHRdKSxtPT09YikpYnJlYWs7cmV0dXJuIHQtPWUsdD09PWR8fHQlZD09PTAmJnQvZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGZhLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLFwiJDFcIikpO3JldHVybiBkW3VdP2hhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aGEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShiYSxjYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aGEoZnVuY3Rpb24oYSl7cmV0dXJuIFYudGVzdChhfHxcIlwiKXx8ZmEuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBYLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7YyYmIShlPVIuZXhlYyhoKSl8fChlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVMuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUSxcIiBcIil9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtmb3IoZyBpbiBkLmZpbHRlcikhKGU9V1tnXS5leGVjKGgpKXx8altnXSYmIShlPWpbZ10oZSkpfHwoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZyxtYXRjaGVzOmV9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtpZighYylicmVha31yZXR1cm4gYj9oLmxlbmd0aDpoP2ZhLmVycm9yKGEpOnooYSxpKS5zbGljZSgwKX07ZnVuY3Rpb24gcWEoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aCxkPVwiXCI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJlwicGFyZW50Tm9kZVwiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaixrPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaj1iW3VdfHwoYlt1XT17fSksaT1qW2IudW5pcXVlSURdfHwoaltiLnVuaXF1ZUlEXT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4ga1syXT1oWzJdO2lmKGlbZF09ayxrWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gc2EoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdGEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylmYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdWEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKGMmJiFjKGYsZCxlKXx8KGcucHVzaChmKSxqJiZiLnB1c2goaCkpKTtyZXR1cm4gZ31mdW5jdGlvbiB2YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD12YShkKSksZSYmIWVbdV0mJihlPXZhKGUsZikpLGhhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHRhKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dWEocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXVhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9KKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj11YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SC5hcHBseShnLHIpfSl9ZnVuY3Rpb24gd2EoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUSxcIiQxXCIpLGMsZT5pJiZ3YShhLnNsaWNlKGksZSkpLGY+ZSYmd2EoYT1hLnNsaWNlKGUpKSxmPmUmJnFhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHNhKG0pfWZ1bmN0aW9uIHhhKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG8scSxyPTAscz1cIjBcIix0PWYmJltdLHU9W10sdj1qLHg9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXdhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx4YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9ZmEuc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmXCJJRFwiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdChcIlwiKS5zb3J0KEIpLmpvaW4oXCJcIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWlhKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixcIiNcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSl8fGphKFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYixcInR5cGVcIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZpYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8aW5wdXQvPlwiLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLFwiXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KXx8amEoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8XCJpbnB1dFwiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfSl8fGphKEssZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGZhfShhKTtuLmZpbmQ9dCxuLmV4cHI9dC5zZWxlY3RvcnMsbi5leHByW1wiOlwiXT1uLmV4cHIucHNldWRvcyxuLnVuaXF1ZVNvcnQ9bi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmbihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHY9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9LHc9bi5leHByLm1hdGNoLm5lZWRzQ29udGV4dCx4PS9ePChbXFx3LV0rKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyx5PS9eLlteOiNcXFtcXC4sXSokLztmdW5jdGlvbiB6KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYil7aWYoeS50ZXN0KGIpKXJldHVybiBuLmZpbHRlcihiLGEsYyk7Yj1uLmZpbHRlcihiLGEpfXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gaC5jYWxsKGIsYSk+LTEhPT1jfSl9bi5maWx0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF07cmV0dXJuIGMmJihhPVwiOm5vdChcIithK1wiKVwiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIHRoaXMucHVzaFN0YWNrKG4oYSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGI9MDtjPmI7YisrKWlmKG4uY29udGFpbnMoZVtiXSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IoYj0wO2M+YjtiKyspbi5maW5kKGEsZVtiXSxkKTtyZXR1cm4gZD10aGlzLnB1c2hTdGFjayhjPjE/bi51bmlxdWUoZCk6ZCksZC5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrXCIgXCIrYTphLGR9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBhJiZ3LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBBLEI9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihlPVwiPFwiPT09YVswXSYmXCI+XCI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOkIuZXhlYyhhKSwhZXx8IWVbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxjKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihlWzFdKXtpZihiPWIgaW5zdGFuY2VvZiBuP2JbMF06YixuLm1lcmdlKHRoaXMsbi5wYXJzZUhUTUwoZVsxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpkLCEwKSkseC50ZXN0KGVbMV0pJiZuLmlzUGxhaW5PYmplY3QoYikpZm9yKGUgaW4gYiluLmlzRnVuY3Rpb24odGhpc1tlXSk/dGhpc1tlXShiW2VdKTp0aGlzLmF0dHIoZSxiW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gZj1kLmdldEVsZW1lbnRCeUlkKGVbMl0pLGYmJmYucGFyZW50Tm9kZSYmKHRoaXMubGVuZ3RoPTEsdGhpc1swXT1mKSx0aGlzLmNvbnRleHQ9ZCx0aGlzLnNlbGVjdG9yPWEsdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09YSx0aGlzLmxlbmd0aD0xLHRoaXMpOm4uaXNGdW5jdGlvbihhKT92b2lkIDAhPT1jLnJlYWR5P2MucmVhZHkoYSk6YShuKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxuLm1ha2VBcnJheShhLHRoaXMpKX07Qy5wcm90b3R5cGU9bi5mbixBPW4oZCk7dmFyIEQ9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sRT17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtuLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW4oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYobi5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXcudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09dHlwZW9mIGE/aC5jYWxsKG4oYSksdGhpc1swXSk6aC5jYWxsKHRoaXMsYS5qcXVlcnk/YVswXTphKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLnVuaXF1ZVNvcnQobi5tZXJnZSh0aGlzLmdldCgpLG4oYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gRihhLGIpe3doaWxlKChhPWFbYl0pJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9bi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBGKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHUoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSxcInByZXZpb3VzU2libGluZ1wiLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuXCJVbnRpbFwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJlwic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1uLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoRVthXXx8bi51bmlxdWVTb3J0KGUpLEQudGVzdChhKSYmZS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBHPS9cXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT1cInN0cmluZ1wiPT10eXBlb2YgYT9IKGEpOm4uZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGY9W10sZz1bXSxoPS0xLGk9ZnVuY3Rpb24oKXtmb3IoZT1hLm9uY2UsZD1iPSEwO2cubGVuZ3RoO2g9LTEpe2M9Zy5zaGlmdCgpO3doaWxlKCsraDxmLmxlbmd0aClmW2hdLmFwcGx5KGNbMF0sY1sxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSYmKGg9Zi5sZW5ndGgsYz0hMSl9YS5tZW1vcnl8fChjPSExKSxiPSExLGUmJihmPWM/W106XCJcIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7bi5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiZcInN0cmluZ1wiIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPVwiXCIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hZn0sbG9jazpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sY3x8KGY9Yz1cIlwiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1tcInJlc29sdmVcIixcImRvbmVcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVzb2x2ZWRcIl0sW1wicmVqZWN0XCIsXCJmYWlsXCIsbi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlamVjdGVkXCJdLFtcIm5vdGlmeVwiLFwicHJvZ3Jlc3NcIixuLkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1dLGM9XCJwZW5kaW5nXCIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXStcIldpdGhcIl0odGhpcz09PWQ/Yy5wcm9taXNlKCk6dGhpcyxnP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/bi5leHRlbmQoYSxkKTpkfX0sZT17fTtyZXR1cm4gZC5waXBlPWQudGhlbixuLmVhY2goYixmdW5jdGlvbihhLGYpe3ZhciBnPWZbMl0saD1mWzNdO2RbZlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtjPWh9LGJbMV5hXVsyXS5kaXNhYmxlLGJbMl1bMl0ubG9jayksZVtmWzBdXT1mdW5jdGlvbigpe3JldHVybiBlW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1lP2Q6dGhpcyxhcmd1bWVudHMpLHRoaXN9LGVbZlswXStcIldpdGhcIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKFwicmVhZHlcIiksbihkKS5vZmYoXCJyZWFkeVwiKSkpKX19KTtmdW5jdGlvbiBKKCl7ZC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEopLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixKKSxuLnJlYWR5KCl9bi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe3JldHVybiBJfHwoST1uLkRlZmVycmVkKCksXCJjb21wbGV0ZVwiPT09ZC5yZWFkeVN0YXRlfHxcImxvYWRpbmdcIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChuLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEopLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixKKSkpLEkucHJvbWlzZShiKX0sbi5yZWFkeS5wcm9taXNlKCk7dmFyIEs9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpSyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxMPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gTSgpe3RoaXMuZXhwYW5kbz1uLmV4cGFuZG8rTS51aWQrK31NLnVpZD0xLE0ucHJvdG90eXBlPXtyZWdpc3RlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fHt9O3JldHVybiBhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1jOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yyx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxhW3RoaXMuZXhwYW5kb119LGNhY2hlOmZ1bmN0aW9uKGEpe2lmKCFMKGEpKXJldHVybnt9O3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gYnx8KGI9e30sTChhKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPWI6T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsdGhpcy5leHBhbmRvLHt2YWx1ZTpiLGNvbmZpZ3VyYWJsZTohMH0pKSksYn0sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMuY2FjaGUoYSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZVtiXT1jO2Vsc2UgZm9yKGQgaW4gYillW2RdPWJbZF07cmV0dXJuIGV9LGdldDpmdW5jdGlvbihhLGIpe3JldHVybiB2b2lkIDA9PT1iP3RoaXMuY2FjaGUoYSk6YVt0aGlzLmV4cGFuZG9dJiZhW3RoaXMuZXhwYW5kb11bYl19LGFjY2VzczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIHZvaWQgMD09PWJ8fGImJlwic3RyaW5nXCI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jPyhkPXRoaXMuZ2V0KGEsYiksdm9pZCAwIT09ZD9kOnRoaXMuZ2V0KGEsbi5jYW1lbENhc2UoYikpKToodGhpcy5zZXQoYSxiLGMpLHZvaWQgMCE9PWM/YzpiKX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9YVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PWYpe2lmKHZvaWQgMD09PWIpdGhpcy5yZWdpc3RlcihhKTtlbHNle24uaXNBcnJheShiKT9kPWIuY29uY2F0KGIubWFwKG4uY2FtZWxDYXNlKSk6KGU9bi5jYW1lbENhc2UoYiksYiBpbiBmP2Q9W2IsZV06KGQ9ZSxkPWQgaW4gZj9bZF06ZC5tYXRjaChHKXx8W10pKSxjPWQubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZltkW2NdXX0odm9pZCAwPT09Ynx8bi5pc0VtcHR5T2JqZWN0KGYpKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgYVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9YVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT1iJiYhbi5pc0VtcHR5T2JqZWN0KGIpfX07dmFyIE49bmV3IE0sTz1uZXcgTSxQPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxRPS9bQS1aXS9nO2Z1bmN0aW9uIFIoYSxiLGMpe3ZhciBkO2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKWlmKGQ9XCJkYXRhLVwiK2IucmVwbGFjZShRLFwiLSQmXCIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSxcInN0cmluZ1wiPT10eXBlb2YgYyl7dHJ5e2M9XCJ0cnVlXCI9PT1jPyEwOlwiZmFsc2VcIj09PWM/ITE6XCJudWxsXCI9PT1jP251bGw6K2MrXCJcIj09PWM/K2M6UC50ZXN0KGMpP24ucGFyc2VKU09OKGMpOmM7XHJcbn1jYXRjaChlKXt9Ty5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE8uaGFzRGF0YShhKXx8Ti5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTy5hY2Nlc3MoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7Ty5yZW1vdmUoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBOLmFjY2VzcyhhLGIsYyl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7Ti5yZW1vdmUoYSxiKX19KSxuLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXNbMF0sZz1mJiZmLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09YSl7aWYodGhpcy5sZW5ndGgmJihlPU8uZ2V0KGYpLDE9PT1mLm5vZGVUeXBlJiYhTi5nZXQoZixcImhhc0RhdGFBdHRyc1wiKSkpe2M9Zy5sZW5ndGg7d2hpbGUoYy0tKWdbY10mJihkPWdbY10ubmFtZSwwPT09ZC5pbmRleE9mKFwiZGF0YS1cIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFIoZixkLGVbZF0pKSk7Ti5zZXQoZixcImhhc0RhdGFBdHRyc1wiLCEwKX1yZXR1cm4gZX1yZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtPLnNldCh0aGlzLGEpfSk6Syh0aGlzLGZ1bmN0aW9uKGIpe3ZhciBjLGQ7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1PLmdldChmLGEpfHxPLmdldChmLGEucmVwbGFjZShRLFwiLSQmXCIpLnRvTG93ZXJDYXNlKCkpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoZD1uLmNhbWVsQ2FzZShhKSxjPU8uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVIoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIGQ9bi5jYW1lbENhc2UoYSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9Ty5nZXQodGhpcyxkKTtPLnNldCh0aGlzLGQsYiksYS5pbmRleE9mKFwiLVwiKT4tMSYmdm9pZCAwIT09YyYmTy5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe08ucmVtb3ZlKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhPyhiPShifHxcImZ4XCIpK1wicXVldWVcIixkPU4uZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1OLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBOLmdldChhLGMpfHxOLmFjY2VzcyhhLGMse2VtcHR5Om4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7Ti5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9Ti5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUz0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsVD1uZXcgUmVnRXhwKFwiXig/OihbKy1dKT18KShcIitTK1wiKShbYS16JV0qKSRcIixcImlcIiksVT1bXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sVj1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1uLmNzcyhhLFwiZGlzcGxheVwiKXx8IW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfTtmdW5jdGlvbiBXKGEsYixjLGQpe3ZhciBlLGY9MSxnPTIwLGg9ZD9mdW5jdGlvbigpe3JldHVybiBkLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiBuLmNzcyhhLGIsXCJcIil9LGk9aCgpLGo9YyYmY1szXXx8KG4uY3NzTnVtYmVyW2JdP1wiXCI6XCJweFwiKSxrPShuLmNzc051bWJlcltiXXx8XCJweFwiIT09aiYmK2kpJiZULmV4ZWMobi5jc3MoYSxiKSk7aWYoayYma1szXSE9PWope2o9anx8a1szXSxjPWN8fFtdLGs9K2l8fDE7ZG8gZj1mfHxcIi41XCIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBYPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLFk9LzwoW1xcdzotXSspLyxaPS9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksJD17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19OyQub3B0Z3JvdXA9JC5vcHRpb24sJC50Ym9keT0kLnRmb290PSQuY29sZ3JvdXA9JC5jYXB0aW9uPSQudGhlYWQsJC50aD0kLnRkO2Z1bmN0aW9uIF8oYSxiKXt2YXIgYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHxcIipcIik6W107cmV0dXJuIHZvaWQgMD09PWJ8fGImJm4ubm9kZU5hbWUoYSxiKT9uLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIGFhKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKU4uc2V0KGFbY10sXCJnbG9iYWxFdmFsXCIsIWJ8fE4uZ2V0KGJbY10sXCJnbG9iYWxFdmFsXCIpKX12YXIgYmE9Lzx8JiM/XFx3KzsvO2Z1bmN0aW9uIGNhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxsPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG09W10sbz0wLHA9YS5sZW5ndGg7cD5vO28rKylpZihmPWFbb10sZnx8MD09PWYpaWYoXCJvYmplY3RcIj09PW4udHlwZShmKSluLm1lcmdlKG0sZi5ub2RlVHlwZT9bZl06Zik7ZWxzZSBpZihiYS50ZXN0KGYpKXtnPWd8fGwuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxoPShZLmV4ZWMoZil8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGk9JFtoXXx8JC5fZGVmYXVsdCxnLmlubmVySFRNTD1pWzFdK24uaHRtbFByZWZpbHRlcihmKStpWzJdLGs9aVswXTt3aGlsZShrLS0pZz1nLmxhc3RDaGlsZDtuLm1lcmdlKG0sZy5jaGlsZE5vZGVzKSxnPWwuZmlyc3RDaGlsZCxnLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBtLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7bC50ZXh0Q29udGVudD1cIlwiLG89MDt3aGlsZShmPW1bbysrXSlpZihkJiZuLmluQXJyYXkoZixkKT4tMSllJiZlLnB1c2goZik7ZWxzZSBpZihqPW4uY29udGFpbnMoZi5vd25lckRvY3VtZW50LGYpLGc9XyhsLmFwcGVuZENoaWxkKGYpLFwic2NyaXB0XCIpLGomJmFhKGcpLGMpe2s9MDt3aGlsZShmPWdbaysrXSlaLnRlc3QoZi50eXBlfHxcIlwiKSYmYy5wdXNoKGYpfXJldHVybiBsfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGM9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSxjLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcImNoZWNrZWRcIiksYy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLGIuYXBwZW5kQ2hpbGQoYyksbC5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLGwubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgZGE9L15rZXkvLGVhPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxmYT0vXihbXi5dKikoPzpcXC4oLispfCkvO2Z1bmN0aW9uIGdhKCl7cmV0dXJuITB9ZnVuY3Rpb24gaGEoKXtyZXR1cm4hMX1mdW5jdGlvbiBpYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gamEoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoXCJvYmplY3RcIj09dHlwZW9mIGIpe1wic3RyaW5nXCIhPXR5cGVvZiBjJiYoZD1kfHxjLGM9dm9pZCAwKTtmb3IoaCBpbiBiKWphKGEsaCxjLGQsYltoXSxmKTtyZXR1cm4gYX1pZihudWxsPT1kJiZudWxsPT1lPyhlPWMsZD1jPXZvaWQgMCk6bnVsbD09ZSYmKFwic3RyaW5nXCI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9aGE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPU4uZ2V0KGEpO2lmKHIpe2MuaGFuZGxlciYmKGY9YyxjPWYuaGFuZGxlcixlPWYuc2VsZWN0b3IpLGMuZ3VpZHx8KGMuZ3VpZD1uLmd1aWQrKyksKGk9ci5ldmVudHMpfHwoaT1yLmV2ZW50cz17fSksKGc9ci5oYW5kbGUpfHwoZz1yLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgbiYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goRyl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPWZhLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyYmKGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxrPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKFwiLlwiKX0sZiksKG09aVtvXSl8fChtPWlbb109W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxwLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG8sZykpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxuLmV2ZW50Lmdsb2JhbFtvXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9Ti5oYXNEYXRhKGEpJiZOLmdldChhKTtpZihyJiYoaT1yLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEcpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD1mYS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09aVtvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrcC5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnEhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKFwiKipcIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEscCxyLmhhbmRsZSkhPT0hMXx8bi5yZW1vdmVFdmVudChhLG8sci5oYW5kbGUpLGRlbGV0ZSBpW29dKX1lbHNlIGZvcihvIGluIGkpbi5ldmVudC5yZW1vdmUoYSxvK2Jbal0sYyxkLCEwKTtuLmlzRW1wdHlPYmplY3QoaSkmJk4ucmVtb3ZlKGEsXCJoYW5kbGUgZXZlbnRzXCIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShOLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoXCJjbGlja1wiIT09YS50eXBlfHxpc05hTihhLmJ1dHRvbil8fGEuYnV0dG9uPDEpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fFwiY2xpY2tcIiE9PWEudHlwZSkpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09ZFtlXSYmKGRbZV09Zi5uZWVkc0NvbnRleHQ/bihlLHRoaXMpLmluZGV4KGkpPi0xOm4uZmluZChlLHRoaXMsbnVsbCxbaV0pLmxlbmd0aCksZFtlXSYmZC5wdXNoKGYpO2QubGVuZ3RoJiZnLnB1c2goe2VsZW06aSxoYW5kbGVyczpkfSl9cmV0dXJuIGg8Yi5sZW5ndGgmJmcucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2UoaCl9KSxnfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRldGFpbCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOlwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOlwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnPWIuYnV0dG9uO3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihjPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZT1jLmRvY3VtZW50RWxlbWVudCxmPWMuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZSYmZS5zY3JvbGxMZWZ0fHxmJiZmLnNjcm9sbExlZnR8fDApLShlJiZlLmNsaWVudExlZnR8fGYmJmYuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGUmJmUuc2Nyb2xsVG9wfHxmJiZmLnNjcm9sbFRvcHx8MCktKGUmJmUuY2xpZW50VG9wfHxmJiZmLmNsaWVudFRvcHx8MCkpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtuLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiLGMsZSxmPWEudHlwZSxnPWEsaD10aGlzLmZpeEhvb2tzW2ZdO2h8fCh0aGlzLmZpeEhvb2tzW2ZdPWg9ZWEudGVzdChmKT90aGlzLm1vdXNlSG9va3M6ZGEudGVzdChmKT90aGlzLmtleUhvb2tzOnt9KSxlPWgucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoaC5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBuLkV2ZW50KGcpLGI9ZS5sZW5ndGg7d2hpbGUoYi0tKWM9ZVtiXSxhW2NdPWdbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9ZCksMz09PWEudGFyZ2V0Lm5vZGVUeXBlJiYoYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZSksaC5maWx0ZXI/aC5maWx0ZXIoYSxnKTphfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PWlhKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PWlhKCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNvdXRcIn0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm5cImNoZWNrYm94XCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJm4ubm9kZU5hbWUodGhpcyxcImlucHV0XCIpPyh0aGlzLmNsaWNrKCksITEpOnZvaWQgMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYS50YXJnZXQsXCJhXCIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP2dhOmhhKTp0aGlzLnR5cGU9YSxiJiZuLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxuLm5vdygpLHZvaWQodGhpc1tuLmV4cGFuZG9dPSEwKSk6bmV3IG4uRXZlbnQoYSxiKX0sbi5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm4uRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOmhhLGlzUHJvcGFnYXRpb25TdG9wcGVkOmhhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmhhLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPWdhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPWdhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1nYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sbi5lYWNoKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIscG9pbnRlcmVudGVyOlwicG9pbnRlcm92ZXJcIixwb2ludGVybGVhdmU6XCJwb2ludGVyb3V0XCJ9LGZ1bmN0aW9uKGEsYil7bi5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYyxkPXRoaXMsZT1hLnJlbGF0ZWRUYXJnZXQsZj1hLmhhbmRsZU9iajtyZXR1cm4gZSYmKGU9PT1kfHxuLmNvbnRhaW5zKGQsZSkpfHwoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxuLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGphKHRoaXMsYSxiLGMsZCl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gamEodGhpcyxhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZStcIi5cIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gYiE9PSExJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBifHwoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPWhhKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfX0pO3ZhciBrYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Oi1dKylbXj5dKilcXC8+L2dpLGxhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLG1hPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksbmE9L150cnVlXFwvKC4qKS8sb2E9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO2Z1bmN0aW9uIHBhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpKTphfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIHJhKGEpe3ZhciBiPW5hLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBzYShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKE4uaGFzRGF0YShhKSYmKGY9Ti5hY2Nlc3MoYSksZz1OLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9Ty5oYXNEYXRhKGEpJiYoaD1PLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE8uc2V0KGIsaSkpfX1mdW5jdGlvbiB0YShhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZYLnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOlwiaW5wdXRcIiE9PWMmJlwidGV4dGFyZWFcIiE9PWN8fChiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9ZnVuY3Rpb24gdWEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiZcInN0cmluZ1wiPT10eXBlb2YgcSYmIWwuY2hlY2tDbG9uZSYmbWEudGVzdChxKSlyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWEuZXEoZSk7ciYmKGJbMF09cS5jYWxsKHRoaXMsZSxmLmh0bWwoKSkpLHVhKGYsYixjLGQpfSk7aWYobyYmKGU9Y2EoYixhWzBdLm93bmVyRG9jdW1lbnQsITEsYSxkKSxnPWUuZmlyc3RDaGlsZCwxPT09ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9ZyksZ3x8ZCkpe2ZvcihoPW4ubWFwKF8oZSxcInNjcmlwdFwiKSxxYSksaT1oLmxlbmd0aDtvPm07bSsrKWo9ZSxtIT09cCYmKGo9bi5jbG9uZShqLCEwLCEwKSxpJiZuLm1lcmdlKGgsXyhqLFwic2NyaXB0XCIpKSksYy5jYWxsKGFbbV0saixtKTtpZihpKWZvcihrPWhbaC5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChoLHJhKSxtPTA7aT5tO20rKylqPWhbbV0sWi50ZXN0KGoudHlwZXx8XCJcIikmJiFOLmFjY2VzcyhqLFwiZ2xvYmFsRXZhbFwiKSYmbi5jb250YWlucyhrLGopJiYoai5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChqLnNyYyk6bi5nbG9iYWxFdmFsKGoudGV4dENvbnRlbnQucmVwbGFjZShvYSxcIlwiKSkpfXJldHVybiBhfWZ1bmN0aW9uIHZhKGEsYixjKXtmb3IodmFyIGQsZT1iP24uZmlsdGVyKGIsYSk6YSxmPTA7bnVsbCE9KGQ9ZVtmXSk7ZisrKWN8fDEhPT1kLm5vZGVUeXBlfHxuLmNsZWFuRGF0YShfKGQpKSxkLnBhcmVudE5vZGUmJihjJiZuLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudCxkKSYmYWEoXyhkLFwic2NyaXB0XCIpKSxkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCkpO3JldHVybiBhfW4uZXh0ZW5kKHtodG1sUHJlZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2Uoa2EsXCI8JDE+PC8kMj5cIil9LGNsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEobC5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9XyhoKSxmPV8oYSksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyl0YShmW2RdLGdbZF0pO2lmKGIpaWYoYylmb3IoZj1mfHxfKGEpLGc9Z3x8XyhoKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXNhKGZbZF0sZ1tkXSk7ZWxzZSBzYShhLGgpO3JldHVybiBnPV8oaCxcInNjcmlwdFwiKSxnLmxlbmd0aD4wJiZhYShnLCFpJiZfKGEsXCJzY3JpcHRcIikpLGh9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGU9bi5ldmVudC5zcGVjaWFsLGY9MDt2b2lkIDAhPT0oYz1hW2ZdKTtmKyspaWYoTChjKSl7aWYoYj1jW04uZXhwYW5kb10pe2lmKGIuZXZlbnRzKWZvcihkIGluIGIuZXZlbnRzKWVbZF0/bi5ldmVudC5yZW1vdmUoYyxkKTpuLnJlbW92ZUV2ZW50KGMsZCxiLmhhbmRsZSk7Y1tOLmV4cGFuZG9dPXZvaWQgMH1jW08uZXhwYW5kb10mJihjW08uZXhwYW5kb109dm9pZCAwKX19fSksbi5mbi5leHRlbmQoe2RvbU1hbmlwOnVhLGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdmEodGhpcyxhLCEwKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB2YSh0aGlzLGEpfSx0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBLKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/bi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fCh0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHVhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1wYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPXBhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKF8oYSwhMSkpLGEudGV4dENvbnRlbnQ9XCJcIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEmJjE9PT1iLm5vZGVUeXBlKXJldHVybiBiLmlubmVySFRNTDtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmIWxhLnRlc3QoYSkmJiEkWyhZLmV4ZWMoYSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoXyhiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiB1YSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihiKXt2YXIgYz10aGlzLnBhcmVudE5vZGU7bi5pbkFycmF5KHRoaXMsYSk8MCYmKG4uY2xlYW5EYXRhKF8odGhpcykpLGMmJmMucmVwbGFjZUNoaWxkKGIsdGhpcykpfSxhKX19KSxuLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9bihhKSxmPWUubGVuZ3RoLTEsaD0wO2Y+PWg7aCsrKWM9aD09PWY/dGhpczp0aGlzLmNsb25lKCEwKSxuKGVbaF0pW2JdKGMpLGcuYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIHdhLHhhPXtIVE1MOlwiYmxvY2tcIixCT0RZOlwiYmxvY2tcIn07ZnVuY3Rpb24geWEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sXCJkaXNwbGF5XCIpO3JldHVybiBjLmRldGFjaCgpLGR9ZnVuY3Rpb24gemEoYSl7dmFyIGI9ZCxjPXhhW2FdO3JldHVybiBjfHwoYz15YShhLGIpLFwibm9uZVwiIT09YyYmY3x8KHdhPSh3YXx8bihcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPXdhWzBdLmNvbnRlbnREb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9eWEoYSxiKSx3YS5kZXRhY2goKSkseGFbYV09YyksY312YXIgQWE9L15tYXJnaW4vLEJhPW5ldyBSZWdFeHAoXCJeKFwiK1MrXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksQ2E9ZnVuY3Rpb24oYil7dmFyIGM9Yi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybiBjJiZjLm9wZW5lcnx8KGM9YSksYy5nZXRDb21wdXRlZFN0eWxlKGIpfSxEYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sRWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZz1kLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksaD1kLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoaC5zdHlsZSl7aC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsaC5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsbC5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09aC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxnLnN0eWxlLmNzc1RleHQ9XCJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O3BhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGcuYXBwZW5kQ2hpbGQoaCk7ZnVuY3Rpb24gaSgpe2guc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJVwiLGguaW5uZXJIVE1MPVwiXCIsRWEuYXBwZW5kQ2hpbGQoZyk7dmFyIGQ9YS5nZXRDb21wdXRlZFN0eWxlKGgpO2I9XCIxJVwiIT09ZC50b3AsZj1cIjJweFwiPT09ZC5tYXJnaW5MZWZ0LGM9XCI0cHhcIj09PWQud2lkdGgsaC5zdHlsZS5tYXJnaW5SaWdodD1cIjUwJVwiLGU9XCI0cHhcIj09PWQubWFyZ2luUmlnaHQsRWEucmVtb3ZlQ2hpbGQoZyl9bi5leHRlbmQobCx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBpKCksYn0sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmaSgpLGN9LHBpeGVsTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmaSgpLGV9LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1jJiZpKCksZn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3ZhciBiLGM9aC5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO3JldHVybiBjLnN0eWxlLmNzc1RleHQ9aC5zdHlsZS5jc3NUZXh0PVwiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9XCIwXCIsaC5zdHlsZS53aWR0aD1cIjFweFwiLEVhLmFwcGVuZENoaWxkKGcpLGI9IXBhcnNlRmxvYXQoYS5nZXRDb21wdXRlZFN0eWxlKGMpLm1hcmdpblJpZ2h0KSxFYS5yZW1vdmVDaGlsZChnKSxoLnJlbW92ZUNoaWxkKGMpLGJ9fSl9fSgpO2Z1bmN0aW9uIEZhKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8Q2EoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsXCJcIiE9PWcmJnZvaWQgMCE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLGMmJiFsLnBpeGVsTWFyZ2luUmlnaHQoKSYmQmEudGVzdChnKSYmQWEudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSx2b2lkIDAhPT1nP2crXCJcIjpnfWZ1bmN0aW9uIEdhKGEsYil7cmV0dXJue2dldDpmdW5jdGlvbigpe3JldHVybiBhKCk/dm9pZCBkZWxldGUgdGhpcy5nZXQ6KHRoaXMuZ2V0PWIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fXZhciBIYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sSWE9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LEphPXtsZXR0ZXJTcGFjaW5nOlwiMFwiLGZvbnRXZWlnaHQ6XCI0MDBcIn0sS2E9W1wiV2Via2l0XCIsXCJPXCIsXCJNb3pcIixcIm1zXCJdLExhPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKS5zdHlsZTtmdW5jdGlvbiBNYShhKXtpZihhIGluIExhKXJldHVybiBhO3ZhciBiPWFbMF0udG9VcHBlckNhc2UoKSthLnNsaWNlKDEpLGM9S2EubGVuZ3RoO3doaWxlKGMtLSlpZihhPUthW2NdK2IsYSBpbiBMYSlyZXR1cm4gYX1mdW5jdGlvbiBOYShhLGIsYyl7dmFyIGQ9VC5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsyXS0oY3x8MCkpKyhkWzNdfHxcInB4XCIpOmJ9ZnVuY3Rpb24gT2EoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9bi5jc3MoYSxjK1VbZl0sITAsZSkpLGQ/KFwiY29udGVudFwiPT09YyYmKGctPW4uY3NzKGEsXCJwYWRkaW5nXCIrVVtmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1uLmNzcyhhLFwiYm9yZGVyXCIrVVtmXStcIldpZHRoXCIsITAsZSkpKTooZys9bi5jc3MoYSxcInBhZGRpbmdcIitVW2ZdLCEwLGUpLFwicGFkZGluZ1wiIT09YyYmKGcrPW4uY3NzKGEsXCJib3JkZXJcIitVW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIFBhKGEsYixjKXt2YXIgZD0hMCxlPVwid2lkdGhcIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPUNhKGEpLGc9XCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1GYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLEJhLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK09hKGEsYixjfHwoZz9cImJvcmRlclwiOlwiY29udGVudFwiKSxkLGYpK1wicHhcIn1mdW5jdGlvbiBRYShhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1OLmdldChkLFwib2xkZGlzcGxheVwiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHxcIm5vbmVcIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PWQuc3R5bGUuZGlzcGxheSYmVihkKSYmKGZbZ109Ti5hY2Nlc3MoZCxcIm9sZGRpc3BsYXlcIix6YShkLm5vZGVOYW1lKSkpKTooZT1WKGQpLFwibm9uZVwiPT09YyYmZXx8Ti5zZXQoZCxcIm9sZGRpc3BsYXlcIixlP2M6bi5jc3MoZCxcImRpc3BsYXlcIikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmXCJub25lXCIhPT1kLnN0eWxlLmRpc3BsYXkmJlwiXCIhPT1kLnN0eWxlLmRpc3BsYXl8fChkLnN0eWxlLmRpc3BsYXk9Yj9mW2ddfHxcIlwiOlwibm9uZVwiKSk7cmV0dXJuIGF9bi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1GYShhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiEwLGNvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6XCJjc3NGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1NYShoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWM/ZyYmXCJnZXRcImluIGcmJnZvaWQgMCE9PShlPWcuZ2V0KGEsITEsZCkpP2U6aVtiXTooZj10eXBlb2YgYyxcInN0cmluZ1wiPT09ZiYmKGU9VC5leGVjKGMpKSYmZVsxXSYmKGM9VyhhLGIsZSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCI9PT1mJiYoYys9ZSYmZVszXXx8KG4uY3NzTnVtYmVyW2hdP1wiXCI6XCJweFwiKSksbC5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1NYShoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT1GYShhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIEphJiYoZT1KYVtiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxuLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/SGEudGVzdChuLmNzcyhhLFwiZGlzcGxheVwiKSkmJjA9PT1hLm9mZnNldFdpZHRoP0RhKGEsSWEsZnVuY3Rpb24oKXtyZXR1cm4gUGEoYSxiLGQpfSk6UGEoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxmPWQmJkNhKGEpLGc9ZCYmT2EoYSxiLGQsXCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZiksZik7cmV0dXJuIGcmJihlPVQuZXhlYyhjKSkmJlwicHhcIiE9PShlWzNdfHxcInB4XCIpJiYoYS5zdHlsZVtiXT1jLGM9bi5jc3MoYSxiKSksTmEoYSxjLGcpfX19KSxuLmNzc0hvb2tzLm1hcmdpbkxlZnQ9R2EobC5yZWxpYWJsZU1hcmdpbkxlZnQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj8ocGFyc2VGbG9hdChGYShhLFwibWFyZ2luTGVmdFwiKSl8fGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1EYShhLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKStcInB4XCI6dm9pZCAwfSksbi5jc3NIb29rcy5tYXJnaW5SaWdodD1HYShsLnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9EYShhLHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LEZhLFthLFwibWFyZ2luUmlnaHRcIl0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOlwiXCIscGFkZGluZzpcIlwiLGJvcmRlcjpcIldpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPVwic3RyaW5nXCI9PXR5cGVvZiBjP2Muc3BsaXQoXCIgXCIpOltjXTs0PmQ7ZCsrKWVbYStVW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LEFhLnRlc3QoYSl8fChuLmNzc0hvb2tzW2ErYl0uc2V0PU5hKX0pLG4uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG4uaXNBcnJheShiKSl7Zm9yKGQ9Q2EoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bi5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP24uc3R5bGUoYSxiLGMpOm4uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIFFhKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIFFhKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Vih0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIFJhKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBSYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49UmEsUmEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpSYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxuLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9UmEucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOlJhLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPVJhLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9Yj1uLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz1iPWEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6UmEucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sUmEucHJvdG90eXBlLmluaXQucHJvdG90eXBlPVJhLnByb3RvdHlwZSxSYS5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIDEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGwhPWEuZWxlbVthLnByb3BdJiZudWxsPT1hLmVsZW0uc3R5bGVbYS5wcm9wXT9hLmVsZW1bYS5wcm9wXTooYj1uLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sUmEucHJvcEhvb2tzLnNjcm9sbFRvcD1SYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0Olwic3dpbmdcIn0sbi5meD1SYS5wcm90b3R5cGUuaW5pdCxuLmZ4LnN0ZXA9e307dmFyIFNhLFRhLFVhPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxWYT0vcXVldWVIb29rcyQvO2Z1bmN0aW9uIFdhKCl7cmV0dXJuIGEuc2V0VGltZW91dChmdW5jdGlvbigpe1NhPXZvaWQgMH0pLFNhPW4ubm93KCl9ZnVuY3Rpb24gWGEoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowOzQ+ZDtkKz0yLWIpYz1VW2RdLGVbXCJtYXJnaW5cIitjXT1lW1wicGFkZGluZ1wiK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIFlhKGEsYixjKXtmb3IodmFyIGQsZT0oX2EudHdlZW5lcnNbYl18fFtdKS5jb25jYXQoX2EudHdlZW5lcnNbXCIqXCJdKSxmPTAsZz1lLmxlbmd0aDtnPmY7ZisrKWlmKGQ9ZVtmXS5jYWxsKGMsYixhKSlyZXR1cm4gZH1mdW5jdGlvbiBaYShhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosayxsPXRoaXMsbT17fSxvPWEuc3R5bGUscD1hLm5vZGVUeXBlJiZWKGEpLHE9Ti5nZXQoYSxcImZ4c2hvd1wiKTtjLnF1ZXVlfHwoaD1uLl9xdWV1ZUhvb2tzKGEsXCJmeFwiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxsLmFsd2F5cyhmdW5jdGlvbigpe2wuYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG4ucXVldWUoYSxcImZ4XCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKFwiaGVpZ2h0XCJpbiBifHxcIndpZHRoXCJpbiBiKSYmKGMub3ZlcmZsb3c9W28ub3ZlcmZsb3csby5vdmVyZmxvd1gsby5vdmVyZmxvd1ldLGo9bi5jc3MoYSxcImRpc3BsYXlcIiksaz1cIm5vbmVcIj09PWo/Ti5nZXQoYSxcIm9sZGRpc3BsYXlcIil8fHphKGEubm9kZU5hbWUpOmosXCJpbmxpbmVcIj09PWsmJlwibm9uZVwiPT09bi5jc3MoYSxcImZsb2F0XCIpJiYoby5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz1cImhpZGRlblwiLGwuYWx3YXlzKGZ1bmN0aW9uKCl7by5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLG8ub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0sby5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxVYS5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fFwidG9nZ2xlXCI9PT1lLGU9PT0ocD9cImhpZGVcIjpcInNob3dcIikpe2lmKFwic2hvd1wiIT09ZXx8IXF8fHZvaWQgMD09PXFbZF0pY29udGludWU7cD0hMH1tW2RdPXEmJnFbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChtKSlcImlubGluZVwiPT09KFwibm9uZVwiPT09aj96YShhLm5vZGVOYW1lKTpqKSYmKG8uZGlzcGxheT1qKTtlbHNle3E/XCJoaWRkZW5cImluIHEmJihwPXEuaGlkZGVuKTpxPU4uYWNjZXNzKGEsXCJmeHNob3dcIix7fSksZiYmKHEuaGlkZGVuPSFwKSxwP24oYSkuc2hvdygpOmwuZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbC5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7Ti5yZW1vdmUoYSxcImZ4c2hvd1wiKTtmb3IoYiBpbiBtKW4uc3R5bGUoYSxiLG1bYl0pfSk7Zm9yKGQgaW4gbSlnPVlhKHA/cVtkXTowLGQsbCksZCBpbiBxfHwocVtkXT1nLnN0YXJ0LHAmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9XCJ3aWR0aFwiPT09ZHx8XCJoZWlnaHRcIj09PWQ/MTowKSl9fWZ1bmN0aW9uICRhKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoYyBpbiBhKWlmKGQ9bi5jYW1lbENhc2UoYyksZT1iW2RdLGY9YVtjXSxuLmlzQXJyYXkoZikmJihlPWZbMV0sZj1hW2NdPWZbMF0pLGMhPT1kJiYoYVtkXT1mLGRlbGV0ZSBhW2NdKSxnPW4uY3NzSG9va3NbZF0sZyYmXCJleHBhbmRcImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBfYShhLGIsYyl7dmFyIGQsZSxmPTAsZz1fYS5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPVNhfHxXYSgpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOlNhfHxXYSgpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcigkYShrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9X2EucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLFlhLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoX2Ese3R3ZWVuZXJzOntcIipcIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYik7cmV0dXJuIFcoYy5lbGVtLGEsVC5leGVjKGIpLGMpLGN9XX0sdHdlZW5lcjpmdW5jdGlvbihhLGIpe24uaXNGdW5jdGlvbihhKT8oYj1hLGE9W1wiKlwiXSk6YT1hLm1hdGNoKEcpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWM9YVtkXSxfYS50d2VlbmVyc1tjXT1fYS50d2VlbmVyc1tjXXx8W10sX2EudHdlZW5lcnNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyczpbWmFdLHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/X2EucHJlZmlsdGVycy51bnNoaWZ0KGEpOl9hLnByZWZpbHRlcnMucHVzaChhKX19KSxuLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBuLmZ4LnNwZWVkcz9uLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpuLmZ4LnNwZWVkcy5fZGVmYXVsdCxudWxsIT1kLnF1ZXVlJiZkLnF1ZXVlIT09ITB8fChkLnF1ZXVlPVwiZnhcIiksZC5vbGQ9ZC5jb21wbGV0ZSxkLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bi5pc0Z1bmN0aW9uKGQub2xkKSYmZC5vbGQuY2FsbCh0aGlzKSxkLnF1ZXVlJiZuLmRlcXVldWUodGhpcyxkLnF1ZXVlKX0sZH0sbi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoVikuY3NzKFwib3BhY2l0eVwiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9X2EodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8Ti5nZXQodGhpcyxcImZpbmlzaFwiKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYStcInF1ZXVlSG9va3NcIixmPW4udGltZXJzLGc9Ti5nZXQodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmVmEudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTshYiYmY3x8bi5kZXF1ZXVlKHRoaXMsYSl9KX0sZmluaXNoOmZ1bmN0aW9uKGEpe3JldHVybiBhIT09ITEmJihhPWF8fFwiZnhcIiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1OLmdldCh0aGlzKSxkPWNbYStcInF1ZXVlXCJdLGU9Y1thK1wicXVldWVIb29rc1wiXSxmPW4udGltZXJzLGc9ZD9kLmxlbmd0aDowO2ZvcihjLmZpbmlzaD0hMCxuLnF1ZXVlKHRoaXMsYSxbXSksZSYmZS5zdG9wJiZlLnN0b3AuY2FsbCh0aGlzLCEwKSxiPWYubGVuZ3RoO2ItLTspZltiXS5lbGVtPT09dGhpcyYmZltiXS5xdWV1ZT09PWEmJihmW2JdLmFuaW0uc3RvcCghMCksZi5zcGxpY2UoYiwxKSk7Zm9yKGI9MDtnPmI7YisrKWRbYl0mJmRbYl0uZmluaXNoJiZkW2JdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBjLmZpbmlzaH0pfX0pLG4uZWFjaChbXCJ0b2dnbGVcIixcInNob3dcIixcImhpZGVcIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmZuW2JdO24uZm5bYl09ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBudWxsPT1hfHxcImJvb2xlYW5cIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKFhhKGIsITApLGEsZCxlKX19KSxuLmVhY2goe3NsaWRlRG93bjpYYShcInNob3dcIiksc2xpZGVVcDpYYShcImhpZGVcIiksc2xpZGVUb2dnbGU6WGEoXCJ0b2dnbGVcIiksZmFkZUluOntvcGFjaXR5Olwic2hvd1wifSxmYWRlT3V0OntvcGFjaXR5OlwiaGlkZVwifSxmYWRlVG9nZ2xlOntvcGFjaXR5OlwidG9nZ2xlXCJ9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksbi50aW1lcnM9W10sbi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9bi50aW1lcnM7Zm9yKFNhPW4ubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8bi5meC5zdG9wKCksU2E9dm9pZCAwfSxuLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe24udGltZXJzLnB1c2goYSksYSgpP24uZnguc3RhcnQoKTpuLnRpbWVycy5wb3AoKX0sbi5meC5pbnRlcnZhbD0xMyxuLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7VGF8fChUYT1hLnNldEludGVydmFsKG4uZngudGljayxuLmZ4LmludGVydmFsKSl9LG4uZnguc3RvcD1mdW5jdGlvbigpe2EuY2xlYXJJbnRlcnZhbChUYSksVGE9bnVsbH0sbi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbi5mbi5kZWxheT1mdW5jdGlvbihiLGMpe3JldHVybiBiPW4uZng/bi5meC5zcGVlZHNbYl18fGI6YixjPWN8fFwiZnhcIix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxiPWQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxjPWIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKTthLnR5cGU9XCJjaGVja2JveFwiLGwuY2hlY2tPbj1cIlwiIT09YS52YWx1ZSxsLm9wdFNlbGVjdGVkPWMuc2VsZWN0ZWQsYi5kaXNhYmxlZD0hMCxsLm9wdERpc2FibGVkPSFjLmRpc2FibGVkLGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS52YWx1ZT1cInRcIixhLnR5cGU9XCJyYWRpb1wiLGwucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIGFiLGJiPW4uZXhwci5hdHRySGFuZGxlO24uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEsodGhpcyxuLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP24ucHJvcChhLGIsYyk6KDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1iLnRvTG93ZXJDYXNlKCksZT1uLmF0dHJIb29rc1tiXXx8KG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYik/YWI6dm9pZCAwKSksdm9pZCAwIT09Yz9udWxsPT09Yz92b2lkIG4ucmVtb3ZlQXR0cihhLGIpOmUmJlwic2V0XCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6KGEuc2V0QXR0cmlidXRlKGIsYytcIlwiKSxjKTplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6KGQ9bi5maW5kLmF0dHIoYSxiKSxudWxsPT1kP3ZvaWQgMDpkKSl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWwucmFkaW9WYWx1ZSYmXCJyYWRpb1wiPT09YiYmbi5ub2RlTmFtZShhLFwiaW5wdXRcIikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRyk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1uLnByb3BGaXhbY118fGMsbi5leHByLm1hdGNoLmJvb2wudGVzdChjKSYmKGFbZF09ITEpLGEucmVtb3ZlQXR0cmlidXRlKGMpfX0pLGFiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sbi5lYWNoKG4uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPWJiW2JdfHxuLmZpbmQuYXR0cjtiYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9YmJbYl0sYmJbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLGJiW2JdPWYpLGV9fSk7dmFyIGNiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksZGI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEsodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW24ucHJvcEZpeFthXXx8YV19KX19KSxuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPW4ucHJvcEZpeFtiXXx8YixlPW4ucHJvcEhvb2tzW2JdKSxcclxudm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsXCJ0YWJpbmRleFwiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTpjYi50ZXN0KGEubm9kZU5hbWUpfHxkYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifX0pLGwub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksbi5lYWNoKFtcInRhYkluZGV4XCIsXCJyZWFkT25seVwiLFwibWF4TGVuZ3RoXCIsXCJjZWxsU3BhY2luZ1wiLFwiY2VsbFBhZGRpbmdcIixcInJvd1NwYW5cIixcImNvbFNwYW5cIixcInVzZU1hcFwiLFwiZnJhbWVCb3JkZXJcIixcImNvbnRlbnRFZGl0YWJsZVwiXSxmdW5jdGlvbigpe24ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTt2YXIgZWI9L1tcXHRcXHJcXG5cXGZdL2c7ZnVuY3Rpb24gZmIoYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwifW4uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLGZiKHRoaXMpKSl9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPWZiKGMpLGQ9MT09PWMubm9kZVR5cGUmJihcIiBcIitlK1wiIFwiKS5yZXBsYWNlKGViLFwiIFwiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZihcIiBcIitmK1wiIFwiKTwwJiYoZCs9ZitcIiBcIik7aD1uLnRyaW0oZCksZSE9PWgmJmMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixoKX19cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsZmIodGhpcykpKX0pO2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmF0dHIoXCJjbGFzc1wiLFwiXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhKXtiPWEubWF0Y2goRyl8fFtdO3doaWxlKGM9dGhpc1tpKytdKWlmKGU9ZmIoYyksZD0xPT09Yy5ub2RlVHlwZSYmKFwiIFwiK2UrXCIgXCIpLnJlcGxhY2UoZWIsXCIgXCIpKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2YrXCIgXCIpPi0xKWQ9ZC5yZXBsYWNlKFwiIFwiK2YrXCIgXCIsXCIgXCIpO2g9bi50cmltKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsaCl9fXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmXCJzdHJpbmdcIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsZmIodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZihcInN0cmluZ1wiPT09Yyl7ZD0wLGU9bih0aGlzKSxmPWEubWF0Y2goRyl8fFtdO3doaWxlKGI9ZltkKytdKWUuaGFzQ2xhc3MoYik/ZS5yZW1vdmVDbGFzcyhiKTplLmFkZENsYXNzKGIpfWVsc2Ugdm9pZCAwIT09YSYmXCJib29sZWFuXCIhPT1jfHwoYj1mYih0aGlzKSxiJiZOLnNldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiLGIpLHRoaXMuc2V0QXR0cmlidXRlJiZ0aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYnx8YT09PSExP1wiXCI6Ti5nZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQ9MDtiPVwiIFwiK2ErXCIgXCI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJihcIiBcIitmYihjKStcIiBcIikucmVwbGFjZShlYixcIiBcIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgZ2I9L1xcci9nLGhiPS9bXFx4MjBcXHRcXHJcXG5cXGZdKy9nO24uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1uLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm4uaXNBcnJheShlKSYmKGU9bi5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGdiLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksbi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKGhiLFwiIFwiKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sKGMuc2VsZWN0ZWR8fGk9PT1lKSYmKGwub3B0RGlzYWJsZWQ/IWMuZGlzYWJsZWQ6bnVsbD09PWMuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KG4udmFsSG9va3Mub3B0aW9uLmdldChkKSxmKT4tMSkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLG4uZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmEudmFsdWV9KX0pO3ZhciBpYj0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87bi5leHRlbmQobi5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihiLGMsZSxmKXt2YXIgZyxoLGksaixsLG0sbyxwPVtlfHxkXSxxPWsuY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixyPWsuY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihoPWk9ZT1lfHxkLDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmIWliLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoXCIuXCIpPi0xJiYocj1xLnNwbGl0KFwiLlwiKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksbD1xLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitxLGI9YltuLmV4cGFuZG9dP2I6bmV3IG4uRXZlbnQocSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKFwiLlwiKSxiLnJuYW1lc3BhY2U9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Iuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZSksYz1udWxsPT1jP1tiXTpuLm1ha2VBcnJheShjLFtiXSksbz1uLmV2ZW50LnNwZWNpYWxbcV18fHt9LGZ8fCFvLnRyaWdnZXJ8fG8udHJpZ2dlci5hcHBseShlLGMpIT09ITEpKXtpZighZiYmIW8ubm9CdWJibGUmJiFuLmlzV2luZG93KGUpKXtmb3Ioaj1vLmRlbGVnYXRlVHlwZXx8cSxpYi50ZXN0KGorcSl8fChoPWgucGFyZW50Tm9kZSk7aDtoPWgucGFyZW50Tm9kZSlwLnB1c2goaCksaT1oO2k9PT0oZS5vd25lckRvY3VtZW50fHxkKSYmcC5wdXNoKGkuZGVmYXVsdFZpZXd8fGkucGFyZW50V2luZG93fHxhKX1nPTA7d2hpbGUoKGg9cFtnKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zz4xP2o6by5iaW5kVHlwZXx8cSxtPShOLmdldChoLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmTi5nZXQoaCxcImhhbmRsZVwiKSxtJiZtLmFwcGx5KGgsYyksbT1sJiZoW2xdLG0mJm0uYXBwbHkmJkwoaCkmJihiLnJlc3VsdD1tLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZnx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFMKGUpfHxsJiZuLmlzRnVuY3Rpb24oZVtxXSkmJiFuLmlzV2luZG93KGUpJiYoaT1lW2xdLGkmJihlW2xdPW51bGwpLG4uZXZlbnQudHJpZ2dlcmVkPXEsZVtxXSgpLG4uZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxpJiYoZVtsXT1pKSksYi5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9bi5leHRlbmQobmV3IG4uRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwfSk7bi5ldmVudC50cmlnZ2VyKGQsbnVsbCxiKX19KSxuLmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtyZXR1cm4gYz9uLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApOnZvaWQgMH19KSxuLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfX0pLGwuZm9jdXNpbj1cIm9uZm9jdXNpblwiaW4gYSxsLmZvY3VzaW58fG4uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPU4uYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTi5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1OLmFjY2VzcyhkLGIpLTE7ZT9OLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLE4ucmVtb3ZlKGQsYikpfX19KTt2YXIgamI9YS5sb2NhdGlvbixrYj1uLm5vdygpLGxiPS9cXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErXCJcIil9LG4ucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fFwic3RyaW5nXCIhPXR5cGVvZiBiKXJldHVybiBudWxsO3RyeXtjPShuZXcgYS5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhiLFwidGV4dC94bWxcIil9Y2F0Y2goZCl7Yz12b2lkIDB9cmV0dXJuIGMmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RofHxuLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2IpLGN9O3ZhciBtYj0vIy4qJC8sbmI9LyhbPyZdKV89W14mXSovLG9iPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ20scGI9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8scWI9L14oPzpHRVR8SEVBRCkkLyxyYj0vXlxcL1xcLy8sc2I9e30sdGI9e30sdWI9XCIqL1wiLmNvbmNhdChcIipcIiksdmI9ZC5jcmVhdGVFbGVtZW50KFwiYVwiKTt2Yi5ocmVmPWpiLmhyZWY7ZnVuY3Rpb24gd2IoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fFwiKlwiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24geGIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09dGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbXCIqXCJdJiZnKFwiKlwiKX1mdW5jdGlvbiB5YihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gemIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKFwiKlwiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZStcIiBcIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gQWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZihcIipcIj09PWYpZj1pO2Vsc2UgaWYoXCIqXCIhPT1pJiZpIT09Zil7aWYoZz1qW2krXCIgXCIrZl18fGpbXCIqIFwiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KFwiIFwiKSxoWzFdPT09ZiYmKGc9altpK1wiIFwiK2hbMF1dfHxqW1wiKiBcIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbXCJ0aHJvd3NcIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmc/bDpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitpK1wiIHRvIFwiK2Z9fX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6amIuaHJlZix0eXBlOlwiR0VUXCIsaXNMb2NhbDpwYi50ZXN0KGpiLnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixhY2NlcHRzOntcIipcIjp1Yix0ZXh0OlwidGV4dC9wbGFpblwiLGh0bWw6XCJ0ZXh0L2h0bWxcIix4bWw6XCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsanNvbjpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwifSxjb250ZW50czp7eG1sOi9cXGJ4bWxcXGIvLGh0bWw6L1xcYmh0bWwvLGpzb246L1xcYmpzb25cXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOlwicmVzcG9uc2VYTUxcIix0ZXh0OlwicmVzcG9uc2VUZXh0XCIsanNvbjpcInJlc3BvbnNlSlNPTlwifSxjb252ZXJ0ZXJzOntcIiogdGV4dFwiOlN0cmluZyxcInRleHQgaHRtbFwiOiEwLFwidGV4dCBqc29uXCI6bi5wYXJzZUpTT04sXCJ0ZXh0IHhtbFwiOm4ucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP3liKHliKGEsbi5hamF4U2V0dGluZ3MpLGIpOnliKG4uYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOndiKHNiKSxhamF4VHJhbnNwb3J0OndiKHRiKSxhamF4OmZ1bmN0aW9uKGIsYyl7XCJvYmplY3RcIj09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtPW4uYWpheFNldHVwKHt9LGMpLG89bS5jb250ZXh0fHxtLHA9bS5jb250ZXh0JiYoby5ub2RlVHlwZXx8by5qcXVlcnkpP24obyk6bi5ldmVudCxxPW4uRGVmZXJyZWQoKSxyPW4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikscz1tLnN0YXR1c0NvZGV8fHt9LHQ9e30sdT17fSx2PTAsdz1cImNhbmNlbGVkXCIseD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKDI9PT12KXtpZighaCl7aD17fTt3aGlsZShiPW9iLmV4ZWMoZykpaFtiWzFdLnRvTG93ZXJDYXNlKCldPWJbMl19Yj1oW2EudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PWI/bnVsbDpifSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoYT11W2NdPXVbY118fGEsdFthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiB2fHwobS5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoMj52KWZvcihiIGluIGEpc1tiXT1bc1tiXSxhW2JdXTtlbHNlIHguYWx3YXlzKGFbeC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YXx8dztyZXR1cm4gZSYmZS5hYm9ydChiKSx6KDAsYiksdGhpc319O2lmKHEucHJvbWlzZSh4KS5jb21wbGV0ZT1yLmFkZCx4LnN1Y2Nlc3M9eC5kb25lLHguZXJyb3I9eC5mYWlsLG0udXJsPSgoYnx8bS51cmx8fGpiLmhyZWYpK1wiXCIpLnJlcGxhY2UobWIsXCJcIikucmVwbGFjZShyYixqYi5wcm90b2NvbCtcIi8vXCIpLG0udHlwZT1jLm1ldGhvZHx8Yy50eXBlfHxtLm1ldGhvZHx8bS50eXBlLG0uZGF0YVR5cGVzPW4udHJpbShtLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8W1wiXCJdLG51bGw9PW0uY3Jvc3NEb21haW4pe2o9ZC5jcmVhdGVFbGVtZW50KFwiYVwiKTt0cnl7ai5ocmVmPW0udXJsLGouaHJlZj1qLmhyZWYsbS5jcm9zc0RvbWFpbj12Yi5wcm90b2NvbCtcIi8vXCIrdmIuaG9zdCE9ai5wcm90b2NvbCtcIi8vXCIrai5ob3N0fWNhdGNoKHkpe20uY3Jvc3NEb21haW49ITB9fWlmKG0uZGF0YSYmbS5wcm9jZXNzRGF0YSYmXCJzdHJpbmdcIiE9dHlwZW9mIG0uZGF0YSYmKG0uZGF0YT1uLnBhcmFtKG0uZGF0YSxtLnRyYWRpdGlvbmFsKSkseGIoc2IsbSxjLHgpLDI9PT12KXJldHVybiB4O2s9bi5ldmVudCYmbS5nbG9iYWwsayYmMD09PW4uYWN0aXZlKysmJm4uZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxtLnR5cGU9bS50eXBlLnRvVXBwZXJDYXNlKCksbS5oYXNDb250ZW50PSFxYi50ZXN0KG0udHlwZSksZj1tLnVybCxtLmhhc0NvbnRlbnR8fChtLmRhdGEmJihmPW0udXJsKz0obGIudGVzdChmKT9cIiZcIjpcIj9cIikrbS5kYXRhLGRlbGV0ZSBtLmRhdGEpLG0uY2FjaGU9PT0hMSYmKG0udXJsPW5iLnRlc3QoZik/Zi5yZXBsYWNlKG5iLFwiJDFfPVwiK2tiKyspOmYrKGxiLnRlc3QoZik/XCImXCI6XCI/XCIpK1wiXz1cIitrYisrKSksbS5pZk1vZGlmaWVkJiYobi5sYXN0TW9kaWZpZWRbZl0mJnguc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLG4uZXRhZ1tmXSkpLChtLmRhdGEmJm0uaGFzQ29udGVudCYmbS5jb250ZW50VHlwZSE9PSExfHxjLmNvbnRlbnRUeXBlKSYmeC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsbS5jb250ZW50VHlwZSkseC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsbS5kYXRhVHlwZXNbMF0mJm0uYWNjZXB0c1ttLmRhdGFUeXBlc1swXV0/bS5hY2NlcHRzW20uZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1tLmRhdGFUeXBlc1swXT9cIiwgXCIrdWIrXCI7IHE9MC4wMVwiOlwiXCIpOm0uYWNjZXB0c1tcIipcIl0pO2ZvcihsIGluIG0uaGVhZGVycyl4LnNldFJlcXVlc3RIZWFkZXIobCxtLmhlYWRlcnNbbF0pO2lmKG0uYmVmb3JlU2VuZCYmKG0uYmVmb3JlU2VuZC5jYWxsKG8seCxtKT09PSExfHwyPT09dikpcmV0dXJuIHguYWJvcnQoKTt3PVwiYWJvcnRcIjtmb3IobCBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl4W2xdKG1bbF0pO2lmKGU9eGIodGIsbSxjLHgpKXtpZih4LnJlYWR5U3RhdGU9MSxrJiZwLnRyaWdnZXIoXCJhamF4U2VuZFwiLFt4LG1dKSwyPT09dilyZXR1cm4geDttLmFzeW5jJiZtLnRpbWVvdXQ+MCYmKGk9YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eC5hYm9ydChcInRpbWVvdXRcIil9LG0udGltZW91dCkpO3RyeXt2PTEsZS5zZW5kKHQseil9Y2F0Y2goeSl7aWYoISgyPnYpKXRocm93IHk7eigtMSx5KX19ZWxzZSB6KC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIHooYixjLGQsaCl7dmFyIGosbCx0LHUsdyx5PWM7MiE9PXYmJih2PTIsaSYmYS5jbGVhclRpbWVvdXQoaSksZT12b2lkIDAsZz1ofHxcIlwiLHgucmVhZHlTdGF0ZT1iPjA/NDowLGo9Yj49MjAwJiYzMDA+Ynx8MzA0PT09YixkJiYodT16YihtLHgsZCkpLHU9QWIobSx1LHgsaiksaj8obS5pZk1vZGlmaWVkJiYodz14LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYobi5sYXN0TW9kaWZpZWRbZl09dyksdz14LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYobi5ldGFnW2ZdPXcpKSwyMDQ9PT1ifHxcIkhFQURcIj09PW0udHlwZT95PVwibm9jb250ZW50XCI6MzA0PT09Yj95PVwibm90bW9kaWZpZWRcIjooeT11LnN0YXRlLGw9dS5kYXRhLHQ9dS5lcnJvcixqPSF0KSk6KHQ9eSwhYiYmeXx8KHk9XCJlcnJvclwiLDA+YiYmKGI9MCkpKSx4LnN0YXR1cz1iLHguc3RhdHVzVGV4dD0oY3x8eSkrXCJcIixqP3EucmVzb2x2ZVdpdGgobyxbbCx5LHhdKTpxLnJlamVjdFdpdGgobyxbeCx5LHRdKSx4LnN0YXR1c0NvZGUocykscz12b2lkIDAsayYmcC50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3gsbSxqP2w6dF0pLHIuZmlyZVdpdGgobyxbeCx5XSksayYmKHAudHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt4LG1dKSwtLW4uYWN0aXZlfHxuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB4fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxuLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KG4uZXh0ZW5kKHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSxuLmlzUGxhaW5PYmplY3QoYSkmJmEpKX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcyxcImJvZHlcIil8fG4odGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfX0pLG4uZXhwci5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMudmlzaWJsZShhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4gYS5vZmZzZXRXaWR0aD4wfHxhLm9mZnNldEhlaWdodD4wfHxhLmdldENsaWVudFJlY3RzKCkubGVuZ3RoPjB9O3ZhciBCYj0vJTIwL2csQ2I9L1xcW1xcXSQvLERiPS9cXHI/XFxuL2csRWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLEZiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBHYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxDYi50ZXN0KGEpP2QoYSxlKTpHYihhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9ZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUdiKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bi5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bi5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlHYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKEJiLFwiK1wiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZGYi50ZXN0KHRoaXMubm9kZU5hbWUpJiYhRWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVgudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1uKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bi5pc0FycmF5KGMpP24ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZShEYixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKERiLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX07dmFyIEhiPXswOjIwMCwxMjIzOjIwNH0sSWI9bi5hamF4U2V0dGluZ3MueGhyKCk7bC5jb3JzPSEhSWImJlwid2l0aENyZWRlbnRpYWxzXCJpbiBJYixsLmFqYXg9SWI9ISFJYixuLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYil7dmFyIGMsZDtyZXR1cm4gbC5jb3JzfHxJYiYmIWIuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPWIueGhyKCk7aWYoaC5vcGVuKGIudHlwZSxiLnVybCxiLmFzeW5jLGIudXNlcm5hbWUsYi5wYXNzd29yZCksYi54aHJGaWVsZHMpZm9yKGcgaW4gYi54aHJGaWVsZHMpaFtnXT1iLnhockZpZWxkc1tnXTtiLm1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZShiLm1pbWVUeXBlKSxiLmNyb3NzRG9tYWlufHxlW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGVbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGcgaW4gZSloLnNldFJlcXVlc3RIZWFkZXIoZyxlW2ddKTtjPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2MmJihjPWQ9aC5vbmxvYWQ9aC5vbmVycm9yPWgub25hYm9ydD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLFwiYWJvcnRcIj09PWE/aC5hYm9ydCgpOlwiZXJyb3JcIj09PWE/XCJudW1iZXJcIiE9dHlwZW9mIGguc3RhdHVzP2YoMCxcImVycm9yXCIpOmYoaC5zdGF0dXMsaC5zdGF0dXNUZXh0KTpmKEhiW2guc3RhdHVzXXx8aC5zdGF0dXMsaC5zdGF0dXNUZXh0LFwidGV4dFwiIT09KGgucmVzcG9uc2VUeXBlfHxcInRleHRcIil8fFwic3RyaW5nXCIhPXR5cGVvZiBoLnJlc3BvbnNlVGV4dD97YmluYXJ5OmgucmVzcG9uc2V9Ont0ZXh0OmgucmVzcG9uc2VUZXh0fSxoLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxoLm9ubG9hZD1jKCksZD1oLm9uZXJyb3I9YyhcImVycm9yXCIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoXCJhYm9ydFwiKTt0cnl7aC5zZW5kKGIuaGFzQ29udGVudCYmYi5kYXRhfHxudWxsKX1jYXRjaChpKXtpZihjKXRocm93IGl9fSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiL30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIil9KSxuLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7Yj1uKFwiPHNjcmlwdD5cIikucHJvcCh7Y2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oXCJsb2FkIGVycm9yXCIsYz1mdW5jdGlvbihhKXtiLnJlbW92ZSgpLGM9bnVsbCxhJiZmKFwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxkLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEpiPVtdLEtiPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87bi5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9SmIucG9wKCl8fG4uZXhwYW5kbytcIl9cIitrYisrO3JldHVybiB0aGlzW2FdPSEwLGF9fSksbi5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihLYi50ZXN0KGIudXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiBiLmRhdGEmJjA9PT0oYi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmS2IudGVzdChiLmRhdGEpJiZcImRhdGFcIik7cmV0dXJuIGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShLYixcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShsYi50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxuLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssSmIucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwiKTp2b2lkIDB9KSxuLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWNhKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBMYj1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmTGIpcmV0dXJuIExiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD4tMSYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihlPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZuLmFqYXgoe3VybDphLHR5cGU6ZXx8XCJHRVRcIixkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oXCI8ZGl2PlwiKS5hcHBlbmQobi5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5hbHdheXMoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goZnVuY3Rpb24oKXtjLmFwcGx5KHRoaXMsZnx8W2EucmVzcG9uc2VUZXh0LGIsYV0pfSl9KSx0aGlzfSxuLmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24oYixhKX19KSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTtmdW5jdGlvbiBNYihhKXtyZXR1cm4gbi5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlJiZhLmRlZmF1bHRWaWV3fW4ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bi5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bihhKSxtPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW4uY3NzKGEsXCJ0b3BcIiksaT1uLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmKGYraSkuaW5kZXhPZihcImF1dG9cIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxuLmV4dGVuZCh7fSxoKSkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8oZT1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9TWIoZikse3RvcDplLnRvcCtjLnBhZ2VZT2Zmc2V0LWIuY2xpZW50VG9wLGxlZnQ6ZS5sZWZ0K2MucGFnZVhPZmZzZXQtYi5jbGllbnRMZWZ0fSk6ZX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9dGhpc1swXSxkPXt0b3A6MCxsZWZ0OjB9O3JldHVyblwiZml4ZWRcIj09PW4uY3NzKGMsXCJwb3NpdGlvblwiKT9iPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLFwiaHRtbFwiKXx8KGQ9YS5vZmZzZXQoKSksZC50b3ArPW4uY3NzKGFbMF0sXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxkLmxlZnQrPW4uY3NzKGFbMF0sXCJib3JkZXJMZWZ0V2lkdGhcIiwhMCkpLHt0b3A6Yi50b3AtZC50b3Atbi5jc3MoYyxcIm1hcmdpblRvcFwiLCEwKSxsZWZ0OmIubGVmdC1kLmxlZnQtbi5jc3MoYyxcIm1hcmdpbkxlZnRcIiwhMCl9fX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUoYSYmXCJzdGF0aWNcIj09PW4uY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxFYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz1cInBhZ2VZT2Zmc2V0XCI9PT1iO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIEsodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9TWIoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9mW2JdOmFbZF06dm9pZChmP2Yuc2Nyb2xsVG8oYz9mLnBhZ2VYT2Zmc2V0OmUsYz9lOmYucGFnZVlPZmZzZXQpOmFbZF09ZSl9LGEsZCxhcmd1bWVudHMubGVuZ3RoKX19KSxuLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1HYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1GYShhLGIpLEJhLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG4uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gSyh0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLmV4dGVuZCh7YmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSxcIioqXCIpOnRoaXMub2ZmKGIsYXx8XCIqKlwiLGMpfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofX0pLG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBufSk7dmFyIE5iPWEualF1ZXJ5LE9iPWEuJDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1uJiYoYS4kPU9iKSxiJiZhLmpRdWVyeT09PW4mJihhLmpRdWVyeT1OYiksbn0sYnx8KGEualF1ZXJ5PWEuJD1uKSxufSk7Il0sImZpbGUiOiJqcXVlcnkubWluLmpzIn0=

/*!

JSZip v3.1.1 - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.JSZip=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./utils"),e=a("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(a){for(var b,c,e,g,h,i,j,k=[],l=0,m=a.length,n=m,o="string"!==d.getTypeOf(a);l<a.length;)n=m-l,o?(b=a[l++],c=l<m?a[l++]:0,e=l<m?a[l++]:0):(b=a.charCodeAt(l++),c=l<m?a.charCodeAt(l++):0,e=l<m?a.charCodeAt(l++):0),g=b>>2,h=(3&b)<<4|c>>4,i=n>1?(15&c)<<2|e>>6:64,j=n>2?63&e:64,k.push(f.charAt(g)+f.charAt(h)+f.charAt(i)+f.charAt(j));return k.join("")},c.decode=function(a){var b,c,d,g,h,i,j,k=0,l=0,m="data:";if(a.substr(m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");var n=3*a.length/4;if(a.charAt(a.length-1)===f.charAt(64)&&n--,a.charAt(a.length-2)===f.charAt(64)&&n--,n%1!==0)throw new Error("Invalid base64 input, bad content length.");var o;for(o=e.uint8array?new Uint8Array(0|n):new Array(0|n);k<a.length;)g=f.indexOf(a.charAt(k++)),h=f.indexOf(a.charAt(k++)),i=f.indexOf(a.charAt(k++)),j=f.indexOf(a.charAt(k++)),b=g<<2|h>>4,c=(15&h)<<4|i>>2,d=(3&i)<<6|j,o[l++]=b,64!==i&&(o[l++]=c),64!==j&&(o[l++]=d);return o}},{"./support":27,"./utils":29}],2:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.compressedSize=a,this.uncompressedSize=b,this.crc32=c,this.compression=d,this.compressedContent=e}var e=a("./external"),f=a("./stream/DataWorker"),g=a("./stream/DataLengthProbe"),h=a("./stream/Crc32Probe"),g=a("./stream/DataLengthProbe");d.prototype={getContentWorker:function(){var a=new f(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),b=this;return a.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new f(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(a,b,c){return a.pipe(new h).pipe(new g("uncompressedSize")).pipe(b.compressWorker(c)).pipe(new g("compressedSize")).withStreamInfo("compression",b)},b.exports=d},{"./external":6,"./stream/Crc32Probe":22,"./stream/DataLengthProbe":23,"./stream/DataWorker":24}],3:[function(a,b,c){"use strict";var d=a("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(a){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},c.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":25}],4:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b[g])];return a^-1}function f(a,b,c,d){var e=h,f=d+c;a^=-1;for(var g=d;g<f;g++)a=a>>>8^e[255&(a^b.charCodeAt(g))];return a^-1}var g=a("./utils"),h=d();b.exports=function(a,b){if("undefined"==typeof a||!a.length)return 0;var c="string"!==g.getTypeOf(a);return c?e(0|b,a,a.length,0):f(0|b,a,a.length,0)}},{"./utils":29}],5:[function(a,b,c){"use strict";c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(a,b,c){(function(c){"use strict";var d=c.Promise||a("lie");b.exports={Promise:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lie:56}],7:[function(a,b,c){"use strict";function d(a,b){h.call(this,"FlateWorker/"+a),this._pako=new f[a]({raw:!0,level:b.level||-1}),this.meta={};var c=this;this._pako.onData=function(a){c.push({data:a,meta:c.meta})}}var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,f=a("pako"),g=a("./utils"),h=a("./stream/GenericWorker"),i=e?"uint8array":"array";c.magic="\b\0",g.inherits(d,h),d.prototype.processChunk=function(a){this.meta=a.meta,this._pako.push(g.transformTo(i,a.data),!1)},d.prototype.flush=function(){h.prototype.flush.call(this),this._pako.push([],!0)},d.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},c.compressWorker=function(a){return new d("Deflate",a)},c.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":25,"./utils":29,pako:57}],8:[function(a,b,c){"use strict";function d(a,b,c,d){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=c,this.encodeFileName=d,this.streamFiles=a,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var e=a("../utils"),f=a("../stream/GenericWorker"),g=a("../utf8"),h=a("../crc32"),i=a("../signature"),j=function(a,b){var c,d="";for(c=0;c<b;c++)d+=String.fromCharCode(255&a),a>>>=8;return d},k=function(a,b){var c=a;return a||(c=b?16893:33204),(65535&c)<<16},l=function(a,b){return 63&(a||0)},m=function(a,b,c,d,f,m){var n,o,p=a.file,q=a.compression,r=m!==g.utf8encode,s=e.transformTo("string",m(p.name)),t=e.transformTo("string",g.utf8encode(p.name)),u=p.comment,v=e.transformTo("string",m(u)),w=e.transformTo("string",g.utf8encode(u)),x=t.length!==p.name.length,y=w.length!==u.length,z="",A="",B="",C=p.dir,D=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};b&&!c||(E.crc32=a.crc32,E.compressedSize=a.compressedSize,E.uncompressedSize=a.uncompressedSize);var F=0;b&&(F|=8),r||!x&&!y||(F|=2048);var G=0,H=0;C&&(G|=16),"UNIX"===f?(H=798,G|=k(p.unixPermissions,C)):(H=20,G|=l(p.dosPermissions,C)),n=D.getUTCHours(),n<<=6,n|=D.getUTCMinutes(),n<<=5,n|=D.getUTCSeconds()/2,o=D.getUTCFullYear()-1980,o<<=4,o|=D.getUTCMonth()+1,o<<=5,o|=D.getUTCDate(),x&&(A=j(1,1)+j(h(s),4)+t,z+="up"+j(A.length,2)+A),y&&(B=j(1,1)+j(h(v),4)+w,z+="uc"+j(B.length,2)+B);var I="";I+="\n\0",I+=j(F,2),I+=q.magic,I+=j(n,2),I+=j(o,2),I+=j(E.crc32,4),I+=j(E.compressedSize,4),I+=j(E.uncompressedSize,4),I+=j(s.length,2),I+=j(z.length,2);var J=i.LOCAL_FILE_HEADER+I+s+z,K=i.CENTRAL_FILE_HEADER+j(H,2)+I+j(v.length,2)+"\0\0\0\0"+j(G,4)+j(d,4)+s+z+v;return{fileRecord:J,dirRecord:K}},n=function(a,b,c,d,f){var g="",h=e.transformTo("string",f(d));return g=i.CENTRAL_DIRECTORY_END+"\0\0\0\0"+j(a,2)+j(a,2)+j(b,4)+j(c,4)+j(h.length,2)+h},o=function(a){var b="";return b=i.DATA_DESCRIPTOR+j(a.crc32,4)+j(a.compressedSize,4)+j(a.uncompressedSize,4)};e.inherits(d,f),d.prototype.push=function(a){var b=a.meta.percent||0,c=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(a):(this.bytesWritten+=a.data.length,f.prototype.push.call(this,{data:a.data,meta:{currentFile:this.currentFile,percent:c?(b+100*(c-d-1))/c:100}}))},d.prototype.openedSource=function(a){if(this.currentSourceOffset=this.bytesWritten,this.currentFile=a.file.name,this.streamFiles&&!a.file.dir){var b=m(a,this.streamFiles,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(a){this.accumulate=!1;var b=m(a,this.streamFiles,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),this.streamFiles&&!a.file.dir)this.push({data:o(a),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var a=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var c=this.bytesWritten-a,d=n(this.dirRecords.length,c,a,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(a){this._sources.push(a);var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),a.on("error",function(a){b.error(a)}),this},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(a){var b=this._sources;if(!f.prototype.error.call(this,a))return!1;for(var c=0;c<b.length;c++)try{b[c].error(a)}catch(a){}return!0},d.prototype.lock=function(){f.prototype.lock.call(this);for(var a=this._sources,b=0;b<a.length;b++)a[b].lock()},b.exports=d},{"../crc32":4,"../signature":20,"../stream/GenericWorker":25,"../utf8":28,"../utils":29}],9:[function(a,b,c){"use strict";var d=a("../compressions"),e=a("./ZipFileWorker"),f=function(a,b){var c=a||b,e=d[c];if(!e)throw new Error(c+" is not a valid compression method !");return e};c.generateWorker=function(a,b,c){var d=new e(b.streamFiles,c,b.platform,b.encodeFileName),g=0;try{a.forEach(function(a,c){g++;var e=f(c.options.compression,b.compression),h=c.options.compressionOptions||b.compressionOptions||{},i=c.dir,j=c.date;c._compressWorker(e,h).withStreamInfo("file",{name:a,dir:i,date:j,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(d)}),d.entriesCount=g}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,b,c){"use strict";function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var a=new d;for(var b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a}}d.prototype=a("./object"),d.prototype.loadAsync=a("./load"),d.support=a("./support"),d.defaults=a("./defaults"),d.version="3.1.1",d.loadAsync=function(a,b){return(new d).loadAsync(a,b)},d.external=a("./external"),b.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":13,"./support":27}],11:[function(a,b,c){"use strict";function d(a){return new f.Promise(function(b,c){var d=a.decompressed.getContentWorker().pipe(new i);d.on("error",function(a){c(a)}).on("end",function(){d.streamInfo.crc32!==a.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}var e=a("./utils"),f=a("./external"),g=a("./utf8"),e=a("./utils"),h=a("./zipEntries"),i=a("./stream/Crc32Probe"),j=a("./nodejsUtils");b.exports=function(a,b){var c=this;return b=e.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:g.utf8decode}),j.isNode&&j.isStream(a)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",a,!0,b.optimizedBinaryString,b.base64).then(function(a){var c=new h(b);return c.load(a),c}).then(function(a){var c=[f.Promise.resolve(a)],e=a.files;if(b.checkCRC32)for(var g=0;g<e.length;g++)c.push(d(e[g]));return f.Promise.all(c)}).then(function(a){for(var d=a.shift(),e=d.files,f=0;f<e.length;f++){var g=e[f];c.file(g.fileNameStr,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:b.createFolders})}return d.zipComment.length&&(c.comment=d.zipComment),c})}},{"./external":6,"./nodejsUtils":12,"./stream/Crc32Probe":22,"./utf8":28,"./utils":29,"./zipEntries":30}],12:[function(a,b,c){(function(a){"use strict";b.exports={isNode:"undefined"!=typeof a,newBuffer:function(b,c){return new a(b,c)},isBuffer:function(b){return a.isBuffer(b)},isStream:function(a){return a&&"function"==typeof a.on&&"function"==typeof a.pause&&"function"==typeof a.resume}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],13:[function(a,b,c){"use strict";function d(a){return"[object RegExp]"===Object.prototype.toString.call(a)}var e=a("./utf8"),f=a("./utils"),g=a("./stream/GenericWorker"),h=a("./stream/StreamHelper"),i=a("./defaults"),j=a("./compressedObject"),k=a("./zipObject"),l=a("./generate"),m=a("./nodejsUtils"),n=a("./nodejs/NodejsStreamInputAdapter"),o=function(a,b,c){var d,e=f.getTypeOf(b);c=f.extend(c||{},i),c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(a=q(a)),c.createFolders&&(d=p(a))&&r.call(this,d,!0);var h="string"===e&&c.binary===!1&&c.base64===!1;c.binary=!h;var l=b instanceof j&&0===b.uncompressedSize;(l||c.dir||!b||0===b.length)&&(c.base64=!1,c.binary=!0,b="",c.compression="STORE",e="string");var o=null;o=b instanceof j||b instanceof g?b:m.isNode&&m.isStream(b)?new n(a,b):f.prepareContent(a,b,c.binary,c.optimizedBinaryString,c.base64);var s=new k(a,o,c);this.files[a]=s},p=function(a){"/"===a.slice(-1)&&(a=a.substring(0,a.length-1));var b=a.lastIndexOf("/");return b>0?a.substring(0,b):""},q=function(a){return"/"!==a.slice(-1)&&(a+="/"),a},r=function(a,b){return b="undefined"!=typeof b?b:i.createFolders,a=q(a),this.files[a]||o.call(this,a,null,{dir:!0,createFolders:b}),this.files[a]},s={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(a){var b,c,d;for(b in this.files)this.files.hasOwnProperty(b)&&(d=this.files[b],c=b.slice(this.root.length,b.length),c&&b.slice(0,this.root.length)===this.root&&a(c,d))},filter:function(a){var b=[];return this.forEach(function(c,d){a(c,d)&&b.push(d)}),b},file:function(a,b,c){if(1===arguments.length){if(d(a)){var e=a;return this.filter(function(a,b){return!b.dir&&e.test(a)})}var f=this.files[this.root+a];return f&&!f.dir?f:null}return a=this.root+a,o.call(this,a,b,c),this},folder:function(a){if(!a)return this;if(d(a))return this.filter(function(b,c){return c.dir&&a.test(b)});var b=this.root+a,c=r.call(this,b),e=this.clone();return e.root=c.name,e},remove:function(a){a=this.root+a;var b=this.files[a];if(b||("/"!==a.slice(-1)&&(a+="/"),b=this.files[a]),b&&!b.dir)delete this.files[a];else for(var c=this.filter(function(b,c){return c.name.slice(0,a.length)===a}),d=0;d<c.length;d++)delete this.files[c[d].name];return this},generate:function(a){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(a){var b,c={};try{if(c=f.extend(a||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:e.utf8encode}),c.type=c.type.toLowerCase(),c.compression=c.compression.toUpperCase(),"binarystring"===c.type&&(c.type="string"),!c.type)throw new Error("No output type specified.");f.checkSupport(c.type),"darwin"!==a.platform&&"freebsd"!==a.platform&&"linux"!==a.platform&&"sunos"!==a.platform||(a.platform="UNIX"),"win32"===a.platform&&(a.platform="DOS");var d=c.comment||this.comment||"";b=l.generateWorker(this,c,d)}catch(i){b=new g("error"),b.error(i)}return new h(b,c.type||"string",c.mimeType)},generateAsync:function(a,b){return this.generateInternalStream(a).accumulate(b)},generateNodeStream:function(a,b){return a=a||{},a.type||(a.type="nodebuffer"),this.generateInternalStream(a).toNodejsStream(b)}};b.exports=s},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":33,"./nodejsUtils":12,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28,"./utils":29,"./zipObject":32}],14:[function(a,b,c){"use strict";function d(a){e.call(this,a);for(var b=0;b<this.data.length;b++)a[b]=255&a[b]}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data[this.zero+a]},d.prototype.lastIndexOfSignature=function(a){for(var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===b&&this.data[f+1]===c&&this.data[f+2]===d&&this.data[f+3]===e)return f-this.zero;return-1},d.prototype.readAndCheckSignature=function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),e=a.charCodeAt(3),f=this.readData(4);return b===f[0]&&c===f[1]&&d===f[2]&&e===f[3]},d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return[];var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./DataReader":15}],15:[function(a,b,c){"use strict";function d(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}var e=a("../utils");d.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(a){},readInt:function(a){var b,c=0;for(this.checkOffset(a),b=this.index+a-1;b>=this.index;b--)c=(c<<8)+this.byteAt(b);return this.index+=a,c},readString:function(a){return e.transformTo("string",this.readData(a))},readData:function(a){},lastIndexOfSignature:function(a){},readAndCheckSignature:function(a){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},b.exports=d},{"../utils":29}],16:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./Uint8ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./Uint8ArrayReader":18}],17:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./DataReader"),f=a("../utils");f.inherits(d,e),d.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},d.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},d.prototype.readAndCheckSignature=function(a){var b=this.readData(4);return a===b},d.prototype.readData=function(a){this.checkOffset(a);var b=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./DataReader":15}],18:[function(a,b,c){"use strict";function d(a){e.call(this,a)}var e=a("./ArrayReader"),f=a("../utils");f.inherits(d,e),d.prototype.readData=function(a){if(this.checkOffset(a),0===a)return new Uint8Array(0);var b=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,b},b.exports=d},{"../utils":29,"./ArrayReader":14}],19:[function(a,b,c){"use strict";var d=a("../utils"),e=a("../support"),f=a("./ArrayReader"),g=a("./StringReader"),h=a("./NodeBufferReader"),i=a("./Uint8ArrayReader");b.exports=function(a){var b=d.getTypeOf(a);return d.checkSupport(b),"string"!==b||e.uint8array?"nodebuffer"===b?new h(a):e.uint8array?new i(d.transformTo("uint8array",a)):new f(d.transformTo("array",a)):new g(a)}},{"../support":27,"../utils":29,"./ArrayReader":14,"./NodeBufferReader":16,"./StringReader":17,"./Uint8ArrayReader":18}],20:[function(a,b,c){"use strict";c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\b"},{}],21:[function(a,b,c){"use strict";function d(a){e.call(this,"ConvertWorker to "+a),this.destType=a}var e=a("./GenericWorker"),f=a("../utils");f.inherits(d,e),d.prototype.processChunk=function(a){this.push({data:f.transformTo(this.destType,a.data),meta:a.meta})},b.exports=d},{"../utils":29,"./GenericWorker":25}],22:[function(a,b,c){"use strict";function d(){e.call(this,"Crc32Probe")}var e=a("./GenericWorker"),f=a("../crc32"),g=a("../utils");g.inherits(d,e),d.prototype.processChunk=function(a){this.streamInfo.crc32=f(a.data,this.streamInfo.crc32||0),this.push(a)},b.exports=d},{"../crc32":4,"../utils":29,"./GenericWorker":25}],23:[function(a,b,c){"use strict";function d(a){f.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}var e=a("../utils"),f=a("./GenericWorker");e.inherits(d,f),d.prototype.processChunk=function(a){if(a){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+a.data.length}f.prototype.processChunk.call(this,a)},b.exports=d},{"../utils":29,"./GenericWorker":25}],24:[function(a,b,c){"use strict";function d(a){f.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(a){b.dataIsReady=!0,b.data=a,b.max=a&&a.length||0,b.type=e.getTypeOf(a),b.isPaused||b._tickAndRepeat()},function(a){b.error(a)})}var e=a("../utils"),f=a("./GenericWorker"),g=16384;e.inherits(d,f),d.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=g,b=null,c=Math.min(this.max,this.index+a);if(this.index>=this.max)return this.end();switch(this.type){case"string":b=this.data.substring(this.index,c);break;case"uint8array":b=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":b=this.data.slice(this.index,c)}return this.index=c,this.push({data:b,meta:{percent:this.max?this.index/this.max*100:0}})},b.exports=d},{"../utils":29,"./GenericWorker":25}],25:[function(a,b,c){"use strict";function d(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,b){return this._listeners[a].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,b){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,b)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var b=this;return a.on("data",function(a){b.processChunk(a)}),a.on("end",function(){b.end()}),a.on("error",function(a){b.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,b){return this.extraStreamInfo[a]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},b.exports=d},{}],26:[function(a,b,c){(function(c){"use strict";function d(a,b,c){switch(a){case"blob":return h.newBlob(h.transformTo("arraybuffer",b),c);case"base64":return k.encode(b);default:return h.transformTo(a,b)}}function e(a,b){var d,e=0,f=null,g=0;for(d=0;d<b.length;d++)g+=b[d].length;switch(a){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":for(f=new Uint8Array(g),d=0;d<b.length;d++)f.set(b[d],e),e+=b[d].length;return f;case"nodebuffer":return c.concat(b);default:throw new Error("concat : unsupported type '"+a+"'")}}function f(a,b){return new m.Promise(function(c,f){var g=[],h=a._internalType,i=a._outputType,j=a._mimeType;a.on("data",function(a,c){g.push(a),b&&b(c)}).on("error",function(a){g=[],f(a)}).on("end",function(){try{var a=d(i,e(h,g),j);c(a)}catch(b){f(b)}g=[]}).resume()})}function g(a,b,c){var d=b;switch(b){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=b,this._mimeType=c,h.checkSupport(d),this._worker=a.pipe(new i(d)),a.lock()}catch(e){this._worker=new j("error"),this._worker.error(e)}}var h=a("../utils"),i=a("./ConvertWorker"),j=a("./GenericWorker"),k=a("../base64"),l=a("../nodejs/NodejsStreamOutputAdapter"),m=a("../external");g.prototype={accumulate:function(a){return f(this,a)},on:function(a,b){var c=this;return"data"===a?this._worker.on(a,function(a){b.call(c,a.data,a.meta)}):this._worker.on(a,function(){h.delay(b,arguments,c)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(a){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},a)}},b.exports=g}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":33,"../utils":29,"./ConvertWorker":21,"./GenericWorker":25}],27:[function(a,b,c){(function(b){"use strict";if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,c.nodebuffer="undefined"!=typeof b,c.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)c.blob=!1;else{var d=new ArrayBuffer(0);try{c.blob=0===new Blob([d],{type:"application/zip"}).size}catch(e){try{var f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,g=new f;g.append(d),c.blob=0===g.getBlob("application/zip").size}catch(e){c.blob=!1}}}c.nodestream=!!a("./nodejs/NodejsStreamOutputAdapter").prototype}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"./nodejs/NodejsStreamOutputAdapter":33}],28:[function(a,b,c){"use strict";function d(){i.call(this,"utf-8 decode"),this.leftOver=null}function e(){i.call(this,"utf-8 encode")}for(var f=a("./utils"),g=a("./support"),h=a("./nodejsUtils"),i=a("./stream/GenericWorker"),j=new Array(256),k=0;k<256;k++)j[k]=k>=252?6:k>=248?5:k>=240?4:k>=224?3:k>=192?2:1;j[254]=j[254]=1;var l=function(a){var b,c,d,e,f,h=a.length,i=0;for(e=0;e<h;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=g.uint8array?new Uint8Array(i):new Array(i),f=0,e=0;f<i;e++)c=a.charCodeAt(e),55296===(64512&c)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),e++)),c<128?b[f++]=c:c<2048?(b[f++]=192|c>>>6,b[f++]=128|63&c):c<65536?(b[f++]=224|c>>>12,b[f++]=128|c>>>6&63,b[f++]=128|63&c):(b[f++]=240|c>>>18,b[f++]=128|c>>>12&63,b[f++]=128|c>>>6&63,b[f++]=128|63&c);return b},m=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+j[a[c]]>b?c:b},n=function(a){var b,c,d,e,g=a.length,h=new Array(2*g);for(c=0,b=0;b<g;)if(d=a[b++],d<128)h[c++]=d;else if(e=j[d],e>4)h[c++]=65533,b+=e-1;else{for(d&=2===e?31:3===e?15:7;e>1&&b<g;)d=d<<6|63&a[b++],e--;e>1?h[c++]=65533:d<65536?h[c++]=d:(d-=65536,h[c++]=55296|d>>10&1023,h[c++]=56320|1023&d)}return h.length!==c&&(h.subarray?h=h.subarray(0,c):h.length=c),f.applyFromCharCode(h)};c.utf8encode=function(a){return g.nodebuffer?h.newBuffer(a,"utf-8"):l(a)},c.utf8decode=function(a){return g.nodebuffer?f.transformTo("nodebuffer",a).toString("utf-8"):(a=f.transformTo(g.uint8array?"uint8array":"array",a),n(a))},f.inherits(d,i),d.prototype.processChunk=function(a){var b=f.transformTo(g.uint8array?"uint8array":"array",a.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var d=b;b=new Uint8Array(d.length+this.leftOver.length),b.set(this.leftOver,0),b.set(d,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var e=m(b),h=b;e!==b.length&&(g.uint8array?(h=b.subarray(0,e),this.leftOver=b.subarray(e,b.length)):(h=b.slice(0,e),this.leftOver=b.slice(e,b.length))),this.push({data:c.utf8decode(h),meta:a.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=d,f.inherits(e,i),e.prototype.processChunk=function(a){this.push({data:c.utf8encode(a.data),meta:a.meta})},c.Utf8EncodeWorker=e},{"./nodejsUtils":12,"./stream/GenericWorker":25,"./support":27,"./utils":29}],29:[function(a,b,c){"use strict";function d(a){var b=null;return b=i.uint8array?new Uint8Array(a.length):new Array(a.length),f(a,b)}function e(a){return a}function f(a,b){for(var c=0;c<a.length;++c)b[c]=255&a.charCodeAt(c);return b}function g(a){var b=65536,d=c.getTypeOf(a),e=!0;if("uint8array"===d?e=n.applyCanBeUsed.uint8array:"nodebuffer"===d&&(e=n.applyCanBeUsed.nodebuffer),e)for(;b>1;)try{return n.stringifyByChunk(a,d,b)}catch(f){b=Math.floor(b/2)}return n.stringifyByChar(a)}function h(a,b){for(var c=0;c<a.length;c++)b[c]=a[c];return b}var i=a("./support"),j=a("./base64"),k=a("./nodejsUtils"),l=a("core-js/library/fn/set-immediate"),m=a("./external");c.newBlob=function(a,b){c.checkSupport("blob");try{return new Blob([a],{type:b})}catch(d){try{var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;return f.append(a),f.getBlob(b)}catch(d){throw new Error("Bug : can't construct the Blob.")}}};var n={stringifyByChunk:function(a,b,c){var d=[],e=0,f=a.length;if(f<=c)return String.fromCharCode.apply(null,a);for(;e<f;)"array"===b||"nodebuffer"===b?d.push(String.fromCharCode.apply(null,a.slice(e,Math.min(e+c,f)))):d.push(String.fromCharCode.apply(null,a.subarray(e,Math.min(e+c,f)))),e+=c;return d.join("")},stringifyByChar:function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(a){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,k.newBuffer(1)).length}catch(a){return!1}}()}};c.applyFromCharCode=g;var o={};o.string={string:e,array:function(a){return f(a,new Array(a.length))},arraybuffer:function(a){return o.string.uint8array(a).buffer},uint8array:function(a){return f(a,new Uint8Array(a.length));
},nodebuffer:function(a){return f(a,k.newBuffer(a.length))}},o.array={string:g,array:e,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(a)}},o.arraybuffer={string:function(a){return g(new Uint8Array(a))},array:function(a){return h(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:e,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return k.newBuffer(new Uint8Array(a))}},o.uint8array={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:e,nodebuffer:function(a){return k.newBuffer(a)}},o.nodebuffer={string:g,array:function(a){return h(a,new Array(a.length))},arraybuffer:function(a){return o.nodebuffer.uint8array(a).buffer},uint8array:function(a){return h(a,new Uint8Array(a.length))},nodebuffer:e},c.transformTo=function(a,b){if(b||(b=""),!a)return b;c.checkSupport(a);var d=c.getTypeOf(b),e=o[d][a](b);return e},c.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":i.nodebuffer&&k.isBuffer(a)?"nodebuffer":i.uint8array&&a instanceof Uint8Array?"uint8array":i.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},c.checkSupport=function(a){var b=i[a.toLowerCase()];if(!b)throw new Error(a+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(a){var b,c,d="";for(c=0;c<(a||"").length;c++)b=a.charCodeAt(c),d+="\\x"+(b<16?"0":"")+b.toString(16).toUpperCase();return d},c.delay=function(a,b,c){l(function(){a.apply(c||null,b||[])})},c.inherits=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c},c.extend=function(){var a,b,c={};for(a=0;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&"undefined"==typeof c[b]&&(c[b]=arguments[a][b]);return c},c.prepareContent=function(a,b,e,f,g){var h=m.Promise.resolve(b).then(function(a){return i.blob&&a instanceof Blob&&"undefined"!=typeof FileReader?new m.Promise(function(b,c){var d=new FileReader;d.onload=function(a){b(a.target.result)},d.onerror=function(a){c(a.target.error)},d.readAsArrayBuffer(a)}):a});return h.then(function(b){var h=c.getTypeOf(b);return h?("arraybuffer"===h?b=c.transformTo("uint8array",b):"string"===h&&(g?b=j.decode(b):e&&f!==!0&&(b=d(b))),b):m.Promise.reject(new Error("The data of '"+a+"' is in an unsupported format !"))})}},{"./base64":1,"./external":6,"./nodejsUtils":12,"./support":27,"core-js/library/fn/set-immediate":34}],30:[function(a,b,c){"use strict";function d(a){this.files=[],this.loadOptions=a}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./signature"),h=a("./zipEntry"),i=(a("./utf8"),a("./support"));d.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+f.pretty(b)+", expected "+f.pretty(a)+")")}},isSignature:function(a,b){var c=this.reader.index;this.reader.setIndex(a);var d=this.reader.readString(4),e=d===b;return this.reader.setIndex(c),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),b=i.uint8array?"uint8array":"array",c=f.transformTo(b,a);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a,b,c,d=this.zip64EndOfCentralSize-44,e=0;e<d;)a=this.reader.readInt(2),b=this.reader.readInt(4),c=this.reader.readData(b),this.zip64ExtensibleData[a]={id:a,length:b,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,b;for(a=0;a<this.files.length;a++)b=this.files[a],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(g.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);)a=new h({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END);if(a<0){var b=!this.isSignature(0,g.LOCAL_FILE_HEADER);throw b?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}this.reader.setIndex(a);var c=a;if(this.checkSignature(g.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),a<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,g.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var e=c-d;if(e>0)this.isSignature(c,g.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(a){this.reader=e(a)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},b.exports=d},{"./reader/readerFor":19,"./signature":20,"./support":27,"./utf8":28,"./utils":29,"./zipEntry":31}],31:[function(a,b,c){"use strict";function d(a,b){this.options=a,this.loadOptions=b}var e=a("./reader/readerFor"),f=a("./utils"),g=a("./compressedObject"),h=a("./crc32"),i=a("./utf8"),j=a("./compressions"),k=a("./support"),l=0,m=3,n=function(a){for(var b in j)if(j.hasOwnProperty(b)&&j[b].magic===a)return j[b];return null};d.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(a){var b,c;if(a.skip(22),this.fileNameLength=a.readInt(2),c=a.readInt(2),this.fileName=a.readData(this.fileNameLength),a.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(b=n(this.compressionMethod),null===b)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new g(this.compressedSize,this.uncompressedSize,this.crc32,b,a.readData(this.compressedSize))},readCentralPart:function(a){this.versionMadeBy=a.readInt(2),a.skip(2),this.bitFlag=a.readInt(2),this.compressionMethod=a.readString(2),this.date=a.readDate(),this.crc32=a.readInt(4),this.compressedSize=a.readInt(4),this.uncompressedSize=a.readInt(4);var b=a.readInt(2);if(this.extraFieldsLength=a.readInt(2),this.fileCommentLength=a.readInt(2),this.diskNumberStart=a.readInt(2),this.internalFileAttributes=a.readInt(2),this.externalFileAttributes=a.readInt(4),this.localHeaderOffset=a.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");a.skip(b),this.readExtraFields(a),this.parseZIP64ExtraField(a),this.fileComment=a.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var a=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),a===l&&(this.dosPermissions=63&this.externalFileAttributes),a===m&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(a){if(this.extraFields[1]){var b=e(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(a){var b,c,d,e=a.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});a.index<e;)b=a.readInt(2),c=a.readInt(2),d=a.readData(c),this.extraFields[b]={id:b,length:c,value:d}},handleUTF8:function(){var a=k.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(null!==b)this.fileNameStr=b;else{var c=f.transformTo(a,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var d=this.findExtraFieldUnicodeComment();if(null!==d)this.fileCommentStr=d;else{var e=f.transformTo(a,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(e)}}},findExtraFieldUnicodePath:function(){var a=this.extraFields[28789];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileName)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null},findExtraFieldUnicodeComment:function(){var a=this.extraFields[25461];if(a){var b=e(a.value);return 1!==b.readInt(1)?null:h(this.fileComment)!==b.readInt(4)?null:i.utf8decode(b.readData(a.length-5))}return null}},b.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":19,"./support":27,"./utf8":28,"./utils":29}],32:[function(a,b,c){"use strict";var d=a("./stream/StreamHelper"),e=a("./stream/DataWorker"),f=a("./utf8"),g=a("./compressedObject"),h=a("./stream/GenericWorker"),i=function(a,b,c){this.name=a,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=b,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};i.prototype={internalStream:function(a){var b=a.toLowerCase(),c="string"===b||"text"===b;"binarystring"!==b&&"text"!==b||(b="string");var e=this._decompressWorker(),g=!this._dataBinary;return g&&!c&&(e=e.pipe(new f.Utf8EncodeWorker)),!g&&c&&(e=e.pipe(new f.Utf8DecodeWorker)),new d(e,b,"")},async:function(a,b){return this.internalStream(a).accumulate(b)},nodeStream:function(a,b){return this.internalStream(a||"nodebuffer").toNodejsStream(b)},_compressWorker:function(a,b){if(this._data instanceof g&&this._data.compression.magic===a.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new f.Utf8EncodeWorker)),g.createWorkerFrom(c,a,b)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof h?this._data:new e(this._data)}};for(var j=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],k=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<j.length;l++)i.prototype[j[l]]=k;b.exports=i},{"./compressedObject":2,"./stream/DataWorker":24,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28}],33:[function(a,b,c){},{}],34:[function(a,b,c){a("../modules/web.immediate"),b.exports=a("../modules/_core").setImmediate},{"../modules/_core":38,"../modules/web.immediate":54}],35:[function(a,b,c){b.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},{}],36:[function(a,b,c){var d=a("./_is-object");b.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},{"./_is-object":49}],37:[function(a,b,c){var d={}.toString;b.exports=function(a){return d.call(a).slice(8,-1)}},{}],38:[function(a,b,c){var d=b.exports={version:"2.3.0"};"number"==typeof __e&&(__e=d)},{}],39:[function(a,b,c){var d=a("./_a-function");b.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./_a-function":35}],40:[function(a,b,c){b.exports=!a("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":43}],41:[function(a,b,c){var d=a("./_is-object"),e=a("./_global").document,f=d(e)&&d(e.createElement);b.exports=function(a){return f?e.createElement(a):{}}},{"./_global":44,"./_is-object":49}],42:[function(a,b,c){var d=a("./_global"),e=a("./_core"),f=a("./_ctx"),g=a("./_hide"),h="prototype",i=function(a,b,c){var j,k,l,m=a&i.F,n=a&i.G,o=a&i.S,p=a&i.P,q=a&i.B,r=a&i.W,s=n?e:e[b]||(e[b]={}),t=s[h],u=n?d:o?d[b]:(d[b]||{})[h];n&&(c=b);for(j in c)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:c[j],s[j]=n&&"function"!=typeof u[j]?c[j]:q&&k?f(l,d):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[h]=a[h],b}(l):p&&"function"==typeof l?f(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&i.R&&t&&!t[j]&&g(t,j,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,b.exports=i},{"./_core":38,"./_ctx":39,"./_global":44,"./_hide":45}],43:[function(a,b,c){b.exports=function(a){try{return!!a()}catch(b){return!0}}},{}],44:[function(a,b,c){var d=b.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},{}],45:[function(a,b,c){var d=a("./_object-dp"),e=a("./_property-desc");b.exports=a("./_descriptors")?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},{"./_descriptors":40,"./_object-dp":50,"./_property-desc":51}],46:[function(a,b,c){b.exports=a("./_global").document&&document.documentElement},{"./_global":44}],47:[function(a,b,c){b.exports=!a("./_descriptors")&&!a("./_fails")(function(){return 7!=Object.defineProperty(a("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":40,"./_dom-create":41,"./_fails":43}],48:[function(a,b,c){b.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},{}],49:[function(a,b,c){b.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},{}],50:[function(a,b,c){var d=a("./_an-object"),e=a("./_ie8-dom-define"),f=a("./_to-primitive"),g=Object.defineProperty;c.f=a("./_descriptors")?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(h){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},{"./_an-object":36,"./_descriptors":40,"./_ie8-dom-define":47,"./_to-primitive":53}],51:[function(a,b,c){b.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},{}],52:[function(a,b,c){var d,e,f,g=a("./_ctx"),h=a("./_invoke"),i=a("./_html"),j=a("./_dom-create"),k=a("./_global"),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=0,q={},r="onreadystatechange",s=function(){var a=+this;if(q.hasOwnProperty(a)){var b=q[a];delete q[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return q[++p]=function(){h("function"==typeof a?a:Function(a),b)},d(p),p},n=function(a){delete q[a]},"process"==a("./_cof")(l)?d=function(a){l.nextTick(g(s,a,1))}:o?(e=new o,f=e.port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d=r in j("script")?function(a){i.appendChild(j("script"))[r]=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),b.exports={set:m,clear:n}},{"./_cof":37,"./_ctx":39,"./_dom-create":41,"./_global":44,"./_html":46,"./_invoke":48}],53:[function(a,b,c){var d=a("./_is-object");b.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":49}],54:[function(a,b,c){var d=a("./_export"),e=a("./_task");d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},{"./_export":42,"./_task":52}],55:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(e){return p.reject(a,e)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(d){c.status="error",c.value=d}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a("immediate"),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{immediate:55}],57:[function(a,b,c){"use strict";var d=a("./lib/utils/common").assign,e=a("./lib/deflate"),f=a("./lib/inflate"),g=a("./lib/zlib/constants"),h={};d(h,e,f,g),b.exports=h},{"./lib/deflate":58,"./lib/inflate":59,"./lib/utils/common":60,"./lib/zlib/constants":63}],58:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=i.assign({level:s,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:t,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=h.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==p)throw new Error(k[c]);if(b.header&&h.deflateSetHeader(this.strm,b.header),b.dictionary){var e;if(e="string"==typeof b.dictionary?j.string2buf(b.dictionary):"[object ArrayBuffer]"===m.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,c=h.deflateSetDictionary(this.strm,e),c!==p)throw new Error(k[c]);this._dict_set=!0}}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}function g(a,b){return b=b||{},b.gzip=!0,e(a,b)}var h=a("./zlib/deflate"),i=a("./utils/common"),j=a("./utils/strings"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=Object.prototype.toString,n=0,o=4,p=0,q=1,r=2,s=-1,t=0,u=8;d.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?o:n,"string"==typeof a?e.input=j.string2buf(a):"[object ArrayBuffer]"===m.call(a)?e.input=new Uint8Array(a):e.input=a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new i.Buf8(f),e.next_out=0,e.avail_out=f),c=h.deflate(e,d),c!==q&&c!==p)return this.onEnd(c),this.ended=!0,!1;0!==e.avail_out&&(0!==e.avail_in||d!==o&&d!==r)||("string"===this.options.to?this.onData(j.buf2binstring(i.shrinkBuf(e.output,e.next_out))):this.onData(i.shrinkBuf(e.output,e.next_out)))}while((e.avail_in>0||0===e.avail_out)&&c!==q);return d===o?(c=h.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p):d!==r||(this.onEnd(p),e.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=d,c.deflate=e,c.deflateRaw=f,c.gzip=g},{"./utils/common":60,"./utils/strings":61,"./zlib/deflate":65,"./zlib/messages":70,"./zlib/zstream":72}],59:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=g.inflateInit2(this.strm,b.windowBits);if(c!==j.Z_OK)throw new Error(k[c]);this.header=new m,g.inflateGetHeader(this.strm,this.header)}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}var g=a("./zlib/inflate"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/constants"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=a("./zlib/gzheader"),n=Object.prototype.toString;d.prototype.push=function(a,b){var c,d,e,f,k,l,m=this.strm,o=this.options.chunkSize,p=this.options.dictionary,q=!1;if(this.ended)return!1;d=b===~~b?b:b===!0?j.Z_FINISH:j.Z_NO_FLUSH,"string"==typeof a?m.input=i.binstring2buf(a):"[object ArrayBuffer]"===n.call(a)?m.input=new Uint8Array(a):m.input=a,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new h.Buf8(o),m.next_out=0,m.avail_out=o),c=g.inflate(m,j.Z_NO_FLUSH),c===j.Z_NEED_DICT&&p&&(l="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===n.call(p)?new Uint8Array(p):p,c=g.inflateSetDictionary(this.strm,l)),c===j.Z_BUF_ERROR&&q===!0&&(c=j.Z_OK,q=!1),c!==j.Z_STREAM_END&&c!==j.Z_OK)return this.onEnd(c),this.ended=!0,!1;m.next_out&&(0!==m.avail_out&&c!==j.Z_STREAM_END&&(0!==m.avail_in||d!==j.Z_FINISH&&d!==j.Z_SYNC_FLUSH)||("string"===this.options.to?(e=i.utf8border(m.output,m.next_out),f=m.next_out-e,k=i.buf2string(m.output,e),m.next_out=f,m.avail_out=o-f,f&&h.arraySet(m.output,m.output,e,f,0),this.onData(k)):this.onData(h.shrinkBuf(m.output,m.next_out)))),0===m.avail_in&&0===m.avail_out&&(q=!0)}while((m.avail_in>0||0===m.avail_out)&&c!==j.Z_STREAM_END);return c===j.Z_STREAM_END&&(d=j.Z_FINISH),d===j.Z_FINISH?(c=g.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===j.Z_OK):d!==j.Z_SYNC_FLUSH||(this.onEnd(j.Z_OK),m.avail_out=0,!0)},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===j.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=d,c.inflate=e,c.inflateRaw=f,c.ungzip=e},{"./utils/common":60,"./utils/strings":61,"./zlib/constants":63,"./zlib/gzheader":66,"./zlib/inflate":68,"./zlib/messages":70,"./zlib/zstream":72}],60:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;b<c;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;b<c;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],61:[function(a,b,c){"use strict";function d(a,b){if(b<65537&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;j<256;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;f<h;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=c<128?1:c<2048?2:c<65536?3:4;for(b=new e.Buf8(i),g=0,f=0;g<i;f++)c=a.charCodeAt(f),55296===(64512&c)&&f+1<h&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),c<128?b[g++]=c:c<2048?(b[g++]=192|c>>>6,b[g++]=128|63&c):c<65536?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;c<h;)if(f=a[c++],f<128)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&c<h;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:f<65536?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return c<0?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":60}],62:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=d},{}],63:[function(a,b,c){"use strict";b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],64:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=f,g=d+c;a^=-1;for(var h=d;h<g;h++)a=a>>>8^e[255&(a^b[h])];return a^-1}var f=d();b.exports=e},{}],65:[function(a,b,c){"use strict";function d(a,b){return a.msg=I[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(E.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function h(a,b){F._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,E.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=G(a.adler,b,e,c):2===a.state.wrap&&(a.adler=H(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,
e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-la?a.strstart-(a.w_size-la):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ka,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&f<m);if(d=ka-(m-f),f=m-ka,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-la)){E.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=ja)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+ja-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<ja)););}while(a.lookahead<la&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===J)return ua;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return ua;if(a.strstart-a.block_start>=a.w_size-la&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?ua:ua}function o(a,b){for(var c,d;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c)),a.match_length>=ja)if(d=F._tr_tally(a,a.strstart-a.match_start,a.match_length-ja),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=ja){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function p(a,b){for(var c,d,e;;){if(a.lookahead<la){if(m(a),a.lookahead<la&&b===J)return ua;if(0===a.lookahead)break}if(c=0,a.lookahead>=ja&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=ja-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-la&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===U||a.match_length===ja&&a.strstart-a.match_start>4096)&&(a.match_length=ja-1)),a.prev_length>=ja&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-ja,d=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-ja),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+ja-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=ja-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return ua}else if(a.match_available){if(d=F._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return ua}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<ja-1?a.strstart:ja-1,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ka){if(m(a),a.lookahead<=ka&&b===J)return ua;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=ja&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ka;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<f);a.match_length=ka-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=ja?(c=F._tr_tally(a,1,a.match_length-ja),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===J)return ua;break}if(a.match_length=0,c=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return ua}return a.insert=0,b===M?(h(a,!0),0===a.strm.avail_out?wa:xa):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?ua:va}function s(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function t(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=D[a.level].max_lazy,a.good_match=D[a.level].good_length,a.nice_match=D[a.level].nice_length,a.max_chain_length=D[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=ja-1,a.match_available=0,a.ins_h=0}function u(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*ha),this.dyn_dtree=new E.Buf16(2*(2*fa+1)),this.bl_tree=new E.Buf16(2*(2*ga+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ia+1),this.heap=new E.Buf16(2*ea+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*ea+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=Z,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?na:sa,a.adler=2===b.wrap?0:1,b.last_flush=J,F._tr_init(b),O):d(a,Q)}function w(a){var b=v(a);return b===O&&t(a.state),b}function x(a,b){return a&&a.state?2!==a.state.wrap?Q:(a.state.gzhead=b,O):Q}function y(a,b,c,e,f,g){if(!a)return Q;var h=1;if(b===T&&(b=6),e<0?(h=0,e=-e):e>15&&(h=2,e-=16),f<1||f>_||c!==$||e<8||e>15||b<0||b>9||g<0||g>X)return d(a,Q);8===e&&(e=9);var i=new u;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+ja-1)/ja),i.window=new E.Buf8(2*i.w_size),i.head=new E.Buf16(i.hash_size),i.prev=new E.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new E.Buf8(i.pending_buf_size),i.d_buf=1*i.lit_bufsize,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,w(a)}function z(a,b){return y(a,b,$,aa,ba,Y)}function A(a,b){var c,h,k,l;if(!a||!a.state||b>N||b<0)return a?d(a,Q):Q;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===ta&&b!==M)return d(a,0===a.avail_out?S:Q);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===na)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=H(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=oa):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=V||h.level<2?4:0),i(h,ya),h.status=sa);else{var m=$+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=V||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=ma),m+=31-m%31,h.status=sa,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===oa)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=pa)}else h.status=pa;if(h.status===pa)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=qa)}else h.status=qa;if(h.status===qa)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=H(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=ra)}else h.status=ra;if(h.status===ra&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=sa)):h.status=sa),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,O}else if(0===a.avail_in&&e(b)<=e(c)&&b!==M)return d(a,S);if(h.status===ta&&0!==a.avail_in)return d(a,S);if(0!==a.avail_in||0!==h.lookahead||b!==J&&h.status!==ta){var o=h.strategy===V?r(h,b):h.strategy===W?q(h,b):D[h.level].func(h,b);if(o!==wa&&o!==xa||(h.status=ta),o===ua||o===wa)return 0===a.avail_out&&(h.last_flush=-1),O;if(o===va&&(b===K?F._tr_align(h):b!==N&&(F._tr_stored_block(h,0,0,!1),b===L&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,O}return b!==M?O:h.wrap<=0?P:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?O:P)}function B(a){var b;return a&&a.state?(b=a.state.status,b!==na&&b!==oa&&b!==pa&&b!==qa&&b!==ra&&b!==sa&&b!==ta?d(a,Q):(a.state=null,b===sa?d(a,R):O)):Q}function C(a,b){var c,d,e,g,h,i,j,k,l=b.length;if(!a||!a.state)return Q;if(c=a.state,g=c.wrap,2===g||1===g&&c.status!==na||c.lookahead)return Q;for(1===g&&(a.adler=G(a.adler,b,l,0)),c.wrap=0,l>=c.w_size&&(0===g&&(f(c.head),c.strstart=0,c.block_start=0,c.insert=0),k=new E.Buf8(c.w_size),E.arraySet(k,b,l-c.w_size,c.w_size,0),b=k,l=c.w_size),h=a.avail_in,i=a.next_in,j=a.input,a.avail_in=l,a.next_in=0,a.input=b,m(c);c.lookahead>=ja;){d=c.strstart,e=c.lookahead-(ja-1);do c.ins_h=(c.ins_h<<c.hash_shift^c.window[d+ja-1])&c.hash_mask,c.prev[d&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=d,d++;while(--e);c.strstart=d,c.lookahead=ja-1,m(c)}return c.strstart+=c.lookahead,c.block_start=c.strstart,c.insert=c.lookahead,c.lookahead=0,c.match_length=c.prev_length=ja-1,c.match_available=0,a.next_in=i,a.input=j,a.avail_in=h,c.wrap=g,O}var D,E=a("../utils/common"),F=a("./trees"),G=a("./adler32"),H=a("./crc32"),I=a("./messages"),J=0,K=1,L=3,M=4,N=5,O=0,P=1,Q=-2,R=-3,S=-5,T=-1,U=1,V=2,W=3,X=4,Y=0,Z=2,$=8,_=9,aa=15,ba=8,ca=29,da=256,ea=da+1+ca,fa=30,ga=19,ha=2*ea+1,ia=15,ja=3,ka=258,la=ka+ja+1,ma=32,na=42,oa=69,pa=73,qa=91,ra=103,sa=113,ta=666,ua=1,va=2,wa=3,xa=4,ya=3;D=[new s(0,0,0,0,n),new s(4,4,8,4,o),new s(4,5,16,8,o),new s(4,6,32,32,o),new s(4,4,16,16,p),new s(8,16,32,32,p),new s(8,16,128,128,p),new s(8,32,128,256,p),new s(32,128,258,1024,p),new s(32,258,258,4096,p)],c.deflateInit=z,c.deflateInit2=y,c.deflateReset=w,c.deflateResetKeep=v,c.deflateSetHeader=x,c.deflate=A,c.deflateEnd=B,c.deflateSetDictionary=C,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":60,"./adler32":62,"./crc32":64,"./messages":70,"./trees":71}],66:[function(a,b,c){"use strict";function d(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=d},{}],67:[function(a,b,c){"use strict";var d=30,e=12;b.exports=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;c=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=c.dmax,l=c.wsize,m=c.whave,n=c.wnext,o=c.window,p=c.hold,q=c.bits,r=c.lencode,s=c.distcode,t=(1<<c.lenbits)-1,u=(1<<c.distbits)-1;a:do{q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){c.mode=e;break a}a.msg="invalid literal/length code",c.mode=d;break a}x=65535&v,w&=15,w&&(q<w&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),q<15&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",c.mode=d;break a}if(y=65535&v,w&=15,q<w&&(p+=B[f++]<<q,q+=8,q<w&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",c.mode=d;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&c.sane){a.msg="invalid distance too far back",c.mode=d;break a}if(z=0,A=o,0===n){if(z+=l-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(n<w){if(z+=l+n-w,w-=n,w<x){x-=w;do C[h++]=o[z++];while(--w);if(z=0,n<x){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,w<x){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(f<g&&h<j);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=f<g?5+(g-f):5-(f-g),a.avail_out=h<j?257+(j-h):257-(h-j),c.hold=p,c.bits=q}},{}],68:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=L,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new s.Buf32(pa),b.distcode=b.distdyn=new s.Buf32(qa),b.sane=1,b.back=-1,D):G}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):G}function h(a,b){var c,d;return a&&a.state?(d=a.state,b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15)),b&&(b<8||b>15)?G:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):G}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==D&&(a.state=null),c):G}function j(a){return i(a,sa)}function k(a){if(ta){var b;for(q=new s.Buf32(512),r=new s.Buf32(32),b=0;b<144;)a.lens[b++]=8;for(;b<256;)a.lens[b++]=9;for(;b<280;)a.lens[b++]=7;for(;b<288;)a.lens[b++]=8;for(w(y,a.lens,0,288,q,0,a.work,{bits:9}),b=0;b<32;)a.lens[b++]=5;w(z,a.lens,0,32,r,0,a.work,{bits:5}),ta=!1}a.lencode=q,a.lenbits=9,a.distcode=r,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),d>=f.wsize?(s.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),s.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(s.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,r,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new s.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return G;c=a.state,c.mode===W&&(c.mode=X),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=D;a:for(;;)switch(c.mode){case L:if(0===c.wrap){c.mode=X;break}for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0),m=0,n=0,c.mode=M;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=ma;break}if((15&m)!==K){a.msg="unknown compression method",c.mode=ma;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=ma;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?U:W,m=0,n=0;break;case M:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==K){a.msg="unknown compression method",c.mode=ma;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=ma;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=N;case N:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=u(c.check,Ba,4,0)),m=0,n=0,c.mode=O;case O:for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=P;case P:if(1024&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=Q;case Q:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),s.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=R;case R:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=S;case S:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&q<i);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=T;case T:if(512&c.flags){for(;n<16;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=ma;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=W;break;case U:for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=V;case V:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,F;a.adler=c.check=1,c.mode=W;case W:if(b===B||b===C)break a;case X:if(c.last){m>>>=7&n,n-=7&n,c.mode=ja;break}for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=Y;break;case 1:if(k(c),c.mode=ca,b===C){m>>>=2,n-=2;break a}break;case 2:c.mode=_;break;case 3:a.msg="invalid block type",c.mode=ma}m>>>=2,n-=2;break;case Y:for(m>>>=7&n,n-=7&n;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=ma;break}if(c.length=65535&m,m=0,n=0,c.mode=Z,b===C)break a;case Z:c.mode=$;case $:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;s.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=W;break;case _:for(;n<14;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=ma;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.ncode;){for(;n<3;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=w(x,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=ma;break}c.have=0,c.mode=ba;case ba:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(sa<16)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=ma;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=ma;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===ma)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=ma;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=w(y,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=ma;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=w(z,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=ma;break}if(c.mode=ca,b===C)break a;case ca:c.mode=da;case da:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,v(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===W&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ia;break}if(32&ra){c.back=-1,c.mode=W;break}if(64&ra){a.msg="invalid literal/length code",c.mode=ma;break}c.extra=15&ra,c.mode=ea;case ea:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=fa;case fa:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(ta+qa<=n);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=ma;break}c.offset=sa,c.extra=15&ra,c.mode=ga;case ga:if(c.extra){for(za=c.extra;n<za;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=ma;break}c.mode=ha;case ha:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=ma;break}q>c.wnext?(q-=c.wnext,r=c.wsize-q):r=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,r=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[r++];while(--q);0===c.length&&(c.mode=da);break;case ia:if(0===j)break a;f[h++]=c.length,j--,c.mode=da;break;case ja:if(c.wrap){for(;n<32;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?u(c.check,f,p,h-p):t(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=ma;break}m=0,n=0}c.mode=ka;case ka:if(c.wrap&&c.flags){for(;n<32;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=ma;break}m=0,n=0}c.mode=la;case la:xa=E;break a;case ma:xa=H;break a;case na:return I;case oa:default:return G}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<ma&&(c.mode<ja||b!==A))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=na,I):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?u(c.check,f,p,a.next_out-p):t(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===W?128:0)+(c.mode===ca||c.mode===Z?256:0),(0===o&&0===p||b===A)&&xa===D&&(xa=J),xa)}function n(a){if(!a||!a.state)return G;var b=a.state;return b.window&&(b.window=null),a.state=null,D}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?G:(c.head=b,b.done=!1,D)):G}function p(a,b){var c,d,e,f=b.length;return a&&a.state?(c=a.state,0!==c.wrap&&c.mode!==V?G:c.mode===V&&(d=1,d=t(d,b,f,0),d!==c.check)?H:(e=l(a,b,f,f))?(c.mode=na,I):(c.havedict=1,D)):G}var q,r,s=a("../utils/common"),t=a("./adler32"),u=a("./crc32"),v=a("./inffast"),w=a("./inftrees"),x=0,y=1,z=2,A=4,B=5,C=6,D=0,E=1,F=2,G=-2,H=-3,I=-4,J=-5,K=8,L=1,M=2,N=3,O=4,P=5,Q=6,R=7,S=8,T=9,U=10,V=11,W=12,X=13,Y=14,Z=15,$=16,_=17,aa=18,ba=19,ca=20,da=21,ea=22,fa=23,ga=24,ha=25,ia=26,ja=27,ka=28,la=29,ma=30,na=31,oa=32,pa=852,qa=592,ra=15,sa=ra,ta=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateSetDictionary=p,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":60,"./adler32":62,"./crc32":64,"./inffast":67,"./inftrees":69}],69:[function(a,b,c){"use strict";var d=a("../utils/common"),e=15,f=852,g=592,h=0,i=1,j=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,c,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new d.Buf16(e+1),Q=new d.Buf16(e+1),R=null,S=0;for(D=0;D<=e;D++)P[D]=0;for(E=0;E<o;E++)P[b[c+E]]++;for(H=C,G=e;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;F<G&&0===P[F];F++);for(H<F&&(H=F),K=1,D=1;D<=e;D++)if(K<<=1,K-=P[D],K<0)return-1;if(K>0&&(a===h||1!==G))return-1;for(Q[1]=0,D=1;D<e;D++)Q[D+1]=Q[D]+P[D];for(E=0;E<o;E++)0!==b[c+E]&&(r[Q[b[c+E]]++]=E);if(a===h?(N=R=r,y=19):a===i?(N=k,O-=257,R=l,S-=257,y=256):(N=m,R=n,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===i&&L>f||a===j&&L>g)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[c+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;I+J<G&&(K-=P[I+J],!(K<=0));)I++,K<<=1;if(L+=1<<I,a===i&&L>f||a===j&&L>g)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":60}],70:[function(a,b,c){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],71:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}function f(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function g(a){return a<256?ia[a]:ia[256+(a>>>7)]}function h(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function i(a,b,c){a.bi_valid>X-c?(a.bi_buf|=b<<a.bi_valid&65535,h(a,a.bi_buf),a.bi_buf=b>>X-a.bi_valid,a.bi_valid+=c-X):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function j(a,b,c){i(a,c[2*b],c[2*b+1])}function k(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function l(a){16===a.bi_valid?(h(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function m(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;f<=W;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;c<V;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function n(a,b,c){var d,e,f=new Array(W+1),g=0;for(d=1;d<=W;d++)f[d]=g=g+c[d-1]<<1;for(e=0;e<=b;e++){var h=a[2*e+1];0!==h&&(a[2*e]=k(f[h]++,h))}}function o(){var a,b,c,d,f,g=new Array(W+1);for(c=0,d=0;d<Q-1;d++)for(ka[d]=c,a=0;a<1<<ba[d];a++)ja[c++]=d;for(ja[c-1]=d,f=0,d=0;d<16;d++)for(la[d]=f,a=0;a<1<<ca[d];a++)ia[f++]=d;for(f>>=7;d<T;d++)for(la[d]=f<<7,a=0;a<1<<ca[d]-7;a++)ia[256+f++]=d;for(b=0;b<=W;b++)g[b]=0;for(a=0;a<=143;)ga[2*a+1]=8,a++,g[8]++;for(;a<=255;)ga[2*a+1]=9,a++,g[9]++;for(;a<=279;)ga[2*a+1]=7,a++,g[7]++;for(;a<=287;)ga[2*a+1]=8,a++,g[8]++;for(n(ga,S+1,g),a=0;a<T;a++)ha[2*a+1]=5,ha[2*a]=k(a,5);ma=new e(ga,ba,R+1,S,W),na=new e(ha,ca,0,T,W),oa=new e(new Array(0),da,0,U,Y)}function p(a){var b;for(b=0;b<S;b++)a.dyn_ltree[2*b]=0;for(b=0;b<T;b++)a.dyn_dtree[2*b]=0;for(b=0;b<U;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*Z]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function q(a){a.bi_valid>8?h(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function r(a,b,c,d){q(a),d&&(h(a,c),h(a,~c)),G.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function s(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c];
}function t(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&s(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!s(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function u(a,b,c){var d,e,f,h,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],e=a.pending_buf[a.l_buf+k],k++,0===d?j(a,e,b):(f=ja[e],j(a,f+R+1,b),h=ba[f],0!==h&&(e-=ka[f],i(a,e,h)),d--,f=g(d),j(a,f,c),h=ca[f],0!==h&&(d-=la[f],i(a,d,h)));while(k<a.last_lit);j(a,Z,b)}function v(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=V,c=0;c<i;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=j<2?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)t(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],t(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,t(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],m(a,b),n(f,j,a.bl_count)}function w(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;d<=c;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(h<j?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*$]++):h<=10?a.bl_tree[2*_]++:a.bl_tree[2*aa]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function x(a,b,c){var d,e,f=-1,g=b[1],h=0,k=7,l=4;for(0===g&&(k=138,l=3),d=0;d<=c;d++)if(e=g,g=b[2*(d+1)+1],!(++h<k&&e===g)){if(h<l){do j(a,e,a.bl_tree);while(0!==--h)}else 0!==e?(e!==f&&(j(a,e,a.bl_tree),h--),j(a,$,a.bl_tree),i(a,h-3,2)):h<=10?(j(a,_,a.bl_tree),i(a,h-3,3)):(j(a,aa,a.bl_tree),i(a,h-11,7));h=0,f=e,0===g?(k=138,l=3):e===g?(k=6,l=3):(k=7,l=4)}}function y(a){var b;for(w(a,a.dyn_ltree,a.l_desc.max_code),w(a,a.dyn_dtree,a.d_desc.max_code),v(a,a.bl_desc),b=U-1;b>=3&&0===a.bl_tree[2*ea[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function z(a,b,c,d){var e;for(i(a,b-257,5),i(a,c-1,5),i(a,d-4,4),e=0;e<d;e++)i(a,a.bl_tree[2*ea[e]+1],3);x(a,a.dyn_ltree,b-1),x(a,a.dyn_dtree,c-1)}function A(a){var b,c=4093624447;for(b=0;b<=31;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return I;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return J;for(b=32;b<R;b++)if(0!==a.dyn_ltree[2*b])return J;return I}function B(a){pa||(o(),pa=!0),a.l_desc=new f(a.dyn_ltree,ma),a.d_desc=new f(a.dyn_dtree,na),a.bl_desc=new f(a.bl_tree,oa),a.bi_buf=0,a.bi_valid=0,p(a)}function C(a,b,c,d){i(a,(L<<1)+(d?1:0),3),r(a,b,c,!0)}function D(a){i(a,M<<1,3),j(a,Z,ga),l(a)}function E(a,b,c,d){var e,f,g=0;a.level>0?(a.strm.data_type===K&&(a.strm.data_type=A(a)),v(a,a.l_desc),v(a,a.d_desc),g=y(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,f<=e&&(e=f)):e=f=c+5,c+4<=e&&b!==-1?C(a,b,c,d):a.strategy===H||f===e?(i(a,(M<<1)+(d?1:0),3),u(a,ga,ha)):(i(a,(N<<1)+(d?1:0),3),z(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),u(a,a.dyn_ltree,a.dyn_dtree)),p(a),d&&q(a)}function F(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(ja[c]+R+1)]++,a.dyn_dtree[2*g(b)]++),a.last_lit===a.lit_bufsize-1}var G=a("../utils/common"),H=4,I=0,J=1,K=2,L=0,M=1,N=2,O=3,P=258,Q=29,R=256,S=R+1+Q,T=30,U=19,V=2*S+1,W=15,X=16,Y=7,Z=256,$=16,_=17,aa=18,ba=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ca=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],da=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa=512,ga=new Array(2*(S+2));d(ga);var ha=new Array(2*T);d(ha);var ia=new Array(fa);d(ia);var ja=new Array(P-O+1);d(ja);var ka=new Array(Q);d(ka);var la=new Array(T);d(la);var ma,na,oa,pa=!1;c._tr_init=B,c._tr_stored_block=C,c._tr_flush_block=E,c._tr_tally=F,c._tr_align=D},{"../utils/common":60}],72:[function(a,b,c){"use strict";function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=d},{}]},{},[10])(10)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvZXh0L2pzemlwLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuXHJcbkpTWmlwIHYzLjEuMSAtIEEgSmF2YXNjcmlwdCBjbGFzcyBmb3IgZ2VuZXJhdGluZyBhbmQgcmVhZGluZyB6aXAgZmlsZXNcclxuPGh0dHA6Ly9zdHVhcnRrLmNvbS9qc3ppcD5cclxuXHJcbihjKSAyMDA5LTIwMTYgU3R1YXJ0IEtuaWdodGxleSA8c3R1YXJ0IFthdF0gc3R1YXJ0ay5jb20+XHJcbkR1YWwgbGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIG9yIEdQTHYzLiBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9TdHVrL2pzemlwL21hc3Rlci9MSUNFTlNFLm1hcmtkb3duLlxyXG5cclxuSlNaaXAgdXNlcyB0aGUgbGlicmFyeSBwYWtvIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSA6XHJcbmh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrby9ibG9iL21hc3Rlci9MSUNFTlNFXHJcbiovXHJcbiFmdW5jdGlvbihhKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1hKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGEpO2Vsc2V7dmFyIGI7Yj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsYi5KU1ppcD1hKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBhKGIsYyxkKXtmdW5jdGlvbiBlKGcsaCl7aWYoIWNbZ10pe2lmKCFiW2ddKXt2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFoJiZpKXJldHVybiBpKGcsITApO2lmKGYpcmV0dXJuIGYoZywhMCk7dmFyIGo9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitnK1wiJ1wiKTt0aHJvdyBqLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsan12YXIgaz1jW2ddPXtleHBvcnRzOnt9fTtiW2ddWzBdLmNhbGwoay5leHBvcnRzLGZ1bmN0aW9uKGEpe3ZhciBjPWJbZ11bMV1bYV07cmV0dXJuIGUoYz9jOmEpfSxrLGsuZXhwb3J0cyxhLGIsYyxkKX1yZXR1cm4gY1tnXS5leHBvcnRzfWZvcih2YXIgZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGc9MDtnPGQubGVuZ3RoO2crKyllKGRbZ10pO3JldHVybiBlfSh7MTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuL3V0aWxzXCIpLGU9YShcIi4vc3VwcG9ydFwiKSxmPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIjtjLmVuY29kZT1mdW5jdGlvbihhKXtmb3IodmFyIGIsYyxlLGcsaCxpLGosaz1bXSxsPTAsbT1hLmxlbmd0aCxuPW0sbz1cInN0cmluZ1wiIT09ZC5nZXRUeXBlT2YoYSk7bDxhLmxlbmd0aDspbj1tLWwsbz8oYj1hW2wrK10sYz1sPG0/YVtsKytdOjAsZT1sPG0/YVtsKytdOjApOihiPWEuY2hhckNvZGVBdChsKyspLGM9bDxtP2EuY2hhckNvZGVBdChsKyspOjAsZT1sPG0/YS5jaGFyQ29kZUF0KGwrKyk6MCksZz1iPj4yLGg9KDMmYik8PDR8Yz4+NCxpPW4+MT8oMTUmYyk8PDJ8ZT4+Njo2NCxqPW4+Mj82MyZlOjY0LGsucHVzaChmLmNoYXJBdChnKStmLmNoYXJBdChoKStmLmNoYXJBdChpKStmLmNoYXJBdChqKSk7cmV0dXJuIGsuam9pbihcIlwiKX0sYy5kZWNvZGU9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGcsaCxpLGosaz0wLGw9MCxtPVwiZGF0YTpcIjtpZihhLnN1YnN0cihtLmxlbmd0aCk9PT1tKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYmFzZTY0IGlucHV0LCBpdCBsb29rcyBsaWtlIGEgZGF0YSB1cmwuXCIpO2E9YS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL1xcPV0vZyxcIlwiKTt2YXIgbj0zKmEubGVuZ3RoLzQ7aWYoYS5jaGFyQXQoYS5sZW5ndGgtMSk9PT1mLmNoYXJBdCg2NCkmJm4tLSxhLmNoYXJBdChhLmxlbmd0aC0yKT09PWYuY2hhckF0KDY0KSYmbi0tLG4lMSE9PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBiYXNlNjQgaW5wdXQsIGJhZCBjb250ZW50IGxlbmd0aC5cIik7dmFyIG87Zm9yKG89ZS51aW50OGFycmF5P25ldyBVaW50OEFycmF5KDB8bik6bmV3IEFycmF5KDB8bik7azxhLmxlbmd0aDspZz1mLmluZGV4T2YoYS5jaGFyQXQoaysrKSksaD1mLmluZGV4T2YoYS5jaGFyQXQoaysrKSksaT1mLmluZGV4T2YoYS5jaGFyQXQoaysrKSksaj1mLmluZGV4T2YoYS5jaGFyQXQoaysrKSksYj1nPDwyfGg+PjQsYz0oMTUmaCk8PDR8aT4+MixkPSgzJmkpPDw2fGosb1tsKytdPWIsNjQhPT1pJiYob1tsKytdPWMpLDY0IT09aiYmKG9bbCsrXT1kKTtyZXR1cm4gb319LHtcIi4vc3VwcG9ydFwiOjI3LFwiLi91dGlsc1wiOjI5fV0sMjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiLGMsZCxlKXt0aGlzLmNvbXByZXNzZWRTaXplPWEsdGhpcy51bmNvbXByZXNzZWRTaXplPWIsdGhpcy5jcmMzMj1jLHRoaXMuY29tcHJlc3Npb249ZCx0aGlzLmNvbXByZXNzZWRDb250ZW50PWV9dmFyIGU9YShcIi4vZXh0ZXJuYWxcIiksZj1hKFwiLi9zdHJlYW0vRGF0YVdvcmtlclwiKSxnPWEoXCIuL3N0cmVhbS9EYXRhTGVuZ3RoUHJvYmVcIiksaD1hKFwiLi9zdHJlYW0vQ3JjMzJQcm9iZVwiKSxnPWEoXCIuL3N0cmVhbS9EYXRhTGVuZ3RoUHJvYmVcIik7ZC5wcm90b3R5cGU9e2dldENvbnRlbnRXb3JrZXI6ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZihlLlByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXByZXNzZWRDb250ZW50KSkucGlwZSh0aGlzLmNvbXByZXNzaW9uLnVuY29tcHJlc3NXb3JrZXIoKSkucGlwZShuZXcgZyhcImRhdGFfbGVuZ3RoXCIpKSxiPXRoaXM7cmV0dXJuIGEub24oXCJlbmRcIixmdW5jdGlvbigpe2lmKHRoaXMuc3RyZWFtSW5mby5kYXRhX2xlbmd0aCE9PWIudW5jb21wcmVzc2VkU2l6ZSl0aHJvdyBuZXcgRXJyb3IoXCJCdWcgOiB1bmNvbXByZXNzZWQgZGF0YSBzaXplIG1pc21hdGNoXCIpfSksYX0sZ2V0Q29tcHJlc3NlZFdvcmtlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgZihlLlByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXByZXNzZWRDb250ZW50KSkud2l0aFN0cmVhbUluZm8oXCJjb21wcmVzc2VkU2l6ZVwiLHRoaXMuY29tcHJlc3NlZFNpemUpLndpdGhTdHJlYW1JbmZvKFwidW5jb21wcmVzc2VkU2l6ZVwiLHRoaXMudW5jb21wcmVzc2VkU2l6ZSkud2l0aFN0cmVhbUluZm8oXCJjcmMzMlwiLHRoaXMuY3JjMzIpLndpdGhTdHJlYW1JbmZvKFwiY29tcHJlc3Npb25cIix0aGlzLmNvbXByZXNzaW9uKX19LGQuY3JlYXRlV29ya2VyRnJvbT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEucGlwZShuZXcgaCkucGlwZShuZXcgZyhcInVuY29tcHJlc3NlZFNpemVcIikpLnBpcGUoYi5jb21wcmVzc1dvcmtlcihjKSkucGlwZShuZXcgZyhcImNvbXByZXNzZWRTaXplXCIpKS53aXRoU3RyZWFtSW5mbyhcImNvbXByZXNzaW9uXCIsYil9LGIuZXhwb3J0cz1kfSx7XCIuL2V4dGVybmFsXCI6NixcIi4vc3RyZWFtL0NyYzMyUHJvYmVcIjoyMixcIi4vc3RyZWFtL0RhdGFMZW5ndGhQcm9iZVwiOjIzLFwiLi9zdHJlYW0vRGF0YVdvcmtlclwiOjI0fV0sMzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpO2MuU1RPUkU9e21hZ2ljOlwiXFwwXFwwXCIsY29tcHJlc3NXb3JrZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKFwiU1RPUkUgY29tcHJlc3Npb25cIil9LHVuY29tcHJlc3NXb3JrZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGQoXCJTVE9SRSBkZWNvbXByZXNzaW9uXCIpfX0sYy5ERUZMQVRFPWEoXCIuL2ZsYXRlXCIpfSx7XCIuL2ZsYXRlXCI6NyxcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIjoyNX1dLDQ6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7Zm9yKHZhciBhLGI9W10sYz0wO2M8MjU2O2MrKyl7YT1jO2Zvcih2YXIgZD0wO2Q8ODtkKyspYT0xJmE/Mzk4ODI5MjM4NF5hPj4+MTphPj4+MTtiW2NdPWF9cmV0dXJuIGJ9ZnVuY3Rpb24gZShhLGIsYyxkKXt2YXIgZT1oLGY9ZCtjO2FePS0xO2Zvcih2YXIgZz1kO2c8ZjtnKyspYT1hPj4+OF5lWzI1NSYoYV5iW2ddKV07cmV0dXJuIGFeLTF9ZnVuY3Rpb24gZihhLGIsYyxkKXt2YXIgZT1oLGY9ZCtjO2FePS0xO2Zvcih2YXIgZz1kO2c8ZjtnKyspYT1hPj4+OF5lWzI1NSYoYV5iLmNoYXJDb2RlQXQoZykpXTtyZXR1cm4gYV4tMX12YXIgZz1hKFwiLi91dGlsc1wiKSxoPWQoKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgYXx8IWEubGVuZ3RoKXJldHVybiAwO3ZhciBjPVwic3RyaW5nXCIhPT1nLmdldFR5cGVPZihhKTtyZXR1cm4gYz9lKDB8YixhLGEubGVuZ3RoLDApOmYoMHxiLGEsYS5sZW5ndGgsMCl9fSx7XCIuL3V0aWxzXCI6Mjl9XSw1OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7Yy5iYXNlNjQ9ITEsYy5iaW5hcnk9ITEsYy5kaXI9ITEsYy5jcmVhdGVGb2xkZXJzPSEwLGMuZGF0ZT1udWxsLGMuY29tcHJlc3Npb249bnVsbCxjLmNvbXByZXNzaW9uT3B0aW9ucz1udWxsLGMuY29tbWVudD1udWxsLGMudW5peFBlcm1pc3Npb25zPW51bGwsYy5kb3NQZXJtaXNzaW9ucz1udWxsfSx7fV0sNjpbZnVuY3Rpb24oYSxiLGMpeyhmdW5jdGlvbihjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1jLlByb21pc2V8fGEoXCJsaWVcIik7Yi5leHBvcnRzPXtQcm9taXNlOmR9fSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7bGllOjU2fV0sNzpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiKXtoLmNhbGwodGhpcyxcIkZsYXRlV29ya2VyL1wiK2EpLHRoaXMuX3Bha289bmV3IGZbYV0oe3JhdzohMCxsZXZlbDpiLmxldmVsfHwtMX0pLHRoaXMubWV0YT17fTt2YXIgYz10aGlzO3RoaXMuX3Bha28ub25EYXRhPWZ1bmN0aW9uKGEpe2MucHVzaCh7ZGF0YTphLG1ldGE6Yy5tZXRhfSl9fXZhciBlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDE2QXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50MzJBcnJheSxmPWEoXCJwYWtvXCIpLGc9YShcIi4vdXRpbHNcIiksaD1hKFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKSxpPWU/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiO2MubWFnaWM9XCJcXGJcXDBcIixnLmluaGVyaXRzKGQsaCksZC5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGEpe3RoaXMubWV0YT1hLm1ldGEsdGhpcy5fcGFrby5wdXNoKGcudHJhbnNmb3JtVG8oaSxhLmRhdGEpLCExKX0sZC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtoLnByb3RvdHlwZS5mbHVzaC5jYWxsKHRoaXMpLHRoaXMuX3Bha28ucHVzaChbXSwhMCl9LGQucHJvdG90eXBlLmNsZWFuVXA9ZnVuY3Rpb24oKXtoLnByb3RvdHlwZS5jbGVhblVwLmNhbGwodGhpcyksdGhpcy5fcGFrbz1udWxsfSxjLmNvbXByZXNzV29ya2VyPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZChcIkRlZmxhdGVcIixhKX0sYy51bmNvbXByZXNzV29ya2VyPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKFwiSW5mbGF0ZVwiLHt9KX19LHtcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIjoyNSxcIi4vdXRpbHNcIjoyOSxwYWtvOjU3fV0sODpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiLGMsZCl7Zi5jYWxsKHRoaXMsXCJaaXBGaWxlV29ya2VyXCIpLHRoaXMuYnl0ZXNXcml0dGVuPTAsdGhpcy56aXBDb21tZW50PWIsdGhpcy56aXBQbGF0Zm9ybT1jLHRoaXMuZW5jb2RlRmlsZU5hbWU9ZCx0aGlzLnN0cmVhbUZpbGVzPWEsdGhpcy5hY2N1bXVsYXRlPSExLHRoaXMuY29udGVudEJ1ZmZlcj1bXSx0aGlzLmRpclJlY29yZHM9W10sdGhpcy5jdXJyZW50U291cmNlT2Zmc2V0PTAsdGhpcy5lbnRyaWVzQ291bnQ9MCx0aGlzLmN1cnJlbnRGaWxlPW51bGwsdGhpcy5fc291cmNlcz1bXX12YXIgZT1hKFwiLi4vdXRpbHNcIiksZj1hKFwiLi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIiksZz1hKFwiLi4vdXRmOFwiKSxoPWEoXCIuLi9jcmMzMlwiKSxpPWEoXCIuLi9zaWduYXR1cmVcIiksaj1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9XCJcIjtmb3IoYz0wO2M8YjtjKyspZCs9U3RyaW5nLmZyb21DaGFyQ29kZSgyNTUmYSksYT4+Pj04O3JldHVybiBkfSxrPWZ1bmN0aW9uKGEsYil7dmFyIGM9YTtyZXR1cm4gYXx8KGM9Yj8xNjg5MzozMzIwNCksKDY1NTM1JmMpPDwxNn0sbD1mdW5jdGlvbihhLGIpe3JldHVybiA2MyYoYXx8MCl9LG09ZnVuY3Rpb24oYSxiLGMsZCxmLG0pe3ZhciBuLG8scD1hLmZpbGUscT1hLmNvbXByZXNzaW9uLHI9bSE9PWcudXRmOGVuY29kZSxzPWUudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixtKHAubmFtZSkpLHQ9ZS50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLGcudXRmOGVuY29kZShwLm5hbWUpKSx1PXAuY29tbWVudCx2PWUudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixtKHUpKSx3PWUudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixnLnV0ZjhlbmNvZGUodSkpLHg9dC5sZW5ndGghPT1wLm5hbWUubGVuZ3RoLHk9dy5sZW5ndGghPT11Lmxlbmd0aCx6PVwiXCIsQT1cIlwiLEI9XCJcIixDPXAuZGlyLEQ9cC5kYXRlLEU9e2NyYzMyOjAsY29tcHJlc3NlZFNpemU6MCx1bmNvbXByZXNzZWRTaXplOjB9O2ImJiFjfHwoRS5jcmMzMj1hLmNyYzMyLEUuY29tcHJlc3NlZFNpemU9YS5jb21wcmVzc2VkU2l6ZSxFLnVuY29tcHJlc3NlZFNpemU9YS51bmNvbXByZXNzZWRTaXplKTt2YXIgRj0wO2ImJihGfD04KSxyfHwheCYmIXl8fChGfD0yMDQ4KTt2YXIgRz0wLEg9MDtDJiYoR3w9MTYpLFwiVU5JWFwiPT09Zj8oSD03OTgsR3w9ayhwLnVuaXhQZXJtaXNzaW9ucyxDKSk6KEg9MjAsR3w9bChwLmRvc1Blcm1pc3Npb25zLEMpKSxuPUQuZ2V0VVRDSG91cnMoKSxuPDw9NixufD1ELmdldFVUQ01pbnV0ZXMoKSxuPDw9NSxufD1ELmdldFVUQ1NlY29uZHMoKS8yLG89RC5nZXRVVENGdWxsWWVhcigpLTE5ODAsbzw8PTQsb3w9RC5nZXRVVENNb250aCgpKzEsbzw8PTUsb3w9RC5nZXRVVENEYXRlKCkseCYmKEE9aigxLDEpK2ooaChzKSw0KSt0LHorPVwidXBcIitqKEEubGVuZ3RoLDIpK0EpLHkmJihCPWooMSwxKStqKGgodiksNCkrdyx6Kz1cInVjXCIraihCLmxlbmd0aCwyKStCKTt2YXIgST1cIlwiO0krPVwiXFxuXFwwXCIsSSs9aihGLDIpLEkrPXEubWFnaWMsSSs9aihuLDIpLEkrPWoobywyKSxJKz1qKEUuY3JjMzIsNCksSSs9aihFLmNvbXByZXNzZWRTaXplLDQpLEkrPWooRS51bmNvbXByZXNzZWRTaXplLDQpLEkrPWoocy5sZW5ndGgsMiksSSs9aih6Lmxlbmd0aCwyKTt2YXIgSj1pLkxPQ0FMX0ZJTEVfSEVBREVSK0krcyt6LEs9aS5DRU5UUkFMX0ZJTEVfSEVBREVSK2ooSCwyKStJK2oodi5sZW5ndGgsMikrXCJcXDBcXDBcXDBcXDBcIitqKEcsNCkraihkLDQpK3Mreit2O3JldHVybntmaWxlUmVjb3JkOkosZGlyUmVjb3JkOkt9fSxuPWZ1bmN0aW9uKGEsYixjLGQsZil7dmFyIGc9XCJcIixoPWUudHJhbnNmb3JtVG8oXCJzdHJpbmdcIixmKGQpKTtyZXR1cm4gZz1pLkNFTlRSQUxfRElSRUNUT1JZX0VORCtcIlxcMFxcMFxcMFxcMFwiK2ooYSwyKStqKGEsMikraihiLDQpK2ooYyw0KStqKGgubGVuZ3RoLDIpK2h9LG89ZnVuY3Rpb24oYSl7dmFyIGI9XCJcIjtyZXR1cm4gYj1pLkRBVEFfREVTQ1JJUFRPUitqKGEuY3JjMzIsNCkraihhLmNvbXByZXNzZWRTaXplLDQpK2ooYS51bmNvbXByZXNzZWRTaXplLDQpfTtlLmluaGVyaXRzKGQsZiksZC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhKXt2YXIgYj1hLm1ldGEucGVyY2VudHx8MCxjPXRoaXMuZW50cmllc0NvdW50LGQ9dGhpcy5fc291cmNlcy5sZW5ndGg7dGhpcy5hY2N1bXVsYXRlP3RoaXMuY29udGVudEJ1ZmZlci5wdXNoKGEpOih0aGlzLmJ5dGVzV3JpdHRlbis9YS5kYXRhLmxlbmd0aCxmLnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcyx7ZGF0YTphLmRhdGEsbWV0YTp7Y3VycmVudEZpbGU6dGhpcy5jdXJyZW50RmlsZSxwZXJjZW50OmM/KGIrMTAwKihjLWQtMSkpL2M6MTAwfX0pKX0sZC5wcm90b3R5cGUub3BlbmVkU291cmNlPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY3VycmVudFNvdXJjZU9mZnNldD10aGlzLmJ5dGVzV3JpdHRlbix0aGlzLmN1cnJlbnRGaWxlPWEuZmlsZS5uYW1lLHRoaXMuc3RyZWFtRmlsZXMmJiFhLmZpbGUuZGlyKXt2YXIgYj1tKGEsdGhpcy5zdHJlYW1GaWxlcywhMSx0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQsdGhpcy56aXBQbGF0Zm9ybSx0aGlzLmVuY29kZUZpbGVOYW1lKTt0aGlzLnB1c2goe2RhdGE6Yi5maWxlUmVjb3JkLG1ldGE6e3BlcmNlbnQ6MH19KX1lbHNlIHRoaXMuYWNjdW11bGF0ZT0hMH0sZC5wcm90b3R5cGUuY2xvc2VkU291cmNlPWZ1bmN0aW9uKGEpe3RoaXMuYWNjdW11bGF0ZT0hMTt2YXIgYj1tKGEsdGhpcy5zdHJlYW1GaWxlcywhMCx0aGlzLmN1cnJlbnRTb3VyY2VPZmZzZXQsdGhpcy56aXBQbGF0Zm9ybSx0aGlzLmVuY29kZUZpbGVOYW1lKTtpZih0aGlzLmRpclJlY29yZHMucHVzaChiLmRpclJlY29yZCksdGhpcy5zdHJlYW1GaWxlcyYmIWEuZmlsZS5kaXIpdGhpcy5wdXNoKHtkYXRhOm8oYSksbWV0YTp7cGVyY2VudDoxMDB9fSk7ZWxzZSBmb3IodGhpcy5wdXNoKHtkYXRhOmIuZmlsZVJlY29yZCxtZXRhOntwZXJjZW50OjB9fSk7dGhpcy5jb250ZW50QnVmZmVyLmxlbmd0aDspdGhpcy5wdXNoKHRoaXMuY29udGVudEJ1ZmZlci5zaGlmdCgpKTt0aGlzLmN1cnJlbnRGaWxlPW51bGx9LGQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYnl0ZXNXcml0dGVuLGI9MDtiPHRoaXMuZGlyUmVjb3Jkcy5sZW5ndGg7YisrKXRoaXMucHVzaCh7ZGF0YTp0aGlzLmRpclJlY29yZHNbYl0sbWV0YTp7cGVyY2VudDoxMDB9fSk7dmFyIGM9dGhpcy5ieXRlc1dyaXR0ZW4tYSxkPW4odGhpcy5kaXJSZWNvcmRzLmxlbmd0aCxjLGEsdGhpcy56aXBDb21tZW50LHRoaXMuZW5jb2RlRmlsZU5hbWUpO3RoaXMucHVzaCh7ZGF0YTpkLG1ldGE6e3BlcmNlbnQ6MTAwfX0pfSxkLnByb3RvdHlwZS5wcmVwYXJlTmV4dFNvdXJjZT1mdW5jdGlvbigpe3RoaXMucHJldmlvdXM9dGhpcy5fc291cmNlcy5zaGlmdCgpLHRoaXMub3BlbmVkU291cmNlKHRoaXMucHJldmlvdXMuc3RyZWFtSW5mbyksdGhpcy5pc1BhdXNlZD90aGlzLnByZXZpb3VzLnBhdXNlKCk6dGhpcy5wcmV2aW91cy5yZXN1bWUoKX0sZC5wcm90b3R5cGUucmVnaXN0ZXJQcmV2aW91cz1mdW5jdGlvbihhKXt0aGlzLl9zb3VyY2VzLnB1c2goYSk7dmFyIGI9dGhpcztyZXR1cm4gYS5vbihcImRhdGFcIixmdW5jdGlvbihhKXtiLnByb2Nlc3NDaHVuayhhKX0pLGEub24oXCJlbmRcIixmdW5jdGlvbigpe2IuY2xvc2VkU291cmNlKGIucHJldmlvdXMuc3RyZWFtSW5mbyksYi5fc291cmNlcy5sZW5ndGg/Yi5wcmVwYXJlTmV4dFNvdXJjZSgpOmIuZW5kKCl9KSxhLm9uKFwiZXJyb3JcIixmdW5jdGlvbihhKXtiLmVycm9yKGEpfSksdGhpc30sZC5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7cmV0dXJuISFmLnByb3RvdHlwZS5yZXN1bWUuY2FsbCh0aGlzKSYmKCF0aGlzLnByZXZpb3VzJiZ0aGlzLl9zb3VyY2VzLmxlbmd0aD8odGhpcy5wcmVwYXJlTmV4dFNvdXJjZSgpLCEwKTp0aGlzLnByZXZpb3VzfHx0aGlzLl9zb3VyY2VzLmxlbmd0aHx8dGhpcy5nZW5lcmF0ZWRFcnJvcj92b2lkIDA6KHRoaXMuZW5kKCksITApKX0sZC5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fc291cmNlcztpZighZi5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLGEpKXJldHVybiExO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXRyeXtiW2NdLmVycm9yKGEpfWNhdGNoKGEpe31yZXR1cm4hMH0sZC5wcm90b3R5cGUubG9jaz1mdW5jdGlvbigpe2YucHJvdG90eXBlLmxvY2suY2FsbCh0aGlzKTtmb3IodmFyIGE9dGhpcy5fc291cmNlcyxiPTA7YjxhLmxlbmd0aDtiKyspYVtiXS5sb2NrKCl9LGIuZXhwb3J0cz1kfSx7XCIuLi9jcmMzMlwiOjQsXCIuLi9zaWduYXR1cmVcIjoyMCxcIi4uL3N0cmVhbS9HZW5lcmljV29ya2VyXCI6MjUsXCIuLi91dGY4XCI6MjgsXCIuLi91dGlsc1wiOjI5fV0sOTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuLi9jb21wcmVzc2lvbnNcIiksZT1hKFwiLi9aaXBGaWxlV29ya2VyXCIpLGY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hfHxiLGU9ZFtjXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoYytcIiBpcyBub3QgYSB2YWxpZCBjb21wcmVzc2lvbiBtZXRob2QgIVwiKTtyZXR1cm4gZX07Yy5nZW5lcmF0ZVdvcmtlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9bmV3IGUoYi5zdHJlYW1GaWxlcyxjLGIucGxhdGZvcm0sYi5lbmNvZGVGaWxlTmFtZSksZz0wO3RyeXthLmZvckVhY2goZnVuY3Rpb24oYSxjKXtnKys7dmFyIGU9ZihjLm9wdGlvbnMuY29tcHJlc3Npb24sYi5jb21wcmVzc2lvbiksaD1jLm9wdGlvbnMuY29tcHJlc3Npb25PcHRpb25zfHxiLmNvbXByZXNzaW9uT3B0aW9uc3x8e30saT1jLmRpcixqPWMuZGF0ZTtjLl9jb21wcmVzc1dvcmtlcihlLGgpLndpdGhTdHJlYW1JbmZvKFwiZmlsZVwiLHtuYW1lOmEsZGlyOmksZGF0ZTpqLGNvbW1lbnQ6Yy5jb21tZW50fHxcIlwiLHVuaXhQZXJtaXNzaW9uczpjLnVuaXhQZXJtaXNzaW9ucyxkb3NQZXJtaXNzaW9uczpjLmRvc1Blcm1pc3Npb25zfSkucGlwZShkKX0pLGQuZW50cmllc0NvdW50PWd9Y2F0Y2goaCl7ZC5lcnJvcihoKX1yZXR1cm4gZH19LHtcIi4uL2NvbXByZXNzaW9uc1wiOjMsXCIuL1ppcEZpbGVXb3JrZXJcIjo4fV0sMTA6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgZCkpcmV0dXJuIG5ldyBkO2lmKGFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNvbnN0cnVjdG9yIHdpdGggcGFyYW1ldGVycyBoYXMgYmVlbiByZW1vdmVkIGluIEpTWmlwIDMuMCwgcGxlYXNlIGNoZWNrIHRoZSB1cGdyYWRlIGd1aWRlLlwiKTt0aGlzLmZpbGVzPXt9LHRoaXMuY29tbWVudD1udWxsLHRoaXMucm9vdD1cIlwiLHRoaXMuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZDtmb3IodmFyIGIgaW4gdGhpcylcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW2JdJiYoYVtiXT10aGlzW2JdKTtyZXR1cm4gYX19ZC5wcm90b3R5cGU9YShcIi4vb2JqZWN0XCIpLGQucHJvdG90eXBlLmxvYWRBc3luYz1hKFwiLi9sb2FkXCIpLGQuc3VwcG9ydD1hKFwiLi9zdXBwb3J0XCIpLGQuZGVmYXVsdHM9YShcIi4vZGVmYXVsdHNcIiksZC52ZXJzaW9uPVwiMy4xLjFcIixkLmxvYWRBc3luYz1mdW5jdGlvbihhLGIpe3JldHVybihuZXcgZCkubG9hZEFzeW5jKGEsYil9LGQuZXh0ZXJuYWw9YShcIi4vZXh0ZXJuYWxcIiksYi5leHBvcnRzPWR9LHtcIi4vZGVmYXVsdHNcIjo1LFwiLi9leHRlcm5hbFwiOjYsXCIuL2xvYWRcIjoxMSxcIi4vb2JqZWN0XCI6MTMsXCIuL3N1cHBvcnRcIjoyN31dLDExOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4gbmV3IGYuUHJvbWlzZShmdW5jdGlvbihiLGMpe3ZhciBkPWEuZGVjb21wcmVzc2VkLmdldENvbnRlbnRXb3JrZXIoKS5waXBlKG5ldyBpKTtkLm9uKFwiZXJyb3JcIixmdW5jdGlvbihhKXtjKGEpfSkub24oXCJlbmRcIixmdW5jdGlvbigpe2Quc3RyZWFtSW5mby5jcmMzMiE9PWEuZGVjb21wcmVzc2VkLmNyYzMyP2MobmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCA6IENSQzMyIG1pc21hdGNoXCIpKTpiKCl9KS5yZXN1bWUoKX0pfXZhciBlPWEoXCIuL3V0aWxzXCIpLGY9YShcIi4vZXh0ZXJuYWxcIiksZz1hKFwiLi91dGY4XCIpLGU9YShcIi4vdXRpbHNcIiksaD1hKFwiLi96aXBFbnRyaWVzXCIpLGk9YShcIi4vc3RyZWFtL0NyYzMyUHJvYmVcIiksaj1hKFwiLi9ub2RlanNVdGlsc1wiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3JldHVybiBiPWUuZXh0ZW5kKGJ8fHt9LHtiYXNlNjQ6ITEsY2hlY2tDUkMzMjohMSxvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6ITEsY3JlYXRlRm9sZGVyczohMSxkZWNvZGVGaWxlTmFtZTpnLnV0ZjhkZWNvZGV9KSxqLmlzTm9kZSYmai5pc1N0cmVhbShhKT9mLlByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkpTWmlwIGNhbid0IGFjY2VwdCBhIHN0cmVhbSB3aGVuIGxvYWRpbmcgYSB6aXAgZmlsZS5cIikpOmUucHJlcGFyZUNvbnRlbnQoXCJ0aGUgbG9hZGVkIHppcCBmaWxlXCIsYSwhMCxiLm9wdGltaXplZEJpbmFyeVN0cmluZyxiLmJhc2U2NCkudGhlbihmdW5jdGlvbihhKXt2YXIgYz1uZXcgaChiKTtyZXR1cm4gYy5sb2FkKGEpLGN9KS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPVtmLlByb21pc2UucmVzb2x2ZShhKV0sZT1hLmZpbGVzO2lmKGIuY2hlY2tDUkMzMilmb3IodmFyIGc9MDtnPGUubGVuZ3RoO2crKyljLnB1c2goZChlW2ddKSk7cmV0dXJuIGYuUHJvbWlzZS5hbGwoYyl9KS50aGVuKGZ1bmN0aW9uKGEpe2Zvcih2YXIgZD1hLnNoaWZ0KCksZT1kLmZpbGVzLGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGc9ZVtmXTtjLmZpbGUoZy5maWxlTmFtZVN0cixnLmRlY29tcHJlc3NlZCx7YmluYXJ5OiEwLG9wdGltaXplZEJpbmFyeVN0cmluZzohMCxkYXRlOmcuZGF0ZSxkaXI6Zy5kaXIsY29tbWVudDpnLmZpbGVDb21tZW50U3RyLmxlbmd0aD9nLmZpbGVDb21tZW50U3RyOm51bGwsdW5peFBlcm1pc3Npb25zOmcudW5peFBlcm1pc3Npb25zLGRvc1Blcm1pc3Npb25zOmcuZG9zUGVybWlzc2lvbnMsY3JlYXRlRm9sZGVyczpiLmNyZWF0ZUZvbGRlcnN9KX1yZXR1cm4gZC56aXBDb21tZW50Lmxlbmd0aCYmKGMuY29tbWVudD1kLnppcENvbW1lbnQpLGN9KX19LHtcIi4vZXh0ZXJuYWxcIjo2LFwiLi9ub2RlanNVdGlsc1wiOjEyLFwiLi9zdHJlYW0vQ3JjMzJQcm9iZVwiOjIyLFwiLi91dGY4XCI6MjgsXCIuL3V0aWxzXCI6MjksXCIuL3ppcEVudHJpZXNcIjozMH1dLDEyOltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2IuZXhwb3J0cz17aXNOb2RlOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLG5ld0J1ZmZlcjpmdW5jdGlvbihiLGMpe3JldHVybiBuZXcgYShiLGMpfSxpc0J1ZmZlcjpmdW5jdGlvbihiKXtyZXR1cm4gYS5pc0J1ZmZlcihiKX0saXNTdHJlYW06ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEub24mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEucGF1c2UmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEucmVzdW1lfX19KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJ1ZmZlcj9CdWZmZXI6dm9pZCAwKX0se31dLDEzOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtyZXR1cm5cIltvYmplY3QgUmVnRXhwXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfXZhciBlPWEoXCIuL3V0ZjhcIiksZj1hKFwiLi91dGlsc1wiKSxnPWEoXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpLGg9YShcIi4vc3RyZWFtL1N0cmVhbUhlbHBlclwiKSxpPWEoXCIuL2RlZmF1bHRzXCIpLGo9YShcIi4vY29tcHJlc3NlZE9iamVjdFwiKSxrPWEoXCIuL3ppcE9iamVjdFwiKSxsPWEoXCIuL2dlbmVyYXRlXCIpLG09YShcIi4vbm9kZWpzVXRpbHNcIiksbj1hKFwiLi9ub2RlanMvTm9kZWpzU3RyZWFtSW5wdXRBZGFwdGVyXCIpLG89ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9Zi5nZXRUeXBlT2YoYik7Yz1mLmV4dGVuZChjfHx7fSxpKSxjLmRhdGU9Yy5kYXRlfHxuZXcgRGF0ZSxudWxsIT09Yy5jb21wcmVzc2lvbiYmKGMuY29tcHJlc3Npb249Yy5jb21wcmVzc2lvbi50b1VwcGVyQ2FzZSgpKSxcInN0cmluZ1wiPT10eXBlb2YgYy51bml4UGVybWlzc2lvbnMmJihjLnVuaXhQZXJtaXNzaW9ucz1wYXJzZUludChjLnVuaXhQZXJtaXNzaW9ucyw4KSksYy51bml4UGVybWlzc2lvbnMmJjE2Mzg0JmMudW5peFBlcm1pc3Npb25zJiYoYy5kaXI9ITApLGMuZG9zUGVybWlzc2lvbnMmJjE2JmMuZG9zUGVybWlzc2lvbnMmJihjLmRpcj0hMCksYy5kaXImJihhPXEoYSkpLGMuY3JlYXRlRm9sZGVycyYmKGQ9cChhKSkmJnIuY2FsbCh0aGlzLGQsITApO3ZhciBoPVwic3RyaW5nXCI9PT1lJiZjLmJpbmFyeT09PSExJiZjLmJhc2U2ND09PSExO2MuYmluYXJ5PSFoO3ZhciBsPWIgaW5zdGFuY2VvZiBqJiYwPT09Yi51bmNvbXByZXNzZWRTaXplOyhsfHxjLmRpcnx8IWJ8fDA9PT1iLmxlbmd0aCkmJihjLmJhc2U2ND0hMSxjLmJpbmFyeT0hMCxiPVwiXCIsYy5jb21wcmVzc2lvbj1cIlNUT1JFXCIsZT1cInN0cmluZ1wiKTt2YXIgbz1udWxsO289YiBpbnN0YW5jZW9mIGp8fGIgaW5zdGFuY2VvZiBnP2I6bS5pc05vZGUmJm0uaXNTdHJlYW0oYik/bmV3IG4oYSxiKTpmLnByZXBhcmVDb250ZW50KGEsYixjLmJpbmFyeSxjLm9wdGltaXplZEJpbmFyeVN0cmluZyxjLmJhc2U2NCk7dmFyIHM9bmV3IGsoYSxvLGMpO3RoaXMuZmlsZXNbYV09c30scD1mdW5jdGlvbihhKXtcIi9cIj09PWEuc2xpY2UoLTEpJiYoYT1hLnN1YnN0cmluZygwLGEubGVuZ3RoLTEpKTt2YXIgYj1hLmxhc3RJbmRleE9mKFwiL1wiKTtyZXR1cm4gYj4wP2Euc3Vic3RyaW5nKDAsYik6XCJcIn0scT1mdW5jdGlvbihhKXtyZXR1cm5cIi9cIiE9PWEuc2xpY2UoLTEpJiYoYSs9XCIvXCIpLGF9LHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj1cInVuZGVmaW5lZFwiIT10eXBlb2YgYj9iOmkuY3JlYXRlRm9sZGVycyxhPXEoYSksdGhpcy5maWxlc1thXXx8by5jYWxsKHRoaXMsYSxudWxsLHtkaXI6ITAsY3JlYXRlRm9sZGVyczpifSksdGhpcy5maWxlc1thXX0scz17bG9hZDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGhhcyBiZWVuIHJlbW92ZWQgaW4gSlNaaXAgMy4wLCBwbGVhc2UgY2hlY2sgdGhlIHVwZ3JhZGUgZ3VpZGUuXCIpfSxmb3JFYWNoOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtmb3IoYiBpbiB0aGlzLmZpbGVzKXRoaXMuZmlsZXMuaGFzT3duUHJvcGVydHkoYikmJihkPXRoaXMuZmlsZXNbYl0sYz1iLnNsaWNlKHRoaXMucm9vdC5sZW5ndGgsYi5sZW5ndGgpLGMmJmIuc2xpY2UoMCx0aGlzLnJvb3QubGVuZ3RoKT09PXRoaXMucm9vdCYmYShjLGQpKX0sZmlsdGVyOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oYyxkKXthKGMsZCkmJmIucHVzaChkKX0pLGJ9LGZpbGU6ZnVuY3Rpb24oYSxiLGMpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihkKGEpKXt2YXIgZT1hO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihhLGIpe3JldHVybiFiLmRpciYmZS50ZXN0KGEpfSl9dmFyIGY9dGhpcy5maWxlc1t0aGlzLnJvb3QrYV07cmV0dXJuIGYmJiFmLmRpcj9mOm51bGx9cmV0dXJuIGE9dGhpcy5yb290K2Esby5jYWxsKHRoaXMsYSxiLGMpLHRoaXN9LGZvbGRlcjpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdGhpcztpZihkKGEpKXJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihiLGMpe3JldHVybiBjLmRpciYmYS50ZXN0KGIpfSk7dmFyIGI9dGhpcy5yb290K2EsYz1yLmNhbGwodGhpcyxiKSxlPXRoaXMuY2xvbmUoKTtyZXR1cm4gZS5yb290PWMubmFtZSxlfSxyZW1vdmU6ZnVuY3Rpb24oYSl7YT10aGlzLnJvb3QrYTt2YXIgYj10aGlzLmZpbGVzW2FdO2lmKGJ8fChcIi9cIiE9PWEuc2xpY2UoLTEpJiYoYSs9XCIvXCIpLGI9dGhpcy5maWxlc1thXSksYiYmIWIuZGlyKWRlbGV0ZSB0aGlzLmZpbGVzW2FdO2Vsc2UgZm9yKHZhciBjPXRoaXMuZmlsdGVyKGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGMubmFtZS5zbGljZSgwLGEubGVuZ3RoKT09PWF9KSxkPTA7ZDxjLmxlbmd0aDtkKyspZGVsZXRlIHRoaXMuZmlsZXNbY1tkXS5uYW1lXTtyZXR1cm4gdGhpc30sZ2VuZXJhdGU6ZnVuY3Rpb24oYSl7dGhyb3cgbmV3IEVycm9yKFwiVGhpcyBtZXRob2QgaGFzIGJlZW4gcmVtb3ZlZCBpbiBKU1ppcCAzLjAsIHBsZWFzZSBjaGVjayB0aGUgdXBncmFkZSBndWlkZS5cIil9LGdlbmVyYXRlSW50ZXJuYWxTdHJlYW06ZnVuY3Rpb24oYSl7dmFyIGIsYz17fTt0cnl7aWYoYz1mLmV4dGVuZChhfHx7fSx7c3RyZWFtRmlsZXM6ITEsY29tcHJlc3Npb246XCJTVE9SRVwiLGNvbXByZXNzaW9uT3B0aW9uczpudWxsLHR5cGU6XCJcIixwbGF0Zm9ybTpcIkRPU1wiLGNvbW1lbnQ6bnVsbCxtaW1lVHlwZTpcImFwcGxpY2F0aW9uL3ppcFwiLGVuY29kZUZpbGVOYW1lOmUudXRmOGVuY29kZX0pLGMudHlwZT1jLnR5cGUudG9Mb3dlckNhc2UoKSxjLmNvbXByZXNzaW9uPWMuY29tcHJlc3Npb24udG9VcHBlckNhc2UoKSxcImJpbmFyeXN0cmluZ1wiPT09Yy50eXBlJiYoYy50eXBlPVwic3RyaW5nXCIpLCFjLnR5cGUpdGhyb3cgbmV3IEVycm9yKFwiTm8gb3V0cHV0IHR5cGUgc3BlY2lmaWVkLlwiKTtmLmNoZWNrU3VwcG9ydChjLnR5cGUpLFwiZGFyd2luXCIhPT1hLnBsYXRmb3JtJiZcImZyZWVic2RcIiE9PWEucGxhdGZvcm0mJlwibGludXhcIiE9PWEucGxhdGZvcm0mJlwic3Vub3NcIiE9PWEucGxhdGZvcm18fChhLnBsYXRmb3JtPVwiVU5JWFwiKSxcIndpbjMyXCI9PT1hLnBsYXRmb3JtJiYoYS5wbGF0Zm9ybT1cIkRPU1wiKTt2YXIgZD1jLmNvbW1lbnR8fHRoaXMuY29tbWVudHx8XCJcIjtiPWwuZ2VuZXJhdGVXb3JrZXIodGhpcyxjLGQpfWNhdGNoKGkpe2I9bmV3IGcoXCJlcnJvclwiKSxiLmVycm9yKGkpfXJldHVybiBuZXcgaChiLGMudHlwZXx8XCJzdHJpbmdcIixjLm1pbWVUeXBlKX0sZ2VuZXJhdGVBc3luYzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdlbmVyYXRlSW50ZXJuYWxTdHJlYW0oYSkuYWNjdW11bGF0ZShiKX0sZ2VuZXJhdGVOb2RlU3RyZWFtOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9YXx8e30sYS50eXBlfHwoYS50eXBlPVwibm9kZWJ1ZmZlclwiKSx0aGlzLmdlbmVyYXRlSW50ZXJuYWxTdHJlYW0oYSkudG9Ob2RlanNTdHJlYW0oYil9fTtiLmV4cG9ydHM9c30se1wiLi9jb21wcmVzc2VkT2JqZWN0XCI6MixcIi4vZGVmYXVsdHNcIjo1LFwiLi9nZW5lcmF0ZVwiOjksXCIuL25vZGVqcy9Ob2RlanNTdHJlYW1JbnB1dEFkYXB0ZXJcIjozMyxcIi4vbm9kZWpzVXRpbHNcIjoxMixcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIjoyNSxcIi4vc3RyZWFtL1N0cmVhbUhlbHBlclwiOjI2LFwiLi91dGY4XCI6MjgsXCIuL3V0aWxzXCI6MjksXCIuL3ppcE9iamVjdFwiOjMyfV0sMTQ6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2UuY2FsbCh0aGlzLGEpO2Zvcih2YXIgYj0wO2I8dGhpcy5kYXRhLmxlbmd0aDtiKyspYVtiXT0yNTUmYVtiXX12YXIgZT1hKFwiLi9EYXRhUmVhZGVyXCIpLGY9YShcIi4uL3V0aWxzXCIpO2YuaW5oZXJpdHMoZCxlKSxkLnByb3RvdHlwZS5ieXRlQXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGF0YVt0aGlzLnplcm8rYV19LGQucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmNoYXJDb2RlQXQoMCksYz1hLmNoYXJDb2RlQXQoMSksZD1hLmNoYXJDb2RlQXQoMiksZT1hLmNoYXJDb2RlQXQoMyksZj10aGlzLmxlbmd0aC00O2Y+PTA7LS1mKWlmKHRoaXMuZGF0YVtmXT09PWImJnRoaXMuZGF0YVtmKzFdPT09YyYmdGhpcy5kYXRhW2YrMl09PT1kJiZ0aGlzLmRhdGFbZiszXT09PWUpcmV0dXJuIGYtdGhpcy56ZXJvO3JldHVybi0xfSxkLnByb3RvdHlwZS5yZWFkQW5kQ2hlY2tTaWduYXR1cmU9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGFyQ29kZUF0KDApLGM9YS5jaGFyQ29kZUF0KDEpLGQ9YS5jaGFyQ29kZUF0KDIpLGU9YS5jaGFyQ29kZUF0KDMpLGY9dGhpcy5yZWFkRGF0YSg0KTtyZXR1cm4gYj09PWZbMF0mJmM9PT1mWzFdJiZkPT09ZlsyXSYmZT09PWZbM119LGQucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY2hlY2tPZmZzZXQoYSksMD09PWEpcmV0dXJuW107dmFyIGI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2EpO3JldHVybiB0aGlzLmluZGV4Kz1hLGJ9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5LFwiLi9EYXRhUmVhZGVyXCI6MTV9XSwxNTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7dGhpcy5kYXRhPWEsdGhpcy5sZW5ndGg9YS5sZW5ndGgsdGhpcy5pbmRleD0wLHRoaXMuemVybz0wfXZhciBlPWEoXCIuLi91dGlsc1wiKTtkLnByb3RvdHlwZT17Y2hlY2tPZmZzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5jaGVja0luZGV4KHRoaXMuaW5kZXgrYSl9LGNoZWNrSW5kZXg6ZnVuY3Rpb24oYSl7aWYodGhpcy5sZW5ndGg8dGhpcy56ZXJvK2F8fGE8MCl0aHJvdyBuZXcgRXJyb3IoXCJFbmQgb2YgZGF0YSByZWFjaGVkIChkYXRhIGxlbmd0aCA9IFwiK3RoaXMubGVuZ3RoK1wiLCBhc2tlZCBpbmRleCA9IFwiK2ErXCIpLiBDb3JydXB0ZWQgemlwID9cIil9LHNldEluZGV4OmZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tJbmRleChhKSx0aGlzLmluZGV4PWF9LHNraXA6ZnVuY3Rpb24oYSl7dGhpcy5zZXRJbmRleCh0aGlzLmluZGV4K2EpfSxieXRlQXQ6ZnVuY3Rpb24oYSl7fSxyZWFkSW50OmZ1bmN0aW9uKGEpe3ZhciBiLGM9MDtmb3IodGhpcy5jaGVja09mZnNldChhKSxiPXRoaXMuaW5kZXgrYS0xO2I+PXRoaXMuaW5kZXg7Yi0tKWM9KGM8PDgpK3RoaXMuYnl0ZUF0KGIpO3JldHVybiB0aGlzLmluZGV4Kz1hLGN9LHJlYWRTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIGUudHJhbnNmb3JtVG8oXCJzdHJpbmdcIix0aGlzLnJlYWREYXRhKGEpKX0scmVhZERhdGE6ZnVuY3Rpb24oYSl7fSxsYXN0SW5kZXhPZlNpZ25hdHVyZTpmdW5jdGlvbihhKXt9LHJlYWRBbmRDaGVja1NpZ25hdHVyZTpmdW5jdGlvbihhKXt9LHJlYWREYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWFkSW50KDQpO3JldHVybiBuZXcgRGF0ZShEYXRlLlVUQygoYT4+MjUmMTI3KSsxOTgwLChhPj4yMSYxNSktMSxhPj4xNiYzMSxhPj4xMSYzMSxhPj41JjYzLCgzMSZhKTw8MSkpfX0sYi5leHBvcnRzPWR9LHtcIi4uL3V0aWxzXCI6Mjl9XSwxNjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7ZS5jYWxsKHRoaXMsYSl9dmFyIGU9YShcIi4vVWludDhBcnJheVJlYWRlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUucmVhZERhdGE9ZnVuY3Rpb24oYSl7dGhpcy5jaGVja09mZnNldChhKTt2YXIgYj10aGlzLmRhdGEuc2xpY2UodGhpcy56ZXJvK3RoaXMuaW5kZXgsdGhpcy56ZXJvK3RoaXMuaW5kZXgrYSk7cmV0dXJuIHRoaXMuaW5kZXgrPWEsYn0sYi5leHBvcnRzPWR9LHtcIi4uL3V0aWxzXCI6MjksXCIuL1VpbnQ4QXJyYXlSZWFkZXJcIjoxOH1dLDE3OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtlLmNhbGwodGhpcyxhKX12YXIgZT1hKFwiLi9EYXRhUmVhZGVyXCIpLGY9YShcIi4uL3V0aWxzXCIpO2YuaW5oZXJpdHMoZCxlKSxkLnByb3RvdHlwZS5ieXRlQXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMuemVybythKX0sZC5wcm90b3R5cGUubGFzdEluZGV4T2ZTaWduYXR1cmU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGF0YS5sYXN0SW5kZXhPZihhKS10aGlzLnplcm99LGQucHJvdG90eXBlLnJlYWRBbmRDaGVja1NpZ25hdHVyZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlYWREYXRhKDQpO3JldHVybiBhPT09Yn0sZC5wcm90b3R5cGUucmVhZERhdGE9ZnVuY3Rpb24oYSl7dGhpcy5jaGVja09mZnNldChhKTt2YXIgYj10aGlzLmRhdGEuc2xpY2UodGhpcy56ZXJvK3RoaXMuaW5kZXgsdGhpcy56ZXJvK3RoaXMuaW5kZXgrYSk7cmV0dXJuIHRoaXMuaW5kZXgrPWEsYn0sYi5leHBvcnRzPWR9LHtcIi4uL3V0aWxzXCI6MjksXCIuL0RhdGFSZWFkZXJcIjoxNX1dLDE4OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtlLmNhbGwodGhpcyxhKX12YXIgZT1hKFwiLi9BcnJheVJlYWRlclwiKSxmPWEoXCIuLi91dGlsc1wiKTtmLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUucmVhZERhdGE9ZnVuY3Rpb24oYSl7aWYodGhpcy5jaGVja09mZnNldChhKSwwPT09YSlyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7dmFyIGI9dGhpcy5kYXRhLnN1YmFycmF5KHRoaXMuemVybyt0aGlzLmluZGV4LHRoaXMuemVybyt0aGlzLmluZGV4K2EpO3JldHVybiB0aGlzLmluZGV4Kz1hLGJ9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5LFwiLi9BcnJheVJlYWRlclwiOjE0fV0sMTk6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1hKFwiLi4vdXRpbHNcIiksZT1hKFwiLi4vc3VwcG9ydFwiKSxmPWEoXCIuL0FycmF5UmVhZGVyXCIpLGc9YShcIi4vU3RyaW5nUmVhZGVyXCIpLGg9YShcIi4vTm9kZUJ1ZmZlclJlYWRlclwiKSxpPWEoXCIuL1VpbnQ4QXJyYXlSZWFkZXJcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3ZhciBiPWQuZ2V0VHlwZU9mKGEpO3JldHVybiBkLmNoZWNrU3VwcG9ydChiKSxcInN0cmluZ1wiIT09Ynx8ZS51aW50OGFycmF5P1wibm9kZWJ1ZmZlclwiPT09Yj9uZXcgaChhKTplLnVpbnQ4YXJyYXk/bmV3IGkoZC50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIixhKSk6bmV3IGYoZC50cmFuc2Zvcm1UbyhcImFycmF5XCIsYSkpOm5ldyBnKGEpfX0se1wiLi4vc3VwcG9ydFwiOjI3LFwiLi4vdXRpbHNcIjoyOSxcIi4vQXJyYXlSZWFkZXJcIjoxNCxcIi4vTm9kZUJ1ZmZlclJlYWRlclwiOjE2LFwiLi9TdHJpbmdSZWFkZXJcIjoxNyxcIi4vVWludDhBcnJheVJlYWRlclwiOjE4fV0sMjA6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtjLkxPQ0FMX0ZJTEVfSEVBREVSPVwiUEtcdTAwMDNcdTAwMDRcIixjLkNFTlRSQUxfRklMRV9IRUFERVI9XCJQS1x1MDAwMVx1MDAwMlwiLGMuQ0VOVFJBTF9ESVJFQ1RPUllfRU5EPVwiUEtcdTAwMDVcdTAwMDZcIixjLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1I9XCJQS1x1MDAwNlx1MDAwN1wiLGMuWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EPVwiUEtcdTAwMDZcdTAwMDZcIixjLkRBVEFfREVTQ1JJUFRPUj1cIlBLXHUwMDA3XFxiXCJ9LHt9XSwyMTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7ZS5jYWxsKHRoaXMsXCJDb252ZXJ0V29ya2VyIHRvIFwiK2EpLHRoaXMuZGVzdFR5cGU9YX12YXIgZT1hKFwiLi9HZW5lcmljV29ya2VyXCIpLGY9YShcIi4uL3V0aWxzXCIpO2YuaW5oZXJpdHMoZCxlKSxkLnByb3RvdHlwZS5wcm9jZXNzQ2h1bms9ZnVuY3Rpb24oYSl7dGhpcy5wdXNoKHtkYXRhOmYudHJhbnNmb3JtVG8odGhpcy5kZXN0VHlwZSxhLmRhdGEpLG1ldGE6YS5tZXRhfSl9LGIuZXhwb3J0cz1kfSx7XCIuLi91dGlsc1wiOjI5LFwiLi9HZW5lcmljV29ya2VyXCI6MjV9XSwyMjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXtlLmNhbGwodGhpcyxcIkNyYzMyUHJvYmVcIil9dmFyIGU9YShcIi4vR2VuZXJpY1dvcmtlclwiKSxmPWEoXCIuLi9jcmMzMlwiKSxnPWEoXCIuLi91dGlsc1wiKTtnLmluaGVyaXRzKGQsZSksZC5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGEpe3RoaXMuc3RyZWFtSW5mby5jcmMzMj1mKGEuZGF0YSx0aGlzLnN0cmVhbUluZm8uY3JjMzJ8fDApLHRoaXMucHVzaChhKX0sYi5leHBvcnRzPWR9LHtcIi4uL2NyYzMyXCI6NCxcIi4uL3V0aWxzXCI6MjksXCIuL0dlbmVyaWNXb3JrZXJcIjoyNX1dLDIzOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtmLmNhbGwodGhpcyxcIkRhdGFMZW5ndGhQcm9iZSBmb3IgXCIrYSksdGhpcy5wcm9wTmFtZT1hLHRoaXMud2l0aFN0cmVhbUluZm8oYSwwKX12YXIgZT1hKFwiLi4vdXRpbHNcIiksZj1hKFwiLi9HZW5lcmljV29ya2VyXCIpO2UuaW5oZXJpdHMoZCxmKSxkLnByb3RvdHlwZS5wcm9jZXNzQ2h1bms9ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5zdHJlYW1JbmZvW3RoaXMucHJvcE5hbWVdfHwwO3RoaXMuc3RyZWFtSW5mb1t0aGlzLnByb3BOYW1lXT1iK2EuZGF0YS5sZW5ndGh9Zi5wcm90b3R5cGUucHJvY2Vzc0NodW5rLmNhbGwodGhpcyxhKX0sYi5leHBvcnRzPWR9LHtcIi4uL3V0aWxzXCI6MjksXCIuL0dlbmVyaWNXb3JrZXJcIjoyNX1dLDI0OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtmLmNhbGwodGhpcyxcIkRhdGFXb3JrZXJcIik7dmFyIGI9dGhpczt0aGlzLmRhdGFJc1JlYWR5PSExLHRoaXMuaW5kZXg9MCx0aGlzLm1heD0wLHRoaXMuZGF0YT1udWxsLHRoaXMudHlwZT1cIlwiLHRoaXMuX3RpY2tTY2hlZHVsZWQ9ITEsYS50aGVuKGZ1bmN0aW9uKGEpe2IuZGF0YUlzUmVhZHk9ITAsYi5kYXRhPWEsYi5tYXg9YSYmYS5sZW5ndGh8fDAsYi50eXBlPWUuZ2V0VHlwZU9mKGEpLGIuaXNQYXVzZWR8fGIuX3RpY2tBbmRSZXBlYXQoKX0sZnVuY3Rpb24oYSl7Yi5lcnJvcihhKX0pfXZhciBlPWEoXCIuLi91dGlsc1wiKSxmPWEoXCIuL0dlbmVyaWNXb3JrZXJcIiksZz0xNjM4NDtlLmluaGVyaXRzKGQsZiksZC5wcm90b3R5cGUuY2xlYW5VcD1mdW5jdGlvbigpe2YucHJvdG90eXBlLmNsZWFuVXAuY2FsbCh0aGlzKSx0aGlzLmRhdGE9bnVsbH0sZC5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7cmV0dXJuISFmLnByb3RvdHlwZS5yZXN1bWUuY2FsbCh0aGlzKSYmKCF0aGlzLl90aWNrU2NoZWR1bGVkJiZ0aGlzLmRhdGFJc1JlYWR5JiYodGhpcy5fdGlja1NjaGVkdWxlZD0hMCxlLmRlbGF5KHRoaXMuX3RpY2tBbmRSZXBlYXQsW10sdGhpcykpLCEwKX0sZC5wcm90b3R5cGUuX3RpY2tBbmRSZXBlYXQ9ZnVuY3Rpb24oKXt0aGlzLl90aWNrU2NoZWR1bGVkPSExLHRoaXMuaXNQYXVzZWR8fHRoaXMuaXNGaW5pc2hlZHx8KHRoaXMuX3RpY2soKSx0aGlzLmlzRmluaXNoZWR8fChlLmRlbGF5KHRoaXMuX3RpY2tBbmRSZXBlYXQsW10sdGhpcyksdGhpcy5fdGlja1NjaGVkdWxlZD0hMCkpfSxkLnByb3RvdHlwZS5fdGljaz1mdW5jdGlvbigpe2lmKHRoaXMuaXNQYXVzZWR8fHRoaXMuaXNGaW5pc2hlZClyZXR1cm4hMTt2YXIgYT1nLGI9bnVsbCxjPU1hdGgubWluKHRoaXMubWF4LHRoaXMuaW5kZXgrYSk7aWYodGhpcy5pbmRleD49dGhpcy5tYXgpcmV0dXJuIHRoaXMuZW5kKCk7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZVwic3RyaW5nXCI6Yj10aGlzLmRhdGEuc3Vic3RyaW5nKHRoaXMuaW5kZXgsYyk7YnJlYWs7Y2FzZVwidWludDhhcnJheVwiOmI9dGhpcy5kYXRhLnN1YmFycmF5KHRoaXMuaW5kZXgsYyk7YnJlYWs7Y2FzZVwiYXJyYXlcIjpjYXNlXCJub2RlYnVmZmVyXCI6Yj10aGlzLmRhdGEuc2xpY2UodGhpcy5pbmRleCxjKX1yZXR1cm4gdGhpcy5pbmRleD1jLHRoaXMucHVzaCh7ZGF0YTpiLG1ldGE6e3BlcmNlbnQ6dGhpcy5tYXg/dGhpcy5pbmRleC90aGlzLm1heCoxMDA6MH19KX0sYi5leHBvcnRzPWR9LHtcIi4uL3V0aWxzXCI6MjksXCIuL0dlbmVyaWNXb3JrZXJcIjoyNX1dLDI1OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXt0aGlzLm5hbWU9YXx8XCJkZWZhdWx0XCIsdGhpcy5zdHJlYW1JbmZvPXt9LHRoaXMuZ2VuZXJhdGVkRXJyb3I9bnVsbCx0aGlzLmV4dHJhU3RyZWFtSW5mbz17fSx0aGlzLmlzUGF1c2VkPSEwLHRoaXMuaXNGaW5pc2hlZD0hMSx0aGlzLmlzTG9ja2VkPSExLHRoaXMuX2xpc3RlbmVycz17ZGF0YTpbXSxlbmQ6W10sZXJyb3I6W119LHRoaXMucHJldmlvdXM9bnVsbH1kLnByb3RvdHlwZT17cHVzaDpmdW5jdGlvbihhKXt0aGlzLmVtaXQoXCJkYXRhXCIsYSl9LGVuZDpmdW5jdGlvbigpe2lmKHRoaXMuaXNGaW5pc2hlZClyZXR1cm4hMTt0aGlzLmZsdXNoKCk7dHJ5e3RoaXMuZW1pdChcImVuZFwiKSx0aGlzLmNsZWFuVXAoKSx0aGlzLmlzRmluaXNoZWQ9ITB9Y2F0Y2goYSl7dGhpcy5lbWl0KFwiZXJyb3JcIixhKX1yZXR1cm4hMH0sZXJyb3I6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuaXNGaW5pc2hlZCYmKHRoaXMuaXNQYXVzZWQ/dGhpcy5nZW5lcmF0ZWRFcnJvcj1hOih0aGlzLmlzRmluaXNoZWQ9ITAsdGhpcy5lbWl0KFwiZXJyb3JcIixhKSx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLmVycm9yKGEpLHRoaXMuY2xlYW5VcCgpKSwhMCl9LG9uOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuX2xpc3RlbmVyc1thXS5wdXNoKGIpLHRoaXN9LGNsZWFuVXA6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbUluZm89dGhpcy5nZW5lcmF0ZWRFcnJvcj10aGlzLmV4dHJhU3RyZWFtSW5mbz1udWxsLHRoaXMuX2xpc3RlbmVycz1bXX0sZW1pdDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuX2xpc3RlbmVyc1thXSlmb3IodmFyIGM9MDtjPHRoaXMuX2xpc3RlbmVyc1thXS5sZW5ndGg7YysrKXRoaXMuX2xpc3RlbmVyc1thXVtjXS5jYWxsKHRoaXMsYil9LHBpcGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVnaXN0ZXJQcmV2aW91cyh0aGlzKX0scmVnaXN0ZXJQcmV2aW91czpmdW5jdGlvbihhKXtpZih0aGlzLmlzTG9ja2VkKXRocm93IG5ldyBFcnJvcihcIlRoZSBzdHJlYW0gJ1wiK3RoaXMrXCInIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cIik7dGhpcy5zdHJlYW1JbmZvPWEuc3RyZWFtSW5mbyx0aGlzLm1lcmdlU3RyZWFtSW5mbygpLHRoaXMucHJldmlvdXM9YTt2YXIgYj10aGlzO3JldHVybiBhLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKGEpe2IucHJvY2Vzc0NodW5rKGEpfSksYS5vbihcImVuZFwiLGZ1bmN0aW9uKCl7Yi5lbmQoKX0pLGEub24oXCJlcnJvclwiLGZ1bmN0aW9uKGEpe2IuZXJyb3IoYSl9KSx0aGlzfSxwYXVzZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzUGF1c2VkJiYhdGhpcy5pc0ZpbmlzaGVkJiYodGhpcy5pc1BhdXNlZD0hMCx0aGlzLnByZXZpb3VzJiZ0aGlzLnByZXZpb3VzLnBhdXNlKCksITApfSxyZXN1bWU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc1BhdXNlZHx8dGhpcy5pc0ZpbmlzaGVkKXJldHVybiExO3RoaXMuaXNQYXVzZWQ9ITE7dmFyIGE9ITE7cmV0dXJuIHRoaXMuZ2VuZXJhdGVkRXJyb3ImJih0aGlzLmVycm9yKHRoaXMuZ2VuZXJhdGVkRXJyb3IpLGE9ITApLHRoaXMucHJldmlvdXMmJnRoaXMucHJldmlvdXMucmVzdW1lKCksIWF9LGZsdXNoOmZ1bmN0aW9uKCl7fSxwcm9jZXNzQ2h1bms6ZnVuY3Rpb24oYSl7dGhpcy5wdXNoKGEpfSx3aXRoU3RyZWFtSW5mbzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmV4dHJhU3RyZWFtSW5mb1thXT1iLHRoaXMubWVyZ2VTdHJlYW1JbmZvKCksdGhpc30sbWVyZ2VTdHJlYW1JbmZvOmZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuZXh0cmFTdHJlYW1JbmZvKXRoaXMuZXh0cmFTdHJlYW1JbmZvLmhhc093blByb3BlcnR5KGEpJiYodGhpcy5zdHJlYW1JbmZvW2FdPXRoaXMuZXh0cmFTdHJlYW1JbmZvW2FdKX0sbG9jazpmdW5jdGlvbigpe2lmKHRoaXMuaXNMb2NrZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0cmVhbSAnXCIrdGhpcytcIicgaGFzIGFscmVhZHkgYmVlbiB1c2VkLlwiKTt0aGlzLmlzTG9ja2VkPSEwLHRoaXMucHJldmlvdXMmJnRoaXMucHJldmlvdXMubG9jaygpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBhPVwiV29ya2VyIFwiK3RoaXMubmFtZTtyZXR1cm4gdGhpcy5wcmV2aW91cz90aGlzLnByZXZpb3VzK1wiIC0+IFwiK2E6YX19LGIuZXhwb3J0cz1kfSx7fV0sMjY6W2Z1bmN0aW9uKGEsYixjKXsoZnVuY3Rpb24oYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIsYyl7c3dpdGNoKGEpe2Nhc2VcImJsb2JcIjpyZXR1cm4gaC5uZXdCbG9iKGgudHJhbnNmb3JtVG8oXCJhcnJheWJ1ZmZlclwiLGIpLGMpO2Nhc2VcImJhc2U2NFwiOnJldHVybiBrLmVuY29kZShiKTtkZWZhdWx0OnJldHVybiBoLnRyYW5zZm9ybVRvKGEsYil9fWZ1bmN0aW9uIGUoYSxiKXt2YXIgZCxlPTAsZj1udWxsLGc9MDtmb3IoZD0wO2Q8Yi5sZW5ndGg7ZCsrKWcrPWJbZF0ubGVuZ3RoO3N3aXRjaChhKXtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gYi5qb2luKFwiXCIpO2Nhc2VcImFycmF5XCI6cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sYik7Y2FzZVwidWludDhhcnJheVwiOmZvcihmPW5ldyBVaW50OEFycmF5KGcpLGQ9MDtkPGIubGVuZ3RoO2QrKylmLnNldChiW2RdLGUpLGUrPWJbZF0ubGVuZ3RoO3JldHVybiBmO2Nhc2VcIm5vZGVidWZmZXJcIjpyZXR1cm4gYy5jb25jYXQoYik7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJjb25jYXQgOiB1bnN1cHBvcnRlZCB0eXBlICdcIithK1wiJ1wiKX19ZnVuY3Rpb24gZihhLGIpe3JldHVybiBuZXcgbS5Qcm9taXNlKGZ1bmN0aW9uKGMsZil7dmFyIGc9W10saD1hLl9pbnRlcm5hbFR5cGUsaT1hLl9vdXRwdXRUeXBlLGo9YS5fbWltZVR5cGU7YS5vbihcImRhdGFcIixmdW5jdGlvbihhLGMpe2cucHVzaChhKSxiJiZiKGMpfSkub24oXCJlcnJvclwiLGZ1bmN0aW9uKGEpe2c9W10sZihhKX0pLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXt0cnl7dmFyIGE9ZChpLGUoaCxnKSxqKTtjKGEpfWNhdGNoKGIpe2YoYil9Zz1bXX0pLnJlc3VtZSgpfSl9ZnVuY3Rpb24gZyhhLGIsYyl7dmFyIGQ9Yjtzd2l0Y2goYil7Y2FzZVwiYmxvYlwiOmNhc2VcImFycmF5YnVmZmVyXCI6ZD1cInVpbnQ4YXJyYXlcIjticmVhaztjYXNlXCJiYXNlNjRcIjpkPVwic3RyaW5nXCJ9dHJ5e3RoaXMuX2ludGVybmFsVHlwZT1kLHRoaXMuX291dHB1dFR5cGU9Yix0aGlzLl9taW1lVHlwZT1jLGguY2hlY2tTdXBwb3J0KGQpLHRoaXMuX3dvcmtlcj1hLnBpcGUobmV3IGkoZCkpLGEubG9jaygpfWNhdGNoKGUpe3RoaXMuX3dvcmtlcj1uZXcgaihcImVycm9yXCIpLHRoaXMuX3dvcmtlci5lcnJvcihlKX19dmFyIGg9YShcIi4uL3V0aWxzXCIpLGk9YShcIi4vQ29udmVydFdvcmtlclwiKSxqPWEoXCIuL0dlbmVyaWNXb3JrZXJcIiksaz1hKFwiLi4vYmFzZTY0XCIpLGw9YShcIi4uL25vZGVqcy9Ob2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyXCIpLG09YShcIi4uL2V4dGVybmFsXCIpO2cucHJvdG90eXBlPXthY2N1bXVsYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBmKHRoaXMsYSl9LG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm5cImRhdGFcIj09PWE/dGhpcy5fd29ya2VyLm9uKGEsZnVuY3Rpb24oYSl7Yi5jYWxsKGMsYS5kYXRhLGEubWV0YSl9KTp0aGlzLl93b3JrZXIub24oYSxmdW5jdGlvbigpe2guZGVsYXkoYixhcmd1bWVudHMsYyl9KSx0aGlzfSxyZXN1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gaC5kZWxheSh0aGlzLl93b3JrZXIucmVzdW1lLFtdLHRoaXMuX3dvcmtlciksdGhpc30scGF1c2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd29ya2VyLnBhdXNlKCksdGhpc30sdG9Ob2RlanNTdHJlYW06ZnVuY3Rpb24oYSl7aWYoaC5jaGVja1N1cHBvcnQoXCJub2Rlc3RyZWFtXCIpLFwibm9kZWJ1ZmZlclwiIT09dGhpcy5fb3V0cHV0VHlwZSl0aHJvdyBuZXcgRXJyb3IodGhpcy5fb3V0cHV0VHlwZStcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgbWV0aG9kXCIpO3JldHVybiBuZXcgbCh0aGlzLHtvYmplY3RNb2RlOlwibm9kZWJ1ZmZlclwiIT09dGhpcy5fb3V0cHV0VHlwZX0sYSl9fSxiLmV4cG9ydHM9Z30pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgQnVmZmVyP0J1ZmZlcjp2b2lkIDApfSx7XCIuLi9iYXNlNjRcIjoxLFwiLi4vZXh0ZXJuYWxcIjo2LFwiLi4vbm9kZWpzL05vZGVqc1N0cmVhbU91dHB1dEFkYXB0ZXJcIjozMyxcIi4uL3V0aWxzXCI6MjksXCIuL0NvbnZlcnRXb3JrZXJcIjoyMSxcIi4vR2VuZXJpY1dvcmtlclwiOjI1fV0sMjc6W2Z1bmN0aW9uKGEsYixjKXsoZnVuY3Rpb24oYil7XCJ1c2Ugc3RyaWN0XCI7aWYoYy5iYXNlNjQ9ITAsYy5hcnJheT0hMCxjLnN0cmluZz0hMCxjLmFycmF5YnVmZmVyPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXksYy5ub2RlYnVmZmVyPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLGMudWludDhhcnJheT1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSxcInVuZGVmaW5lZFwiPT10eXBlb2YgQXJyYXlCdWZmZXIpYy5ibG9iPSExO2Vsc2V7dmFyIGQ9bmV3IEFycmF5QnVmZmVyKDApO3RyeXtjLmJsb2I9MD09PW5ldyBCbG9iKFtkXSx7dHlwZTpcImFwcGxpY2F0aW9uL3ppcFwifSkuc2l6ZX1jYXRjaChlKXt0cnl7dmFyIGY9d2luZG93LkJsb2JCdWlsZGVyfHx3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXIsZz1uZXcgZjtnLmFwcGVuZChkKSxjLmJsb2I9MD09PWcuZ2V0QmxvYihcImFwcGxpY2F0aW9uL3ppcFwiKS5zaXplfWNhdGNoKGUpe2MuYmxvYj0hMX19fWMubm9kZXN0cmVhbT0hIWEoXCIuL25vZGVqcy9Ob2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyXCIpLnByb3RvdHlwZX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgQnVmZmVyP0J1ZmZlcjp2b2lkIDApfSx7XCIuL25vZGVqcy9Ob2RlanNTdHJlYW1PdXRwdXRBZGFwdGVyXCI6MzN9XSwyODpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXtpLmNhbGwodGhpcyxcInV0Zi04IGRlY29kZVwiKSx0aGlzLmxlZnRPdmVyPW51bGx9ZnVuY3Rpb24gZSgpe2kuY2FsbCh0aGlzLFwidXRmLTggZW5jb2RlXCIpfWZvcih2YXIgZj1hKFwiLi91dGlsc1wiKSxnPWEoXCIuL3N1cHBvcnRcIiksaD1hKFwiLi9ub2RlanNVdGlsc1wiKSxpPWEoXCIuL3N0cmVhbS9HZW5lcmljV29ya2VyXCIpLGo9bmV3IEFycmF5KDI1Niksaz0wO2s8MjU2O2srKylqW2tdPWs+PTI1Mj82Oms+PTI0OD81Oms+PTI0MD80Oms+PTIyND8zOms+PTE5Mj8yOjE7alsyNTRdPWpbMjU0XT0xO3ZhciBsPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsaD1hLmxlbmd0aCxpPTA7Zm9yKGU9MDtlPGg7ZSsrKWM9YS5jaGFyQ29kZUF0KGUpLDU1Mjk2PT09KDY0NTEyJmMpJiZlKzE8aCYmKGQ9YS5jaGFyQ29kZUF0KGUrMSksNTYzMjA9PT0oNjQ1MTImZCkmJihjPTY1NTM2KyhjLTU1Mjk2PDwxMCkrKGQtNTYzMjApLGUrKykpLGkrPWM8MTI4PzE6YzwyMDQ4PzI6Yzw2NTUzNj8zOjQ7Zm9yKGI9Zy51aW50OGFycmF5P25ldyBVaW50OEFycmF5KGkpOm5ldyBBcnJheShpKSxmPTAsZT0wO2Y8aTtlKyspYz1hLmNoYXJDb2RlQXQoZSksNTUyOTY9PT0oNjQ1MTImYykmJmUrMTxoJiYoZD1hLmNoYXJDb2RlQXQoZSsxKSw1NjMyMD09PSg2NDUxMiZkKSYmKGM9NjU1MzYrKGMtNTUyOTY8PDEwKSsoZC01NjMyMCksZSsrKSksYzwxMjg/YltmKytdPWM6YzwyMDQ4PyhiW2YrK109MTkyfGM+Pj42LGJbZisrXT0xMjh8NjMmYyk6Yzw2NTUzNj8oYltmKytdPTIyNHxjPj4+MTIsYltmKytdPTEyOHxjPj4+NiY2MyxiW2YrK109MTI4fDYzJmMpOihiW2YrK109MjQwfGM+Pj4xOCxiW2YrK109MTI4fGM+Pj4xMiY2MyxiW2YrK109MTI4fGM+Pj42JjYzLGJbZisrXT0xMjh8NjMmYyk7cmV0dXJuIGJ9LG09ZnVuY3Rpb24oYSxiKXt2YXIgYztmb3IoYj1ifHxhLmxlbmd0aCxiPmEubGVuZ3RoJiYoYj1hLmxlbmd0aCksYz1iLTE7Yz49MCYmMTI4PT09KDE5MiZhW2NdKTspYy0tO3JldHVybiBjPDA/YjowPT09Yz9iOmMralthW2NdXT5iP2M6Yn0sbj1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxnPWEubGVuZ3RoLGg9bmV3IEFycmF5KDIqZyk7Zm9yKGM9MCxiPTA7YjxnOylpZihkPWFbYisrXSxkPDEyOCloW2MrK109ZDtlbHNlIGlmKGU9altkXSxlPjQpaFtjKytdPTY1NTMzLGIrPWUtMTtlbHNle2ZvcihkJj0yPT09ZT8zMTozPT09ZT8xNTo3O2U+MSYmYjxnOylkPWQ8PDZ8NjMmYVtiKytdLGUtLTtlPjE/aFtjKytdPTY1NTMzOmQ8NjU1MzY/aFtjKytdPWQ6KGQtPTY1NTM2LGhbYysrXT01NTI5NnxkPj4xMCYxMDIzLGhbYysrXT01NjMyMHwxMDIzJmQpfXJldHVybiBoLmxlbmd0aCE9PWMmJihoLnN1YmFycmF5P2g9aC5zdWJhcnJheSgwLGMpOmgubGVuZ3RoPWMpLGYuYXBwbHlGcm9tQ2hhckNvZGUoaCl9O2MudXRmOGVuY29kZT1mdW5jdGlvbihhKXtyZXR1cm4gZy5ub2RlYnVmZmVyP2gubmV3QnVmZmVyKGEsXCJ1dGYtOFwiKTpsKGEpfSxjLnV0ZjhkZWNvZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGcubm9kZWJ1ZmZlcj9mLnRyYW5zZm9ybVRvKFwibm9kZWJ1ZmZlclwiLGEpLnRvU3RyaW5nKFwidXRmLThcIik6KGE9Zi50cmFuc2Zvcm1UbyhnLnVpbnQ4YXJyYXk/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiLGEpLG4oYSkpfSxmLmluaGVyaXRzKGQsaSksZC5wcm90b3R5cGUucHJvY2Vzc0NodW5rPWZ1bmN0aW9uKGEpe3ZhciBiPWYudHJhbnNmb3JtVG8oZy51aW50OGFycmF5P1widWludDhhcnJheVwiOlwiYXJyYXlcIixhLmRhdGEpO2lmKHRoaXMubGVmdE92ZXImJnRoaXMubGVmdE92ZXIubGVuZ3RoKXtpZihnLnVpbnQ4YXJyYXkpe3ZhciBkPWI7Yj1uZXcgVWludDhBcnJheShkLmxlbmd0aCt0aGlzLmxlZnRPdmVyLmxlbmd0aCksYi5zZXQodGhpcy5sZWZ0T3ZlciwwKSxiLnNldChkLHRoaXMubGVmdE92ZXIubGVuZ3RoKX1lbHNlIGI9dGhpcy5sZWZ0T3Zlci5jb25jYXQoYik7dGhpcy5sZWZ0T3Zlcj1udWxsfXZhciBlPW0oYiksaD1iO2UhPT1iLmxlbmd0aCYmKGcudWludDhhcnJheT8oaD1iLnN1YmFycmF5KDAsZSksdGhpcy5sZWZ0T3Zlcj1iLnN1YmFycmF5KGUsYi5sZW5ndGgpKTooaD1iLnNsaWNlKDAsZSksdGhpcy5sZWZ0T3Zlcj1iLnNsaWNlKGUsYi5sZW5ndGgpKSksdGhpcy5wdXNoKHtkYXRhOmMudXRmOGRlY29kZShoKSxtZXRhOmEubWV0YX0pfSxkLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe3RoaXMubGVmdE92ZXImJnRoaXMubGVmdE92ZXIubGVuZ3RoJiYodGhpcy5wdXNoKHtkYXRhOmMudXRmOGRlY29kZSh0aGlzLmxlZnRPdmVyKSxtZXRhOnt9fSksdGhpcy5sZWZ0T3Zlcj1udWxsKX0sYy5VdGY4RGVjb2RlV29ya2VyPWQsZi5pbmhlcml0cyhlLGkpLGUucHJvdG90eXBlLnByb2Nlc3NDaHVuaz1mdW5jdGlvbihhKXt0aGlzLnB1c2goe2RhdGE6Yy51dGY4ZW5jb2RlKGEuZGF0YSksbWV0YTphLm1ldGF9KX0sYy5VdGY4RW5jb2RlV29ya2VyPWV9LHtcIi4vbm9kZWpzVXRpbHNcIjoxMixcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIjoyNSxcIi4vc3VwcG9ydFwiOjI3LFwiLi91dGlsc1wiOjI5fV0sMjk6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3ZhciBiPW51bGw7cmV0dXJuIGI9aS51aW50OGFycmF5P25ldyBVaW50OEFycmF5KGEubGVuZ3RoKTpuZXcgQXJyYXkoYS5sZW5ndGgpLGYoYSxiKX1mdW5jdGlvbiBlKGEpe3JldHVybiBhfWZ1bmN0aW9uIGYoYSxiKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYyliW2NdPTI1NSZhLmNoYXJDb2RlQXQoYyk7cmV0dXJuIGJ9ZnVuY3Rpb24gZyhhKXt2YXIgYj02NTUzNixkPWMuZ2V0VHlwZU9mKGEpLGU9ITA7aWYoXCJ1aW50OGFycmF5XCI9PT1kP2U9bi5hcHBseUNhbkJlVXNlZC51aW50OGFycmF5Olwibm9kZWJ1ZmZlclwiPT09ZCYmKGU9bi5hcHBseUNhbkJlVXNlZC5ub2RlYnVmZmVyKSxlKWZvcig7Yj4xOyl0cnl7cmV0dXJuIG4uc3RyaW5naWZ5QnlDaHVuayhhLGQsYil9Y2F0Y2goZil7Yj1NYXRoLmZsb29yKGIvMil9cmV0dXJuIG4uc3RyaW5naWZ5QnlDaGFyKGEpfWZ1bmN0aW9uIGgoYSxiKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyliW2NdPWFbY107cmV0dXJuIGJ9dmFyIGk9YShcIi4vc3VwcG9ydFwiKSxqPWEoXCIuL2Jhc2U2NFwiKSxrPWEoXCIuL25vZGVqc1V0aWxzXCIpLGw9YShcImNvcmUtanMvbGlicmFyeS9mbi9zZXQtaW1tZWRpYXRlXCIpLG09YShcIi4vZXh0ZXJuYWxcIik7Yy5uZXdCbG9iPWZ1bmN0aW9uKGEsYil7Yy5jaGVja1N1cHBvcnQoXCJibG9iXCIpO3RyeXtyZXR1cm4gbmV3IEJsb2IoW2FdLHt0eXBlOmJ9KX1jYXRjaChkKXt0cnl7dmFyIGU9d2luZG93LkJsb2JCdWlsZGVyfHx3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXIsZj1uZXcgZTtyZXR1cm4gZi5hcHBlbmQoYSksZi5nZXRCbG9iKGIpfWNhdGNoKGQpe3Rocm93IG5ldyBFcnJvcihcIkJ1ZyA6IGNhbid0IGNvbnN0cnVjdCB0aGUgQmxvYi5cIil9fX07dmFyIG49e3N0cmluZ2lmeUJ5Q2h1bms6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9MCxmPWEubGVuZ3RoO2lmKGY8PWMpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxhKTtmb3IoO2U8ZjspXCJhcnJheVwiPT09Ynx8XCJub2RlYnVmZmVyXCI9PT1iP2QucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYS5zbGljZShlLE1hdGgubWluKGUrYyxmKSkpKTpkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGEuc3ViYXJyYXkoZSxNYXRoLm1pbihlK2MsZikpKSksZSs9YztyZXR1cm4gZC5qb2luKFwiXCIpfSxzdHJpbmdpZnlCeUNoYXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVwiXCIsYz0wO2M8YS5sZW5ndGg7YysrKWIrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtjXSk7cmV0dXJuIGJ9LGFwcGx5Q2FuQmVVc2VkOnt1aW50OGFycmF5OmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBpLnVpbnQ4YXJyYXkmJjE9PT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpLmxlbmd0aH1jYXRjaChhKXtyZXR1cm4hMX19KCksbm9kZWJ1ZmZlcjpmdW5jdGlvbigpe3RyeXtyZXR1cm4gaS5ub2RlYnVmZmVyJiYxPT09U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGsubmV3QnVmZmVyKDEpKS5sZW5ndGh9Y2F0Y2goYSl7cmV0dXJuITF9fSgpfX07Yy5hcHBseUZyb21DaGFyQ29kZT1nO3ZhciBvPXt9O28uc3RyaW5nPXtzdHJpbmc6ZSxhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gZihhLG5ldyBBcnJheShhLmxlbmd0aCkpfSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gby5zdHJpbmcudWludDhhcnJheShhKS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxuZXcgVWludDhBcnJheShhLmxlbmd0aCkpO1xyXG59LG5vZGVidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxrLm5ld0J1ZmZlcihhLmxlbmd0aCkpfX0sby5hcnJheT17c3RyaW5nOmcsYXJyYXk6ZSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSkuYnVmZmVyfSx1aW50OGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgVWludDhBcnJheShhKX0sbm9kZWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gay5uZXdCdWZmZXIoYSl9fSxvLmFycmF5YnVmZmVyPXtzdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIGcobmV3IFVpbnQ4QXJyYXkoYSkpfSxhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gaChuZXcgVWludDhBcnJheShhKSxuZXcgQXJyYXkoYS5ieXRlTGVuZ3RoKSl9LGFycmF5YnVmZmVyOmUsdWludDhhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGsubmV3QnVmZmVyKG5ldyBVaW50OEFycmF5KGEpKX19LG8udWludDhhcnJheT17c3RyaW5nOmcsYXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoYSxuZXcgQXJyYXkoYS5sZW5ndGgpKX0sYXJyYXlidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYnVmZmVyfSx1aW50OGFycmF5OmUsbm9kZWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gay5uZXdCdWZmZXIoYSl9fSxvLm5vZGVidWZmZXI9e3N0cmluZzpnLGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBoKGEsbmV3IEFycmF5KGEubGVuZ3RoKSl9LGFycmF5YnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBvLm5vZGVidWZmZXIudWludDhhcnJheShhKS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGgoYSxuZXcgVWludDhBcnJheShhLmxlbmd0aCkpfSxub2RlYnVmZmVyOmV9LGMudHJhbnNmb3JtVG89ZnVuY3Rpb24oYSxiKXtpZihifHwoYj1cIlwiKSwhYSlyZXR1cm4gYjtjLmNoZWNrU3VwcG9ydChhKTt2YXIgZD1jLmdldFR5cGVPZihiKSxlPW9bZF1bYV0oYik7cmV0dXJuIGV9LGMuZ2V0VHlwZU9mPWZ1bmN0aW9uKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP1wic3RyaW5nXCI6XCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpP1wiYXJyYXlcIjppLm5vZGVidWZmZXImJmsuaXNCdWZmZXIoYSk/XCJub2RlYnVmZmVyXCI6aS51aW50OGFycmF5JiZhIGluc3RhbmNlb2YgVWludDhBcnJheT9cInVpbnQ4YXJyYXlcIjppLmFycmF5YnVmZmVyJiZhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/XCJhcnJheWJ1ZmZlclwiOnZvaWQgMH0sYy5jaGVja1N1cHBvcnQ9ZnVuY3Rpb24oYSl7dmFyIGI9aVthLnRvTG93ZXJDYXNlKCldO2lmKCFiKXRocm93IG5ldyBFcnJvcihhK1wiIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBwbGF0Zm9ybVwiKX0sYy5NQVhfVkFMVUVfMTZCSVRTPTY1NTM1LGMuTUFYX1ZBTFVFXzMyQklUUz0tMSxjLnByZXR0eT1mdW5jdGlvbihhKXt2YXIgYixjLGQ9XCJcIjtmb3IoYz0wO2M8KGF8fFwiXCIpLmxlbmd0aDtjKyspYj1hLmNoYXJDb2RlQXQoYyksZCs9XCJcXFxceFwiKyhiPDE2P1wiMFwiOlwiXCIpK2IudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGR9LGMuZGVsYXk9ZnVuY3Rpb24oYSxiLGMpe2woZnVuY3Rpb24oKXthLmFwcGx5KGN8fG51bGwsYnx8W10pfSl9LGMuaW5oZXJpdHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe307Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGUsYS5wcm90b3R5cGU9bmV3IGN9LGMuZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXt9O2ZvcihhPTA7YTxhcmd1bWVudHMubGVuZ3RoO2ErKylmb3IoYiBpbiBhcmd1bWVudHNbYV0pYXJndW1lbnRzW2FdLmhhc093blByb3BlcnR5KGIpJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgY1tiXSYmKGNbYl09YXJndW1lbnRzW2FdW2JdKTtyZXR1cm4gY30sYy5wcmVwYXJlQ29udGVudD1mdW5jdGlvbihhLGIsZSxmLGcpe3ZhciBoPW0uUHJvbWlzZS5yZXNvbHZlKGIpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGkuYmxvYiYmYSBpbnN0YW5jZW9mIEJsb2ImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBGaWxlUmVhZGVyP25ldyBtLlByb21pc2UoZnVuY3Rpb24oYixjKXt2YXIgZD1uZXcgRmlsZVJlYWRlcjtkLm9ubG9hZD1mdW5jdGlvbihhKXtiKGEudGFyZ2V0LnJlc3VsdCl9LGQub25lcnJvcj1mdW5jdGlvbihhKXtjKGEudGFyZ2V0LmVycm9yKX0sZC5yZWFkQXNBcnJheUJ1ZmZlcihhKX0pOmF9KTtyZXR1cm4gaC50aGVuKGZ1bmN0aW9uKGIpe3ZhciBoPWMuZ2V0VHlwZU9mKGIpO3JldHVybiBoPyhcImFycmF5YnVmZmVyXCI9PT1oP2I9Yy50cmFuc2Zvcm1UbyhcInVpbnQ4YXJyYXlcIixiKTpcInN0cmluZ1wiPT09aCYmKGc/Yj1qLmRlY29kZShiKTplJiZmIT09ITAmJihiPWQoYikpKSxiKTptLlByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIlRoZSBkYXRhIG9mICdcIithK1wiJyBpcyBpbiBhbiB1bnN1cHBvcnRlZCBmb3JtYXQgIVwiKSl9KX19LHtcIi4vYmFzZTY0XCI6MSxcIi4vZXh0ZXJuYWxcIjo2LFwiLi9ub2RlanNVdGlsc1wiOjEyLFwiLi9zdXBwb3J0XCI6MjcsXCJjb3JlLWpzL2xpYnJhcnkvZm4vc2V0LWltbWVkaWF0ZVwiOjM0fV0sMzA6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe3RoaXMuZmlsZXM9W10sdGhpcy5sb2FkT3B0aW9ucz1hfXZhciBlPWEoXCIuL3JlYWRlci9yZWFkZXJGb3JcIiksZj1hKFwiLi91dGlsc1wiKSxnPWEoXCIuL3NpZ25hdHVyZVwiKSxoPWEoXCIuL3ppcEVudHJ5XCIpLGk9KGEoXCIuL3V0ZjhcIiksYShcIi4vc3VwcG9ydFwiKSk7ZC5wcm90b3R5cGU9e2NoZWNrU2lnbmF0dXJlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLnJlYWRlci5yZWFkQW5kQ2hlY2tTaWduYXR1cmUoYSkpe3RoaXMucmVhZGVyLmluZGV4LT00O3ZhciBiPXRoaXMucmVhZGVyLnJlYWRTdHJpbmcoNCk7dGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCBvciBidWcgOiB1bmV4cGVjdGVkIHNpZ25hdHVyZSAoXCIrZi5wcmV0dHkoYikrXCIsIGV4cGVjdGVkIFwiK2YucHJldHR5KGEpK1wiKVwiKX19LGlzU2lnbmF0dXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZWFkZXIuaW5kZXg7dGhpcy5yZWFkZXIuc2V0SW5kZXgoYSk7dmFyIGQ9dGhpcy5yZWFkZXIucmVhZFN0cmluZyg0KSxlPWQ9PT1iO3JldHVybiB0aGlzLnJlYWRlci5zZXRJbmRleChjKSxlfSxyZWFkQmxvY2tFbmRPZkNlbnRyYWw6ZnVuY3Rpb24oKXt0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDQpLHRoaXMuemlwQ29tbWVudExlbmd0aD10aGlzLnJlYWRlci5yZWFkSW50KDIpO3ZhciBhPXRoaXMucmVhZGVyLnJlYWREYXRhKHRoaXMuemlwQ29tbWVudExlbmd0aCksYj1pLnVpbnQ4YXJyYXk/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiLGM9Zi50cmFuc2Zvcm1UbyhiLGEpO3RoaXMuemlwQ29tbWVudD10aGlzLmxvYWRPcHRpb25zLmRlY29kZUZpbGVOYW1lKGMpfSxyZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbDpmdW5jdGlvbigpe3RoaXMuemlwNjRFbmRPZkNlbnRyYWxTaXplPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5yZWFkZXIuc2tpcCg0KSx0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YT17fTtmb3IodmFyIGEsYixjLGQ9dGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUtNDQsZT0wO2U8ZDspYT10aGlzLnJlYWRlci5yZWFkSW50KDIpLGI9dGhpcy5yZWFkZXIucmVhZEludCg0KSxjPXRoaXMucmVhZGVyLnJlYWREYXRhKGIpLHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YVthXT17aWQ6YSxsZW5ndGg6Yix2YWx1ZTpjfX0scmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWxMb2NhdG9yOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNrV2l0aFppcDY0Q2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5kaXNrc0NvdW50PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5kaXNrc0NvdW50PjEpdGhyb3cgbmV3IEVycm9yKFwiTXVsdGktdm9sdW1lcyB6aXAgYXJlIG5vdCBzdXBwb3J0ZWRcIil9LHJlYWRMb2NhbEZpbGVzOmZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IoYT0wO2E8dGhpcy5maWxlcy5sZW5ndGg7YSsrKWI9dGhpcy5maWxlc1thXSx0aGlzLnJlYWRlci5zZXRJbmRleChiLmxvY2FsSGVhZGVyT2Zmc2V0KSx0aGlzLmNoZWNrU2lnbmF0dXJlKGcuTE9DQUxfRklMRV9IRUFERVIpLGIucmVhZExvY2FsUGFydCh0aGlzLnJlYWRlciksYi5oYW5kbGVVVEY4KCksYi5wcm9jZXNzQXR0cmlidXRlcygpfSxyZWFkQ2VudHJhbERpcjpmdW5jdGlvbigpe3ZhciBhO2Zvcih0aGlzLnJlYWRlci5zZXRJbmRleCh0aGlzLmNlbnRyYWxEaXJPZmZzZXQpO3RoaXMucmVhZGVyLnJlYWRBbmRDaGVja1NpZ25hdHVyZShnLkNFTlRSQUxfRklMRV9IRUFERVIpOylhPW5ldyBoKHt6aXA2NDp0aGlzLnppcDY0fSx0aGlzLmxvYWRPcHRpb25zKSxhLnJlYWRDZW50cmFsUGFydCh0aGlzLnJlYWRlciksdGhpcy5maWxlcy5wdXNoKGEpO2lmKHRoaXMuY2VudHJhbERpclJlY29yZHMhPT10aGlzLmZpbGVzLmxlbmd0aCYmMCE9PXRoaXMuY2VudHJhbERpclJlY29yZHMmJjA9PT10aGlzLmZpbGVzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIG9yIGJ1ZzogZXhwZWN0ZWQgXCIrdGhpcy5jZW50cmFsRGlyUmVjb3JkcytcIiByZWNvcmRzIGluIGNlbnRyYWwgZGlyLCBnb3QgXCIrdGhpcy5maWxlcy5sZW5ndGgpfSxyZWFkRW5kT2ZDZW50cmFsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUoZy5DRU5UUkFMX0RJUkVDVE9SWV9FTkQpO2lmKGE8MCl7dmFyIGI9IXRoaXMuaXNTaWduYXR1cmUoMCxnLkxPQ0FMX0ZJTEVfSEVBREVSKTt0aHJvdyBiP25ldyBFcnJvcihcIkNhbid0IGZpbmQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5IDogaXMgdGhpcyBhIHppcCBmaWxlID8gSWYgaXQgaXMsIHNlZSBodHRwOi8vc3R1ay5naXRodWIuaW8vanN6aXAvZG9jdW1lbnRhdGlvbi9ob3d0by9yZWFkX3ppcC5odG1sXCIpOm5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBjYW4ndCBmaW5kIGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeVwiKX10aGlzLnJlYWRlci5zZXRJbmRleChhKTt2YXIgYz1hO2lmKHRoaXMuY2hlY2tTaWduYXR1cmUoZy5DRU5UUkFMX0RJUkVDVE9SWV9FTkQpLHRoaXMucmVhZEJsb2NrRW5kT2ZDZW50cmFsKCksdGhpcy5kaXNrTnVtYmVyPT09Zi5NQVhfVkFMVUVfMTZCSVRTfHx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PT09Zi5NQVhfVkFMVUVfMTZCSVRTfHx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzT25UaGlzRGlzaz09PWYuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyUmVjb3Jkcz09PWYuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyU2l6ZT09PWYuTUFYX1ZBTFVFXzMyQklUU3x8dGhpcy5jZW50cmFsRGlyT2Zmc2V0PT09Zi5NQVhfVkFMVUVfMzJCSVRTKXtpZih0aGlzLnppcDY0PSEwLGE9dGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUoZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SKSxhPDApdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcCA6IGNhbid0IGZpbmQgdGhlIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yXCIpO2lmKHRoaXMucmVhZGVyLnNldEluZGV4KGEpLHRoaXMuY2hlY2tTaWduYXR1cmUoZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SKSx0aGlzLnJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsTG9jYXRvcigpLCF0aGlzLmlzU2lnbmF0dXJlKHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcixnLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORCkmJih0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXI9dGhpcy5yZWFkZXIubGFzdEluZGV4T2ZTaWduYXR1cmUoZy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9FTkQpLHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpcjwwKSl0aHJvdyBuZXcgRXJyb3IoXCJDb3JydXB0ZWQgemlwIDogY2FuJ3QgZmluZCB0aGUgWklQNjQgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5XCIpO3RoaXMucmVhZGVyLnNldEluZGV4KHRoaXMucmVsYXRpdmVPZmZzZXRFbmRPZlppcDY0Q2VudHJhbERpciksdGhpcy5jaGVja1NpZ25hdHVyZShnLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORCksdGhpcy5yZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbCgpfXZhciBkPXRoaXMuY2VudHJhbERpck9mZnNldCt0aGlzLmNlbnRyYWxEaXJTaXplO3RoaXMuemlwNjQmJihkKz0yMCxkKz0xMit0aGlzLnppcDY0RW5kT2ZDZW50cmFsU2l6ZSk7dmFyIGU9Yy1kO2lmKGU+MCl0aGlzLmlzU2lnbmF0dXJlKGMsZy5DRU5UUkFMX0ZJTEVfSEVBREVSKXx8KHRoaXMucmVhZGVyLnplcm89ZSk7ZWxzZSBpZihlPDApdGhyb3cgbmV3IEVycm9yKFwiQ29ycnVwdGVkIHppcDogbWlzc2luZyBcIitNYXRoLmFicyhlKStcIiBieXRlcy5cIil9LHByZXBhcmVSZWFkZXI6ZnVuY3Rpb24oYSl7dGhpcy5yZWFkZXI9ZShhKX0sbG9hZDpmdW5jdGlvbihhKXt0aGlzLnByZXBhcmVSZWFkZXIoYSksdGhpcy5yZWFkRW5kT2ZDZW50cmFsKCksdGhpcy5yZWFkQ2VudHJhbERpcigpLHRoaXMucmVhZExvY2FsRmlsZXMoKX19LGIuZXhwb3J0cz1kfSx7XCIuL3JlYWRlci9yZWFkZXJGb3JcIjoxOSxcIi4vc2lnbmF0dXJlXCI6MjAsXCIuL3N1cHBvcnRcIjoyNyxcIi4vdXRmOFwiOjI4LFwiLi91dGlsc1wiOjI5LFwiLi96aXBFbnRyeVwiOjMxfV0sMzE6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYil7dGhpcy5vcHRpb25zPWEsdGhpcy5sb2FkT3B0aW9ucz1ifXZhciBlPWEoXCIuL3JlYWRlci9yZWFkZXJGb3JcIiksZj1hKFwiLi91dGlsc1wiKSxnPWEoXCIuL2NvbXByZXNzZWRPYmplY3RcIiksaD1hKFwiLi9jcmMzMlwiKSxpPWEoXCIuL3V0ZjhcIiksaj1hKFwiLi9jb21wcmVzc2lvbnNcIiksaz1hKFwiLi9zdXBwb3J0XCIpLGw9MCxtPTMsbj1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gailpZihqLmhhc093blByb3BlcnR5KGIpJiZqW2JdLm1hZ2ljPT09YSlyZXR1cm4galtiXTtyZXR1cm4gbnVsbH07ZC5wcm90b3R5cGU9e2lzRW5jcnlwdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIDE9PT0oMSZ0aGlzLmJpdEZsYWcpfSx1c2VVVEY4OmZ1bmN0aW9uKCl7cmV0dXJuIDIwNDg9PT0oMjA0OCZ0aGlzLmJpdEZsYWcpfSxyZWFkTG9jYWxQYXJ0OmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoYS5za2lwKDIyKSx0aGlzLmZpbGVOYW1lTGVuZ3RoPWEucmVhZEludCgyKSxjPWEucmVhZEludCgyKSx0aGlzLmZpbGVOYW1lPWEucmVhZERhdGEodGhpcy5maWxlTmFtZUxlbmd0aCksYS5za2lwKGMpLHRoaXMuY29tcHJlc3NlZFNpemU9PT0tMXx8dGhpcy51bmNvbXByZXNzZWRTaXplPT09LTEpdGhyb3cgbmV3IEVycm9yKFwiQnVnIG9yIGNvcnJ1cHRlZCB6aXAgOiBkaWRuJ3QgZ2V0IGVub3VnaCBpbmZvcm1hdGlvbnMgZnJvbSB0aGUgY2VudHJhbCBkaXJlY3RvcnkgKGNvbXByZXNzZWRTaXplID09PSAtMSB8fCB1bmNvbXByZXNzZWRTaXplID09PSAtMSlcIik7aWYoYj1uKHRoaXMuY29tcHJlc3Npb25NZXRob2QpLG51bGw9PT1iKXRocm93IG5ldyBFcnJvcihcIkNvcnJ1cHRlZCB6aXAgOiBjb21wcmVzc2lvbiBcIitmLnByZXR0eSh0aGlzLmNvbXByZXNzaW9uTWV0aG9kKStcIiB1bmtub3duIChpbm5lciBmaWxlIDogXCIrZi50cmFuc2Zvcm1UbyhcInN0cmluZ1wiLHRoaXMuZmlsZU5hbWUpK1wiKVwiKTt0aGlzLmRlY29tcHJlc3NlZD1uZXcgZyh0aGlzLmNvbXByZXNzZWRTaXplLHRoaXMudW5jb21wcmVzc2VkU2l6ZSx0aGlzLmNyYzMyLGIsYS5yZWFkRGF0YSh0aGlzLmNvbXByZXNzZWRTaXplKSl9LHJlYWRDZW50cmFsUGFydDpmdW5jdGlvbihhKXt0aGlzLnZlcnNpb25NYWRlQnk9YS5yZWFkSW50KDIpLGEuc2tpcCgyKSx0aGlzLmJpdEZsYWc9YS5yZWFkSW50KDIpLHRoaXMuY29tcHJlc3Npb25NZXRob2Q9YS5yZWFkU3RyaW5nKDIpLHRoaXMuZGF0ZT1hLnJlYWREYXRlKCksdGhpcy5jcmMzMj1hLnJlYWRJbnQoNCksdGhpcy5jb21wcmVzc2VkU2l6ZT1hLnJlYWRJbnQoNCksdGhpcy51bmNvbXByZXNzZWRTaXplPWEucmVhZEludCg0KTt2YXIgYj1hLnJlYWRJbnQoMik7aWYodGhpcy5leHRyYUZpZWxkc0xlbmd0aD1hLnJlYWRJbnQoMiksdGhpcy5maWxlQ29tbWVudExlbmd0aD1hLnJlYWRJbnQoMiksdGhpcy5kaXNrTnVtYmVyU3RhcnQ9YS5yZWFkSW50KDIpLHRoaXMuaW50ZXJuYWxGaWxlQXR0cmlidXRlcz1hLnJlYWRJbnQoMiksdGhpcy5leHRlcm5hbEZpbGVBdHRyaWJ1dGVzPWEucmVhZEludCg0KSx0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0PWEucmVhZEludCg0KSx0aGlzLmlzRW5jcnlwdGVkKCkpdGhyb3cgbmV3IEVycm9yKFwiRW5jcnlwdGVkIHppcCBhcmUgbm90IHN1cHBvcnRlZFwiKTthLnNraXAoYiksdGhpcy5yZWFkRXh0cmFGaWVsZHMoYSksdGhpcy5wYXJzZVpJUDY0RXh0cmFGaWVsZChhKSx0aGlzLmZpbGVDb21tZW50PWEucmVhZERhdGEodGhpcy5maWxlQ29tbWVudExlbmd0aCl9LHByb2Nlc3NBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7dGhpcy51bml4UGVybWlzc2lvbnM9bnVsbCx0aGlzLmRvc1Blcm1pc3Npb25zPW51bGw7dmFyIGE9dGhpcy52ZXJzaW9uTWFkZUJ5Pj44O3RoaXMuZGlyPSEhKDE2JnRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcyksYT09PWwmJih0aGlzLmRvc1Blcm1pc3Npb25zPTYzJnRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcyksYT09PW0mJih0aGlzLnVuaXhQZXJtaXNzaW9ucz10aGlzLmV4dGVybmFsRmlsZUF0dHJpYnV0ZXM+PjE2JjY1NTM1KSx0aGlzLmRpcnx8XCIvXCIhPT10aGlzLmZpbGVOYW1lU3RyLnNsaWNlKC0xKXx8KHRoaXMuZGlyPSEwKX0scGFyc2VaSVA2NEV4dHJhRmllbGQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5leHRyYUZpZWxkc1sxXSl7dmFyIGI9ZSh0aGlzLmV4dHJhRmllbGRzWzFdLnZhbHVlKTt0aGlzLnVuY29tcHJlc3NlZFNpemU9PT1mLk1BWF9WQUxVRV8zMkJJVFMmJih0aGlzLnVuY29tcHJlc3NlZFNpemU9Yi5yZWFkSW50KDgpKSx0aGlzLmNvbXByZXNzZWRTaXplPT09Zi5NQVhfVkFMVUVfMzJCSVRTJiYodGhpcy5jb21wcmVzc2VkU2l6ZT1iLnJlYWRJbnQoOCkpLHRoaXMubG9jYWxIZWFkZXJPZmZzZXQ9PT1mLk1BWF9WQUxVRV8zMkJJVFMmJih0aGlzLmxvY2FsSGVhZGVyT2Zmc2V0PWIucmVhZEludCg4KSksdGhpcy5kaXNrTnVtYmVyU3RhcnQ9PT1mLk1BWF9WQUxVRV8zMkJJVFMmJih0aGlzLmRpc2tOdW1iZXJTdGFydD1iLnJlYWRJbnQoNCkpfX0scmVhZEV4dHJhRmllbGRzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPWEuaW5kZXgrdGhpcy5leHRyYUZpZWxkc0xlbmd0aDtmb3IodGhpcy5leHRyYUZpZWxkc3x8KHRoaXMuZXh0cmFGaWVsZHM9e30pO2EuaW5kZXg8ZTspYj1hLnJlYWRJbnQoMiksYz1hLnJlYWRJbnQoMiksZD1hLnJlYWREYXRhKGMpLHRoaXMuZXh0cmFGaWVsZHNbYl09e2lkOmIsbGVuZ3RoOmMsdmFsdWU6ZH19LGhhbmRsZVVURjg6ZnVuY3Rpb24oKXt2YXIgYT1rLnVpbnQ4YXJyYXk/XCJ1aW50OGFycmF5XCI6XCJhcnJheVwiO2lmKHRoaXMudXNlVVRGOCgpKXRoaXMuZmlsZU5hbWVTdHI9aS51dGY4ZGVjb2RlKHRoaXMuZmlsZU5hbWUpLHRoaXMuZmlsZUNvbW1lbnRTdHI9aS51dGY4ZGVjb2RlKHRoaXMuZmlsZUNvbW1lbnQpO2Vsc2V7dmFyIGI9dGhpcy5maW5kRXh0cmFGaWVsZFVuaWNvZGVQYXRoKCk7aWYobnVsbCE9PWIpdGhpcy5maWxlTmFtZVN0cj1iO2Vsc2V7dmFyIGM9Zi50cmFuc2Zvcm1UbyhhLHRoaXMuZmlsZU5hbWUpO3RoaXMuZmlsZU5hbWVTdHI9dGhpcy5sb2FkT3B0aW9ucy5kZWNvZGVGaWxlTmFtZShjKX12YXIgZD10aGlzLmZpbmRFeHRyYUZpZWxkVW5pY29kZUNvbW1lbnQoKTtpZihudWxsIT09ZCl0aGlzLmZpbGVDb21tZW50U3RyPWQ7ZWxzZXt2YXIgZT1mLnRyYW5zZm9ybVRvKGEsdGhpcy5maWxlQ29tbWVudCk7dGhpcy5maWxlQ29tbWVudFN0cj10aGlzLmxvYWRPcHRpb25zLmRlY29kZUZpbGVOYW1lKGUpfX19LGZpbmRFeHRyYUZpZWxkVW5pY29kZVBhdGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dHJhRmllbGRzWzI4Nzg5XTtpZihhKXt2YXIgYj1lKGEudmFsdWUpO3JldHVybiAxIT09Yi5yZWFkSW50KDEpP251bGw6aCh0aGlzLmZpbGVOYW1lKSE9PWIucmVhZEludCg0KT9udWxsOmkudXRmOGRlY29kZShiLnJlYWREYXRhKGEubGVuZ3RoLTUpKX1yZXR1cm4gbnVsbH0sZmluZEV4dHJhRmllbGRVbmljb2RlQ29tbWVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0cmFGaWVsZHNbMjU0NjFdO2lmKGEpe3ZhciBiPWUoYS52YWx1ZSk7cmV0dXJuIDEhPT1iLnJlYWRJbnQoMSk/bnVsbDpoKHRoaXMuZmlsZUNvbW1lbnQpIT09Yi5yZWFkSW50KDQpP251bGw6aS51dGY4ZGVjb2RlKGIucmVhZERhdGEoYS5sZW5ndGgtNSkpfXJldHVybiBudWxsfX0sYi5leHBvcnRzPWR9LHtcIi4vY29tcHJlc3NlZE9iamVjdFwiOjIsXCIuL2NvbXByZXNzaW9uc1wiOjMsXCIuL2NyYzMyXCI6NCxcIi4vcmVhZGVyL3JlYWRlckZvclwiOjE5LFwiLi9zdXBwb3J0XCI6MjcsXCIuL3V0ZjhcIjoyOCxcIi4vdXRpbHNcIjoyOX1dLDMyOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YShcIi4vc3RyZWFtL1N0cmVhbUhlbHBlclwiKSxlPWEoXCIuL3N0cmVhbS9EYXRhV29ya2VyXCIpLGY9YShcIi4vdXRmOFwiKSxnPWEoXCIuL2NvbXByZXNzZWRPYmplY3RcIiksaD1hKFwiLi9zdHJlYW0vR2VuZXJpY1dvcmtlclwiKSxpPWZ1bmN0aW9uKGEsYixjKXt0aGlzLm5hbWU9YSx0aGlzLmRpcj1jLmRpcix0aGlzLmRhdGU9Yy5kYXRlLHRoaXMuY29tbWVudD1jLmNvbW1lbnQsdGhpcy51bml4UGVybWlzc2lvbnM9Yy51bml4UGVybWlzc2lvbnMsdGhpcy5kb3NQZXJtaXNzaW9ucz1jLmRvc1Blcm1pc3Npb25zLHRoaXMuX2RhdGE9Yix0aGlzLl9kYXRhQmluYXJ5PWMuYmluYXJ5LHRoaXMub3B0aW9ucz17Y29tcHJlc3Npb246Yy5jb21wcmVzc2lvbixjb21wcmVzc2lvbk9wdGlvbnM6Yy5jb21wcmVzc2lvbk9wdGlvbnN9fTtpLnByb3RvdHlwZT17aW50ZXJuYWxTdHJlYW06ZnVuY3Rpb24oYSl7dmFyIGI9YS50b0xvd2VyQ2FzZSgpLGM9XCJzdHJpbmdcIj09PWJ8fFwidGV4dFwiPT09YjtcImJpbmFyeXN0cmluZ1wiIT09YiYmXCJ0ZXh0XCIhPT1ifHwoYj1cInN0cmluZ1wiKTt2YXIgZT10aGlzLl9kZWNvbXByZXNzV29ya2VyKCksZz0hdGhpcy5fZGF0YUJpbmFyeTtyZXR1cm4gZyYmIWMmJihlPWUucGlwZShuZXcgZi5VdGY4RW5jb2RlV29ya2VyKSksIWcmJmMmJihlPWUucGlwZShuZXcgZi5VdGY4RGVjb2RlV29ya2VyKSksbmV3IGQoZSxiLFwiXCIpfSxhc3luYzpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmludGVybmFsU3RyZWFtKGEpLmFjY3VtdWxhdGUoYil9LG5vZGVTdHJlYW06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5pbnRlcm5hbFN0cmVhbShhfHxcIm5vZGVidWZmZXJcIikudG9Ob2RlanNTdHJlYW0oYil9LF9jb21wcmVzc1dvcmtlcjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBnJiZ0aGlzLl9kYXRhLmNvbXByZXNzaW9uLm1hZ2ljPT09YS5tYWdpYylyZXR1cm4gdGhpcy5fZGF0YS5nZXRDb21wcmVzc2VkV29ya2VyKCk7dmFyIGM9dGhpcy5fZGVjb21wcmVzc1dvcmtlcigpO3JldHVybiB0aGlzLl9kYXRhQmluYXJ5fHwoYz1jLnBpcGUobmV3IGYuVXRmOEVuY29kZVdvcmtlcikpLGcuY3JlYXRlV29ya2VyRnJvbShjLGEsYil9LF9kZWNvbXByZXNzV29ya2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBnP3RoaXMuX2RhdGEuZ2V0Q29udGVudFdvcmtlcigpOnRoaXMuX2RhdGEgaW5zdGFuY2VvZiBoP3RoaXMuX2RhdGE6bmV3IGUodGhpcy5fZGF0YSl9fTtmb3IodmFyIGo9W1wiYXNUZXh0XCIsXCJhc0JpbmFyeVwiLFwiYXNOb2RlQnVmZmVyXCIsXCJhc1VpbnQ4QXJyYXlcIixcImFzQXJyYXlCdWZmZXJcIl0saz1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGhhcyBiZWVuIHJlbW92ZWQgaW4gSlNaaXAgMy4wLCBwbGVhc2UgY2hlY2sgdGhlIHVwZ3JhZGUgZ3VpZGUuXCIpfSxsPTA7bDxqLmxlbmd0aDtsKyspaS5wcm90b3R5cGVbaltsXV09aztiLmV4cG9ydHM9aX0se1wiLi9jb21wcmVzc2VkT2JqZWN0XCI6MixcIi4vc3RyZWFtL0RhdGFXb3JrZXJcIjoyNCxcIi4vc3RyZWFtL0dlbmVyaWNXb3JrZXJcIjoyNSxcIi4vc3RyZWFtL1N0cmVhbUhlbHBlclwiOjI2LFwiLi91dGY4XCI6Mjh9XSwzMzpbZnVuY3Rpb24oYSxiLGMpe30se31dLDM0OltmdW5jdGlvbihhLGIsYyl7YShcIi4uL21vZHVsZXMvd2ViLmltbWVkaWF0ZVwiKSxiLmV4cG9ydHM9YShcIi4uL21vZHVsZXMvX2NvcmVcIikuc2V0SW1tZWRpYXRlfSx7XCIuLi9tb2R1bGVzL19jb3JlXCI6MzgsXCIuLi9tb2R1bGVzL3dlYi5pbW1lZGlhdGVcIjo1NH1dLDM1OltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEpdGhyb3cgVHlwZUVycm9yKGErXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiBhfX0se31dLDM2OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX2lzLW9iamVjdFwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7aWYoIWQoYSkpdGhyb3cgVHlwZUVycm9yKGErXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIGF9fSx7XCIuL19pcy1vYmplY3RcIjo0OX1dLDM3OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9e30udG9TdHJpbmc7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwoYSkuc2xpY2UoOCwtMSl9fSx7fV0sMzg6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1iLmV4cG9ydHM9e3ZlcnNpb246XCIyLjMuMFwifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPWQpfSx7fV0sMzk6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9fYS1mdW5jdGlvblwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMpe2lmKGQoYSksdm9pZCAwPT09YilyZXR1cm4gYTtzd2l0Y2goYyl7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gYS5jYWxsKGIsYyl9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24oYyxkKXtyZXR1cm4gYS5jYWxsKGIsYyxkKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihjLGQsZSl7cmV0dXJuIGEuY2FsbChiLGMsZCxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX19LHtcIi4vX2EtZnVuY3Rpb25cIjozNX1dLDQwOltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPSFhKFwiLi9fZmFpbHNcIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHtcIi4vX2ZhaWxzXCI6NDN9XSw0MTpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19pcy1vYmplY3RcIiksZT1hKFwiLi9fZ2xvYmFsXCIpLmRvY3VtZW50LGY9ZChlKSYmZChlLmNyZWF0ZUVsZW1lbnQpO2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gZj9lLmNyZWF0ZUVsZW1lbnQoYSk6e319fSx7XCIuL19nbG9iYWxcIjo0NCxcIi4vX2lzLW9iamVjdFwiOjQ5fV0sNDI6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9fZ2xvYmFsXCIpLGU9YShcIi4vX2NvcmVcIiksZj1hKFwiLi9fY3R4XCIpLGc9YShcIi4vX2hpZGVcIiksaD1cInByb3RvdHlwZVwiLGk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBqLGssbCxtPWEmaS5GLG49YSZpLkcsbz1hJmkuUyxwPWEmaS5QLHE9YSZpLkIscj1hJmkuVyxzPW4/ZTplW2JdfHwoZVtiXT17fSksdD1zW2hdLHU9bj9kOm8/ZFtiXTooZFtiXXx8e30pW2hdO24mJihjPWIpO2ZvcihqIGluIGMpaz0hbSYmdSYmdm9pZCAwIT09dVtqXSxrJiZqIGluIHN8fChsPWs/dVtqXTpjW2pdLHNbal09biYmXCJmdW5jdGlvblwiIT10eXBlb2YgdVtqXT9jW2pdOnEmJms/ZihsLGQpOnImJnVbal09PWw/ZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oYixjLGQpe2lmKHRoaXMgaW5zdGFuY2VvZiBhKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgYTtjYXNlIDE6cmV0dXJuIG5ldyBhKGIpO2Nhc2UgMjpyZXR1cm4gbmV3IGEoYixjKX1yZXR1cm4gbmV3IGEoYixjLGQpfXJldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIGJbaF09YVtoXSxifShsKTpwJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBsP2YoRnVuY3Rpb24uY2FsbCxsKTpsLHAmJigocy52aXJ0dWFsfHwocy52aXJ0dWFsPXt9KSlbal09bCxhJmkuUiYmdCYmIXRbal0mJmcodCxqLGwpKSl9O2kuRj0xLGkuRz0yLGkuUz00LGkuUD04LGkuQj0xNixpLlc9MzIsaS5VPTY0LGkuUj0xMjgsYi5leHBvcnRzPWl9LHtcIi4vX2NvcmVcIjozOCxcIi4vX2N0eFwiOjM5LFwiLi9fZ2xvYmFsXCI6NDQsXCIuL19oaWRlXCI6NDV9XSw0MzpbZnVuY3Rpb24oYSxiLGMpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXt0cnl7cmV0dXJuISFhKCl9Y2F0Y2goYil7cmV0dXJuITB9fX0se31dLDQ0OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yi5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9ZCl9LHt9XSw0NTpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL19vYmplY3QtZHBcIiksZT1hKFwiLi9fcHJvcGVydHktZGVzY1wiKTtiLmV4cG9ydHM9YShcIi4vX2Rlc2NyaXB0b3JzXCIpP2Z1bmN0aW9uKGEsYixjKXtyZXR1cm4gZC5mKGEsYixlKDEsYykpfTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGFbYl09YyxhfX0se1wiLi9fZGVzY3JpcHRvcnNcIjo0MCxcIi4vX29iamVjdC1kcFwiOjUwLFwiLi9fcHJvcGVydHktZGVzY1wiOjUxfV0sNDY6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9YShcIi4vX2dsb2JhbFwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7XCIuL19nbG9iYWxcIjo0NH1dLDQ3OltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPSFhKFwiLi9fZGVzY3JpcHRvcnNcIikmJiFhKFwiLi9fZmFpbHNcIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KGEoXCIuL19kb20tY3JlYXRlXCIpKFwiZGl2XCIpLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHtcIi4vX2Rlc2NyaXB0b3JzXCI6NDAsXCIuL19kb20tY3JlYXRlXCI6NDEsXCIuL19mYWlsc1wiOjQzfV0sNDg6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXZvaWQgMD09PWM7c3dpdGNoKGIubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIGQ/YSgpOmEuY2FsbChjKTtjYXNlIDE6cmV0dXJuIGQ/YShiWzBdKTphLmNhbGwoYyxiWzBdKTtjYXNlIDI6cmV0dXJuIGQ/YShiWzBdLGJbMV0pOmEuY2FsbChjLGJbMF0sYlsxXSk7Y2FzZSAzOnJldHVybiBkP2EoYlswXSxiWzFdLGJbMl0pOmEuY2FsbChjLGJbMF0sYlsxXSxiWzJdKTtjYXNlIDQ6cmV0dXJuIGQ/YShiWzBdLGJbMV0sYlsyXSxiWzNdKTphLmNhbGwoYyxiWzBdLGJbMV0sYlsyXSxiWzNdKX1yZXR1cm4gYS5hcHBseShjLGIpfX0se31dLDQ5OltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP251bGwhPT1hOlwiZnVuY3Rpb25cIj09dHlwZW9mIGF9fSx7fV0sNTA6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9fYW4tb2JqZWN0XCIpLGU9YShcIi4vX2llOC1kb20tZGVmaW5lXCIpLGY9YShcIi4vX3RvLXByaW1pdGl2ZVwiKSxnPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtjLmY9YShcIi4vX2Rlc2NyaXB0b3JzXCIpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7aWYoZChhKSxiPWYoYiwhMCksZChjKSxlKXRyeXtyZXR1cm4gZyhhLGIsYyl9Y2F0Y2goaCl7fWlmKFwiZ2V0XCJpbiBjfHxcInNldFwiaW4gYyl0aHJvdyBUeXBlRXJyb3IoXCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCFcIik7cmV0dXJuXCJ2YWx1ZVwiaW4gYyYmKGFbYl09Yy52YWx1ZSksYX19LHtcIi4vX2FuLW9iamVjdFwiOjM2LFwiLi9fZGVzY3JpcHRvcnNcIjo0MCxcIi4vX2llOC1kb20tZGVmaW5lXCI6NDcsXCIuL190by1wcmltaXRpdmVcIjo1M31dLDUxOltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7cmV0dXJue2VudW1lcmFibGU6ISgxJmEpLGNvbmZpZ3VyYWJsZTohKDImYSksd3JpdGFibGU6ISg0JmEpLHZhbHVlOmJ9fX0se31dLDUyOltmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YShcIi4vX2N0eFwiKSxoPWEoXCIuL19pbnZva2VcIiksaT1hKFwiLi9faHRtbFwiKSxqPWEoXCIuL19kb20tY3JlYXRlXCIpLGs9YShcIi4vX2dsb2JhbFwiKSxsPWsucHJvY2VzcyxtPWsuc2V0SW1tZWRpYXRlLG49ay5jbGVhckltbWVkaWF0ZSxvPWsuTWVzc2FnZUNoYW5uZWwscD0wLHE9e30scj1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLHM9ZnVuY3Rpb24oKXt2YXIgYT0rdGhpcztpZihxLmhhc093blByb3BlcnR5KGEpKXt2YXIgYj1xW2FdO2RlbGV0ZSBxW2FdLGIoKX19LHQ9ZnVuY3Rpb24oYSl7cy5jYWxsKGEuZGF0YSl9O20mJm58fChtPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTE7YXJndW1lbnRzLmxlbmd0aD5jOyliLnB1c2goYXJndW1lbnRzW2MrK10pO3JldHVybiBxWysrcF09ZnVuY3Rpb24oKXtoKFwiZnVuY3Rpb25cIj09dHlwZW9mIGE/YTpGdW5jdGlvbihhKSxiKX0sZChwKSxwfSxuPWZ1bmN0aW9uKGEpe2RlbGV0ZSBxW2FdfSxcInByb2Nlc3NcIj09YShcIi4vX2NvZlwiKShsKT9kPWZ1bmN0aW9uKGEpe2wubmV4dFRpY2soZyhzLGEsMSkpfTpvPyhlPW5ldyBvLGY9ZS5wb3J0MixlLnBvcnQxLm9ubWVzc2FnZT10LGQ9ZyhmLnBvc3RNZXNzYWdlLGYsMSkpOmsuYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFrLmltcG9ydFNjcmlwdHM/KGQ9ZnVuY3Rpb24oYSl7ay5wb3N0TWVzc2FnZShhK1wiXCIsXCIqXCIpfSxrLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdCwhMSkpOmQ9ciBpbiBqKFwic2NyaXB0XCIpP2Z1bmN0aW9uKGEpe2kuYXBwZW5kQ2hpbGQoaihcInNjcmlwdFwiKSlbcl09ZnVuY3Rpb24oKXtpLnJlbW92ZUNoaWxkKHRoaXMpLHMuY2FsbChhKX19OmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoZyhzLGEsMSksMCl9KSxiLmV4cG9ydHM9e3NldDptLGNsZWFyOm59fSx7XCIuL19jb2ZcIjozNyxcIi4vX2N0eFwiOjM5LFwiLi9fZG9tLWNyZWF0ZVwiOjQxLFwiLi9fZ2xvYmFsXCI6NDQsXCIuL19odG1sXCI6NDYsXCIuL19pbnZva2VcIjo0OH1dLDUzOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vX2lzLW9iamVjdFwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXtpZighZChhKSlyZXR1cm4gYTt2YXIgYyxlO2lmKGImJlwiZnVuY3Rpb25cIj09dHlwZW9mKGM9YS50b1N0cmluZykmJiFkKGU9Yy5jYWxsKGEpKSlyZXR1cm4gZTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihjPWEudmFsdWVPZikmJiFkKGU9Yy5jYWxsKGEpKSlyZXR1cm4gZTtpZighYiYmXCJmdW5jdGlvblwiPT10eXBlb2YoYz1hLnRvU3RyaW5nKSYmIWQoZT1jLmNhbGwoYSkpKXJldHVybiBlO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LHtcIi4vX2lzLW9iamVjdFwiOjQ5fV0sNTQ6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9fZXhwb3J0XCIpLGU9YShcIi4vX3Rhc2tcIik7ZChkLkcrZC5CLHtzZXRJbW1lZGlhdGU6ZS5zZXQsY2xlYXJJbW1lZGlhdGU6ZS5jbGVhcn0pfSx7XCIuL19leHBvcnRcIjo0MixcIi4vX3Rhc2tcIjo1Mn1dLDU1OltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGMoKXtrPSEwO2Zvcih2YXIgYSxiLGM9bC5sZW5ndGg7Yzspe2ZvcihiPWwsbD1bXSxhPS0xOysrYTxjOyliW2FdKCk7Yz1sLmxlbmd0aH1rPSExfWZ1bmN0aW9uIGQoYSl7MSE9PWwucHVzaChhKXx8a3x8ZSgpfXZhciBlLGY9YS5NdXRhdGlvbk9ic2VydmVyfHxhLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7aWYoZil7dmFyIGc9MCxoPW5ldyBmKGMpLGk9YS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtoLm9ic2VydmUoaSx7Y2hhcmFjdGVyRGF0YTohMH0pLGU9ZnVuY3Rpb24oKXtpLmRhdGE9Zz0rK2clMn19ZWxzZSBpZihhLnNldEltbWVkaWF0ZXx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuTWVzc2FnZUNoYW5uZWwpZT1cImRvY3VtZW50XCJpbiBhJiZcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gYS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpP2Z1bmN0aW9uKCl7dmFyIGI9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2Iub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7YygpLGIub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH0sYS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoYil9OmZ1bmN0aW9uKCl7c2V0VGltZW91dChjLDApfTtlbHNle3ZhciBqPW5ldyBhLk1lc3NhZ2VDaGFubmVsO2oucG9ydDEub25tZXNzYWdlPWMsZT1mdW5jdGlvbigpe2oucG9ydDIucG9zdE1lc3NhZ2UoMCl9fXZhciBrLGw9W107Yi5leHBvcnRzPWR9KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHt9XSw1NjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXt9ZnVuY3Rpb24gZShhKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoXCJyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dGhpcy5zdGF0ZT1zLHRoaXMucXVldWU9W10sdGhpcy5vdXRjb21lPXZvaWQgMCxhIT09ZCYmaSh0aGlzLGEpfWZ1bmN0aW9uIGYoYSxiLGMpe3RoaXMucHJvbWlzZT1hLFwiZnVuY3Rpb25cIj09dHlwZW9mIGImJih0aGlzLm9uRnVsZmlsbGVkPWIsdGhpcy5jYWxsRnVsZmlsbGVkPXRoaXMub3RoZXJDYWxsRnVsZmlsbGVkKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjJiYodGhpcy5vblJlamVjdGVkPWMsdGhpcy5jYWxsUmVqZWN0ZWQ9dGhpcy5vdGhlckNhbGxSZWplY3RlZCl9ZnVuY3Rpb24gZyhhLGIsYyl7byhmdW5jdGlvbigpe3ZhciBkO3RyeXtkPWIoYyl9Y2F0Y2goZSl7cmV0dXJuIHAucmVqZWN0KGEsZSl9ZD09PWE/cC5yZWplY3QoYSxuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlc29sdmUgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKSk6cC5yZXNvbHZlKGEsZCl9KX1mdW5jdGlvbiBoKGEpe3ZhciBiPWEmJmEudGhlbjtpZihhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYilyZXR1cm4gZnVuY3Rpb24oKXtiLmFwcGx5KGEsYXJndW1lbnRzKX19ZnVuY3Rpb24gaShhLGIpe2Z1bmN0aW9uIGMoYil7Znx8KGY9ITAscC5yZWplY3QoYSxiKSl9ZnVuY3Rpb24gZChiKXtmfHwoZj0hMCxwLnJlc29sdmUoYSxiKSl9ZnVuY3Rpb24gZSgpe2IoZCxjKX12YXIgZj0hMSxnPWooZSk7XCJlcnJvclwiPT09Zy5zdGF0dXMmJmMoZy52YWx1ZSl9ZnVuY3Rpb24gaihhLGIpe3ZhciBjPXt9O3RyeXtjLnZhbHVlPWEoYiksYy5zdGF0dXM9XCJzdWNjZXNzXCJ9Y2F0Y2goZCl7Yy5zdGF0dXM9XCJlcnJvclwiLGMudmFsdWU9ZH1yZXR1cm4gY31mdW5jdGlvbiBrKGEpe3JldHVybiBhIGluc3RhbmNlb2YgdGhpcz9hOnAucmVzb2x2ZShuZXcgdGhpcyhkKSxhKX1mdW5jdGlvbiBsKGEpe3ZhciBiPW5ldyB0aGlzKGQpO3JldHVybiBwLnJlamVjdChiLGEpfWZ1bmN0aW9uIG0oYSl7ZnVuY3Rpb24gYihhLGIpe2Z1bmN0aW9uIGQoYSl7Z1tiXT1hLCsraCE9PWV8fGZ8fChmPSEwLHAucmVzb2x2ZShqLGcpKX1jLnJlc29sdmUoYSkudGhlbihkLGZ1bmN0aW9uKGEpe2Z8fChmPSEwLHAucmVqZWN0KGosYSkpfSl9dmFyIGM9dGhpcztpZihcIltvYmplY3QgQXJyYXldXCIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkpcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJtdXN0IGJlIGFuIGFycmF5XCIpKTt2YXIgZT1hLmxlbmd0aCxmPSExO2lmKCFlKXJldHVybiB0aGlzLnJlc29sdmUoW10pO2Zvcih2YXIgZz1uZXcgQXJyYXkoZSksaD0wLGk9LTEsaj1uZXcgdGhpcyhkKTsrK2k8ZTspYihhW2ldLGkpO3JldHVybiBqfWZ1bmN0aW9uIG4oYSl7ZnVuY3Rpb24gYihhKXtjLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbihhKXtmfHwoZj0hMCxwLnJlc29sdmUoaCxhKSl9LGZ1bmN0aW9uKGEpe2Z8fChmPSEwLHAucmVqZWN0KGgsYSkpfSl9dmFyIGM9dGhpcztpZihcIltvYmplY3QgQXJyYXldXCIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkpcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJtdXN0IGJlIGFuIGFycmF5XCIpKTt2YXIgZT1hLmxlbmd0aCxmPSExO2lmKCFlKXJldHVybiB0aGlzLnJlc29sdmUoW10pO2Zvcih2YXIgZz0tMSxoPW5ldyB0aGlzKGQpOysrZzxlOyliKGFbZ10pO3JldHVybiBofXZhciBvPWEoXCJpbW1lZGlhdGVcIikscD17fSxxPVtcIlJFSkVDVEVEXCJdLHI9W1wiRlVMRklMTEVEXCJdLHM9W1wiUEVORElOR1wiXTtiLmV4cG9ydHM9ZSxlLnByb3RvdHlwZVtcImNhdGNoXCJdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sZS5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihhLGIpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEmJnRoaXMuc3RhdGU9PT1yfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBiJiZ0aGlzLnN0YXRlPT09cSlyZXR1cm4gdGhpczt2YXIgYz1uZXcgdGhpcy5jb25zdHJ1Y3RvcihkKTtpZih0aGlzLnN0YXRlIT09cyl7dmFyIGU9dGhpcy5zdGF0ZT09PXI/YTpiO2coYyxlLHRoaXMub3V0Y29tZSl9ZWxzZSB0aGlzLnF1ZXVlLnB1c2gobmV3IGYoYyxhLGIpKTtyZXR1cm4gY30sZi5wcm90b3R5cGUuY2FsbEZ1bGZpbGxlZD1mdW5jdGlvbihhKXtwLnJlc29sdmUodGhpcy5wcm9taXNlLGEpfSxmLnByb3RvdHlwZS5vdGhlckNhbGxGdWxmaWxsZWQ9ZnVuY3Rpb24oYSl7Zyh0aGlzLnByb21pc2UsdGhpcy5vbkZ1bGZpbGxlZCxhKX0sZi5wcm90b3R5cGUuY2FsbFJlamVjdGVkPWZ1bmN0aW9uKGEpe3AucmVqZWN0KHRoaXMucHJvbWlzZSxhKX0sZi5wcm90b3R5cGUub3RoZXJDYWxsUmVqZWN0ZWQ9ZnVuY3Rpb24oYSl7Zyh0aGlzLnByb21pc2UsdGhpcy5vblJlamVjdGVkLGEpfSxwLnJlc29sdmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1qKGgsYik7aWYoXCJlcnJvclwiPT09Yy5zdGF0dXMpcmV0dXJuIHAucmVqZWN0KGEsYy52YWx1ZSk7dmFyIGQ9Yy52YWx1ZTtpZihkKWkoYSxkKTtlbHNle2Euc3RhdGU9cixhLm91dGNvbWU9Yjtmb3IodmFyIGU9LTEsZj1hLnF1ZXVlLmxlbmd0aDsrK2U8ZjspYS5xdWV1ZVtlXS5jYWxsRnVsZmlsbGVkKGIpfXJldHVybiBhfSxwLnJlamVjdD1mdW5jdGlvbihhLGIpe2Euc3RhdGU9cSxhLm91dGNvbWU9Yjtmb3IodmFyIGM9LTEsZD1hLnF1ZXVlLmxlbmd0aDsrK2M8ZDspYS5xdWV1ZVtjXS5jYWxsUmVqZWN0ZWQoYik7cmV0dXJuIGF9LGUucmVzb2x2ZT1rLGUucmVqZWN0PWwsZS5hbGw9bSxlLnJhY2U9bn0se2ltbWVkaWF0ZTo1NX1dLDU3OltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGQ9YShcIi4vbGliL3V0aWxzL2NvbW1vblwiKS5hc3NpZ24sZT1hKFwiLi9saWIvZGVmbGF0ZVwiKSxmPWEoXCIuL2xpYi9pbmZsYXRlXCIpLGc9YShcIi4vbGliL3psaWIvY29uc3RhbnRzXCIpLGg9e307ZChoLGUsZixnKSxiLmV4cG9ydHM9aH0se1wiLi9saWIvZGVmbGF0ZVwiOjU4LFwiLi9saWIvaW5mbGF0ZVwiOjU5LFwiLi9saWIvdXRpbHMvY29tbW9uXCI6NjAsXCIuL2xpYi96bGliL2NvbnN0YW50c1wiOjYzfV0sNTg6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXJldHVybiBuZXcgZChhKTt0aGlzLm9wdGlvbnM9aS5hc3NpZ24oe2xldmVsOnMsbWV0aG9kOnUsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTp0LHRvOlwiXCJ9LGF8fHt9KTt2YXIgYj10aGlzLm9wdGlvbnM7Yi5yYXcmJmIud2luZG93Qml0cz4wP2Iud2luZG93Qml0cz0tYi53aW5kb3dCaXRzOmIuZ3ppcCYmYi53aW5kb3dCaXRzPjAmJmIud2luZG93Qml0czwxNiYmKGIud2luZG93Qml0cys9MTYpLHRoaXMuZXJyPTAsdGhpcy5tc2c9XCJcIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgbCx0aGlzLnN0cm0uYXZhaWxfb3V0PTA7dmFyIGM9aC5kZWZsYXRlSW5pdDIodGhpcy5zdHJtLGIubGV2ZWwsYi5tZXRob2QsYi53aW5kb3dCaXRzLGIubWVtTGV2ZWwsYi5zdHJhdGVneSk7aWYoYyE9PXApdGhyb3cgbmV3IEVycm9yKGtbY10pO2lmKGIuaGVhZGVyJiZoLmRlZmxhdGVTZXRIZWFkZXIodGhpcy5zdHJtLGIuaGVhZGVyKSxiLmRpY3Rpb25hcnkpe3ZhciBlO2lmKGU9XCJzdHJpbmdcIj09dHlwZW9mIGIuZGljdGlvbmFyeT9qLnN0cmluZzJidWYoYi5kaWN0aW9uYXJ5KTpcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1tLmNhbGwoYi5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShiLmRpY3Rpb25hcnkpOmIuZGljdGlvbmFyeSxjPWguZGVmbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLGUpLGMhPT1wKXRocm93IG5ldyBFcnJvcihrW2NdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24gZShhLGIpe3ZhciBjPW5ldyBkKGIpO2lmKGMucHVzaChhLCEwKSxjLmVycil0aHJvdyBjLm1zZztyZXR1cm4gYy5yZXN1bHR9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBiPWJ8fHt9LGIucmF3PSEwLGUoYSxiKX1mdW5jdGlvbiBnKGEsYil7cmV0dXJuIGI9Ynx8e30sYi5nemlwPSEwLGUoYSxiKX12YXIgaD1hKFwiLi96bGliL2RlZmxhdGVcIiksaT1hKFwiLi91dGlscy9jb21tb25cIiksaj1hKFwiLi91dGlscy9zdHJpbmdzXCIpLGs9YShcIi4vemxpYi9tZXNzYWdlc1wiKSxsPWEoXCIuL3psaWIvenN0cmVhbVwiKSxtPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbj0wLG89NCxwPTAscT0xLHI9MixzPS0xLHQ9MCx1PTg7ZC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZT10aGlzLnN0cm0sZj10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7ZD1iPT09fn5iP2I6Yj09PSEwP286bixcInN0cmluZ1wiPT10eXBlb2YgYT9lLmlucHV0PWouc3RyaW5nMmJ1ZihhKTpcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1tLmNhbGwoYSk/ZS5pbnB1dD1uZXcgVWludDhBcnJheShhKTplLmlucHV0PWEsZS5uZXh0X2luPTAsZS5hdmFpbF9pbj1lLmlucHV0Lmxlbmd0aDtkb3tpZigwPT09ZS5hdmFpbF9vdXQmJihlLm91dHB1dD1uZXcgaS5CdWY4KGYpLGUubmV4dF9vdXQ9MCxlLmF2YWlsX291dD1mKSxjPWguZGVmbGF0ZShlLGQpLGMhPT1xJiZjIT09cClyZXR1cm4gdGhpcy5vbkVuZChjKSx0aGlzLmVuZGVkPSEwLCExOzAhPT1lLmF2YWlsX291dCYmKDAhPT1lLmF2YWlsX2lufHxkIT09byYmZCE9PXIpfHwoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLm9uRGF0YShqLmJ1ZjJiaW5zdHJpbmcoaS5zaHJpbmtCdWYoZS5vdXRwdXQsZS5uZXh0X291dCkpKTp0aGlzLm9uRGF0YShpLnNocmlua0J1ZihlLm91dHB1dCxlLm5leHRfb3V0KSkpfXdoaWxlKChlLmF2YWlsX2luPjB8fDA9PT1lLmF2YWlsX291dCkmJmMhPT1xKTtyZXR1cm4gZD09PW8/KGM9aC5kZWZsYXRlRW5kKHRoaXMuc3RybSksdGhpcy5vbkVuZChjKSx0aGlzLmVuZGVkPSEwLGM9PT1wKTpkIT09cnx8KHRoaXMub25FbmQocCksZS5hdmFpbF9vdXQ9MCwhMCl9LGQucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihhKXt0aGlzLmNodW5rcy5wdXNoKGEpfSxkLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbihhKXthPT09cCYmKFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/dGhpcy5yZXN1bHQ9dGhpcy5jaHVua3Muam9pbihcIlwiKTp0aGlzLnJlc3VsdD1pLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj1hLHRoaXMubXNnPXRoaXMuc3RybS5tc2d9LGMuRGVmbGF0ZT1kLGMuZGVmbGF0ZT1lLGMuZGVmbGF0ZVJhdz1mLGMuZ3ppcD1nfSx7XCIuL3V0aWxzL2NvbW1vblwiOjYwLFwiLi91dGlscy9zdHJpbmdzXCI6NjEsXCIuL3psaWIvZGVmbGF0ZVwiOjY1LFwiLi96bGliL21lc3NhZ2VzXCI6NzAsXCIuL3psaWIvenN0cmVhbVwiOjcyfV0sNTk6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXJldHVybiBuZXcgZChhKTt0aGlzLm9wdGlvbnM9aC5hc3NpZ24oe2NodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjAsdG86XCJcIn0sYXx8e30pO3ZhciBiPXRoaXMub3B0aW9ucztiLnJhdyYmYi53aW5kb3dCaXRzPj0wJiZiLndpbmRvd0JpdHM8MTYmJihiLndpbmRvd0JpdHM9LWIud2luZG93Qml0cywwPT09Yi53aW5kb3dCaXRzJiYoYi53aW5kb3dCaXRzPS0xNSkpLCEoYi53aW5kb3dCaXRzPj0wJiZiLndpbmRvd0JpdHM8MTYpfHxhJiZhLndpbmRvd0JpdHN8fChiLndpbmRvd0JpdHMrPTMyKSxiLndpbmRvd0JpdHM+MTUmJmIud2luZG93Qml0czw0OCYmMD09PSgxNSZiLndpbmRvd0JpdHMpJiYoYi53aW5kb3dCaXRzfD0xNSksdGhpcy5lcnI9MCx0aGlzLm1zZz1cIlwiLHRoaXMuZW5kZWQ9ITEsdGhpcy5jaHVua3M9W10sdGhpcy5zdHJtPW5ldyBsLHRoaXMuc3RybS5hdmFpbF9vdXQ9MDt2YXIgYz1nLmluZmxhdGVJbml0Mih0aGlzLnN0cm0sYi53aW5kb3dCaXRzKTtpZihjIT09ai5aX09LKXRocm93IG5ldyBFcnJvcihrW2NdKTt0aGlzLmhlYWRlcj1uZXcgbSxnLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLHRoaXMuaGVhZGVyKX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9bmV3IGQoYik7aWYoYy5wdXNoKGEsITApLGMuZXJyKXRocm93IGMubXNnO3JldHVybiBjLnJlc3VsdH1mdW5jdGlvbiBmKGEsYil7cmV0dXJuIGI9Ynx8e30sYi5yYXc9ITAsZShhLGIpfXZhciBnPWEoXCIuL3psaWIvaW5mbGF0ZVwiKSxoPWEoXCIuL3V0aWxzL2NvbW1vblwiKSxpPWEoXCIuL3V0aWxzL3N0cmluZ3NcIiksaj1hKFwiLi96bGliL2NvbnN0YW50c1wiKSxrPWEoXCIuL3psaWIvbWVzc2FnZXNcIiksbD1hKFwiLi96bGliL3pzdHJlYW1cIiksbT1hKFwiLi96bGliL2d6aGVhZGVyXCIpLG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztkLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsayxsLG09dGhpcy5zdHJtLG89dGhpcy5vcHRpb25zLmNodW5rU2l6ZSxwPXRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5LHE9ITE7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtkPWI9PT1+fmI/YjpiPT09ITA/ai5aX0ZJTklTSDpqLlpfTk9fRkxVU0gsXCJzdHJpbmdcIj09dHlwZW9mIGE/bS5pbnB1dD1pLmJpbnN0cmluZzJidWYoYSk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09bi5jYWxsKGEpP20uaW5wdXQ9bmV3IFVpbnQ4QXJyYXkoYSk6bS5pbnB1dD1hLG0ubmV4dF9pbj0wLG0uYXZhaWxfaW49bS5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PW0uYXZhaWxfb3V0JiYobS5vdXRwdXQ9bmV3IGguQnVmOChvKSxtLm5leHRfb3V0PTAsbS5hdmFpbF9vdXQ9byksYz1nLmluZmxhdGUobSxqLlpfTk9fRkxVU0gpLGM9PT1qLlpfTkVFRF9ESUNUJiZwJiYobD1cInN0cmluZ1wiPT10eXBlb2YgcD9pLnN0cmluZzJidWYocCk6XCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09bi5jYWxsKHApP25ldyBVaW50OEFycmF5KHApOnAsYz1nLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxsKSksYz09PWouWl9CVUZfRVJST1ImJnE9PT0hMCYmKGM9ai5aX09LLHE9ITEpLGMhPT1qLlpfU1RSRUFNX0VORCYmYyE9PWouWl9PSylyZXR1cm4gdGhpcy5vbkVuZChjKSx0aGlzLmVuZGVkPSEwLCExO20ubmV4dF9vdXQmJigwIT09bS5hdmFpbF9vdXQmJmMhPT1qLlpfU1RSRUFNX0VORCYmKDAhPT1tLmF2YWlsX2lufHxkIT09ai5aX0ZJTklTSCYmZCE9PWouWl9TWU5DX0ZMVVNIKXx8KFwic3RyaW5nXCI9PT10aGlzLm9wdGlvbnMudG8/KGU9aS51dGY4Ym9yZGVyKG0ub3V0cHV0LG0ubmV4dF9vdXQpLGY9bS5uZXh0X291dC1lLGs9aS5idWYyc3RyaW5nKG0ub3V0cHV0LGUpLG0ubmV4dF9vdXQ9ZixtLmF2YWlsX291dD1vLWYsZiYmaC5hcnJheVNldChtLm91dHB1dCxtLm91dHB1dCxlLGYsMCksdGhpcy5vbkRhdGEoaykpOnRoaXMub25EYXRhKGguc2hyaW5rQnVmKG0ub3V0cHV0LG0ubmV4dF9vdXQpKSkpLDA9PT1tLmF2YWlsX2luJiYwPT09bS5hdmFpbF9vdXQmJihxPSEwKX13aGlsZSgobS5hdmFpbF9pbj4wfHwwPT09bS5hdmFpbF9vdXQpJiZjIT09ai5aX1NUUkVBTV9FTkQpO3JldHVybiBjPT09ai5aX1NUUkVBTV9FTkQmJihkPWouWl9GSU5JU0gpLGQ9PT1qLlpfRklOSVNIPyhjPWcuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQoYyksdGhpcy5lbmRlZD0hMCxjPT09ai5aX09LKTpkIT09ai5aX1NZTkNfRkxVU0h8fCh0aGlzLm9uRW5kKGouWl9PSyksbS5hdmFpbF9vdXQ9MCwhMCl9LGQucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihhKXt0aGlzLmNodW5rcy5wdXNoKGEpfSxkLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbihhKXthPT09ai5aX09LJiYoXCJzdHJpbmdcIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKFwiXCIpOnRoaXMucmVzdWx0PWguZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWEsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sYy5JbmZsYXRlPWQsYy5pbmZsYXRlPWUsYy5pbmZsYXRlUmF3PWYsYy51bmd6aXA9ZX0se1wiLi91dGlscy9jb21tb25cIjo2MCxcIi4vdXRpbHMvc3RyaW5nc1wiOjYxLFwiLi96bGliL2NvbnN0YW50c1wiOjYzLFwiLi96bGliL2d6aGVhZGVyXCI6NjYsXCIuL3psaWIvaW5mbGF0ZVwiOjY4LFwiLi96bGliL21lc3NhZ2VzXCI6NzAsXCIuL3psaWIvenN0cmVhbVwiOjcyfV0sNjA6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQxNkFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgSW50MzJBcnJheTtjLmFzc2lnbj1mdW5jdGlvbihhKXtmb3IodmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2IubGVuZ3RoOyl7dmFyIGM9Yi5zaGlmdCgpO2lmKGMpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBjKXRocm93IG5ldyBUeXBlRXJyb3IoYytcIm11c3QgYmUgbm9uLW9iamVjdFwiKTtmb3IodmFyIGQgaW4gYyljLmhhc093blByb3BlcnR5KGQpJiYoYVtkXT1jW2RdKX19cmV0dXJuIGF9LGMuc2hyaW5rQnVmPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubGVuZ3RoPT09Yj9hOmEuc3ViYXJyYXk/YS5zdWJhcnJheSgwLGIpOihhLmxlbmd0aD1iLGEpfTt2YXIgZT17YXJyYXlTZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZihiLnN1YmFycmF5JiZhLnN1YmFycmF5KXJldHVybiB2b2lkIGEuc2V0KGIuc3ViYXJyYXkoYyxjK2QpLGUpO2Zvcih2YXIgZj0wO2Y8ZDtmKyspYVtlK2ZdPWJbYytmXX0sZmxhdHRlbkNodW5rczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGc7Zm9yKGQ9MCxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWQrPWFbYl0ubGVuZ3RoO2ZvcihnPW5ldyBVaW50OEFycmF5KGQpLGU9MCxiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWY9YVtiXSxnLnNldChmLGUpLGUrPWYubGVuZ3RoO3JldHVybiBnfX0sZj17YXJyYXlTZXQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtmb3IodmFyIGY9MDtmPGQ7ZisrKWFbZStmXT1iW2MrZl19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oYSl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLGEpfX07Yy5zZXRUeXBlZD1mdW5jdGlvbihhKXthPyhjLkJ1Zjg9VWludDhBcnJheSxjLkJ1ZjE2PVVpbnQxNkFycmF5LGMuQnVmMzI9SW50MzJBcnJheSxjLmFzc2lnbihjLGUpKTooYy5CdWY4PUFycmF5LGMuQnVmMTY9QXJyYXksYy5CdWYzMj1BcnJheSxjLmFzc2lnbihjLGYpKX0sYy5zZXRUeXBlZChkKX0se31dLDYxOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhLGIpe2lmKGI8NjU1MzcmJihhLnN1YmFycmF5JiZnfHwhYS5zdWJhcnJheSYmZikpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxlLnNocmlua0J1ZihhLGIpKTtmb3IodmFyIGM9XCJcIixkPTA7ZDxiO2QrKyljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGFbZF0pO3JldHVybiBjfXZhciBlPWEoXCIuL2NvbW1vblwiKSxmPSEwLGc9ITA7dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxbMF0pfWNhdGNoKGgpe2Y9ITF9dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSgxKSl9Y2F0Y2goaCl7Zz0hMX1mb3IodmFyIGk9bmV3IGUuQnVmOCgyNTYpLGo9MDtqPDI1NjtqKyspaVtqXT1qPj0yNTI/NjpqPj0yNDg/NTpqPj0yNDA/NDpqPj0yMjQ/MzpqPj0xOTI/MjoxO2lbMjU0XT1pWzI1NF09MSxjLnN0cmluZzJidWY9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGYsZyxoPWEubGVuZ3RoLGk9MDtmb3IoZj0wO2Y8aDtmKyspYz1hLmNoYXJDb2RlQXQoZiksNTUyOTY9PT0oNjQ1MTImYykmJmYrMTxoJiYoZD1hLmNoYXJDb2RlQXQoZisxKSw1NjMyMD09PSg2NDUxMiZkKSYmKGM9NjU1MzYrKGMtNTUyOTY8PDEwKSsoZC01NjMyMCksZisrKSksaSs9YzwxMjg/MTpjPDIwNDg/MjpjPDY1NTM2PzM6NDtmb3IoYj1uZXcgZS5CdWY4KGkpLGc9MCxmPTA7ZzxpO2YrKyljPWEuY2hhckNvZGVBdChmKSw1NTI5Nj09PSg2NDUxMiZjKSYmZisxPGgmJihkPWEuY2hhckNvZGVBdChmKzEpLDU2MzIwPT09KDY0NTEyJmQpJiYoYz02NTUzNisoYy01NTI5Njw8MTApKyhkLTU2MzIwKSxmKyspKSxjPDEyOD9iW2crK109YzpjPDIwNDg/KGJbZysrXT0xOTJ8Yz4+PjYsYltnKytdPTEyOHw2MyZjKTpjPDY1NTM2PyhiW2crK109MjI0fGM+Pj4xMixiW2crK109MTI4fGM+Pj42JjYzLGJbZysrXT0xMjh8NjMmYyk6KGJbZysrXT0yNDB8Yz4+PjE4LGJbZysrXT0xMjh8Yz4+PjEyJjYzLGJbZysrXT0xMjh8Yz4+PjYmNjMsYltnKytdPTEyOHw2MyZjKTtyZXR1cm4gYn0sYy5idWYyYmluc3RyaW5nPWZ1bmN0aW9uKGEpe3JldHVybiBkKGEsYS5sZW5ndGgpfSxjLmJpbnN0cmluZzJidWY9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPW5ldyBlLkJ1ZjgoYS5sZW5ndGgpLGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspYltjXT1hLmNoYXJDb2RlQXQoYyk7cmV0dXJuIGJ9LGMuYnVmMnN0cmluZz1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGg9Ynx8YS5sZW5ndGgsaj1uZXcgQXJyYXkoMipoKTtmb3IoZT0wLGM9MDtjPGg7KWlmKGY9YVtjKytdLGY8MTI4KWpbZSsrXT1mO2Vsc2UgaWYoZz1pW2ZdLGc+NClqW2UrK109NjU1MzMsYys9Zy0xO2Vsc2V7Zm9yKGYmPTI9PT1nPzMxOjM9PT1nPzE1Ojc7Zz4xJiZjPGg7KWY9Zjw8Nnw2MyZhW2MrK10sZy0tO2c+MT9qW2UrK109NjU1MzM6Zjw2NTUzNj9qW2UrK109ZjooZi09NjU1MzYsaltlKytdPTU1Mjk2fGY+PjEwJjEwMjMsaltlKytdPTU2MzIwfDEwMjMmZil9cmV0dXJuIGQoaixlKX0sYy51dGY4Ym9yZGVyPWZ1bmN0aW9uKGEsYil7dmFyIGM7Zm9yKGI9Ynx8YS5sZW5ndGgsYj5hLmxlbmd0aCYmKGI9YS5sZW5ndGgpLGM9Yi0xO2M+PTAmJjEyOD09PSgxOTImYVtjXSk7KWMtLTtyZXR1cm4gYzwwP2I6MD09PWM/YjpjK2lbYVtjXV0+Yj9jOmJ9fSx7XCIuL2NvbW1vblwiOjYwfV0sNjI6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKGEsYixjLGQpe2Zvcih2YXIgZT02NTUzNSZhfDAsZj1hPj4+MTYmNjU1MzV8MCxnPTA7MCE9PWM7KXtnPWM+MmUzPzJlMzpjLGMtPWc7ZG8gZT1lK2JbZCsrXXwwLGY9ZitlfDA7d2hpbGUoLS1nKTtlJT02NTUyMSxmJT02NTUyMX1yZXR1cm4gZXxmPDwxNnwwfWIuZXhwb3J0cz1kfSx7fV0sNjM6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtiLmV4cG9ydHM9e1pfTk9fRkxVU0g6MCxaX1BBUlRJQUxfRkxVU0g6MSxaX1NZTkNfRkxVU0g6MixaX0ZVTExfRkxVU0g6MyxaX0ZJTklTSDo0LFpfQkxPQ0s6NSxaX1RSRUVTOjYsWl9PSzowLFpfU1RSRUFNX0VORDoxLFpfTkVFRF9ESUNUOjIsWl9FUlJOTzotMSxaX1NUUkVBTV9FUlJPUjotMixaX0RBVEFfRVJST1I6LTMsWl9CVUZfRVJST1I6LTUsWl9OT19DT01QUkVTU0lPTjowLFpfQkVTVF9TUEVFRDoxLFpfQkVTVF9DT01QUkVTU0lPTjo5LFpfREVGQVVMVF9DT01QUkVTU0lPTjotMSxaX0ZJTFRFUkVEOjEsWl9IVUZGTUFOX09OTFk6MixaX1JMRTozLFpfRklYRUQ6NCxaX0RFRkFVTFRfU1RSQVRFR1k6MCxaX0JJTkFSWTowLFpfVEVYVDoxLFpfVU5LTk9XTjoyLFpfREVGTEFURUQ6OH19LHt9XSw2NDpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXtmb3IodmFyIGEsYj1bXSxjPTA7YzwyNTY7YysrKXthPWM7Zm9yKHZhciBkPTA7ZDw4O2QrKylhPTEmYT8zOTg4MjkyMzg0XmE+Pj4xOmE+Pj4xO2JbY109YX1yZXR1cm4gYn1mdW5jdGlvbiBlKGEsYixjLGQpe3ZhciBlPWYsZz1kK2M7YV49LTE7Zm9yKHZhciBoPWQ7aDxnO2grKylhPWE+Pj44XmVbMjU1JihhXmJbaF0pXTtyZXR1cm4gYV4tMX12YXIgZj1kKCk7Yi5leHBvcnRzPWV9LHt9XSw2NTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSxiKXtyZXR1cm4gYS5tc2c9SVtiXSxifWZ1bmN0aW9uIGUoYSl7cmV0dXJuKGE8PDEpLShhPjQ/OTowKX1mdW5jdGlvbiBmKGEpe2Zvcih2YXIgYj1hLmxlbmd0aDstLWI+PTA7KWFbYl09MH1mdW5jdGlvbiBnKGEpe3ZhciBiPWEuc3RhdGUsYz1iLnBlbmRpbmc7Yz5hLmF2YWlsX291dCYmKGM9YS5hdmFpbF9vdXQpLDAhPT1jJiYoRS5hcnJheVNldChhLm91dHB1dCxiLnBlbmRpbmdfYnVmLGIucGVuZGluZ19vdXQsYyxhLm5leHRfb3V0KSxhLm5leHRfb3V0Kz1jLGIucGVuZGluZ19vdXQrPWMsYS50b3RhbF9vdXQrPWMsYS5hdmFpbF9vdXQtPWMsYi5wZW5kaW5nLT1jLDA9PT1iLnBlbmRpbmcmJihiLnBlbmRpbmdfb3V0PTApKX1mdW5jdGlvbiBoKGEsYil7Ri5fdHJfZmx1c2hfYmxvY2soYSxhLmJsb2NrX3N0YXJ0Pj0wP2EuYmxvY2tfc3RhcnQ6LTEsYS5zdHJzdGFydC1hLmJsb2NrX3N0YXJ0LGIpLGEuYmxvY2tfc3RhcnQ9YS5zdHJzdGFydCxnKGEuc3RybSl9ZnVuY3Rpb24gaShhLGIpe2EucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPWJ9ZnVuY3Rpb24gaihhLGIpe2EucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPWI+Pj44JjI1NSxhLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT0yNTUmYn1mdW5jdGlvbiBrKGEsYixjLGQpe3ZhciBlPWEuYXZhaWxfaW47cmV0dXJuIGU+ZCYmKGU9ZCksMD09PWU/MDooYS5hdmFpbF9pbi09ZSxFLmFycmF5U2V0KGIsYS5pbnB1dCxhLm5leHRfaW4sZSxjKSwxPT09YS5zdGF0ZS53cmFwP2EuYWRsZXI9RyhhLmFkbGVyLGIsZSxjKToyPT09YS5zdGF0ZS53cmFwJiYoYS5hZGxlcj1IKGEuYWRsZXIsYixlLGMpKSxhLm5leHRfaW4rPWUsYS50b3RhbF9pbis9ZSxcclxuZSl9ZnVuY3Rpb24gbChhLGIpe3ZhciBjLGQsZT1hLm1heF9jaGFpbl9sZW5ndGgsZj1hLnN0cnN0YXJ0LGc9YS5wcmV2X2xlbmd0aCxoPWEubmljZV9tYXRjaCxpPWEuc3Ryc3RhcnQ+YS53X3NpemUtbGE/YS5zdHJzdGFydC0oYS53X3NpemUtbGEpOjAsaj1hLndpbmRvdyxrPWEud19tYXNrLGw9YS5wcmV2LG09YS5zdHJzdGFydCtrYSxuPWpbZitnLTFdLG89altmK2ddO2EucHJldl9sZW5ndGg+PWEuZ29vZF9tYXRjaCYmKGU+Pj0yKSxoPmEubG9va2FoZWFkJiYoaD1hLmxvb2thaGVhZCk7ZG8gaWYoYz1iLGpbYytnXT09PW8mJmpbYytnLTFdPT09biYmaltjXT09PWpbZl0mJmpbKytjXT09PWpbZisxXSl7Zis9MixjKys7ZG87d2hpbGUoalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmY8bSk7aWYoZD1rYS0obS1mKSxmPW0ta2EsZD5nKXtpZihhLm1hdGNoX3N0YXJ0PWIsZz1kLGQ+PWgpYnJlYWs7bj1qW2YrZy0xXSxvPWpbZitnXX19d2hpbGUoKGI9bFtiJmtdKT5pJiYwIT09LS1lKTtyZXR1cm4gZzw9YS5sb29rYWhlYWQ/ZzphLmxvb2thaGVhZH1mdW5jdGlvbiBtKGEpe3ZhciBiLGMsZCxlLGYsZz1hLndfc2l6ZTtkb3tpZihlPWEud2luZG93X3NpemUtYS5sb29rYWhlYWQtYS5zdHJzdGFydCxhLnN0cnN0YXJ0Pj1nKyhnLWxhKSl7RS5hcnJheVNldChhLndpbmRvdyxhLndpbmRvdyxnLGcsMCksYS5tYXRjaF9zdGFydC09ZyxhLnN0cnN0YXJ0LT1nLGEuYmxvY2tfc3RhcnQtPWcsYz1hLmhhc2hfc2l6ZSxiPWM7ZG8gZD1hLmhlYWRbLS1iXSxhLmhlYWRbYl09ZD49Zz9kLWc6MDt3aGlsZSgtLWMpO2M9ZyxiPWM7ZG8gZD1hLnByZXZbLS1iXSxhLnByZXZbYl09ZD49Zz9kLWc6MDt3aGlsZSgtLWMpO2UrPWd9aWYoMD09PWEuc3RybS5hdmFpbF9pbilicmVhaztpZihjPWsoYS5zdHJtLGEud2luZG93LGEuc3Ryc3RhcnQrYS5sb29rYWhlYWQsZSksYS5sb29rYWhlYWQrPWMsYS5sb29rYWhlYWQrYS5pbnNlcnQ+PWphKWZvcihmPWEuc3Ryc3RhcnQtYS5pbnNlcnQsYS5pbnNfaD1hLndpbmRvd1tmXSxhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbZisxXSkmYS5oYXNoX21hc2s7YS5pbnNlcnQmJihhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbZitqYS0xXSkmYS5oYXNoX21hc2ssYS5wcmV2W2YmYS53X21hc2tdPWEuaGVhZFthLmluc19oXSxhLmhlYWRbYS5pbnNfaF09ZixmKyssYS5pbnNlcnQtLSwhKGEubG9va2FoZWFkK2EuaW5zZXJ0PGphKSk7KTt9d2hpbGUoYS5sb29rYWhlYWQ8bGEmJjAhPT1hLnN0cm0uYXZhaWxfaW4pfWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz02NTUzNTtmb3IoYz5hLnBlbmRpbmdfYnVmX3NpemUtNSYmKGM9YS5wZW5kaW5nX2J1Zl9zaXplLTUpOzspe2lmKGEubG9va2FoZWFkPD0xKXtpZihtKGEpLDA9PT1hLmxvb2thaGVhZCYmYj09PUopcmV0dXJuIHVhO2lmKDA9PT1hLmxvb2thaGVhZClicmVha31hLnN0cnN0YXJ0Kz1hLmxvb2thaGVhZCxhLmxvb2thaGVhZD0wO3ZhciBkPWEuYmxvY2tfc3RhcnQrYztpZigoMD09PWEuc3Ryc3RhcnR8fGEuc3Ryc3RhcnQ+PWQpJiYoYS5sb29rYWhlYWQ9YS5zdHJzdGFydC1kLGEuc3Ryc3RhcnQ9ZCxoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gdWE7aWYoYS5zdHJzdGFydC1hLmJsb2NrX3N0YXJ0Pj1hLndfc2l6ZS1sYSYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiB1YX1yZXR1cm4gYS5pbnNlcnQ9MCxiPT09TT8oaChhLCEwKSwwPT09YS5zdHJtLmF2YWlsX291dD93YTp4YSk6YS5zdHJzdGFydD5hLmJsb2NrX3N0YXJ0JiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCk/dWE6dWF9ZnVuY3Rpb24gbyhhLGIpe2Zvcih2YXIgYyxkOzspe2lmKGEubG9va2FoZWFkPGxhKXtpZihtKGEpLGEubG9va2FoZWFkPGxhJiZiPT09SilyZXR1cm4gdWE7aWYoMD09PWEubG9va2FoZWFkKWJyZWFrfWlmKGM9MCxhLmxvb2thaGVhZD49amEmJihhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbYS5zdHJzdGFydCtqYS0xXSkmYS5oYXNoX21hc2ssYz1hLnByZXZbYS5zdHJzdGFydCZhLndfbWFza109YS5oZWFkW2EuaW5zX2hdLGEuaGVhZFthLmluc19oXT1hLnN0cnN0YXJ0KSwwIT09YyYmYS5zdHJzdGFydC1jPD1hLndfc2l6ZS1sYSYmKGEubWF0Y2hfbGVuZ3RoPWwoYSxjKSksYS5tYXRjaF9sZW5ndGg+PWphKWlmKGQ9Ri5fdHJfdGFsbHkoYSxhLnN0cnN0YXJ0LWEubWF0Y2hfc3RhcnQsYS5tYXRjaF9sZW5ndGgtamEpLGEubG9va2FoZWFkLT1hLm1hdGNoX2xlbmd0aCxhLm1hdGNoX2xlbmd0aDw9YS5tYXhfbGF6eV9tYXRjaCYmYS5sb29rYWhlYWQ+PWphKXthLm1hdGNoX2xlbmd0aC0tO2RvIGEuc3Ryc3RhcnQrKyxhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbYS5zdHJzdGFydCtqYS0xXSkmYS5oYXNoX21hc2ssYz1hLnByZXZbYS5zdHJzdGFydCZhLndfbWFza109YS5oZWFkW2EuaW5zX2hdLGEuaGVhZFthLmluc19oXT1hLnN0cnN0YXJ0O3doaWxlKDAhPT0tLWEubWF0Y2hfbGVuZ3RoKTthLnN0cnN0YXJ0Kyt9ZWxzZSBhLnN0cnN0YXJ0Kz1hLm1hdGNoX2xlbmd0aCxhLm1hdGNoX2xlbmd0aD0wLGEuaW5zX2g9YS53aW5kb3dbYS5zdHJzdGFydF0sYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2Euc3Ryc3RhcnQrMV0pJmEuaGFzaF9tYXNrO2Vsc2UgZD1GLl90cl90YWxseShhLDAsYS53aW5kb3dbYS5zdHJzdGFydF0pLGEubG9va2FoZWFkLS0sYS5zdHJzdGFydCsrO2lmKGQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gdWF9cmV0dXJuIGEuaW5zZXJ0PWEuc3Ryc3RhcnQ8amEtMT9hLnN0cnN0YXJ0OmphLTEsYj09PU0/KGgoYSwhMCksMD09PWEuc3RybS5hdmFpbF9vdXQ/d2E6eGEpOmEubGFzdF9saXQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KT91YTp2YX1mdW5jdGlvbiBwKGEsYil7Zm9yKHZhciBjLGQsZTs7KXtpZihhLmxvb2thaGVhZDxsYSl7aWYobShhKSxhLmxvb2thaGVhZDxsYSYmYj09PUopcmV0dXJuIHVhO2lmKDA9PT1hLmxvb2thaGVhZClicmVha31pZihjPTAsYS5sb29rYWhlYWQ+PWphJiYoYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2Euc3Ryc3RhcnQramEtMV0pJmEuaGFzaF9tYXNrLGM9YS5wcmV2W2Euc3Ryc3RhcnQmYS53X21hc2tdPWEuaGVhZFthLmluc19oXSxhLmhlYWRbYS5pbnNfaF09YS5zdHJzdGFydCksYS5wcmV2X2xlbmd0aD1hLm1hdGNoX2xlbmd0aCxhLnByZXZfbWF0Y2g9YS5tYXRjaF9zdGFydCxhLm1hdGNoX2xlbmd0aD1qYS0xLDAhPT1jJiZhLnByZXZfbGVuZ3RoPGEubWF4X2xhenlfbWF0Y2gmJmEuc3Ryc3RhcnQtYzw9YS53X3NpemUtbGEmJihhLm1hdGNoX2xlbmd0aD1sKGEsYyksYS5tYXRjaF9sZW5ndGg8PTUmJihhLnN0cmF0ZWd5PT09VXx8YS5tYXRjaF9sZW5ndGg9PT1qYSYmYS5zdHJzdGFydC1hLm1hdGNoX3N0YXJ0PjQwOTYpJiYoYS5tYXRjaF9sZW5ndGg9amEtMSkpLGEucHJldl9sZW5ndGg+PWphJiZhLm1hdGNoX2xlbmd0aDw9YS5wcmV2X2xlbmd0aCl7ZT1hLnN0cnN0YXJ0K2EubG9va2FoZWFkLWphLGQ9Ri5fdHJfdGFsbHkoYSxhLnN0cnN0YXJ0LTEtYS5wcmV2X21hdGNoLGEucHJldl9sZW5ndGgtamEpLGEubG9va2FoZWFkLT1hLnByZXZfbGVuZ3RoLTEsYS5wcmV2X2xlbmd0aC09MjtkbysrYS5zdHJzdGFydDw9ZSYmKGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1thLnN0cnN0YXJ0K2phLTFdKSZhLmhhc2hfbWFzayxjPWEucHJldlthLnN0cnN0YXJ0JmEud19tYXNrXT1hLmhlYWRbYS5pbnNfaF0sYS5oZWFkW2EuaW5zX2hdPWEuc3Ryc3RhcnQpO3doaWxlKDAhPT0tLWEucHJldl9sZW5ndGgpO2lmKGEubWF0Y2hfYXZhaWxhYmxlPTAsYS5tYXRjaF9sZW5ndGg9amEtMSxhLnN0cnN0YXJ0KyssZCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiB1YX1lbHNlIGlmKGEubWF0Y2hfYXZhaWxhYmxlKXtpZihkPUYuX3RyX3RhbGx5KGEsMCxhLndpbmRvd1thLnN0cnN0YXJ0LTFdKSxkJiZoKGEsITEpLGEuc3Ryc3RhcnQrKyxhLmxvb2thaGVhZC0tLDA9PT1hLnN0cm0uYXZhaWxfb3V0KXJldHVybiB1YX1lbHNlIGEubWF0Y2hfYXZhaWxhYmxlPTEsYS5zdHJzdGFydCsrLGEubG9va2FoZWFkLS19cmV0dXJuIGEubWF0Y2hfYXZhaWxhYmxlJiYoZD1GLl90cl90YWxseShhLDAsYS53aW5kb3dbYS5zdHJzdGFydC0xXSksYS5tYXRjaF9hdmFpbGFibGU9MCksYS5pbnNlcnQ9YS5zdHJzdGFydDxqYS0xP2Euc3Ryc3RhcnQ6amEtMSxiPT09TT8oaChhLCEwKSwwPT09YS5zdHJtLmF2YWlsX291dD93YTp4YSk6YS5sYXN0X2xpdCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3VhOnZhfWZ1bmN0aW9uIHEoYSxiKXtmb3IodmFyIGMsZCxlLGYsZz1hLndpbmRvdzs7KXtpZihhLmxvb2thaGVhZDw9a2Epe2lmKG0oYSksYS5sb29rYWhlYWQ8PWthJiZiPT09SilyZXR1cm4gdWE7aWYoMD09PWEubG9va2FoZWFkKWJyZWFrfWlmKGEubWF0Y2hfbGVuZ3RoPTAsYS5sb29rYWhlYWQ+PWphJiZhLnN0cnN0YXJ0PjAmJihlPWEuc3Ryc3RhcnQtMSxkPWdbZV0sZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSkpe2Y9YS5zdHJzdGFydCtrYTtkbzt3aGlsZShkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZkPT09Z1srK2VdJiZlPGYpO2EubWF0Y2hfbGVuZ3RoPWthLShmLWUpLGEubWF0Y2hfbGVuZ3RoPmEubG9va2FoZWFkJiYoYS5tYXRjaF9sZW5ndGg9YS5sb29rYWhlYWQpfWlmKGEubWF0Y2hfbGVuZ3RoPj1qYT8oYz1GLl90cl90YWxseShhLDEsYS5tYXRjaF9sZW5ndGgtamEpLGEubG9va2FoZWFkLT1hLm1hdGNoX2xlbmd0aCxhLnN0cnN0YXJ0Kz1hLm1hdGNoX2xlbmd0aCxhLm1hdGNoX2xlbmd0aD0wKTooYz1GLl90cl90YWxseShhLDAsYS53aW5kb3dbYS5zdHJzdGFydF0pLGEubG9va2FoZWFkLS0sYS5zdHJzdGFydCsrKSxjJiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHVhfXJldHVybiBhLmluc2VydD0wLGI9PT1NPyhoKGEsITApLDA9PT1hLnN0cm0uYXZhaWxfb3V0P3dhOnhhKTphLmxhc3RfbGl0JiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCk/dWE6dmF9ZnVuY3Rpb24gcihhLGIpe2Zvcih2YXIgYzs7KXtpZigwPT09YS5sb29rYWhlYWQmJihtKGEpLDA9PT1hLmxvb2thaGVhZCkpe2lmKGI9PT1KKXJldHVybiB1YTticmVha31pZihhLm1hdGNoX2xlbmd0aD0wLGM9Ri5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnRdKSxhLmxvb2thaGVhZC0tLGEuc3Ryc3RhcnQrKyxjJiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHVhfXJldHVybiBhLmluc2VydD0wLGI9PT1NPyhoKGEsITApLDA9PT1hLnN0cm0uYXZhaWxfb3V0P3dhOnhhKTphLmxhc3RfbGl0JiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCk/dWE6dmF9ZnVuY3Rpb24gcyhhLGIsYyxkLGUpe3RoaXMuZ29vZF9sZW5ndGg9YSx0aGlzLm1heF9sYXp5PWIsdGhpcy5uaWNlX2xlbmd0aD1jLHRoaXMubWF4X2NoYWluPWQsdGhpcy5mdW5jPWV9ZnVuY3Rpb24gdChhKXthLndpbmRvd19zaXplPTIqYS53X3NpemUsZihhLmhlYWQpLGEubWF4X2xhenlfbWF0Y2g9RFthLmxldmVsXS5tYXhfbGF6eSxhLmdvb2RfbWF0Y2g9RFthLmxldmVsXS5nb29kX2xlbmd0aCxhLm5pY2VfbWF0Y2g9RFthLmxldmVsXS5uaWNlX2xlbmd0aCxhLm1heF9jaGFpbl9sZW5ndGg9RFthLmxldmVsXS5tYXhfY2hhaW4sYS5zdHJzdGFydD0wLGEuYmxvY2tfc3RhcnQ9MCxhLmxvb2thaGVhZD0wLGEuaW5zZXJ0PTAsYS5tYXRjaF9sZW5ndGg9YS5wcmV2X2xlbmd0aD1qYS0xLGEubWF0Y2hfYXZhaWxhYmxlPTAsYS5pbnNfaD0wfWZ1bmN0aW9uIHUoKXt0aGlzLnN0cm09bnVsbCx0aGlzLnN0YXR1cz0wLHRoaXMucGVuZGluZ19idWY9bnVsbCx0aGlzLnBlbmRpbmdfYnVmX3NpemU9MCx0aGlzLnBlbmRpbmdfb3V0PTAsdGhpcy5wZW5kaW5nPTAsdGhpcy53cmFwPTAsdGhpcy5nemhlYWQ9bnVsbCx0aGlzLmd6aW5kZXg9MCx0aGlzLm1ldGhvZD0kLHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBFLkJ1ZjE2KDIqaGEpLHRoaXMuZHluX2R0cmVlPW5ldyBFLkJ1ZjE2KDIqKDIqZmErMSkpLHRoaXMuYmxfdHJlZT1uZXcgRS5CdWYxNigyKigyKmdhKzEpKSxmKHRoaXMuZHluX2x0cmVlKSxmKHRoaXMuZHluX2R0cmVlKSxmKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IEUuQnVmMTYoaWErMSksdGhpcy5oZWFwPW5ldyBFLkJ1ZjE2KDIqZWErMSksZih0aGlzLmhlYXApLHRoaXMuaGVhcF9sZW49MCx0aGlzLmhlYXBfbWF4PTAsdGhpcy5kZXB0aD1uZXcgRS5CdWYxNigyKmVhKzEpLGYodGhpcy5kZXB0aCksdGhpcy5sX2J1Zj0wLHRoaXMubGl0X2J1ZnNpemU9MCx0aGlzLmxhc3RfbGl0PTAsdGhpcy5kX2J1Zj0wLHRoaXMub3B0X2xlbj0wLHRoaXMuc3RhdGljX2xlbj0wLHRoaXMubWF0Y2hlcz0wLHRoaXMuaW5zZXJ0PTAsdGhpcy5iaV9idWY9MCx0aGlzLmJpX3ZhbGlkPTB9ZnVuY3Rpb24gdihhKXt2YXIgYjtyZXR1cm4gYSYmYS5zdGF0ZT8oYS50b3RhbF9pbj1hLnRvdGFsX291dD0wLGEuZGF0YV90eXBlPVosYj1hLnN0YXRlLGIucGVuZGluZz0wLGIucGVuZGluZ19vdXQ9MCxiLndyYXA8MCYmKGIud3JhcD0tYi53cmFwKSxiLnN0YXR1cz1iLndyYXA/bmE6c2EsYS5hZGxlcj0yPT09Yi53cmFwPzA6MSxiLmxhc3RfZmx1c2g9SixGLl90cl9pbml0KGIpLE8pOmQoYSxRKX1mdW5jdGlvbiB3KGEpe3ZhciBiPXYoYSk7cmV0dXJuIGI9PT1PJiZ0KGEuc3RhdGUpLGJ9ZnVuY3Rpb24geChhLGIpe3JldHVybiBhJiZhLnN0YXRlPzIhPT1hLnN0YXRlLndyYXA/UTooYS5zdGF0ZS5nemhlYWQ9YixPKTpRfWZ1bmN0aW9uIHkoYSxiLGMsZSxmLGcpe2lmKCFhKXJldHVybiBRO3ZhciBoPTE7aWYoYj09PVQmJihiPTYpLGU8MD8oaD0wLGU9LWUpOmU+MTUmJihoPTIsZS09MTYpLGY8MXx8Zj5ffHxjIT09JHx8ZTw4fHxlPjE1fHxiPDB8fGI+OXx8ZzwwfHxnPlgpcmV0dXJuIGQoYSxRKTs4PT09ZSYmKGU9OSk7dmFyIGk9bmV3IHU7cmV0dXJuIGEuc3RhdGU9aSxpLnN0cm09YSxpLndyYXA9aCxpLmd6aGVhZD1udWxsLGkud19iaXRzPWUsaS53X3NpemU9MTw8aS53X2JpdHMsaS53X21hc2s9aS53X3NpemUtMSxpLmhhc2hfYml0cz1mKzcsaS5oYXNoX3NpemU9MTw8aS5oYXNoX2JpdHMsaS5oYXNoX21hc2s9aS5oYXNoX3NpemUtMSxpLmhhc2hfc2hpZnQ9fn4oKGkuaGFzaF9iaXRzK2phLTEpL2phKSxpLndpbmRvdz1uZXcgRS5CdWY4KDIqaS53X3NpemUpLGkuaGVhZD1uZXcgRS5CdWYxNihpLmhhc2hfc2l6ZSksaS5wcmV2PW5ldyBFLkJ1ZjE2KGkud19zaXplKSxpLmxpdF9idWZzaXplPTE8PGYrNixpLnBlbmRpbmdfYnVmX3NpemU9NCppLmxpdF9idWZzaXplLGkucGVuZGluZ19idWY9bmV3IEUuQnVmOChpLnBlbmRpbmdfYnVmX3NpemUpLGkuZF9idWY9MSppLmxpdF9idWZzaXplLGkubF9idWY9MyppLmxpdF9idWZzaXplLGkubGV2ZWw9YixpLnN0cmF0ZWd5PWcsaS5tZXRob2Q9Yyx3KGEpfWZ1bmN0aW9uIHooYSxiKXtyZXR1cm4geShhLGIsJCxhYSxiYSxZKX1mdW5jdGlvbiBBKGEsYil7dmFyIGMsaCxrLGw7aWYoIWF8fCFhLnN0YXRlfHxiPk58fGI8MClyZXR1cm4gYT9kKGEsUSk6UTtpZihoPWEuc3RhdGUsIWEub3V0cHV0fHwhYS5pbnB1dCYmMCE9PWEuYXZhaWxfaW58fGguc3RhdHVzPT09dGEmJmIhPT1NKXJldHVybiBkKGEsMD09PWEuYXZhaWxfb3V0P1M6USk7aWYoaC5zdHJtPWEsYz1oLmxhc3RfZmx1c2gsaC5sYXN0X2ZsdXNoPWIsaC5zdGF0dXM9PT1uYSlpZigyPT09aC53cmFwKWEuYWRsZXI9MCxpKGgsMzEpLGkoaCwxMzkpLGkoaCw4KSxoLmd6aGVhZD8oaShoLChoLmd6aGVhZC50ZXh0PzE6MCkrKGguZ3poZWFkLmhjcmM/MjowKSsoaC5nemhlYWQuZXh0cmE/NDowKSsoaC5nemhlYWQubmFtZT84OjApKyhoLmd6aGVhZC5jb21tZW50PzE2OjApKSxpKGgsMjU1JmguZ3poZWFkLnRpbWUpLGkoaCxoLmd6aGVhZC50aW1lPj44JjI1NSksaShoLGguZ3poZWFkLnRpbWU+PjE2JjI1NSksaShoLGguZ3poZWFkLnRpbWU+PjI0JjI1NSksaShoLDk9PT1oLmxldmVsPzI6aC5zdHJhdGVneT49Vnx8aC5sZXZlbDwyPzQ6MCksaShoLDI1NSZoLmd6aGVhZC5vcyksaC5nemhlYWQuZXh0cmEmJmguZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGkoaCwyNTUmaC5nemhlYWQuZXh0cmEubGVuZ3RoKSxpKGgsaC5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLGguZ3poZWFkLmhjcmMmJihhLmFkbGVyPUgoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZywwKSksaC5nemluZGV4PTAsaC5zdGF0dXM9b2EpOihpKGgsMCksaShoLDApLGkoaCwwKSxpKGgsMCksaShoLDApLGkoaCw5PT09aC5sZXZlbD8yOmguc3RyYXRlZ3k+PVZ8fGgubGV2ZWw8Mj80OjApLGkoaCx5YSksaC5zdGF0dXM9c2EpO2Vsc2V7dmFyIG09JCsoaC53X2JpdHMtODw8NCk8PDgsbj0tMTtuPWguc3RyYXRlZ3k+PVZ8fGgubGV2ZWw8Mj8wOmgubGV2ZWw8Nj8xOjY9PT1oLmxldmVsPzI6MyxtfD1uPDw2LDAhPT1oLnN0cnN0YXJ0JiYobXw9bWEpLG0rPTMxLW0lMzEsaC5zdGF0dXM9c2EsaihoLG0pLDAhPT1oLnN0cnN0YXJ0JiYoaihoLGEuYWRsZXI+Pj4xNiksaihoLDY1NTM1JmEuYWRsZXIpKSxhLmFkbGVyPTF9aWYoaC5zdGF0dXM9PT1vYSlpZihoLmd6aGVhZC5leHRyYSl7Zm9yKGs9aC5wZW5kaW5nO2guZ3ppbmRleDwoNjU1MzUmaC5nemhlYWQuZXh0cmEubGVuZ3RoKSYmKGgucGVuZGluZyE9PWgucGVuZGluZ19idWZfc2l6ZXx8KGguZ3poZWFkLmhjcmMmJmgucGVuZGluZz5rJiYoYS5hZGxlcj1IKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmctayxrKSksZyhhKSxrPWgucGVuZGluZyxoLnBlbmRpbmchPT1oLnBlbmRpbmdfYnVmX3NpemUpKTspaShoLDI1NSZoLmd6aGVhZC5leHRyYVtoLmd6aW5kZXhdKSxoLmd6aW5kZXgrKztoLmd6aGVhZC5oY3JjJiZoLnBlbmRpbmc+ayYmKGEuYWRsZXI9SChhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLWssaykpLGguZ3ppbmRleD09PWguZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGguZ3ppbmRleD0wLGguc3RhdHVzPXBhKX1lbHNlIGguc3RhdHVzPXBhO2lmKGguc3RhdHVzPT09cGEpaWYoaC5nemhlYWQubmFtZSl7az1oLnBlbmRpbmc7ZG97aWYoaC5wZW5kaW5nPT09aC5wZW5kaW5nX2J1Zl9zaXplJiYoaC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUgoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSxnKGEpLGs9aC5wZW5kaW5nLGgucGVuZGluZz09PWgucGVuZGluZ19idWZfc2l6ZSkpe2w9MTticmVha31sPWguZ3ppbmRleDxoLmd6aGVhZC5uYW1lLmxlbmd0aD8yNTUmaC5nemhlYWQubmFtZS5jaGFyQ29kZUF0KGguZ3ppbmRleCsrKTowLGkoaCxsKX13aGlsZSgwIT09bCk7aC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUgoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSwwPT09bCYmKGguZ3ppbmRleD0wLGguc3RhdHVzPXFhKX1lbHNlIGguc3RhdHVzPXFhO2lmKGguc3RhdHVzPT09cWEpaWYoaC5nemhlYWQuY29tbWVudCl7az1oLnBlbmRpbmc7ZG97aWYoaC5wZW5kaW5nPT09aC5wZW5kaW5nX2J1Zl9zaXplJiYoaC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUgoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSxnKGEpLGs9aC5wZW5kaW5nLGgucGVuZGluZz09PWgucGVuZGluZ19idWZfc2l6ZSkpe2w9MTticmVha31sPWguZ3ppbmRleDxoLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmaC5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGguZ3ppbmRleCsrKTowLGkoaCxsKX13aGlsZSgwIT09bCk7aC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUgoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSwwPT09bCYmKGguc3RhdHVzPXJhKX1lbHNlIGguc3RhdHVzPXJhO2lmKGguc3RhdHVzPT09cmEmJihoLmd6aGVhZC5oY3JjPyhoLnBlbmRpbmcrMj5oLnBlbmRpbmdfYnVmX3NpemUmJmcoYSksaC5wZW5kaW5nKzI8PWgucGVuZGluZ19idWZfc2l6ZSYmKGkoaCwyNTUmYS5hZGxlciksaShoLGEuYWRsZXI+PjgmMjU1KSxhLmFkbGVyPTAsaC5zdGF0dXM9c2EpKTpoLnN0YXR1cz1zYSksMCE9PWgucGVuZGluZyl7aWYoZyhhKSwwPT09YS5hdmFpbF9vdXQpcmV0dXJuIGgubGFzdF9mbHVzaD0tMSxPfWVsc2UgaWYoMD09PWEuYXZhaWxfaW4mJmUoYik8PWUoYykmJmIhPT1NKXJldHVybiBkKGEsUyk7aWYoaC5zdGF0dXM9PT10YSYmMCE9PWEuYXZhaWxfaW4pcmV0dXJuIGQoYSxTKTtpZigwIT09YS5hdmFpbF9pbnx8MCE9PWgubG9va2FoZWFkfHxiIT09SiYmaC5zdGF0dXMhPT10YSl7dmFyIG89aC5zdHJhdGVneT09PVY/cihoLGIpOmguc3RyYXRlZ3k9PT1XP3EoaCxiKTpEW2gubGV2ZWxdLmZ1bmMoaCxiKTtpZihvIT09d2EmJm8hPT14YXx8KGguc3RhdHVzPXRhKSxvPT09dWF8fG89PT13YSlyZXR1cm4gMD09PWEuYXZhaWxfb3V0JiYoaC5sYXN0X2ZsdXNoPS0xKSxPO2lmKG89PT12YSYmKGI9PT1LP0YuX3RyX2FsaWduKGgpOmIhPT1OJiYoRi5fdHJfc3RvcmVkX2Jsb2NrKGgsMCwwLCExKSxiPT09TCYmKGYoaC5oZWFkKSwwPT09aC5sb29rYWhlYWQmJihoLnN0cnN0YXJ0PTAsaC5ibG9ja19zdGFydD0wLGguaW5zZXJ0PTApKSksZyhhKSwwPT09YS5hdmFpbF9vdXQpKXJldHVybiBoLmxhc3RfZmx1c2g9LTEsT31yZXR1cm4gYiE9PU0/TzpoLndyYXA8PTA/UDooMj09PWgud3JhcD8oaShoLDI1NSZhLmFkbGVyKSxpKGgsYS5hZGxlcj4+OCYyNTUpLGkoaCxhLmFkbGVyPj4xNiYyNTUpLGkoaCxhLmFkbGVyPj4yNCYyNTUpLGkoaCwyNTUmYS50b3RhbF9pbiksaShoLGEudG90YWxfaW4+PjgmMjU1KSxpKGgsYS50b3RhbF9pbj4+MTYmMjU1KSxpKGgsYS50b3RhbF9pbj4+MjQmMjU1KSk6KGooaCxhLmFkbGVyPj4+MTYpLGooaCw2NTUzNSZhLmFkbGVyKSksZyhhKSxoLndyYXA+MCYmKGgud3JhcD0taC53cmFwKSwwIT09aC5wZW5kaW5nP086UCl9ZnVuY3Rpb24gQihhKXt2YXIgYjtyZXR1cm4gYSYmYS5zdGF0ZT8oYj1hLnN0YXRlLnN0YXR1cyxiIT09bmEmJmIhPT1vYSYmYiE9PXBhJiZiIT09cWEmJmIhPT1yYSYmYiE9PXNhJiZiIT09dGE/ZChhLFEpOihhLnN0YXRlPW51bGwsYj09PXNhP2QoYSxSKTpPKSk6UX1mdW5jdGlvbiBDKGEsYil7dmFyIGMsZCxlLGcsaCxpLGosayxsPWIubGVuZ3RoO2lmKCFhfHwhYS5zdGF0ZSlyZXR1cm4gUTtpZihjPWEuc3RhdGUsZz1jLndyYXAsMj09PWd8fDE9PT1nJiZjLnN0YXR1cyE9PW5hfHxjLmxvb2thaGVhZClyZXR1cm4gUTtmb3IoMT09PWcmJihhLmFkbGVyPUcoYS5hZGxlcixiLGwsMCkpLGMud3JhcD0wLGw+PWMud19zaXplJiYoMD09PWcmJihmKGMuaGVhZCksYy5zdHJzdGFydD0wLGMuYmxvY2tfc3RhcnQ9MCxjLmluc2VydD0wKSxrPW5ldyBFLkJ1ZjgoYy53X3NpemUpLEUuYXJyYXlTZXQoayxiLGwtYy53X3NpemUsYy53X3NpemUsMCksYj1rLGw9Yy53X3NpemUpLGg9YS5hdmFpbF9pbixpPWEubmV4dF9pbixqPWEuaW5wdXQsYS5hdmFpbF9pbj1sLGEubmV4dF9pbj0wLGEuaW5wdXQ9YixtKGMpO2MubG9va2FoZWFkPj1qYTspe2Q9Yy5zdHJzdGFydCxlPWMubG9va2FoZWFkLShqYS0xKTtkbyBjLmluc19oPShjLmluc19oPDxjLmhhc2hfc2hpZnReYy53aW5kb3dbZCtqYS0xXSkmYy5oYXNoX21hc2ssYy5wcmV2W2QmYy53X21hc2tdPWMuaGVhZFtjLmluc19oXSxjLmhlYWRbYy5pbnNfaF09ZCxkKys7d2hpbGUoLS1lKTtjLnN0cnN0YXJ0PWQsYy5sb29rYWhlYWQ9amEtMSxtKGMpfXJldHVybiBjLnN0cnN0YXJ0Kz1jLmxvb2thaGVhZCxjLmJsb2NrX3N0YXJ0PWMuc3Ryc3RhcnQsYy5pbnNlcnQ9Yy5sb29rYWhlYWQsYy5sb29rYWhlYWQ9MCxjLm1hdGNoX2xlbmd0aD1jLnByZXZfbGVuZ3RoPWphLTEsYy5tYXRjaF9hdmFpbGFibGU9MCxhLm5leHRfaW49aSxhLmlucHV0PWosYS5hdmFpbF9pbj1oLGMud3JhcD1nLE99dmFyIEQsRT1hKFwiLi4vdXRpbHMvY29tbW9uXCIpLEY9YShcIi4vdHJlZXNcIiksRz1hKFwiLi9hZGxlcjMyXCIpLEg9YShcIi4vY3JjMzJcIiksST1hKFwiLi9tZXNzYWdlc1wiKSxKPTAsSz0xLEw9MyxNPTQsTj01LE89MCxQPTEsUT0tMixSPS0zLFM9LTUsVD0tMSxVPTEsVj0yLFc9MyxYPTQsWT0wLFo9MiwkPTgsXz05LGFhPTE1LGJhPTgsY2E9MjksZGE9MjU2LGVhPWRhKzErY2EsZmE9MzAsZ2E9MTksaGE9MiplYSsxLGlhPTE1LGphPTMsa2E9MjU4LGxhPWthK2phKzEsbWE9MzIsbmE9NDIsb2E9NjkscGE9NzMscWE9OTEscmE9MTAzLHNhPTExMyx0YT02NjYsdWE9MSx2YT0yLHdhPTMseGE9NCx5YT0zO0Q9W25ldyBzKDAsMCwwLDAsbiksbmV3IHMoNCw0LDgsNCxvKSxuZXcgcyg0LDUsMTYsOCxvKSxuZXcgcyg0LDYsMzIsMzIsbyksbmV3IHMoNCw0LDE2LDE2LHApLG5ldyBzKDgsMTYsMzIsMzIscCksbmV3IHMoOCwxNiwxMjgsMTI4LHApLG5ldyBzKDgsMzIsMTI4LDI1NixwKSxuZXcgcygzMiwxMjgsMjU4LDEwMjQscCksbmV3IHMoMzIsMjU4LDI1OCw0MDk2LHApXSxjLmRlZmxhdGVJbml0PXosYy5kZWZsYXRlSW5pdDI9eSxjLmRlZmxhdGVSZXNldD13LGMuZGVmbGF0ZVJlc2V0S2VlcD12LGMuZGVmbGF0ZVNldEhlYWRlcj14LGMuZGVmbGF0ZT1BLGMuZGVmbGF0ZUVuZD1CLGMuZGVmbGF0ZVNldERpY3Rpb25hcnk9QyxjLmRlZmxhdGVJbmZvPVwicGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KVwifSx7XCIuLi91dGlscy9jb21tb25cIjo2MCxcIi4vYWRsZXIzMlwiOjYyLFwiLi9jcmMzMlwiOjY0LFwiLi9tZXNzYWdlc1wiOjcwLFwiLi90cmVlc1wiOjcxfV0sNjY6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBkKCl7dGhpcy50ZXh0PTAsdGhpcy50aW1lPTAsdGhpcy54ZmxhZ3M9MCx0aGlzLm9zPTAsdGhpcy5leHRyYT1udWxsLHRoaXMuZXh0cmFfbGVuPTAsdGhpcy5uYW1lPVwiXCIsdGhpcy5jb21tZW50PVwiXCIsdGhpcy5oY3JjPTAsdGhpcy5kb25lPSExfWIuZXhwb3J0cz1kfSx7fV0sNjc6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjt2YXIgZD0zMCxlPTEyO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBjLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHUsdix3LHgseSx6LEEsQixDO2M9YS5zdGF0ZSxmPWEubmV4dF9pbixCPWEuaW5wdXQsZz1mKyhhLmF2YWlsX2luLTUpLGg9YS5uZXh0X291dCxDPWEub3V0cHV0LGk9aC0oYi1hLmF2YWlsX291dCksaj1oKyhhLmF2YWlsX291dC0yNTcpLGs9Yy5kbWF4LGw9Yy53c2l6ZSxtPWMud2hhdmUsbj1jLnduZXh0LG89Yy53aW5kb3cscD1jLmhvbGQscT1jLmJpdHMscj1jLmxlbmNvZGUscz1jLmRpc3Rjb2RlLHQ9KDE8PGMubGVuYml0cyktMSx1PSgxPDxjLmRpc3RiaXRzKS0xO2E6ZG97cTwxNSYmKHArPUJbZisrXTw8cSxxKz04LHArPUJbZisrXTw8cSxxKz04KSx2PXJbcCZ0XTtiOmZvcig7Oyl7aWYodz12Pj4+MjQscD4+Pj13LHEtPXcsdz12Pj4+MTYmMjU1LDA9PT13KUNbaCsrXT02NTUzNSZ2O2Vsc2V7aWYoISgxNiZ3KSl7aWYoMD09PSg2NCZ3KSl7dj1yWyg2NTUzNSZ2KSsocCYoMTw8dyktMSldO2NvbnRpbnVlIGJ9aWYoMzImdyl7Yy5tb2RlPWU7YnJlYWsgYX1hLm1zZz1cImludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZVwiLGMubW9kZT1kO2JyZWFrIGF9eD02NTUzNSZ2LHcmPTE1LHcmJihxPHcmJihwKz1CW2YrK108PHEscSs9OCkseCs9cCYoMTw8dyktMSxwPj4+PXcscS09dykscTwxNSYmKHArPUJbZisrXTw8cSxxKz04LHArPUJbZisrXTw8cSxxKz04KSx2PXNbcCZ1XTtjOmZvcig7Oyl7aWYodz12Pj4+MjQscD4+Pj13LHEtPXcsdz12Pj4+MTYmMjU1LCEoMTYmdykpe2lmKDA9PT0oNjQmdykpe3Y9c1soNjU1MzUmdikrKHAmKDE8PHcpLTEpXTtjb250aW51ZSBjfWEubXNnPVwiaW52YWxpZCBkaXN0YW5jZSBjb2RlXCIsYy5tb2RlPWQ7YnJlYWsgYX1pZih5PTY1NTM1JnYsdyY9MTUscTx3JiYocCs9QltmKytdPDxxLHErPTgscTx3JiYocCs9QltmKytdPDxxLHErPTgpKSx5Kz1wJigxPDx3KS0xLHk+ayl7YS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLGMubW9kZT1kO2JyZWFrIGF9aWYocD4+Pj13LHEtPXcsdz1oLWkseT53KXtpZih3PXktdyx3Pm0mJmMuc2FuZSl7YS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLGMubW9kZT1kO2JyZWFrIGF9aWYoej0wLEE9bywwPT09bil7aWYoeis9bC13LHc8eCl7eC09dztkbyBDW2grK109b1t6KytdO3doaWxlKC0tdyk7ej1oLXksQT1DfX1lbHNlIGlmKG48dyl7aWYoeis9bCtuLXcsdy09bix3PHgpe3gtPXc7ZG8gQ1toKytdPW9beisrXTt3aGlsZSgtLXcpO2lmKHo9MCxuPHgpe3c9bix4LT13O2RvIENbaCsrXT1vW3orK107d2hpbGUoLS13KTt6PWgteSxBPUN9fX1lbHNlIGlmKHorPW4tdyx3PHgpe3gtPXc7ZG8gQ1toKytdPW9beisrXTt3aGlsZSgtLXcpO3o9aC15LEE9Q31mb3IoO3g+MjspQ1toKytdPUFbeisrXSxDW2grK109QVt6KytdLENbaCsrXT1BW3orK10seC09Mzt4JiYoQ1toKytdPUFbeisrXSx4PjEmJihDW2grK109QVt6KytdKSl9ZWxzZXt6PWgteTtkbyBDW2grK109Q1t6KytdLENbaCsrXT1DW3orK10sQ1toKytdPUNbeisrXSx4LT0zO3doaWxlKHg+Mik7eCYmKENbaCsrXT1DW3orK10seD4xJiYoQ1toKytdPUNbeisrXSkpfWJyZWFrfX1icmVha319d2hpbGUoZjxnJiZoPGopO3g9cT4+MyxmLT14LHEtPXg8PDMscCY9KDE8PHEpLTEsYS5uZXh0X2luPWYsYS5uZXh0X291dD1oLGEuYXZhaWxfaW49ZjxnPzUrKGctZik6NS0oZi1nKSxhLmF2YWlsX291dD1oPGo/MjU3KyhqLWgpOjI1Ny0oaC1qKSxjLmhvbGQ9cCxjLmJpdHM9cX19LHt9XSw2ODpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuKGE+Pj4yNCYyNTUpKyhhPj4+OCY2NTI4MCkrKCg2NTI4MCZhKTw8OCkrKCgyNTUmYSk8PDI0KX1mdW5jdGlvbiBlKCl7dGhpcy5tb2RlPTAsdGhpcy5sYXN0PSExLHRoaXMud3JhcD0wLHRoaXMuaGF2ZWRpY3Q9ITEsdGhpcy5mbGFncz0wLHRoaXMuZG1heD0wLHRoaXMuY2hlY2s9MCx0aGlzLnRvdGFsPTAsdGhpcy5oZWFkPW51bGwsdGhpcy53Yml0cz0wLHRoaXMud3NpemU9MCx0aGlzLndoYXZlPTAsdGhpcy53bmV4dD0wLHRoaXMud2luZG93PW51bGwsdGhpcy5ob2xkPTAsdGhpcy5iaXRzPTAsdGhpcy5sZW5ndGg9MCx0aGlzLm9mZnNldD0wLHRoaXMuZXh0cmE9MCx0aGlzLmxlbmNvZGU9bnVsbCx0aGlzLmRpc3Rjb2RlPW51bGwsdGhpcy5sZW5iaXRzPTAsdGhpcy5kaXN0Yml0cz0wLHRoaXMubmNvZGU9MCx0aGlzLm5sZW49MCx0aGlzLm5kaXN0PTAsdGhpcy5oYXZlPTAsdGhpcy5uZXh0PW51bGwsdGhpcy5sZW5zPW5ldyBzLkJ1ZjE2KDMyMCksdGhpcy53b3JrPW5ldyBzLkJ1ZjE2KDI4OCksdGhpcy5sZW5keW49bnVsbCx0aGlzLmRpc3RkeW49bnVsbCx0aGlzLnNhbmU9MCx0aGlzLmJhY2s9MCx0aGlzLndhcz0wfWZ1bmN0aW9uIGYoYSl7dmFyIGI7cmV0dXJuIGEmJmEuc3RhdGU/KGI9YS5zdGF0ZSxhLnRvdGFsX2luPWEudG90YWxfb3V0PWIudG90YWw9MCxhLm1zZz1cIlwiLGIud3JhcCYmKGEuYWRsZXI9MSZiLndyYXApLGIubW9kZT1MLGIubGFzdD0wLGIuaGF2ZWRpY3Q9MCxiLmRtYXg9MzI3NjgsYi5oZWFkPW51bGwsYi5ob2xkPTAsYi5iaXRzPTAsYi5sZW5jb2RlPWIubGVuZHluPW5ldyBzLkJ1ZjMyKHBhKSxiLmRpc3Rjb2RlPWIuZGlzdGR5bj1uZXcgcy5CdWYzMihxYSksYi5zYW5lPTEsYi5iYWNrPS0xLEQpOkd9ZnVuY3Rpb24gZyhhKXt2YXIgYjtyZXR1cm4gYSYmYS5zdGF0ZT8oYj1hLnN0YXRlLGIud3NpemU9MCxiLndoYXZlPTAsYi53bmV4dD0wLGYoYSkpOkd9ZnVuY3Rpb24gaChhLGIpe3ZhciBjLGQ7cmV0dXJuIGEmJmEuc3RhdGU/KGQ9YS5zdGF0ZSxiPDA/KGM9MCxiPS1iKTooYz0oYj4+NCkrMSxiPDQ4JiYoYiY9MTUpKSxiJiYoYjw4fHxiPjE1KT9HOihudWxsIT09ZC53aW5kb3cmJmQud2JpdHMhPT1iJiYoZC53aW5kb3c9bnVsbCksZC53cmFwPWMsZC53Yml0cz1iLGcoYSkpKTpHfWZ1bmN0aW9uIGkoYSxiKXt2YXIgYyxkO3JldHVybiBhPyhkPW5ldyBlLGEuc3RhdGU9ZCxkLndpbmRvdz1udWxsLGM9aChhLGIpLGMhPT1EJiYoYS5zdGF0ZT1udWxsKSxjKTpHfWZ1bmN0aW9uIGooYSl7cmV0dXJuIGkoYSxzYSl9ZnVuY3Rpb24gayhhKXtpZih0YSl7dmFyIGI7Zm9yKHE9bmV3IHMuQnVmMzIoNTEyKSxyPW5ldyBzLkJ1ZjMyKDMyKSxiPTA7YjwxNDQ7KWEubGVuc1tiKytdPTg7Zm9yKDtiPDI1NjspYS5sZW5zW2IrK109OTtmb3IoO2I8MjgwOylhLmxlbnNbYisrXT03O2Zvcig7YjwyODg7KWEubGVuc1tiKytdPTg7Zm9yKHcoeSxhLmxlbnMsMCwyODgscSwwLGEud29yayx7Yml0czo5fSksYj0wO2I8MzI7KWEubGVuc1tiKytdPTU7dyh6LGEubGVucywwLDMyLHIsMCxhLndvcmsse2JpdHM6NX0pLHRhPSExfWEubGVuY29kZT1xLGEubGVuYml0cz05LGEuZGlzdGNvZGU9cixhLmRpc3RiaXRzPTV9ZnVuY3Rpb24gbChhLGIsYyxkKXt2YXIgZSxmPWEuc3RhdGU7cmV0dXJuIG51bGw9PT1mLndpbmRvdyYmKGYud3NpemU9MTw8Zi53Yml0cyxmLnduZXh0PTAsZi53aGF2ZT0wLGYud2luZG93PW5ldyBzLkJ1ZjgoZi53c2l6ZSkpLGQ+PWYud3NpemU/KHMuYXJyYXlTZXQoZi53aW5kb3csYixjLWYud3NpemUsZi53c2l6ZSwwKSxmLnduZXh0PTAsZi53aGF2ZT1mLndzaXplKTooZT1mLndzaXplLWYud25leHQsZT5kJiYoZT1kKSxzLmFycmF5U2V0KGYud2luZG93LGIsYy1kLGUsZi53bmV4dCksZC09ZSxkPyhzLmFycmF5U2V0KGYud2luZG93LGIsYy1kLGQsMCksZi53bmV4dD1kLGYud2hhdmU9Zi53c2l6ZSk6KGYud25leHQrPWUsZi53bmV4dD09PWYud3NpemUmJihmLnduZXh0PTApLGYud2hhdmU8Zi53c2l6ZSYmKGYud2hhdmUrPWUpKSksMH1mdW5jdGlvbiBtKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosbSxuLG8scCxxLHIscGEscWEscmEsc2EsdGEsdWEsdmEsd2EseGEseWEsemEsQWE9MCxCYT1uZXcgcy5CdWY4KDQpLENhPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XTtpZighYXx8IWEuc3RhdGV8fCFhLm91dHB1dHx8IWEuaW5wdXQmJjAhPT1hLmF2YWlsX2luKXJldHVybiBHO2M9YS5zdGF0ZSxjLm1vZGU9PT1XJiYoYy5tb2RlPVgpLGg9YS5uZXh0X291dCxmPWEub3V0cHV0LGo9YS5hdmFpbF9vdXQsZz1hLm5leHRfaW4sZT1hLmlucHV0LGk9YS5hdmFpbF9pbixtPWMuaG9sZCxuPWMuYml0cyxvPWkscD1qLHhhPUQ7YTpmb3IoOzspc3dpdGNoKGMubW9kZSl7Y2FzZSBMOmlmKDA9PT1jLndyYXApe2MubW9kZT1YO2JyZWFrfWZvcig7bjwxNjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKDImYy53cmFwJiYzNTYxNT09PW0pe2MuY2hlY2s9MCxCYVswXT0yNTUmbSxCYVsxXT1tPj4+OCYyNTUsYy5jaGVjaz11KGMuY2hlY2ssQmEsMiwwKSxtPTAsbj0wLGMubW9kZT1NO2JyZWFrfWlmKGMuZmxhZ3M9MCxjLmhlYWQmJihjLmhlYWQuZG9uZT0hMSksISgxJmMud3JhcCl8fCgoKDI1NSZtKTw8OCkrKG0+PjgpKSUzMSl7YS5tc2c9XCJpbmNvcnJlY3QgaGVhZGVyIGNoZWNrXCIsYy5tb2RlPW1hO2JyZWFrfWlmKCgxNSZtKSE9PUspe2EubXNnPVwidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2RcIixjLm1vZGU9bWE7YnJlYWt9aWYobT4+Pj00LG4tPTQsd2E9KDE1Jm0pKzgsMD09PWMud2JpdHMpYy53Yml0cz13YTtlbHNlIGlmKHdhPmMud2JpdHMpe2EubXNnPVwiaW52YWxpZCB3aW5kb3cgc2l6ZVwiLGMubW9kZT1tYTticmVha31jLmRtYXg9MTw8d2EsYS5hZGxlcj1jLmNoZWNrPTEsYy5tb2RlPTUxMiZtP1U6VyxtPTAsbj0wO2JyZWFrO2Nhc2UgTTpmb3IoO248MTY7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihjLmZsYWdzPW0sKDI1NSZjLmZsYWdzKSE9PUspe2EubXNnPVwidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2RcIixjLm1vZGU9bWE7YnJlYWt9aWYoNTczNDQmYy5mbGFncyl7YS5tc2c9XCJ1bmtub3duIGhlYWRlciBmbGFncyBzZXRcIixjLm1vZGU9bWE7YnJlYWt9Yy5oZWFkJiYoYy5oZWFkLnRleHQ9bT4+OCYxKSw1MTImYy5mbGFncyYmKEJhWzBdPTI1NSZtLEJhWzFdPW0+Pj44JjI1NSxjLmNoZWNrPXUoYy5jaGVjayxCYSwyLDApKSxtPTAsbj0wLGMubW9kZT1OO2Nhc2UgTjpmb3IoO248MzI7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLmhlYWQmJihjLmhlYWQudGltZT1tKSw1MTImYy5mbGFncyYmKEJhWzBdPTI1NSZtLEJhWzFdPW0+Pj44JjI1NSxCYVsyXT1tPj4+MTYmMjU1LEJhWzNdPW0+Pj4yNCYyNTUsYy5jaGVjaz11KGMuY2hlY2ssQmEsNCwwKSksbT0wLG49MCxjLm1vZGU9TztjYXNlIE86Zm9yKDtuPDE2Oyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5oZWFkJiYoYy5oZWFkLnhmbGFncz0yNTUmbSxjLmhlYWQub3M9bT4+OCksNTEyJmMuZmxhZ3MmJihCYVswXT0yNTUmbSxCYVsxXT1tPj4+OCYyNTUsYy5jaGVjaz11KGMuY2hlY2ssQmEsMiwwKSksbT0wLG49MCxjLm1vZGU9UDtjYXNlIFA6aWYoMTAyNCZjLmZsYWdzKXtmb3IoO248MTY7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLmxlbmd0aD1tLGMuaGVhZCYmKGMuaGVhZC5leHRyYV9sZW49bSksNTEyJmMuZmxhZ3MmJihCYVswXT0yNTUmbSxCYVsxXT1tPj4+OCYyNTUsYy5jaGVjaz11KGMuY2hlY2ssQmEsMiwwKSksbT0wLG49MH1lbHNlIGMuaGVhZCYmKGMuaGVhZC5leHRyYT1udWxsKTtjLm1vZGU9UTtjYXNlIFE6aWYoMTAyNCZjLmZsYWdzJiYocT1jLmxlbmd0aCxxPmkmJihxPWkpLHEmJihjLmhlYWQmJih3YT1jLmhlYWQuZXh0cmFfbGVuLWMubGVuZ3RoLGMuaGVhZC5leHRyYXx8KGMuaGVhZC5leHRyYT1uZXcgQXJyYXkoYy5oZWFkLmV4dHJhX2xlbikpLHMuYXJyYXlTZXQoYy5oZWFkLmV4dHJhLGUsZyxxLHdhKSksNTEyJmMuZmxhZ3MmJihjLmNoZWNrPXUoYy5jaGVjayxlLHEsZykpLGktPXEsZys9cSxjLmxlbmd0aC09cSksYy5sZW5ndGgpKWJyZWFrIGE7Yy5sZW5ndGg9MCxjLm1vZGU9UjtjYXNlIFI6aWYoMjA0OCZjLmZsYWdzKXtpZigwPT09aSlicmVhayBhO3E9MDtkbyB3YT1lW2crcSsrXSxjLmhlYWQmJndhJiZjLmxlbmd0aDw2NTUzNiYmKGMuaGVhZC5uYW1lKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHdhKSk7d2hpbGUod2EmJnE8aSk7aWYoNTEyJmMuZmxhZ3MmJihjLmNoZWNrPXUoYy5jaGVjayxlLHEsZykpLGktPXEsZys9cSx3YSlicmVhayBhfWVsc2UgYy5oZWFkJiYoYy5oZWFkLm5hbWU9bnVsbCk7Yy5sZW5ndGg9MCxjLm1vZGU9UztjYXNlIFM6aWYoNDA5NiZjLmZsYWdzKXtpZigwPT09aSlicmVhayBhO3E9MDtkbyB3YT1lW2crcSsrXSxjLmhlYWQmJndhJiZjLmxlbmd0aDw2NTUzNiYmKGMuaGVhZC5jb21tZW50Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHdhKSk7d2hpbGUod2EmJnE8aSk7aWYoNTEyJmMuZmxhZ3MmJihjLmNoZWNrPXUoYy5jaGVjayxlLHEsZykpLGktPXEsZys9cSx3YSlicmVhayBhfWVsc2UgYy5oZWFkJiYoYy5oZWFkLmNvbW1lbnQ9bnVsbCk7Yy5tb2RlPVQ7Y2FzZSBUOmlmKDUxMiZjLmZsYWdzKXtmb3IoO248MTY7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihtIT09KDY1NTM1JmMuY2hlY2spKXthLm1zZz1cImhlYWRlciBjcmMgbWlzbWF0Y2hcIixjLm1vZGU9bWE7YnJlYWt9bT0wLG49MH1jLmhlYWQmJihjLmhlYWQuaGNyYz1jLmZsYWdzPj45JjEsYy5oZWFkLmRvbmU9ITApLGEuYWRsZXI9Yy5jaGVjaz0wLGMubW9kZT1XO2JyZWFrO2Nhc2UgVTpmb3IoO248MzI7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1hLmFkbGVyPWMuY2hlY2s9ZChtKSxtPTAsbj0wLGMubW9kZT1WO2Nhc2UgVjppZigwPT09Yy5oYXZlZGljdClyZXR1cm4gYS5uZXh0X291dD1oLGEuYXZhaWxfb3V0PWosYS5uZXh0X2luPWcsYS5hdmFpbF9pbj1pLGMuaG9sZD1tLGMuYml0cz1uLEY7YS5hZGxlcj1jLmNoZWNrPTEsYy5tb2RlPVc7Y2FzZSBXOmlmKGI9PT1CfHxiPT09QylicmVhayBhO2Nhc2UgWDppZihjLmxhc3Qpe20+Pj49NyZuLG4tPTcmbixjLm1vZGU9amE7YnJlYWt9Zm9yKDtuPDM7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1zd2l0Y2goYy5sYXN0PTEmbSxtPj4+PTEsbi09MSwzJm0pe2Nhc2UgMDpjLm1vZGU9WTticmVhaztjYXNlIDE6aWYoayhjKSxjLm1vZGU9Y2EsYj09PUMpe20+Pj49MixuLT0yO2JyZWFrIGF9YnJlYWs7Y2FzZSAyOmMubW9kZT1fO2JyZWFrO2Nhc2UgMzphLm1zZz1cImludmFsaWQgYmxvY2sgdHlwZVwiLGMubW9kZT1tYX1tPj4+PTIsbi09MjticmVhaztjYXNlIFk6Zm9yKG0+Pj49NyZuLG4tPTcmbjtuPDMyOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoKDY1NTM1Jm0pIT09KG0+Pj4xNl42NTUzNSkpe2EubXNnPVwiaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Roc1wiLGMubW9kZT1tYTticmVha31pZihjLmxlbmd0aD02NTUzNSZtLG09MCxuPTAsYy5tb2RlPVosYj09PUMpYnJlYWsgYTtjYXNlIFo6Yy5tb2RlPSQ7Y2FzZSAkOmlmKHE9Yy5sZW5ndGgpe2lmKHE+aSYmKHE9aSkscT5qJiYocT1qKSwwPT09cSlicmVhayBhO3MuYXJyYXlTZXQoZixlLGcscSxoKSxpLT1xLGcrPXEsai09cSxoKz1xLGMubGVuZ3RoLT1xO2JyZWFrfWMubW9kZT1XO2JyZWFrO2Nhc2UgXzpmb3IoO248MTQ7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihjLm5sZW49KDMxJm0pKzI1NyxtPj4+PTUsbi09NSxjLm5kaXN0PSgzMSZtKSsxLG0+Pj49NSxuLT01LGMubmNvZGU9KDE1Jm0pKzQsbT4+Pj00LG4tPTQsYy5ubGVuPjI4Nnx8Yy5uZGlzdD4zMCl7YS5tc2c9XCJ0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9sc1wiLGMubW9kZT1tYTticmVha31jLmhhdmU9MCxjLm1vZGU9YWE7Y2FzZSBhYTpmb3IoO2MuaGF2ZTxjLm5jb2RlOyl7Zm9yKDtuPDM7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLmxlbnNbQ2FbYy5oYXZlKytdXT03Jm0sbT4+Pj0zLG4tPTN9Zm9yKDtjLmhhdmU8MTk7KWMubGVuc1tDYVtjLmhhdmUrK11dPTA7aWYoYy5sZW5jb2RlPWMubGVuZHluLGMubGVuYml0cz03LHlhPXtiaXRzOmMubGVuYml0c30seGE9dyh4LGMubGVucywwLDE5LGMubGVuY29kZSwwLGMud29yayx5YSksYy5sZW5iaXRzPXlhLmJpdHMseGEpe2EubXNnPVwiaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0XCIsYy5tb2RlPW1hO2JyZWFrfWMuaGF2ZT0wLGMubW9kZT1iYTtjYXNlIGJhOmZvcig7Yy5oYXZlPGMubmxlbitjLm5kaXN0Oyl7Zm9yKDtBYT1jLmxlbmNvZGVbbSYoMTw8Yy5sZW5iaXRzKS0xXSxxYT1BYT4+PjI0LHJhPUFhPj4+MTYmMjU1LHNhPTY1NTM1JkFhLCEocWE8PW4pOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoc2E8MTYpbT4+Pj1xYSxuLT1xYSxjLmxlbnNbYy5oYXZlKytdPXNhO2Vsc2V7aWYoMTY9PT1zYSl7Zm9yKHphPXFhKzI7bjx6YTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKG0+Pj49cWEsbi09cWEsMD09PWMuaGF2ZSl7YS5tc2c9XCJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0XCIsYy5tb2RlPW1hO2JyZWFrfXdhPWMubGVuc1tjLmhhdmUtMV0scT0zKygzJm0pLG0+Pj49MixuLT0yfWVsc2UgaWYoMTc9PT1zYSl7Zm9yKHphPXFhKzM7bjx6YTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fW0+Pj49cWEsbi09cWEsd2E9MCxxPTMrKDcmbSksbT4+Pj0zLG4tPTN9ZWxzZXtmb3IoemE9cWErNztuPHphOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9bT4+Pj1xYSxuLT1xYSx3YT0wLHE9MTErKDEyNyZtKSxtPj4+PTcsbi09N31pZihjLmhhdmUrcT5jLm5sZW4rYy5uZGlzdCl7YS5tc2c9XCJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0XCIsYy5tb2RlPW1hO2JyZWFrfWZvcig7cS0tOyljLmxlbnNbYy5oYXZlKytdPXdhfX1pZihjLm1vZGU9PT1tYSlicmVhaztpZigwPT09Yy5sZW5zWzI1Nl0pe2EubXNnPVwiaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrXCIsYy5tb2RlPW1hO2JyZWFrfWlmKGMubGVuYml0cz05LHlhPXtiaXRzOmMubGVuYml0c30seGE9dyh5LGMubGVucywwLGMubmxlbixjLmxlbmNvZGUsMCxjLndvcmsseWEpLGMubGVuYml0cz15YS5iaXRzLHhhKXthLm1zZz1cImludmFsaWQgbGl0ZXJhbC9sZW5ndGhzIHNldFwiLGMubW9kZT1tYTticmVha31pZihjLmRpc3RiaXRzPTYsYy5kaXN0Y29kZT1jLmRpc3RkeW4seWE9e2JpdHM6Yy5kaXN0Yml0c30seGE9dyh6LGMubGVucyxjLm5sZW4sYy5uZGlzdCxjLmRpc3Rjb2RlLDAsYy53b3JrLHlhKSxjLmRpc3RiaXRzPXlhLmJpdHMseGEpe2EubXNnPVwiaW52YWxpZCBkaXN0YW5jZXMgc2V0XCIsYy5tb2RlPW1hO2JyZWFrfWlmKGMubW9kZT1jYSxiPT09QylicmVhayBhO2Nhc2UgY2E6Yy5tb2RlPWRhO2Nhc2UgZGE6aWYoaT49NiYmaj49MjU4KXthLm5leHRfb3V0PWgsYS5hdmFpbF9vdXQ9aixhLm5leHRfaW49ZyxhLmF2YWlsX2luPWksYy5ob2xkPW0sYy5iaXRzPW4sdihhLHApLGg9YS5uZXh0X291dCxmPWEub3V0cHV0LGo9YS5hdmFpbF9vdXQsZz1hLm5leHRfaW4sZT1hLmlucHV0LGk9YS5hdmFpbF9pbixtPWMuaG9sZCxuPWMuYml0cyxjLm1vZGU9PT1XJiYoYy5iYWNrPS0xKTticmVha31mb3IoYy5iYWNrPTA7QWE9Yy5sZW5jb2RlW20mKDE8PGMubGVuYml0cyktMV0scWE9QWE+Pj4yNCxyYT1BYT4+PjE2JjI1NSxzYT02NTUzNSZBYSwhKHFhPD1uKTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKHJhJiYwPT09KDI0MCZyYSkpe2Zvcih0YT1xYSx1YT1yYSx2YT1zYTtBYT1jLmxlbmNvZGVbdmErKChtJigxPDx0YSt1YSktMSk+PnRhKV0scWE9QWE+Pj4yNCxyYT1BYT4+PjE2JjI1NSxzYT02NTUzNSZBYSwhKHRhK3FhPD1uKTspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fW0+Pj49dGEsbi09dGEsYy5iYWNrKz10YX1pZihtPj4+PXFhLG4tPXFhLGMuYmFjays9cWEsYy5sZW5ndGg9c2EsMD09PXJhKXtjLm1vZGU9aWE7YnJlYWt9aWYoMzImcmEpe2MuYmFjaz0tMSxjLm1vZGU9VzticmVha31pZig2NCZyYSl7YS5tc2c9XCJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGVcIixjLm1vZGU9bWE7YnJlYWt9Yy5leHRyYT0xNSZyYSxjLm1vZGU9ZWE7Y2FzZSBlYTppZihjLmV4dHJhKXtmb3IoemE9Yy5leHRyYTtuPHphOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5sZW5ndGgrPW0mKDE8PGMuZXh0cmEpLTEsbT4+Pj1jLmV4dHJhLG4tPWMuZXh0cmEsYy5iYWNrKz1jLmV4dHJhfWMud2FzPWMubGVuZ3RoLGMubW9kZT1mYTtjYXNlIGZhOmZvcig7QWE9Yy5kaXN0Y29kZVttJigxPDxjLmRpc3RiaXRzKS0xXSxxYT1BYT4+PjI0LHJhPUFhPj4+MTYmMjU1LHNhPTY1NTM1JkFhLCEocWE8PW4pOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoMD09PSgyNDAmcmEpKXtmb3IodGE9cWEsdWE9cmEsdmE9c2E7QWE9Yy5kaXN0Y29kZVt2YSsoKG0mKDE8PHRhK3VhKS0xKT4+dGEpXSxxYT1BYT4+PjI0LHJhPUFhPj4+MTYmMjU1LHNhPTY1NTM1JkFhLCEodGErcWE8PW4pOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9bT4+Pj10YSxuLT10YSxjLmJhY2srPXRhfWlmKG0+Pj49cWEsbi09cWEsYy5iYWNrKz1xYSw2NCZyYSl7YS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIGNvZGVcIixjLm1vZGU9bWE7YnJlYWt9Yy5vZmZzZXQ9c2EsYy5leHRyYT0xNSZyYSxjLm1vZGU9Z2E7Y2FzZSBnYTppZihjLmV4dHJhKXtmb3IoemE9Yy5leHRyYTtuPHphOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5vZmZzZXQrPW0mKDE8PGMuZXh0cmEpLTEsbT4+Pj1jLmV4dHJhLG4tPWMuZXh0cmEsYy5iYWNrKz1jLmV4dHJhfWlmKGMub2Zmc2V0PmMuZG1heCl7YS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLGMubW9kZT1tYTticmVha31jLm1vZGU9aGE7Y2FzZSBoYTppZigwPT09ailicmVhayBhO2lmKHE9cC1qLGMub2Zmc2V0PnEpe2lmKHE9Yy5vZmZzZXQtcSxxPmMud2hhdmUmJmMuc2FuZSl7YS5tc2c9XCJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFja1wiLGMubW9kZT1tYTticmVha31xPmMud25leHQ/KHEtPWMud25leHQscj1jLndzaXplLXEpOnI9Yy53bmV4dC1xLHE+Yy5sZW5ndGgmJihxPWMubGVuZ3RoKSxwYT1jLndpbmRvd31lbHNlIHBhPWYscj1oLWMub2Zmc2V0LHE9Yy5sZW5ndGg7cT5qJiYocT1qKSxqLT1xLGMubGVuZ3RoLT1xO2RvIGZbaCsrXT1wYVtyKytdO3doaWxlKC0tcSk7MD09PWMubGVuZ3RoJiYoYy5tb2RlPWRhKTticmVhaztjYXNlIGlhOmlmKDA9PT1qKWJyZWFrIGE7ZltoKytdPWMubGVuZ3RoLGotLSxjLm1vZGU9ZGE7YnJlYWs7Y2FzZSBqYTppZihjLndyYXApe2Zvcig7bjwzMjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG18PWVbZysrXTw8bixuKz04fWlmKHAtPWosYS50b3RhbF9vdXQrPXAsYy50b3RhbCs9cCxwJiYoYS5hZGxlcj1jLmNoZWNrPWMuZmxhZ3M/dShjLmNoZWNrLGYscCxoLXApOnQoYy5jaGVjayxmLHAsaC1wKSkscD1qLChjLmZsYWdzP206ZChtKSkhPT1jLmNoZWNrKXthLm1zZz1cImluY29ycmVjdCBkYXRhIGNoZWNrXCIsYy5tb2RlPW1hO2JyZWFrfW09MCxuPTB9Yy5tb2RlPWthO2Nhc2Uga2E6aWYoYy53cmFwJiZjLmZsYWdzKXtmb3IoO248MzI7KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihtIT09KDQyOTQ5NjcyOTUmYy50b3RhbCkpe2EubXNnPVwiaW5jb3JyZWN0IGxlbmd0aCBjaGVja1wiLGMubW9kZT1tYTticmVha31tPTAsbj0wfWMubW9kZT1sYTtjYXNlIGxhOnhhPUU7YnJlYWsgYTtjYXNlIG1hOnhhPUg7YnJlYWsgYTtjYXNlIG5hOnJldHVybiBJO2Nhc2Ugb2E6ZGVmYXVsdDpyZXR1cm4gR31yZXR1cm4gYS5uZXh0X291dD1oLGEuYXZhaWxfb3V0PWosYS5uZXh0X2luPWcsYS5hdmFpbF9pbj1pLGMuaG9sZD1tLGMuYml0cz1uLChjLndzaXplfHxwIT09YS5hdmFpbF9vdXQmJmMubW9kZTxtYSYmKGMubW9kZTxqYXx8YiE9PUEpKSYmbChhLGEub3V0cHV0LGEubmV4dF9vdXQscC1hLmF2YWlsX291dCk/KGMubW9kZT1uYSxJKTooby09YS5hdmFpbF9pbixwLT1hLmF2YWlsX291dCxhLnRvdGFsX2luKz1vLGEudG90YWxfb3V0Kz1wLGMudG90YWwrPXAsYy53cmFwJiZwJiYoYS5hZGxlcj1jLmNoZWNrPWMuZmxhZ3M/dShjLmNoZWNrLGYscCxhLm5leHRfb3V0LXApOnQoYy5jaGVjayxmLHAsYS5uZXh0X291dC1wKSksYS5kYXRhX3R5cGU9Yy5iaXRzKyhjLmxhc3Q/NjQ6MCkrKGMubW9kZT09PVc/MTI4OjApKyhjLm1vZGU9PT1jYXx8Yy5tb2RlPT09Wj8yNTY6MCksKDA9PT1vJiYwPT09cHx8Yj09PUEpJiZ4YT09PUQmJih4YT1KKSx4YSl9ZnVuY3Rpb24gbihhKXtpZighYXx8IWEuc3RhdGUpcmV0dXJuIEc7dmFyIGI9YS5zdGF0ZTtyZXR1cm4gYi53aW5kb3cmJihiLndpbmRvdz1udWxsKSxhLnN0YXRlPW51bGwsRH1mdW5jdGlvbiBvKGEsYil7dmFyIGM7cmV0dXJuIGEmJmEuc3RhdGU/KGM9YS5zdGF0ZSwwPT09KDImYy53cmFwKT9HOihjLmhlYWQ9YixiLmRvbmU9ITEsRCkpOkd9ZnVuY3Rpb24gcChhLGIpe3ZhciBjLGQsZSxmPWIubGVuZ3RoO3JldHVybiBhJiZhLnN0YXRlPyhjPWEuc3RhdGUsMCE9PWMud3JhcCYmYy5tb2RlIT09Vj9HOmMubW9kZT09PVYmJihkPTEsZD10KGQsYixmLDApLGQhPT1jLmNoZWNrKT9IOihlPWwoYSxiLGYsZikpPyhjLm1vZGU9bmEsSSk6KGMuaGF2ZWRpY3Q9MSxEKSk6R312YXIgcSxyLHM9YShcIi4uL3V0aWxzL2NvbW1vblwiKSx0PWEoXCIuL2FkbGVyMzJcIiksdT1hKFwiLi9jcmMzMlwiKSx2PWEoXCIuL2luZmZhc3RcIiksdz1hKFwiLi9pbmZ0cmVlc1wiKSx4PTAseT0xLHo9MixBPTQsQj01LEM9NixEPTAsRT0xLEY9MixHPS0yLEg9LTMsST0tNCxKPS01LEs9OCxMPTEsTT0yLE49MyxPPTQsUD01LFE9NixSPTcsUz04LFQ9OSxVPTEwLFY9MTEsVz0xMixYPTEzLFk9MTQsWj0xNSwkPTE2LF89MTcsYWE9MTgsYmE9MTksY2E9MjAsZGE9MjEsZWE9MjIsZmE9MjMsZ2E9MjQsaGE9MjUsaWE9MjYsamE9Mjcsa2E9MjgsbGE9MjksbWE9MzAsbmE9MzEsb2E9MzIscGE9ODUyLHFhPTU5MixyYT0xNSxzYT1yYSx0YT0hMDtjLmluZmxhdGVSZXNldD1nLGMuaW5mbGF0ZVJlc2V0Mj1oLGMuaW5mbGF0ZVJlc2V0S2VlcD1mLGMuaW5mbGF0ZUluaXQ9aixjLmluZmxhdGVJbml0Mj1pLGMuaW5mbGF0ZT1tLGMuaW5mbGF0ZUVuZD1uLGMuaW5mbGF0ZUdldEhlYWRlcj1vLGMuaW5mbGF0ZVNldERpY3Rpb25hcnk9cCxjLmluZmxhdGVJbmZvPVwicGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KVwifSx7XCIuLi91dGlscy9jb21tb25cIjo2MCxcIi4vYWRsZXIzMlwiOjYyLFwiLi9jcmMzMlwiOjY0LFwiLi9pbmZmYXN0XCI6NjcsXCIuL2luZnRyZWVzXCI6Njl9XSw2OTpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO3ZhciBkPWEoXCIuLi91dGlscy9jb21tb25cIiksZT0xNSxmPTg1MixnPTU5MixoPTAsaT0xLGo9MixrPVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDAsMF0sbD1bMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTcsMTcsMTcsMTcsMTgsMTgsMTgsMTgsMTksMTksMTksMTksMjAsMjAsMjAsMjAsMjEsMjEsMjEsMjEsMTYsNzIsNzhdLG09WzEsMiwzLDQsNSw3LDksMTMsMTcsMjUsMzMsNDksNjUsOTcsMTI5LDE5MywyNTcsMzg1LDUxMyw3NjksMTAyNSwxNTM3LDIwNDksMzA3Myw0MDk3LDYxNDUsODE5MywxMjI4OSwxNjM4NSwyNDU3NywwLDBdLG49WzE2LDE2LDE2LDE2LDE3LDE3LDE4LDE4LDE5LDE5LDIwLDIwLDIxLDIxLDIyLDIyLDIzLDIzLDI0LDI0LDI1LDI1LDI2LDI2LDI3LDI3LDI4LDI4LDI5LDI5LDY0LDY0XTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMsbyxwLHEscixzKXt2YXIgdCx1LHYsdyx4LHkseixBLEIsQz1zLmJpdHMsRD0wLEU9MCxGPTAsRz0wLEg9MCxJPTAsSj0wLEs9MCxMPTAsTT0wLE49bnVsbCxPPTAsUD1uZXcgZC5CdWYxNihlKzEpLFE9bmV3IGQuQnVmMTYoZSsxKSxSPW51bGwsUz0wO2ZvcihEPTA7RDw9ZTtEKyspUFtEXT0wO2ZvcihFPTA7RTxvO0UrKylQW2JbYytFXV0rKztmb3IoSD1DLEc9ZTtHPj0xJiYwPT09UFtHXTtHLS0pO2lmKEg+RyYmKEg9RyksMD09PUcpcmV0dXJuIHBbcSsrXT0yMDk3MTUyMCxwW3ErK109MjA5NzE1MjAscy5iaXRzPTEsMDtmb3IoRj0xO0Y8RyYmMD09PVBbRl07RisrKTtmb3IoSDxGJiYoSD1GKSxLPTEsRD0xO0Q8PWU7RCsrKWlmKEs8PD0xLEstPVBbRF0sSzwwKXJldHVybi0xO2lmKEs+MCYmKGE9PT1ofHwxIT09RykpcmV0dXJuLTE7Zm9yKFFbMV09MCxEPTE7RDxlO0QrKylRW0QrMV09UVtEXStQW0RdO2ZvcihFPTA7RTxvO0UrKykwIT09YltjK0VdJiYocltRW2JbYytFXV0rK109RSk7aWYoYT09PWg/KE49Uj1yLHk9MTkpOmE9PT1pPyhOPWssTy09MjU3LFI9bCxTLT0yNTcseT0yNTYpOihOPW0sUj1uLHk9LTEpLE09MCxFPTAsRD1GLHg9cSxJPUgsSj0wLHY9LTEsTD0xPDxILHc9TC0xLGE9PT1pJiZMPmZ8fGE9PT1qJiZMPmcpcmV0dXJuIDE7Zm9yKHZhciBUPTA7Oyl7VCsrLHo9RC1KLHJbRV08eT8oQT0wLEI9cltFXSk6cltFXT55PyhBPVJbUytyW0VdXSxCPU5bTytyW0VdXSk6KEE9OTYsQj0wKSx0PTE8PEQtSix1PTE8PEksRj11O2RvIHUtPXQscFt4KyhNPj5KKSt1XT16PDwyNHxBPDwxNnxCfDA7d2hpbGUoMCE9PXUpO2Zvcih0PTE8PEQtMTtNJnQ7KXQ+Pj0xO2lmKDAhPT10PyhNJj10LTEsTSs9dCk6TT0wLEUrKywwPT09LS1QW0RdKXtpZihEPT09RylicmVhaztEPWJbYytyW0VdXX1pZihEPkgmJihNJncpIT09dil7Zm9yKDA9PT1KJiYoSj1IKSx4Kz1GLEk9RC1KLEs9MTw8STtJK0o8RyYmKEstPVBbSStKXSwhKEs8PTApKTspSSsrLEs8PD0xO2lmKEwrPTE8PEksYT09PWkmJkw+Znx8YT09PWomJkw+ZylyZXR1cm4gMTt2PU0mdyxwW3ZdPUg8PDI0fEk8PDE2fHgtcXwwfX1yZXR1cm4gMCE9PU0mJihwW3grTV09RC1KPDwyNHw2NDw8MTZ8MCkscy5iaXRzPUgsMH19LHtcIi4uL3V0aWxzL2NvbW1vblwiOjYwfV0sNzA6W2Z1bmN0aW9uKGEsYixjKXtcInVzZSBzdHJpY3RcIjtiLmV4cG9ydHM9ezI6XCJuZWVkIGRpY3Rpb25hcnlcIiwxOlwic3RyZWFtIGVuZFwiLDA6XCJcIixcIi0xXCI6XCJmaWxlIGVycm9yXCIsXCItMlwiOlwic3RyZWFtIGVycm9yXCIsXCItM1wiOlwiZGF0YSBlcnJvclwiLFwiLTRcIjpcImluc3VmZmljaWVudCBtZW1vcnlcIixcIi01XCI6XCJidWZmZXIgZXJyb3JcIixcIi02XCI6XCJpbmNvbXBhdGlibGUgdmVyc2lvblwifX0se31dLDcxOltmdW5jdGlvbihhLGIsYyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGI9YS5sZW5ndGg7LS1iPj0wOylhW2JdPTB9ZnVuY3Rpb24gZShhLGIsYyxkLGUpe3RoaXMuc3RhdGljX3RyZWU9YSx0aGlzLmV4dHJhX2JpdHM9Yix0aGlzLmV4dHJhX2Jhc2U9Yyx0aGlzLmVsZW1zPWQsdGhpcy5tYXhfbGVuZ3RoPWUsdGhpcy5oYXNfc3RyZWU9YSYmYS5sZW5ndGh9ZnVuY3Rpb24gZihhLGIpe3RoaXMuZHluX3RyZWU9YSx0aGlzLm1heF9jb2RlPTAsdGhpcy5zdGF0X2Rlc2M9Yn1mdW5jdGlvbiBnKGEpe3JldHVybiBhPDI1Nj9pYVthXTppYVsyNTYrKGE+Pj43KV19ZnVuY3Rpb24gaChhLGIpe2EucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPTI1NSZiLGEucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPWI+Pj44JjI1NX1mdW5jdGlvbiBpKGEsYixjKXthLmJpX3ZhbGlkPlgtYz8oYS5iaV9idWZ8PWI8PGEuYmlfdmFsaWQmNjU1MzUsaChhLGEuYmlfYnVmKSxhLmJpX2J1Zj1iPj5YLWEuYmlfdmFsaWQsYS5iaV92YWxpZCs9Yy1YKTooYS5iaV9idWZ8PWI8PGEuYmlfdmFsaWQmNjU1MzUsYS5iaV92YWxpZCs9Yyl9ZnVuY3Rpb24gaihhLGIsYyl7aShhLGNbMipiXSxjWzIqYisxXSl9ZnVuY3Rpb24gayhhLGIpe3ZhciBjPTA7ZG8gY3w9MSZhLGE+Pj49MSxjPDw9MTt3aGlsZSgtLWI+MCk7cmV0dXJuIGM+Pj4xfWZ1bmN0aW9uIGwoYSl7MTY9PT1hLmJpX3ZhbGlkPyhoKGEsYS5iaV9idWYpLGEuYmlfYnVmPTAsYS5iaV92YWxpZD0wKTphLmJpX3ZhbGlkPj04JiYoYS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109MjU1JmEuYmlfYnVmLGEuYmlfYnVmPj49OCxhLmJpX3ZhbGlkLT04KX1mdW5jdGlvbiBtKGEsYil7dmFyIGMsZCxlLGYsZyxoLGk9Yi5keW5fdHJlZSxqPWIubWF4X2NvZGUsaz1iLnN0YXRfZGVzYy5zdGF0aWNfdHJlZSxsPWIuc3RhdF9kZXNjLmhhc19zdHJlZSxtPWIuc3RhdF9kZXNjLmV4dHJhX2JpdHMsbj1iLnN0YXRfZGVzYy5leHRyYV9iYXNlLG89Yi5zdGF0X2Rlc2MubWF4X2xlbmd0aCxwPTA7Zm9yKGY9MDtmPD1XO2YrKylhLmJsX2NvdW50W2ZdPTA7Zm9yKGlbMiphLmhlYXBbYS5oZWFwX21heF0rMV09MCxjPWEuaGVhcF9tYXgrMTtjPFY7YysrKWQ9YS5oZWFwW2NdLGY9aVsyKmlbMipkKzFdKzFdKzEsZj5vJiYoZj1vLHArKyksaVsyKmQrMV09ZixkPmp8fChhLmJsX2NvdW50W2ZdKyssZz0wLGQ+PW4mJihnPW1bZC1uXSksaD1pWzIqZF0sYS5vcHRfbGVuKz1oKihmK2cpLGwmJihhLnN0YXRpY19sZW4rPWgqKGtbMipkKzFdK2cpKSk7aWYoMCE9PXApe2Rve2ZvcihmPW8tMTswPT09YS5ibF9jb3VudFtmXTspZi0tO2EuYmxfY291bnRbZl0tLSxhLmJsX2NvdW50W2YrMV0rPTIsYS5ibF9jb3VudFtvXS0tLHAtPTJ9d2hpbGUocD4wKTtmb3IoZj1vOzAhPT1mO2YtLSlmb3IoZD1hLmJsX2NvdW50W2ZdOzAhPT1kOyllPWEuaGVhcFstLWNdLGU+anx8KGlbMiplKzFdIT09ZiYmKGEub3B0X2xlbis9KGYtaVsyKmUrMV0pKmlbMiplXSxpWzIqZSsxXT1mKSxkLS0pfX1mdW5jdGlvbiBuKGEsYixjKXt2YXIgZCxlLGY9bmV3IEFycmF5KFcrMSksZz0wO2ZvcihkPTE7ZDw9VztkKyspZltkXT1nPWcrY1tkLTFdPDwxO2ZvcihlPTA7ZTw9YjtlKyspe3ZhciBoPWFbMiplKzFdOzAhPT1oJiYoYVsyKmVdPWsoZltoXSsrLGgpKX19ZnVuY3Rpb24gbygpe3ZhciBhLGIsYyxkLGYsZz1uZXcgQXJyYXkoVysxKTtmb3IoYz0wLGQ9MDtkPFEtMTtkKyspZm9yKGthW2RdPWMsYT0wO2E8MTw8YmFbZF07YSsrKWphW2MrK109ZDtmb3IoamFbYy0xXT1kLGY9MCxkPTA7ZDwxNjtkKyspZm9yKGxhW2RdPWYsYT0wO2E8MTw8Y2FbZF07YSsrKWlhW2YrK109ZDtmb3IoZj4+PTc7ZDxUO2QrKylmb3IobGFbZF09Zjw8NyxhPTA7YTwxPDxjYVtkXS03O2ErKylpYVsyNTYrZisrXT1kO2ZvcihiPTA7Yjw9VztiKyspZ1tiXT0wO2ZvcihhPTA7YTw9MTQzOylnYVsyKmErMV09OCxhKyssZ1s4XSsrO2Zvcig7YTw9MjU1OylnYVsyKmErMV09OSxhKyssZ1s5XSsrO2Zvcig7YTw9Mjc5OylnYVsyKmErMV09NyxhKyssZ1s3XSsrO2Zvcig7YTw9Mjg3OylnYVsyKmErMV09OCxhKyssZ1s4XSsrO2ZvcihuKGdhLFMrMSxnKSxhPTA7YTxUO2ErKyloYVsyKmErMV09NSxoYVsyKmFdPWsoYSw1KTttYT1uZXcgZShnYSxiYSxSKzEsUyxXKSxuYT1uZXcgZShoYSxjYSwwLFQsVyksb2E9bmV3IGUobmV3IEFycmF5KDApLGRhLDAsVSxZKX1mdW5jdGlvbiBwKGEpe3ZhciBiO2ZvcihiPTA7YjxTO2IrKylhLmR5bl9sdHJlZVsyKmJdPTA7Zm9yKGI9MDtiPFQ7YisrKWEuZHluX2R0cmVlWzIqYl09MDtmb3IoYj0wO2I8VTtiKyspYS5ibF90cmVlWzIqYl09MDthLmR5bl9sdHJlZVsyKlpdPTEsYS5vcHRfbGVuPWEuc3RhdGljX2xlbj0wLGEubGFzdF9saXQ9YS5tYXRjaGVzPTB9ZnVuY3Rpb24gcShhKXthLmJpX3ZhbGlkPjg/aChhLGEuYmlfYnVmKTphLmJpX3ZhbGlkPjAmJihhLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT1hLmJpX2J1ZiksYS5iaV9idWY9MCxhLmJpX3ZhbGlkPTB9ZnVuY3Rpb24gcihhLGIsYyxkKXtxKGEpLGQmJihoKGEsYyksaChhLH5jKSksRy5hcnJheVNldChhLnBlbmRpbmdfYnVmLGEud2luZG93LGIsYyxhLnBlbmRpbmcpLGEucGVuZGluZys9Y31mdW5jdGlvbiBzKGEsYixjLGQpe3ZhciBlPTIqYixmPTIqYztyZXR1cm4gYVtlXTxhW2ZdfHxhW2VdPT09YVtmXSYmZFtiXTw9ZFtjXTtcclxufWZ1bmN0aW9uIHQoYSxiLGMpe2Zvcih2YXIgZD1hLmhlYXBbY10sZT1jPDwxO2U8PWEuaGVhcF9sZW4mJihlPGEuaGVhcF9sZW4mJnMoYixhLmhlYXBbZSsxXSxhLmhlYXBbZV0sYS5kZXB0aCkmJmUrKywhcyhiLGQsYS5oZWFwW2VdLGEuZGVwdGgpKTspYS5oZWFwW2NdPWEuaGVhcFtlXSxjPWUsZTw8PTE7YS5oZWFwW2NdPWR9ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQsZSxmLGgsaz0wO2lmKDAhPT1hLmxhc3RfbGl0KWRvIGQ9YS5wZW5kaW5nX2J1ZlthLmRfYnVmKzIqa108PDh8YS5wZW5kaW5nX2J1ZlthLmRfYnVmKzIqaysxXSxlPWEucGVuZGluZ19idWZbYS5sX2J1ZitrXSxrKyssMD09PWQ/aihhLGUsYik6KGY9amFbZV0saihhLGYrUisxLGIpLGg9YmFbZl0sMCE9PWgmJihlLT1rYVtmXSxpKGEsZSxoKSksZC0tLGY9ZyhkKSxqKGEsZixjKSxoPWNhW2ZdLDAhPT1oJiYoZC09bGFbZl0saShhLGQsaCkpKTt3aGlsZShrPGEubGFzdF9saXQpO2ooYSxaLGIpfWZ1bmN0aW9uIHYoYSxiKXt2YXIgYyxkLGUsZj1iLmR5bl90cmVlLGc9Yi5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaD1iLnN0YXRfZGVzYy5oYXNfc3RyZWUsaT1iLnN0YXRfZGVzYy5lbGVtcyxqPS0xO2ZvcihhLmhlYXBfbGVuPTAsYS5oZWFwX21heD1WLGM9MDtjPGk7YysrKTAhPT1mWzIqY10/KGEuaGVhcFsrK2EuaGVhcF9sZW5dPWo9YyxhLmRlcHRoW2NdPTApOmZbMipjKzFdPTA7Zm9yKDthLmhlYXBfbGVuPDI7KWU9YS5oZWFwWysrYS5oZWFwX2xlbl09ajwyPysrajowLGZbMiplXT0xLGEuZGVwdGhbZV09MCxhLm9wdF9sZW4tLSxoJiYoYS5zdGF0aWNfbGVuLT1nWzIqZSsxXSk7Zm9yKGIubWF4X2NvZGU9aixjPWEuaGVhcF9sZW4+PjE7Yz49MTtjLS0pdChhLGYsYyk7ZT1pO2RvIGM9YS5oZWFwWzFdLGEuaGVhcFsxXT1hLmhlYXBbYS5oZWFwX2xlbi0tXSx0KGEsZiwxKSxkPWEuaGVhcFsxXSxhLmhlYXBbLS1hLmhlYXBfbWF4XT1jLGEuaGVhcFstLWEuaGVhcF9tYXhdPWQsZlsyKmVdPWZbMipjXStmWzIqZF0sYS5kZXB0aFtlXT0oYS5kZXB0aFtjXT49YS5kZXB0aFtkXT9hLmRlcHRoW2NdOmEuZGVwdGhbZF0pKzEsZlsyKmMrMV09ZlsyKmQrMV09ZSxhLmhlYXBbMV09ZSsrLHQoYSxmLDEpO3doaWxlKGEuaGVhcF9sZW4+PTIpO2EuaGVhcFstLWEuaGVhcF9tYXhdPWEuaGVhcFsxXSxtKGEsYiksbihmLGosYS5ibF9jb3VudCl9ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQsZSxmPS0xLGc9YlsxXSxoPTAsaT03LGo9NDtmb3IoMD09PWcmJihpPTEzOCxqPTMpLGJbMiooYysxKSsxXT02NTUzNSxkPTA7ZDw9YztkKyspZT1nLGc9YlsyKihkKzEpKzFdLCsraDxpJiZlPT09Z3x8KGg8aj9hLmJsX3RyZWVbMiplXSs9aDowIT09ZT8oZSE9PWYmJmEuYmxfdHJlZVsyKmVdKyssYS5ibF90cmVlWzIqJF0rKyk6aDw9MTA/YS5ibF90cmVlWzIqX10rKzphLmJsX3RyZWVbMiphYV0rKyxoPTAsZj1lLDA9PT1nPyhpPTEzOCxqPTMpOmU9PT1nPyhpPTYsaj0zKTooaT03LGo9NCkpfWZ1bmN0aW9uIHgoYSxiLGMpe3ZhciBkLGUsZj0tMSxnPWJbMV0saD0wLGs9NyxsPTQ7Zm9yKDA9PT1nJiYoaz0xMzgsbD0zKSxkPTA7ZDw9YztkKyspaWYoZT1nLGc9YlsyKihkKzEpKzFdLCEoKytoPGsmJmU9PT1nKSl7aWYoaDxsKXtkbyBqKGEsZSxhLmJsX3RyZWUpO3doaWxlKDAhPT0tLWgpfWVsc2UgMCE9PWU/KGUhPT1mJiYoaihhLGUsYS5ibF90cmVlKSxoLS0pLGooYSwkLGEuYmxfdHJlZSksaShhLGgtMywyKSk6aDw9MTA/KGooYSxfLGEuYmxfdHJlZSksaShhLGgtMywzKSk6KGooYSxhYSxhLmJsX3RyZWUpLGkoYSxoLTExLDcpKTtoPTAsZj1lLDA9PT1nPyhrPTEzOCxsPTMpOmU9PT1nPyhrPTYsbD0zKTooaz03LGw9NCl9fWZ1bmN0aW9uIHkoYSl7dmFyIGI7Zm9yKHcoYSxhLmR5bl9sdHJlZSxhLmxfZGVzYy5tYXhfY29kZSksdyhhLGEuZHluX2R0cmVlLGEuZF9kZXNjLm1heF9jb2RlKSx2KGEsYS5ibF9kZXNjKSxiPVUtMTtiPj0zJiYwPT09YS5ibF90cmVlWzIqZWFbYl0rMV07Yi0tKTtyZXR1cm4gYS5vcHRfbGVuKz0zKihiKzEpKzUrNSs0LGJ9ZnVuY3Rpb24geihhLGIsYyxkKXt2YXIgZTtmb3IoaShhLGItMjU3LDUpLGkoYSxjLTEsNSksaShhLGQtNCw0KSxlPTA7ZTxkO2UrKylpKGEsYS5ibF90cmVlWzIqZWFbZV0rMV0sMyk7eChhLGEuZHluX2x0cmVlLGItMSkseChhLGEuZHluX2R0cmVlLGMtMSl9ZnVuY3Rpb24gQShhKXt2YXIgYixjPTQwOTM2MjQ0NDc7Zm9yKGI9MDtiPD0zMTtiKyssYz4+Pj0xKWlmKDEmYyYmMCE9PWEuZHluX2x0cmVlWzIqYl0pcmV0dXJuIEk7aWYoMCE9PWEuZHluX2x0cmVlWzE4XXx8MCE9PWEuZHluX2x0cmVlWzIwXXx8MCE9PWEuZHluX2x0cmVlWzI2XSlyZXR1cm4gSjtmb3IoYj0zMjtiPFI7YisrKWlmKDAhPT1hLmR5bl9sdHJlZVsyKmJdKXJldHVybiBKO3JldHVybiBJfWZ1bmN0aW9uIEIoYSl7cGF8fChvKCkscGE9ITApLGEubF9kZXNjPW5ldyBmKGEuZHluX2x0cmVlLG1hKSxhLmRfZGVzYz1uZXcgZihhLmR5bl9kdHJlZSxuYSksYS5ibF9kZXNjPW5ldyBmKGEuYmxfdHJlZSxvYSksYS5iaV9idWY9MCxhLmJpX3ZhbGlkPTAscChhKX1mdW5jdGlvbiBDKGEsYixjLGQpe2koYSwoTDw8MSkrKGQ/MTowKSwzKSxyKGEsYixjLCEwKX1mdW5jdGlvbiBEKGEpe2koYSxNPDwxLDMpLGooYSxaLGdhKSxsKGEpfWZ1bmN0aW9uIEUoYSxiLGMsZCl7dmFyIGUsZixnPTA7YS5sZXZlbD4wPyhhLnN0cm0uZGF0YV90eXBlPT09SyYmKGEuc3RybS5kYXRhX3R5cGU9QShhKSksdihhLGEubF9kZXNjKSx2KGEsYS5kX2Rlc2MpLGc9eShhKSxlPWEub3B0X2xlbiszKzc+Pj4zLGY9YS5zdGF0aWNfbGVuKzMrNz4+PjMsZjw9ZSYmKGU9ZikpOmU9Zj1jKzUsYys0PD1lJiZiIT09LTE/QyhhLGIsYyxkKTphLnN0cmF0ZWd5PT09SHx8Zj09PWU/KGkoYSwoTTw8MSkrKGQ/MTowKSwzKSx1KGEsZ2EsaGEpKTooaShhLChOPDwxKSsoZD8xOjApLDMpLHooYSxhLmxfZGVzYy5tYXhfY29kZSsxLGEuZF9kZXNjLm1heF9jb2RlKzEsZysxKSx1KGEsYS5keW5fbHRyZWUsYS5keW5fZHRyZWUpKSxwKGEpLGQmJnEoYSl9ZnVuY3Rpb24gRihhLGIsYyl7cmV0dXJuIGEucGVuZGluZ19idWZbYS5kX2J1ZisyKmEubGFzdF9saXRdPWI+Pj44JjI1NSxhLnBlbmRpbmdfYnVmW2EuZF9idWYrMiphLmxhc3RfbGl0KzFdPTI1NSZiLGEucGVuZGluZ19idWZbYS5sX2J1ZithLmxhc3RfbGl0XT0yNTUmYyxhLmxhc3RfbGl0KyssMD09PWI/YS5keW5fbHRyZWVbMipjXSsrOihhLm1hdGNoZXMrKyxiLS0sYS5keW5fbHRyZWVbMiooamFbY10rUisxKV0rKyxhLmR5bl9kdHJlZVsyKmcoYildKyspLGEubGFzdF9saXQ9PT1hLmxpdF9idWZzaXplLTF9dmFyIEc9YShcIi4uL3V0aWxzL2NvbW1vblwiKSxIPTQsST0wLEo9MSxLPTIsTD0wLE09MSxOPTIsTz0zLFA9MjU4LFE9MjksUj0yNTYsUz1SKzErUSxUPTMwLFU9MTksVj0yKlMrMSxXPTE1LFg9MTYsWT03LFo9MjU2LCQ9MTYsXz0xNyxhYT0xOCxiYT1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXSxjYT1bMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10sZGE9WzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiwzLDddLGVhPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxmYT01MTIsZ2E9bmV3IEFycmF5KDIqKFMrMikpO2QoZ2EpO3ZhciBoYT1uZXcgQXJyYXkoMipUKTtkKGhhKTt2YXIgaWE9bmV3IEFycmF5KGZhKTtkKGlhKTt2YXIgamE9bmV3IEFycmF5KFAtTysxKTtkKGphKTt2YXIga2E9bmV3IEFycmF5KFEpO2Qoa2EpO3ZhciBsYT1uZXcgQXJyYXkoVCk7ZChsYSk7dmFyIG1hLG5hLG9hLHBhPSExO2MuX3RyX2luaXQ9QixjLl90cl9zdG9yZWRfYmxvY2s9QyxjLl90cl9mbHVzaF9ibG9jaz1FLGMuX3RyX3RhbGx5PUYsYy5fdHJfYWxpZ249RH0se1wiLi4vdXRpbHMvY29tbW9uXCI6NjB9XSw3MjpbZnVuY3Rpb24oYSxiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9XCJcIix0aGlzLnN0YXRlPW51bGwsdGhpcy5kYXRhX3R5cGU9Mix0aGlzLmFkbGVyPTB9Yi5leHBvcnRzPWR9LHt9XX0se30sWzEwXSkoMTApfSk7Il0sImZpbGUiOiJqc3ppcC5taW4uanMifQ==

(function(global){

  /*
  Channels

  delivery.connect
  file.load

  send.start
  send.success
  send.error

  receive.start
  receive.success
  receive.error
  */
  var imageFilter = /^(image\/gif|image\/jpeg|image\/png|image\/svg\+xml|image\/tiff)/i,
      pubSub;
  
  /********************************/
  /****        PUBSUB     *********/
  /********************************/
  function PubSub(){
    this.channels = {};
  };

  PubSub.prototype.subscribe = function(channel, fn){
    if (this.channels[channel] === undefined) {
      this.channels[channel] = [fn];
    }else{
      this.channels[channel].push(fn);
    };
  };

  PubSub.prototype.publish = function(channel,obj){
    var cnl = this.channels[channel];
    var numChannels = (cnl === undefined) ? 0 : cnl.length;
    for (var i = 0; i < numChannels; i++) {
      cnl[i](obj);
    };
  };

  /********************************/
  /****        FilePackage    *****/
  /********************************/
  function FilePackage(file,receiving,params){
    _this = this;
    this.name = file.name;
    this.size = file.size;
    
    if(receiving){
      this.uid = file.uid;
      this.isText = file.isText;
      this.mimeType = file.mimeType;
      this.data = file.data;
      this.dataURLPrefix = file.prefix;
      this.params = file.params;
      pubSub.publish('receive.success',this);
    }else{
      //Sending a file.
      this.params = params;
      this.uid = this.getUID();
      this.reader = new FileReader();
    
      this.reader.onerror = function(obj){};

      this.reader.onload = function(){
        _this.base64Data = _this.reader.result;
        _this.prepBatch();
      };

      this.reader.readAsDataURL(file);
    };
  };


  FilePackage.prototype.getUID = function(){
    //fix this
    return this.name + this.size + (new Date()).getTime();  
  };

  FilePackage.prototype.prepBatch = function(){
    //replace 'data:image/gif;base64,' with ''
    this.data = this.base64Data.replace(/^[^,]*,/,'');
    this.batch = {
      uid: this.uid,
      name: this.name,
      size: this.size,
      data: this.data,
      params: this.params
    };
    pubSub.publish('file.load',this);
  };

  FilePackage.prototype.isImage = function(){
    return imageFilter.test(this.mimeType);
  };

  FilePackage.prototype.isText = function(){
    return this.isText;
  }

  FilePackage.prototype.text = function(){
    return this.data;
  }

  FilePackage.prototype.dataURL = function(){
    return this.dataURLPrefix + this.data;
  };

  /********************************/
  /****        DELIVERY     *******/
  /********************************/
  function Delivery(socket){
    this.socket = socket;
    this.sending = {};
    this.receiving = {};
    this.connected = false;
    this.subscribe();
    this.connect();
  };

  Delivery.prototype.subscribe = function(){
    var _this = this;
    pubSub.subscribe('file.load',function(filePackage){
      _this.socket.emit('send.start',filePackage.batch);
    });

    pubSub.subscribe('receive.success',function(filePackage){
      _this.socket.emit('send.success',filePackage.uid);

    });

    //Socket Subscriptions
    this.socket.on('send.success',function(uid){
      pubSub.publish('send.success',_this.sending[uid]);
      delete _this.sending[uid];    
    });

    this.socket.on('receive.start',function(file){
      pubSub.publish('receive.start',file.uid);
      var filePackage = new FilePackage(file,true);
      _this.receiving[file.uid] = filePackage;
      
    });


  };

  Delivery.prototype.connect = function(){
    var _this = this;
    this.socket.on('delivery.connect',function(){
      _this.connected = true;
      pubSub.publish('delivery.connect', _this);
    });
    this.socket.emit('delivery.connecting','');
  };

  Delivery.prototype.on = function(evt,fn){
    if (evt === 'delivery.connect' && this.connected) {
      return fn(this); 
    };
    pubSub.subscribe(evt,fn);    
  };

  Delivery.prototype.off = function(evt){
    throw "Delivery.off() has not yet been implemented.";
  };

  Delivery.prototype.send = function(file, params){
    var filePackage = new FilePackage(file, false, params);
    this.sending[filePackage.uid] = filePackage;
    return filePackage.uid;
  };



  pubSub = new PubSub();

  window.Delivery = Delivery;

})(window);


/*
todo: server
Receive batch & send batch
batch should send DataURL prefix

*/
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvZXh0L2RlbGl2ZXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihnbG9iYWwpe1xyXG5cclxuICAvKlxyXG4gIENoYW5uZWxzXHJcblxyXG4gIGRlbGl2ZXJ5LmNvbm5lY3RcclxuICBmaWxlLmxvYWRcclxuXHJcbiAgc2VuZC5zdGFydFxyXG4gIHNlbmQuc3VjY2Vzc1xyXG4gIHNlbmQuZXJyb3JcclxuXHJcbiAgcmVjZWl2ZS5zdGFydFxyXG4gIHJlY2VpdmUuc3VjY2Vzc1xyXG4gIHJlY2VpdmUuZXJyb3JcclxuICAqL1xyXG4gIHZhciBpbWFnZUZpbHRlciA9IC9eKGltYWdlXFwvZ2lmfGltYWdlXFwvanBlZ3xpbWFnZVxcL3BuZ3xpbWFnZVxcL3N2Z1xcK3htbHxpbWFnZVxcL3RpZmYpL2ksXHJcbiAgICAgIHB1YlN1YjtcclxuICBcclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgLyoqKiogICAgICAgIFBVQlNVQiAgICAgKioqKioqKioqL1xyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICBmdW5jdGlvbiBQdWJTdWIoKXtcclxuICAgIHRoaXMuY2hhbm5lbHMgPSB7fTtcclxuICB9O1xyXG5cclxuICBQdWJTdWIucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKGNoYW5uZWwsIGZuKXtcclxuICAgIGlmICh0aGlzLmNoYW5uZWxzW2NoYW5uZWxdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5jaGFubmVsc1tjaGFubmVsXSA9IFtmbl07XHJcbiAgICB9ZWxzZXtcclxuICAgICAgdGhpcy5jaGFubmVsc1tjaGFubmVsXS5wdXNoKGZuKTtcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgUHViU3ViLnByb3RvdHlwZS5wdWJsaXNoID0gZnVuY3Rpb24oY2hhbm5lbCxvYmope1xyXG4gICAgdmFyIGNubCA9IHRoaXMuY2hhbm5lbHNbY2hhbm5lbF07XHJcbiAgICB2YXIgbnVtQ2hhbm5lbHMgPSAoY25sID09PSB1bmRlZmluZWQpID8gMCA6IGNubC5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUNoYW5uZWxzOyBpKyspIHtcclxuICAgICAgY25sW2ldKG9iaik7XHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAvKioqKiAgICAgICAgRmlsZVBhY2thZ2UgICAgKioqKiovXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIGZ1bmN0aW9uIEZpbGVQYWNrYWdlKGZpbGUscmVjZWl2aW5nLHBhcmFtcyl7XHJcbiAgICBfdGhpcyA9IHRoaXM7XHJcbiAgICB0aGlzLm5hbWUgPSBmaWxlLm5hbWU7XHJcbiAgICB0aGlzLnNpemUgPSBmaWxlLnNpemU7XHJcbiAgICBcclxuICAgIGlmKHJlY2VpdmluZyl7XHJcbiAgICAgIHRoaXMudWlkID0gZmlsZS51aWQ7XHJcbiAgICAgIHRoaXMuaXNUZXh0ID0gZmlsZS5pc1RleHQ7XHJcbiAgICAgIHRoaXMubWltZVR5cGUgPSBmaWxlLm1pbWVUeXBlO1xyXG4gICAgICB0aGlzLmRhdGEgPSBmaWxlLmRhdGE7XHJcbiAgICAgIHRoaXMuZGF0YVVSTFByZWZpeCA9IGZpbGUucHJlZml4O1xyXG4gICAgICB0aGlzLnBhcmFtcyA9IGZpbGUucGFyYW1zO1xyXG4gICAgICBwdWJTdWIucHVibGlzaCgncmVjZWl2ZS5zdWNjZXNzJyx0aGlzKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAvL1NlbmRpbmcgYSBmaWxlLlxyXG4gICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgdGhpcy51aWQgPSB0aGlzLmdldFVJRCgpO1xyXG4gICAgICB0aGlzLnJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICBcclxuICAgICAgdGhpcy5yZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKG9iail7fTtcclxuXHJcbiAgICAgIHRoaXMucmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgX3RoaXMuYmFzZTY0RGF0YSA9IF90aGlzLnJlYWRlci5yZXN1bHQ7XHJcbiAgICAgICAgX3RoaXMucHJlcEJhdGNoKCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLnJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgfTtcclxuICB9O1xyXG5cclxuXHJcbiAgRmlsZVBhY2thZ2UucHJvdG90eXBlLmdldFVJRCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAvL2ZpeCB0aGlzXHJcbiAgICByZXR1cm4gdGhpcy5uYW1lICsgdGhpcy5zaXplICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsgIFxyXG4gIH07XHJcblxyXG4gIEZpbGVQYWNrYWdlLnByb3RvdHlwZS5wcmVwQmF0Y2ggPSBmdW5jdGlvbigpe1xyXG4gICAgLy9yZXBsYWNlICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsJyB3aXRoICcnXHJcbiAgICB0aGlzLmRhdGEgPSB0aGlzLmJhc2U2NERhdGEucmVwbGFjZSgvXlteLF0qLC8sJycpO1xyXG4gICAgdGhpcy5iYXRjaCA9IHtcclxuICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICBzaXplOiB0aGlzLnNpemUsXHJcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcclxuICAgICAgcGFyYW1zOiB0aGlzLnBhcmFtc1xyXG4gICAgfTtcclxuICAgIHB1YlN1Yi5wdWJsaXNoKCdmaWxlLmxvYWQnLHRoaXMpO1xyXG4gIH07XHJcblxyXG4gIEZpbGVQYWNrYWdlLnByb3RvdHlwZS5pc0ltYWdlID0gZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiBpbWFnZUZpbHRlci50ZXN0KHRoaXMubWltZVR5cGUpO1xyXG4gIH07XHJcblxyXG4gIEZpbGVQYWNrYWdlLnByb3RvdHlwZS5pc1RleHQgPSBmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHRoaXMuaXNUZXh0O1xyXG4gIH1cclxuXHJcbiAgRmlsZVBhY2thZ2UucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcclxuICB9XHJcblxyXG4gIEZpbGVQYWNrYWdlLnByb3RvdHlwZS5kYXRhVVJMID0gZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB0aGlzLmRhdGFVUkxQcmVmaXggKyB0aGlzLmRhdGE7XHJcbiAgfTtcclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIC8qKioqICAgICAgICBERUxJVkVSWSAgICAgKioqKioqKi9cclxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgZnVuY3Rpb24gRGVsaXZlcnkoc29ja2V0KXtcclxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xyXG4gICAgdGhpcy5zZW5kaW5nID0ge307XHJcbiAgICB0aGlzLnJlY2VpdmluZyA9IHt9O1xyXG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuc3Vic2NyaWJlKCk7XHJcbiAgICB0aGlzLmNvbm5lY3QoKTtcclxuICB9O1xyXG5cclxuICBEZWxpdmVyeS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICBwdWJTdWIuc3Vic2NyaWJlKCdmaWxlLmxvYWQnLGZ1bmN0aW9uKGZpbGVQYWNrYWdlKXtcclxuICAgICAgX3RoaXMuc29ja2V0LmVtaXQoJ3NlbmQuc3RhcnQnLGZpbGVQYWNrYWdlLmJhdGNoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHB1YlN1Yi5zdWJzY3JpYmUoJ3JlY2VpdmUuc3VjY2VzcycsZnVuY3Rpb24oZmlsZVBhY2thZ2Upe1xyXG4gICAgICBfdGhpcy5zb2NrZXQuZW1pdCgnc2VuZC5zdWNjZXNzJyxmaWxlUGFja2FnZS51aWQpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vU29ja2V0IFN1YnNjcmlwdGlvbnNcclxuICAgIHRoaXMuc29ja2V0Lm9uKCdzZW5kLnN1Y2Nlc3MnLGZ1bmN0aW9uKHVpZCl7XHJcbiAgICAgIHB1YlN1Yi5wdWJsaXNoKCdzZW5kLnN1Y2Nlc3MnLF90aGlzLnNlbmRpbmdbdWlkXSk7XHJcbiAgICAgIGRlbGV0ZSBfdGhpcy5zZW5kaW5nW3VpZF07ICAgIFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zb2NrZXQub24oJ3JlY2VpdmUuc3RhcnQnLGZ1bmN0aW9uKGZpbGUpe1xyXG4gICAgICBwdWJTdWIucHVibGlzaCgncmVjZWl2ZS5zdGFydCcsZmlsZS51aWQpO1xyXG4gICAgICB2YXIgZmlsZVBhY2thZ2UgPSBuZXcgRmlsZVBhY2thZ2UoZmlsZSx0cnVlKTtcclxuICAgICAgX3RoaXMucmVjZWl2aW5nW2ZpbGUudWlkXSA9IGZpbGVQYWNrYWdlO1xyXG4gICAgICBcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgfTtcclxuXHJcbiAgRGVsaXZlcnkucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgIHRoaXMuc29ja2V0Lm9uKCdkZWxpdmVyeS5jb25uZWN0JyxmdW5jdGlvbigpe1xyXG4gICAgICBfdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICBwdWJTdWIucHVibGlzaCgnZGVsaXZlcnkuY29ubmVjdCcsIF90aGlzKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zb2NrZXQuZW1pdCgnZGVsaXZlcnkuY29ubmVjdGluZycsJycpO1xyXG4gIH07XHJcblxyXG4gIERlbGl2ZXJ5LnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2dCxmbil7XHJcbiAgICBpZiAoZXZ0ID09PSAnZGVsaXZlcnkuY29ubmVjdCcgJiYgdGhpcy5jb25uZWN0ZWQpIHtcclxuICAgICAgcmV0dXJuIGZuKHRoaXMpOyBcclxuICAgIH07XHJcbiAgICBwdWJTdWIuc3Vic2NyaWJlKGV2dCxmbik7ICAgIFxyXG4gIH07XHJcblxyXG4gIERlbGl2ZXJ5LnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbihldnQpe1xyXG4gICAgdGhyb3cgXCJEZWxpdmVyeS5vZmYoKSBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLlwiO1xyXG4gIH07XHJcblxyXG4gIERlbGl2ZXJ5LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZmlsZSwgcGFyYW1zKXtcclxuICAgIHZhciBmaWxlUGFja2FnZSA9IG5ldyBGaWxlUGFja2FnZShmaWxlLCBmYWxzZSwgcGFyYW1zKTtcclxuICAgIHRoaXMuc2VuZGluZ1tmaWxlUGFja2FnZS51aWRdID0gZmlsZVBhY2thZ2U7XHJcbiAgICByZXR1cm4gZmlsZVBhY2thZ2UudWlkO1xyXG4gIH07XHJcblxyXG5cclxuXHJcbiAgcHViU3ViID0gbmV3IFB1YlN1YigpO1xyXG5cclxuICB3aW5kb3cuRGVsaXZlcnkgPSBEZWxpdmVyeTtcclxuXHJcbn0pKHdpbmRvdyk7XHJcblxyXG5cclxuLypcclxudG9kbzogc2VydmVyXHJcblJlY2VpdmUgYmF0Y2ggJiBzZW5kIGJhdGNoXHJcbmJhdGNoIHNob3VsZCBzZW5kIERhdGFVUkwgcHJlZml4XHJcblxyXG4qLyJdLCJmaWxlIjoiZGVsaXZlcnkuanMifQ==

!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,e){"object"===("undefined"==typeof t?"undefined":i(t))&&(e=t,t=void 0),e=e||{};var r,n=s(t),a=n.source,h=n.id,f=n.path,l=u[h]&&f in u[h].nsps,d=e.forceNew||e["force new connection"]||!1===e.multiplex||l;return d?(p("ignoring socket cache for %s",a),r=c(a,e)):(u[h]||(p("new io instance for %s",a),u[h]=c(a,e)),r=u[h]),n.query&&!e.query?e.query=n.query:e&&"object"===i(e.query)&&(e.query=o(e.query)),r.socket(n.path,e)}function o(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(1),a=r(6),c=r(14),p=r(3)("socket.io-client");t.exports=e=n;var u=e.managers={};e.protocol=a.protocol,e.connect=n,e.Manager=r(14),e.Socket=r(42)},function(t,e,r){(function(e){"use strict";function n(t,r){var n=t;r=r||e.location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t="undefined"!=typeof r?r.protocol+"//"+t:"https://"+t),i("parse %s",t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var s=n.host.indexOf(":")!==-1,a=s?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}var o=r(2),i=r(3)("socket.io-client:url");t.exports=n}).call(e,function(){return this}())},function(t,e){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=r.exec(t||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,n),t}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function a(){var t;try{t=e.storage.debug}catch(t){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=r(4),e.log=i,e.formatArgs=o,e.save=s,e.load=a,e.useColors=n,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,r){function n(){return e.colors[u++%e.colors.length]}function o(t){function r(){}function o(){var t=o,r=+new Date,i=r-(p||r);t.diff=i,t.prev=p,t.curr=r,p=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var o=e.formatters[n];if("function"==typeof o){var i=s[a];r=o.call(t,i),s.splice(a,1),a--}return r}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=o.log||e.log||console.log.bind(console);c.apply(t,s)}r.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:r;return i.namespace=t,i}function i(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&(t=r[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=r(5),e.names=[],e.skips=[],e.formatters={};var p,u=0},function(t,e){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"days":case"day":case"d":return r*p;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(t){return t>=p?Math.round(t/p)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,p,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,a=60*s,c=60*a,p=24*c,u=365.25*p;t.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e.long?o(t):n(t)}},function(t,e,r){function n(){}function o(t){var r="",n=!1;return r+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(r+=t.attachments,r+="-"),t.nsp&&"/"!=t.nsp&&(n=!0,r+=t.nsp),null!=t.id&&(n&&(r+=",",n=!1),r+=t.id),null!=t.data&&(n&&(r+=","),r+=h.stringify(t.data)),u("encoded %j as %s",t,r),r}function i(t,e){function r(t){var r=l.deconstructPacket(t),n=o(r.packet),i=r.buffers;i.unshift(n),e(i)}l.removeBlobs(t,r)}function s(){this.reconstructor=null}function a(t){var r={},n=0;if(r.type=Number(t.charAt(0)),null==e.types[r.type])return p();if(e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type){for(var o="";"-"!=t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!=t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"==t.charAt(n+1))for(r.nsp="";++n;){var i=t.charAt(n);if(","==i)break;if(r.nsp+=i,n==t.length)break}else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n==t.length)break}r.id=Number(r.id)}if(t.charAt(++n))try{r.data=h.parse(t.substr(n))}catch(t){return p()}return u("decoded %s as %j",t,r),r}function c(t){this.reconPack=t,this.buffers=[]}function p(t){return{type:e.ERROR,data:"parser error"}}var u=r(3)("socket.io-parser"),h=r(7),f=(r(10),r(11)),l=r(12),d=r(13);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=n,e.Decoder=s,n.prototype.encode=function(t,r){if(u("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)i(t,r);else{var n=o(t);r([n])}},f(s.prototype),s.prototype.add=function(t){var r;if("string"==typeof t)r=a(t),e.BINARY_EVENT==r.type||e.BINARY_ACK==r.type?(this.reconstructor=new c(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!d(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,this.emit("decoded",r))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){var n;(function(t,o){(function(){function i(t,e){function r(t){if(r[t]!==g)return r[t];var i;if("bug-string-char-index"==t)i="a"!="a"[0];else if("json"==t)i=r("json-stringify")&&r("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var p=e.stringify,u="function"==typeof p&&b;if(u){(s=function(){return 1}).toJSON=s;try{u="0"===p(0)&&"0"===p(new n)&&'""'==p(new o)&&p(v)===g&&p(g)===g&&p()===g&&"1"===p(s)&&"[1]"==p([s])&&"[null]"==p([g])&&"null"==p(null)&&"[null,null,null]"==p([g,v,null])&&p({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===p(null,s)&&"[\n 1,\n 2\n]"==p([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==p(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==p(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==p(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==p(new c(-1))}catch(t){u=!1}}i=u}if("json-parse"==t){var h=e.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){s=h(a);var f=5==s.a.length&&1===s.a[0];if(f){try{f=!h('"\t"')}catch(t){}if(f)try{f=1!==h("01")}catch(t){}if(f)try{f=1!==h("1.")}catch(t){}}}}catch(t){f=!1}i=f}}return r[t]=!!i}t||(t=p.Object()),e||(e=p.Object());var n=t.Number||p.Number,o=t.String||p.String,s=t.Object||p.Object,c=t.Date||p.Date,u=t.SyntaxError||p.SyntaxError,h=t.TypeError||p.TypeError,f=t.Math||p.Math,l=t.JSON||p.JSON;"object"==typeof l&&l&&(e.stringify=l.stringify,e.parse=l.parse);var d,y,g,m=s.prototype,v=m.toString,b=new c(-0xc782b5b800cec);try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!r("json")){var k="[object Function]",w="[object Date]",x="[object Number]",A="[object String]",B="[object Array]",C="[object Boolean]",S=r("bug-string-char-index");if(!b)var _=f.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(t,e){return E[e]+365*(t-1970)+_((t-1969+(e=+(e>1)))/4)-_((t-1901+e)/100)+_((t-1601+e)/400)};if((d=m.hasOwnProperty)||(d=function(t){var e,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?d=function(t){var e=this.__proto__,r=t in(this.__proto__=null,this);return this.__proto__=e,r}:(e=r.constructor,d=function(t){var r=(this.constructor||e).prototype;return t in this&&!(t in r&&this[t]===r[t])}),r=null,d.call(this,t)}),y=function(t,e){var r,n,o,i=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(o in n)d.call(n,o)&&i++;return r=n=null,i?y=2==i?function(t,e){var r,n={},o=v.call(t)==k;for(r in t)o&&"prototype"==r||d.call(n,r)||!(n[r]=1)||!d.call(t,r)||e(r)}:function(t,e){var r,n,o=v.call(t)==k;for(r in t)o&&"prototype"==r||!d.call(t,r)||(n="constructor"===r)||e(r);(n||d.call(t,r="constructor"))&&e(r)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(t,e){var r,o,i=v.call(t)==k,s=!i&&"function"!=typeof t.constructor&&a[typeof t.hasOwnProperty]&&t.hasOwnProperty||d;for(r in t)i&&"prototype"==r||!s.call(t,r)||e(r);for(o=n.length;r=n[--o];s.call(t,r)&&e(r));}),y(t,e)},!r("json-stringify")){var O={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",P=function(t,e){return(T+(e||0)).slice(-t)},N="\\u00",R=function(t){for(var e='"',r=0,n=t.length,o=!S||n>10,i=o&&(S?t.split(""):t);r<n;r++){var s=t.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=O[s];break;default:if(s<32){e+=N+P(2,s.toString(16));break}e+=o?i[r]:t.charAt(r)}}return e+'"'},D=function(t,e,r,n,o,i,s){var a,c,p,u,f,l,m,b,k,S,E,O,T,N,U,q;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if(c=v.call(a),c!=w||d.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=x&&c!=A&&c!=B||d.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(j){for(f=_(a/864e5),p=_(f/365.2425)+1970-1;j(p+1,0)<=f;p++);for(u=_((f-j(p,0))/30.42);j(p,u+1)<=f;u++);f=1+f-j(p,u),l=(a%864e5+864e5)%864e5,m=_(l/36e5)%24,b=_(l/6e4)%60,k=_(l/1e3)%60,S=l%1e3}else p=a.getUTCFullYear(),u=a.getUTCMonth(),f=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),k=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(p<=0||p>=1e4?(p<0?"-":"+")+P(6,p<0?-p:p):P(4,p))+"-"+P(2,u+1)+"-"+P(2,f)+"T"+P(2,m)+":"+P(2,b)+":"+P(2,k)+"."+P(3,S)+"Z"}else a=null;if(r&&(a=r.call(e,t,a)),null===a)return"null";if(c=v.call(a),c==C)return""+a;if(c==x)return a>-1/0&&a<1/0?""+a:"null";if(c==A)return R(""+a);if("object"==typeof a){for(N=s.length;N--;)if(s[N]===a)throw h();if(s.push(a),E=[],U=i,i+=o,c==B){for(T=0,N=a.length;T<N;T++)O=D(T,a,r,n,o,i,s),E.push(O===g?"null":O);q=E.length?o?"[\n"+i+E.join(",\n"+i)+"\n"+U+"]":"["+E.join(",")+"]":"[]"}else y(n||a,function(t){var e=D(t,a,r,n,o,i,s);e!==g&&E.push(R(t)+":"+(o?" ":"")+e)}),q=E.length?o?"{\n"+i+E.join(",\n"+i)+"\n"+U+"}":"{"+E.join(",")+"}":"{}";return s.pop(),q}};e.stringify=function(t,e,r){var n,o,i,s;if(a[typeof e]&&e)if((s=v.call(e))==k)o=e;else if(s==B){i={};for(var c,p=0,u=e.length;p<u;c=e[p++],s=v.call(c),(s==A||s==x)&&(i[c]=1));}if(r)if((s=v.call(r))==x){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else s==A&&(n=r.length<=10?r:r.slice(0,10));return D("",(c={},c[""]=t,c),o,i,n,"",[])}}if(!r("json-parse")){var U,q,L=o.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I=function(){throw U=q=null,u()},H=function(){for(var t,e,r,n,o,i=q,s=i.length;U<s;)switch(o=i.charCodeAt(U)){case 9:case 10:case 13:case 32:U++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=S?i.charAt(U):i[U],U++,t;case 34:for(t="@",U++;U<s;)if(o=i.charCodeAt(U),o<32)I();else if(92==o)switch(o=i.charCodeAt(++U)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=M[o],U++;break;case 117:for(e=++U,r=U+4;U<r;U++)o=i.charCodeAt(U),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||I();t+=L("0x"+i.slice(e,U));break;default:I()}else{if(34==o)break;for(o=i.charCodeAt(U),e=U;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++U);t+=i.slice(e,U)}if(34==i.charCodeAt(U))return U++,t;I();default:if(e=U,45==o&&(n=!0,o=i.charCodeAt(++U)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(U+1),o>=48&&o<=57)&&I(),n=!1;U<s&&(o=i.charCodeAt(U),o>=48&&o<=57);U++);if(46==i.charCodeAt(U)){for(r=++U;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==U&&I(),U=r}if(o=i.charCodeAt(U),101==o||69==o){for(o=i.charCodeAt(++U),43!=o&&45!=o||U++,r=U;r<s&&(o=i.charCodeAt(r),o>=48&&o<=57);r++);r==U&&I(),U=r}return+i.slice(e,U)}if(n&&I(),"true"==i.slice(U,U+4))return U+=4,!0;if("false"==i.slice(U,U+5))return U+=5,!1;if("null"==i.slice(U,U+4))return U+=4,null;I()}return"$"},z=function(t){var e,r;if("$"==t&&I(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=H(),"]"!=t;r||(r=!0))r&&(","==t?(t=H(),"]"==t&&I()):I()),","==t&&I(),e.push(z(t));return e}if("{"==t){for(e={};t=H(),"}"!=t;r||(r=!0))r&&(","==t?(t=H(),"}"==t&&I()):I()),","!=t&&"string"==typeof t&&"@"==(S?t.charAt(0):t[0])&&":"==H()||I(),e[t.slice(1)]=z(H());return e}I()}return t},J=function(t,e,r){var n=X(t,e,r);n===g?delete t[e]:t[e]=n},X=function(t,e,r){var n,o=t[e];if("object"==typeof o&&o)if(v.call(o)==B)for(n=o.length;n--;)J(o,n,r);else y(o,function(t){J(o,t,r)});return r.call(t,e,o)};e.parse=function(t,e){var r,n;return U=0,q=""+t,r=z(H()),"$"!=H()&&I(),U=q=null,e&&v.call(e)==k?X((n={},n[""]=r,n),"",e):r}}}return e.runInContext=i,e}var s=r(9),a={function:!0,object:!0},c=a[typeof e]&&e&&!e.nodeType&&e,p=a[typeof window]&&window||this,u=c&&a[typeof t]&&t&&!t.nodeType&&"object"==typeof o&&o;if(!u||u.global!==u&&u.window!==u&&u.self!==u||(p=u),c&&!s)i(p,c);else{var h=p.JSON,f=p.JSON3,l=!1,d=i(p,p.JSON3={noConflict:function(){return l||(l=!0,p.JSON=h,p.JSON3=f,h=f=null),d}});p.JSON={parse:d.parse,stringify:d.stringify}}s&&(n=function(){return d}.call(e,r,e,t),!(void 0!==n&&(t.exports=n)))}).call(this)}).call(e,r(8)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,r){(function(t){var n=r(10),o=r(13);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var c in t)s[c]=e(t[c]);return s}return t}var r=[],i=t.data,s=t;return s.data=e(i),s.attachments=r.length,{packet:s,buffers:r}},e.reconstructPacket=function(t,e){function r(t){if(t&&t._placeholder){var o=e[t.num];return o}if(n(t)){for(var i=0;i<t.length;i++)t[i]=r(t[i]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=r(t[s]);return t}return t}return t.data=r(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,r){function i(e,c,p){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var u=new FileReader;u.onload=function(){p?p[c]=this.result:a=this.result,--s||r(a)},u.readAsArrayBuffer(e)}else if(n(e))for(var h=0;h<e.length;h++)i(e[h],h,e);else if(e&&"object"==typeof e&&!o(e))for(var f in e)i(e[f],f,e)}var s=0,a=e;i(a),s||r(a)}}).call(e,function(){return this}())},function(t,e){(function(e){function r(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=r}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e){return this instanceof n?(t&&"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(t,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(15),s=r(42),a=r(43),c=r(6),p=r(45),u=r(46),h=r(3)("socket.io-client:manager"),f=r(40),l=r(49),d=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t,e){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=p(r,"open",function(){n.onopen(),t&&t()}),s=p(r,"error",function(e){if(h("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h("connect attempt will timeout after %d",a);var c=setTimeout(function(){h("connect attempt timed out after %d",a),o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(p(t,"data",u(this,"ondata"))),this.subs.push(p(t,"ping",u(this,"onping"))),this.subs.push(p(t,"pong",u(this,"onpong"))),this.subs.push(p(t,"error",u(this,"onerror"))),this.subs.push(p(t,"close",u(this,"onclose"))),this.subs.push(p(this.decoder,"decoded",u(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){h("error",t),this.emitAll("error",t)},n.prototype.socket=function(t,e){function r(){~f(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var o=this;n.on("connecting",r),n.on("connect",function(){n.id=o.engine.id}),this.autoConnect&&r()}return n},n.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(t){h("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){h("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){h("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){h("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();h("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(h("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(h("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(h("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,r){t.exports=r(16)},function(t,e,r){t.exports=r(17),t.exports.parser=r(24)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);r=r||{},t&&"object"==typeof t&&(r=t,t=null),t?(t=u(t),r.hostname=t.host,r.secure="https"==t.protocol||"wss"==t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=u(r.host).host),this.secure=null!=r.secure?r.secure:e.location&&"https:"==location.protocol,r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(e.location?location.hostname:"localhost"),this.port=r.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized||r.rejectUnauthorized;var o="object"==typeof e&&e;o.global===o&&r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),this.open()}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var i=r(18),s=r(33),a=r(3)("engine.io-client:socket"),c=r(40),p=r(24),u=r(2),h=r(41),f=r(34);t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=p.protocol,n.Socket=n,n.Transport=r(23),n.transports=r(18),n.parser=r(24),n.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);e.EIO=p.protocol,e.transport=t,this.id&&(e.sid=this.id);var r=new i[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return r},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;h=h||e}h||(a('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!h)if("pong"==e.type&&"probe"==e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",u),!u)return;n.priorWebsocketSuccess="websocket"==u.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){h||"closed"!=f.readyState&&(a("changing transport and sending upgrade packet"),p(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=u.name,f.emit("upgradeError",r)}}))}function r(){h||(h=!0,p(),u.close(),u=null)}function o(e){var n=new Error("probe error: "+e);n.transport=u.name,r(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",n)}function i(){o("transport closed")}function s(){o("socket closed")}function c(t){u&&t.name!=u.name&&(a('"%s" works - aborting "%s"',t.name,u.name),r())}function p(){u.removeListener("open",e),u.removeListener("error",o),u.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),h=!1,f=this;n.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",o),u.once("close",i),this.once("close",s),this.once("upgrading",c),u.open()},n.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(h(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");
e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},n.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!=this.readyState&&"closed"!=this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),a("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){a("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~c(this.transports,t[r])&&e.push(t[r]);return e}}).call(e,function(){return this}())},function(t,e,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var p="https:"==location.protocol,u=location.port;u||(u=p?443:80),n=e.hostname!=location.hostname||u!=e.port,a=e.secure!=p}if(e.xdomain=n,e.xscheme=a,r=new o(e),"open"in r&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=r(19),i=r(21),s=r(37),a=r(38);e.polling=n,e.websocket=a}).call(e,function(){return this}())},function(t,e,r){var n=r(20);t.exports=function(t){var e=t.xdomain,r=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(t){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,r){(function(e){function n(){}function o(t){if(c.call(this,t),e.location){var r="https:"==location.protocol,n=location.port;n||(n=r?443:80),this.xd=t.hostname!=e.location.hostname||n!=t.port,this.xs=t.secure!=r}else this.extraHeaders=t.extraHeaders}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=r(19),c=r(22),p=r(33),u=r(35),h=r(3)("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},o.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},p(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new a(t),n=this;try{h("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(t){}if(this.supportsBinary&&(r.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}"withCredentials"in r&&(r.withCredentials=!0),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){4==r.readyState&&(200==r.status||1223==r.status?n.onLoad():setTimeout(function(){n.onError(r.status)},0))},h("xhr data %s",this.data),r.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(t){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var r=new Uint8Array(this.xhr.response),n=[],o=0,i=r.length;o<i;o++)n.push(r[o]);t=String.fromCharCode.apply(null,n)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},e.document&&(i.requestsCount=0,i.requests={},e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,r){function n(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=r(23),i=r(34),s=r(24),a=r(35),c=r(36),p=r(3)("engine.io-client:polling");t.exports=n;var u=function(){var t=r(19),e=new t({xdomain:!1});return null!=e.responseType}();a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){p("paused"),r.readyState="paused",t()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(p("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){p("pre-pause polling complete"),--n||e()})),this.writable||(p("we are currently writing - waiting to pause"),n++,this.once("drain",function(){p("pre-pause writing complete"),--n||e()}))}else e()},n.prototype.poll=function(){p("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this;p("polling got data %s",t);var r=function(t,r,n){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,r),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function t(){p("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(p("transport open - closing"),t()):(p("transport not open - deferring close"),this.once("open",t))},n.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")},e=this;s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(r=":"+this.port),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t}},function(t,e,r){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders}var o=r(24),i=r(33);t.exports=n,i(n.prototype),n.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},n.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,r){(function(t){function n(t,r){var n="b"+e.packets[t.type]+t.data.data;return r(n)}function o(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=m[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,r,!0,n)},o.readAsArrayBuffer(t.data)}function s(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(g)return i(t,r,n);var o=new Uint8Array(1);o[0]=m[t.type];var s=new k([o.buffer,t.data]);return n(s)}function a(t,e,r){for(var n=new Array(t.length),o=f(t.length,r),i=function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})},s=0;s<t.length;s++)i(s,t[s],o)}var c=r(25),p=r(26),u=r(28),h=r(29),f=r(30),l=r(31),d=navigator.userAgent.match(/Android/i),y=/PhantomJS/i.test(navigator.userAgent),g=d||y;e.protocol=3;var m=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=c(m),b={type:"error",data:"parser error"},k=r(32);e.encodePacket=function(e,r,i,a){"function"==typeof r&&(a=r,r=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(k&&c instanceof t.Blob)return s(e,r,a);if(c&&c.base64)return n(e,a);var p=m[e.type];return void 0!==e.data&&(p+=i?l.encode(String(e.data)):String(e.data)),a(""+p)},e.encodeBase64Packet=function(r,n){var o="b"+e.packets[r.type];if(k&&r.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];n(o+t)},i.readAsDataURL(r.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(t){for(var a=new Uint8Array(r.data),c=new Array(a.length),p=0;p<a.length;p++)c[p]=a[p];s=String.fromCharCode.apply(null,c)}return o+=t.btoa(s),n(o)},e.decodePacket=function(t,r,n){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n)try{t=l.decode(t)}catch(t){return b}var o=t.charAt(0);return Number(o)==o&&v[o]?t.length>1?{type:v[o],data:t.substring(1)}:{type:v[o]}:b}var i=new Uint8Array(t),o=i[0],s=u(t,1);return k&&"blob"===r&&(s=new k([s])),{type:v[o],data:s}},e.decodeBase64Packet=function(e,r){var n=v[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=h.decode(e.substr(1));return"blob"===r&&k&&(o=new k([o])),{type:n,data:o}},e.encodePayload=function(t,r,n){function o(t){return t.length+":"+t}function i(t,n){e.encodePacket(t,!!s&&r,!0,function(t){n(null,o(t))})}"function"==typeof r&&(n=r,r=null);var s=p(t);return r&&s?k&&!g?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void a(t,i,function(t,e){return n(e.join(""))}):n("0:")},e.decodePayload=function(t,r,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,r,n);"function"==typeof r&&(n=r,r=null);var o;if(""==t)return n(b,0,1);for(var i,s,a="",c=0,p=t.length;c<p;c++){var u=t.charAt(c);if(":"!=u)a+=u;else{if(""==a||a!=(i=Number(a)))return n(b,0,1);if(s=t.substr(c+1,i),a!=s.length)return n(b,0,1);if(s.length){if(o=e.decodePacket(s,r,!0),b.type==o.type&&b.data==o.data)return n(b,0,1);var h=n(o,c+i,p);if(!1===h)return}c+=i,a=""}}return""!=a?n(b,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){return r(null,t)})}return t.length?void a(t,n,function(t,e){var n=e.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return e.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}e?o[i++]=0:o[i++]=1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),r(o.buffer)}):r(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);r(null,c)}})}a(t,n,function(t,e){return r(new k(e))})},e.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var o=t,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],p="",h=1;255!=a[h];h++){if(p.length>310){s=!0;break}p+=a[h]}if(s)return n(b,0,1);o=u(o,2+p.length),p=parseInt(p);var f=u(o,0,p);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var l=new Uint8Array(f);f="";for(var h=0;h<l.length;h++)f+=String.fromCharCode(l[h])}i.push(f),o=u(o,p)}var d=i.length;i.forEach(function(t,o){n(e.decodePacket(t,r,!0),o,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e,r){(function(e){function n(t){function r(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r(t[i]))return!0}return!1}return r(t)}var o=r(27);t.exports=n}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),s=e,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){!function(t){"use strict";e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i="";for(r=0;r<o;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(e){var r,n,o,i,s,a=.75*e.length,c=e.length,p=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(r=0;r<c;r+=4)n=t.indexOf(e[r]),o=t.indexOf(e[r+1]),i=t.indexOf(e[r+2]),s=t.indexOf(e[r+3]),h[p++]=n<<2|o>>4,h[p++]=(15&o)<<4|i>>2,h[p++]=(3&i)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(t,e){function r(t,e,r){function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}var i=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=r},function(t,e,r){var n;(function(t,o){!function(i){function s(t){for(var e,r,n=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function a(t){for(var e,r=t.length,n=-1,o="";++n<r;)e=t[n],e>65535&&(e-=65536,o+=k(e>>>10&1023|55296),e=56320|1023&e),o+=k(e);return o}function c(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function p(t,e){return k(t>>e&63|128)}function u(t){if(0==(4294967168&t))return k(t);var e="";return 0==(4294965248&t)?e=k(t>>6&31|192):0==(4294901760&t)?(c(t),e=k(t>>12&15|224),e+=p(t,6)):0==(4292870144&t)&&(e=k(t>>18&7|240),e+=p(t,12),e+=p(t,6)),e+=k(63&t|128)}function h(t){for(var e,r=s(t),n=r.length,o=-1,i="";++o<n;)e=r[o],i+=u(e);return i}function f(){if(b>=v)throw Error("Invalid byte index");var t=255&m[b];if(b++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(){var t,e,r,n,o;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(t=255&m[b],b++,0==(128&t))return t;if(192==(224&t)){var e=f();if(o=(31&t)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=f(),r=f(),o=(15&t)<<12|e<<6|r,o>=2048)return c(o),o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=f(),r=f(),n=f(),o=(15&t)<<18|e<<12|r<<6|n,o>=65536&&o<=1114111))return o;throw Error("Invalid UTF-8 detected")}function d(t){m=s(t),v=m.length,b=0;for(var e,r=[];(e=l())!==!1;)r.push(e);return a(r)}var y="object"==typeof e&&e,g=("object"==typeof t&&t&&t.exports==y&&t,"object"==typeof o&&o);g.global!==g&&g.window!==g||(i=g);var m,v,b,k=String.fromCharCode,w={version:"2.0.0",encode:h,decode:d};n=function(){return w}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(8)(t),function(){return this}())},function(t,e){(function(e){function r(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new i;r(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return r(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(t){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?n:void 0}()}).call(e,function(){return this}())},function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){"use strict";function r(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function n(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function o(){var t=r(+new Date);return t!==i?(p=0,i=t):t+"."+r(p++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},p=0,u=0;u<a;u++)c[s[u]]=u;o.encode=r,o.decode=n,t.exports=o},function(t,e,r){(function(e){function n(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var r=this;a.push(function(t){r.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){r.script&&(r.script.onerror=n)},!1)}var i=r(22),s=r(35);t.exports=o;var a,c=/\n/g,p=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(t)}catch(t){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(p,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(e,function(){return this}())},function(t,e,r){(function(e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,o.call(this,t)}var o=r(23),i=r(24),s=r(34),a=r(35),c=r(36),p=r(3)("engine.io-client:websocket"),u=e.WebSocket||e.MozWebSocket,h=u;if(!h&&"undefined"==typeof window)try{h=r(39)}catch(t){}t.exports=n,a(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.ws=u?new h(t):new h(t,e,r),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(t){var e=this;setTimeout(function(){o.prototype.onData.call(e,t)},0)}),n.prototype.write=function(t){function r(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}var n=this;this.writable=!1;for(var o=t.length,s=0,a=o;s<a;s++)!function(t){i.encodePacket(t,n.supportsBinary,function(i){if(!u){var s={};if(t.options&&(s.compress=t.options.compress),n.perMessageDeflate){var a="string"==typeof i?e.Buffer.byteLength(i):i.length;a<n.perMessageDeflate.threshold&&(s.compress=!1)}}try{u?n.ws.send(i):n.ws.send(i,s)}catch(t){p("websocket closed before onclose event")}--o||r()})}(t[s])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),t=s.encode(t),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t},n.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===n.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){(function(e){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):r.test(t.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,r){"use strict";function n(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o=r(6),i=r(43),s=r(44),a=r(45),c=r(46),p=r(3)("socket.io-client:socket"),u=r(47);t.exports=e=n;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;i(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(h.hasOwnProperty(t))return f.apply(this,arguments),this;var e=s(arguments),r=o.EVENT;u(e)&&(r=o.BINARY_EVENT);var n={type:r,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(p("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){p("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},n.prototype.onclose=function(t){p("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},n.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(t);break;case o.BINARY_EVENT:this.onevent(t);break;case o.ACK:this.onack(t);break;case o.BINARY_ACK:this.onack(t);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];p("emitting event %j",e),null!=t.id&&(p("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=s(arguments);p("sending ack %j",n);var i=u(n)?o.BINARY_ACK:o.ACK;e.packet({type:i,id:t,data:n})}}},n.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(p("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):p("bad ack %s",t.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],
t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){p("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(p("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks["$"+t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){function r(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}t.exports=r},function(t,e){"use strict";function r(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}t.exports=r},function(t,e){var r=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},function(t,e,r){(function(e){function n(t){function r(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(o(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r(t[i]))return!0}return!1}return r(t)}var o=r(48);t.exports=n}).call(e,function(){return this}())},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}])});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvZXh0L3NvY2tldC5pby5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5pbz1lKCk6dC5pbz1lKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShuKXtpZihyW25dKXJldHVybiByW25dLmV4cG9ydHM7dmFyIG89cltuXT17ZXhwb3J0czp7fSxpZDpuLGxvYWRlZDohMX07cmV0dXJuIHRbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsZSksby5sb2FkZWQ9ITAsby5leHBvcnRzfXZhciByPXt9O3JldHVybiBlLm09dCxlLmM9cixlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0P1widW5kZWZpbmVkXCI6aSh0KSkmJihlPXQsdD12b2lkIDApLGU9ZXx8e307dmFyIHIsbj1zKHQpLGE9bi5zb3VyY2UsaD1uLmlkLGY9bi5wYXRoLGw9dVtoXSYmZiBpbiB1W2hdLm5zcHMsZD1lLmZvcmNlTmV3fHxlW1wiZm9yY2UgbmV3IGNvbm5lY3Rpb25cIl18fCExPT09ZS5tdWx0aXBsZXh8fGw7cmV0dXJuIGQ/KHAoXCJpZ25vcmluZyBzb2NrZXQgY2FjaGUgZm9yICVzXCIsYSkscj1jKGEsZSkpOih1W2hdfHwocChcIm5ldyBpbyBpbnN0YW5jZSBmb3IgJXNcIixhKSx1W2hdPWMoYSxlKSkscj11W2hdKSxuLnF1ZXJ5JiYhZS5xdWVyeT9lLnF1ZXJ5PW4ucXVlcnk6ZSYmXCJvYmplY3RcIj09PWkoZS5xdWVyeSkmJihlLnF1ZXJ5PW8oZS5xdWVyeSkpLHIuc29ja2V0KG4ucGF0aCxlKX1mdW5jdGlvbiBvKHQpe3ZhciBlPVtdO2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJmUucHVzaChlbmNvZGVVUklDb21wb25lbnQocikrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbcl0pKTtyZXR1cm4gZS5qb2luKFwiJlwiKX12YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxzPXIoMSksYT1yKDYpLGM9cigxNCkscD1yKDMpKFwic29ja2V0LmlvLWNsaWVudFwiKTt0LmV4cG9ydHM9ZT1uO3ZhciB1PWUubWFuYWdlcnM9e307ZS5wcm90b2NvbD1hLnByb3RvY29sLGUuY29ubmVjdD1uLGUuTWFuYWdlcj1yKDE0KSxlLlNvY2tldD1yKDQyKX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQscil7dmFyIG49dDtyPXJ8fGUubG9jYXRpb24sbnVsbD09dCYmKHQ9ci5wcm90b2NvbCtcIi8vXCIrci5ob3N0KSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKFwiL1wiPT09dC5jaGFyQXQoMCkmJih0PVwiL1wiPT09dC5jaGFyQXQoMSk/ci5wcm90b2NvbCt0OnIuaG9zdCt0KSwvXihodHRwcz98d3NzPyk6XFwvXFwvLy50ZXN0KHQpfHwoaShcInByb3RvY29sLWxlc3MgdXJsICVzXCIsdCksdD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygcj9yLnByb3RvY29sK1wiLy9cIit0OlwiaHR0cHM6Ly9cIit0KSxpKFwicGFyc2UgJXNcIix0KSxuPW8odCkpLG4ucG9ydHx8KC9eKGh0dHB8d3MpJC8udGVzdChuLnByb3RvY29sKT9uLnBvcnQ9XCI4MFwiOi9eKGh0dHB8d3MpcyQvLnRlc3Qobi5wcm90b2NvbCkmJihuLnBvcnQ9XCI0NDNcIikpLG4ucGF0aD1uLnBhdGh8fFwiL1wiO3ZhciBzPW4uaG9zdC5pbmRleE9mKFwiOlwiKSE9PS0xLGE9cz9cIltcIituLmhvc3QrXCJdXCI6bi5ob3N0O3JldHVybiBuLmlkPW4ucHJvdG9jb2wrXCI6Ly9cIithK1wiOlwiK24ucG9ydCxuLmhyZWY9bi5wcm90b2NvbCtcIjovL1wiK2ErKHImJnIucG9ydD09PW4ucG9ydD9cIlwiOlwiOlwiK24ucG9ydCksbn12YXIgbz1yKDIpLGk9cigzKShcInNvY2tldC5pby1jbGllbnQ6dXJsXCIpO3QuZXhwb3J0cz1ufSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3ZhciByPS9eKD86KD8hW146QF0rOlteOkBcXC9dKkApKGh0dHB8aHR0cHN8d3N8d3NzKTpcXC9cXC8pPygoPzooKFteOkBdKikoPzo6KFteOkBdKikpPyk/QCk/KCg/OlthLWYwLTldezAsNH06KXsyLDd9W2EtZjAtOV17MCw0fXxbXjpcXC8/I10qKSg/OjooXFxkKikpPykoKChcXC8oPzpbXj8jXSg/IVtePyNcXC9dKlxcLltePyNcXC8uXSsoPzpbPyNdfCQpKSkqXFwvPyk/KFtePyNcXC9dKikpKD86XFw/KFteI10qKSk/KD86IyguKikpPykvLG49W1wic291cmNlXCIsXCJwcm90b2NvbFwiLFwiYXV0aG9yaXR5XCIsXCJ1c2VySW5mb1wiLFwidXNlclwiLFwicGFzc3dvcmRcIixcImhvc3RcIixcInBvcnRcIixcInJlbGF0aXZlXCIsXCJwYXRoXCIsXCJkaXJlY3RvcnlcIixcImZpbGVcIixcInF1ZXJ5XCIsXCJhbmNob3JcIl07dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXQsbz10LmluZGV4T2YoXCJbXCIpLGk9dC5pbmRleE9mKFwiXVwiKTtvIT0tMSYmaSE9LTEmJih0PXQuc3Vic3RyaW5nKDAsbykrdC5zdWJzdHJpbmcobyxpKS5yZXBsYWNlKC86L2csXCI7XCIpK3Quc3Vic3RyaW5nKGksdC5sZW5ndGgpKTtmb3IodmFyIHM9ci5leGVjKHR8fFwiXCIpLGE9e30sYz0xNDtjLS07KWFbbltjXV09c1tjXXx8XCJcIjtyZXR1cm4gbyE9LTEmJmkhPS0xJiYoYS5zb3VyY2U9ZSxhLmhvc3Q9YS5ob3N0LnN1YnN0cmluZygxLGEuaG9zdC5sZW5ndGgtMSkucmVwbGFjZSgvOy9nLFwiOlwiKSxhLmF1dGhvcml0eT1hLmF1dGhvcml0eS5yZXBsYWNlKFwiW1wiLFwiXCIpLnJlcGxhY2UoXCJdXCIsXCJcIikucmVwbGFjZSgvOy9nLFwiOlwiKSxhLmlwdjZ1cmk9ITApLGF9fSxmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbigpe3JldHVyblwiV2Via2l0QXBwZWFyYW5jZVwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlfHx3aW5kb3cuY29uc29sZSYmKGNvbnNvbGUuZmlyZWJ1Z3x8Y29uc29sZS5leGNlcHRpb24mJmNvbnNvbGUudGFibGUpfHxuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSYmcGFyc2VJbnQoUmVnRXhwLiQxLDEwKT49MzF9ZnVuY3Rpb24gbygpe3ZhciB0PWFyZ3VtZW50cyxyPXRoaXMudXNlQ29sb3JzO2lmKHRbMF09KHI/XCIlY1wiOlwiXCIpK3RoaXMubmFtZXNwYWNlKyhyP1wiICVjXCI6XCIgXCIpK3RbMF0rKHI/XCIlYyBcIjpcIiBcIikrXCIrXCIrZS5odW1hbml6ZSh0aGlzLmRpZmYpLCFyKXJldHVybiB0O3ZhciBuPVwiY29sb3I6IFwiK3RoaXMuY29sb3I7dD1bdFswXSxuLFwiY29sb3I6IGluaGVyaXRcIl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMSkpO3ZhciBvPTAsaT0wO3JldHVybiB0WzBdLnJlcGxhY2UoLyVbYS16JV0vZyxmdW5jdGlvbih0KXtcIiUlXCIhPT10JiYobysrLFwiJWNcIj09PXQmJihpPW8pKX0pLHQuc3BsaWNlKGksMCxuKSx0fWZ1bmN0aW9uIGkoKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgY29uc29sZSYmY29uc29sZS5sb2cmJkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLGNvbnNvbGUsYXJndW1lbnRzKX1mdW5jdGlvbiBzKHQpe3RyeXtudWxsPT10P2Uuc3RvcmFnZS5yZW1vdmVJdGVtKFwiZGVidWdcIik6ZS5zdG9yYWdlLmRlYnVnPXR9Y2F0Y2godCl7fX1mdW5jdGlvbiBhKCl7dmFyIHQ7dHJ5e3Q9ZS5zdG9yYWdlLmRlYnVnfWNhdGNoKHQpe31yZXR1cm4gdH1mdW5jdGlvbiBjKCl7dHJ5e3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlfWNhdGNoKHQpe319ZT10LmV4cG9ydHM9cig0KSxlLmxvZz1pLGUuZm9ybWF0QXJncz1vLGUuc2F2ZT1zLGUubG9hZD1hLGUudXNlQ29sb3JzPW4sZS5zdG9yYWdlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUuc3RvcmFnZT9jaHJvbWUuc3RvcmFnZS5sb2NhbDpjKCksZS5jb2xvcnM9W1wibGlnaHRzZWFncmVlblwiLFwiZm9yZXN0Z3JlZW5cIixcImdvbGRlbnJvZFwiLFwiZG9kZ2VyYmx1ZVwiLFwiZGFya29yY2hpZFwiLFwiY3JpbXNvblwiXSxlLmZvcm1hdHRlcnMuaj1mdW5jdGlvbih0KXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCl9LGUuZW5hYmxlKGEoKSl9LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKCl7cmV0dXJuIGUuY29sb3JzW3UrKyVlLmNvbG9ycy5sZW5ndGhdfWZ1bmN0aW9uIG8odCl7ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBvKCl7dmFyIHQ9byxyPStuZXcgRGF0ZSxpPXItKHB8fHIpO3QuZGlmZj1pLHQucHJldj1wLHQuY3Vycj1yLHA9cixudWxsPT10LnVzZUNvbG9ycyYmKHQudXNlQ29sb3JzPWUudXNlQ29sb3JzKCkpLG51bGw9PXQuY29sb3ImJnQudXNlQ29sb3JzJiYodC5jb2xvcj1uKCkpO3ZhciBzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7c1swXT1lLmNvZXJjZShzWzBdKSxcInN0cmluZ1wiIT10eXBlb2Ygc1swXSYmKHM9W1wiJW9cIl0uY29uY2F0KHMpKTt2YXIgYT0wO3NbMF09c1swXS5yZXBsYWNlKC8lKFthLXolXSkvZyxmdW5jdGlvbihyLG4pe2lmKFwiJSVcIj09PXIpcmV0dXJuIHI7YSsrO3ZhciBvPWUuZm9ybWF0dGVyc1tuXTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBvKXt2YXIgaT1zW2FdO3I9by5jYWxsKHQsaSkscy5zcGxpY2UoYSwxKSxhLS19cmV0dXJuIHJ9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmZvcm1hdEFyZ3MmJihzPWUuZm9ybWF0QXJncy5hcHBseSh0LHMpKTt2YXIgYz1vLmxvZ3x8ZS5sb2d8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7Yy5hcHBseSh0LHMpfXIuZW5hYmxlZD0hMSxvLmVuYWJsZWQ9ITA7dmFyIGk9ZS5lbmFibGVkKHQpP286cjtyZXR1cm4gaS5uYW1lc3BhY2U9dCxpfWZ1bmN0aW9uIGkodCl7ZS5zYXZlKHQpO2Zvcih2YXIgcj0odHx8XCJcIikuc3BsaXQoL1tcXHMsXSsvKSxuPXIubGVuZ3RoLG89MDtvPG47bysrKXJbb10mJih0PXJbb10ucmVwbGFjZSgvXFwqL2csXCIuKj9cIiksXCItXCI9PT10WzBdP2Uuc2tpcHMucHVzaChuZXcgUmVnRXhwKFwiXlwiK3Quc3Vic3RyKDEpK1wiJFwiKSk6ZS5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoXCJeXCIrdCtcIiRcIikpKX1mdW5jdGlvbiBzKCl7ZS5lbmFibGUoXCJcIil9ZnVuY3Rpb24gYSh0KXt2YXIgcixuO2ZvcihyPTAsbj1lLnNraXBzLmxlbmd0aDtyPG47cisrKWlmKGUuc2tpcHNbcl0udGVzdCh0KSlyZXR1cm4hMTtmb3Iocj0wLG49ZS5uYW1lcy5sZW5ndGg7cjxuO3IrKylpZihlLm5hbWVzW3JdLnRlc3QodCkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP3Quc3RhY2t8fHQubWVzc2FnZTp0fWU9dC5leHBvcnRzPW8sZS5jb2VyY2U9YyxlLmRpc2FibGU9cyxlLmVuYWJsZT1pLGUuZW5hYmxlZD1hLGUuaHVtYW5pemU9cig1KSxlLm5hbWVzPVtdLGUuc2tpcHM9W10sZS5mb3JtYXR0ZXJzPXt9O3ZhciBwLHU9MH0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQpe2lmKHQ9XCJcIit0LCEodC5sZW5ndGg+MWU0KSl7dmFyIGU9L14oKD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyh0KTtpZihlKXt2YXIgcj1wYXJzZUZsb2F0KGVbMV0pLG49KGVbMl18fFwibXNcIikudG9Mb3dlckNhc2UoKTtzd2l0Y2gobil7Y2FzZVwieWVhcnNcIjpjYXNlXCJ5ZWFyXCI6Y2FzZVwieXJzXCI6Y2FzZVwieXJcIjpjYXNlXCJ5XCI6cmV0dXJuIHIqdTtjYXNlXCJkYXlzXCI6Y2FzZVwiZGF5XCI6Y2FzZVwiZFwiOnJldHVybiByKnA7Y2FzZVwiaG91cnNcIjpjYXNlXCJob3VyXCI6Y2FzZVwiaHJzXCI6Y2FzZVwiaHJcIjpjYXNlXCJoXCI6cmV0dXJuIHIqYztjYXNlXCJtaW51dGVzXCI6Y2FzZVwibWludXRlXCI6Y2FzZVwibWluc1wiOmNhc2VcIm1pblwiOmNhc2VcIm1cIjpyZXR1cm4gciphO2Nhc2VcInNlY29uZHNcIjpjYXNlXCJzZWNvbmRcIjpjYXNlXCJzZWNzXCI6Y2FzZVwic2VjXCI6Y2FzZVwic1wiOnJldHVybiByKnM7Y2FzZVwibWlsbGlzZWNvbmRzXCI6Y2FzZVwibWlsbGlzZWNvbmRcIjpjYXNlXCJtc2Vjc1wiOmNhc2VcIm1zZWNcIjpjYXNlXCJtc1wiOnJldHVybiByfX19fWZ1bmN0aW9uIG4odCl7cmV0dXJuIHQ+PXA/TWF0aC5yb3VuZCh0L3ApK1wiZFwiOnQ+PWM/TWF0aC5yb3VuZCh0L2MpK1wiaFwiOnQ+PWE/TWF0aC5yb3VuZCh0L2EpK1wibVwiOnQ+PXM/TWF0aC5yb3VuZCh0L3MpK1wic1wiOnQrXCJtc1wifWZ1bmN0aW9uIG8odCl7cmV0dXJuIGkodCxwLFwiZGF5XCIpfHxpKHQsYyxcImhvdXJcIil8fGkodCxhLFwibWludXRlXCIpfHxpKHQscyxcInNlY29uZFwiKXx8dCtcIiBtc1wifWZ1bmN0aW9uIGkodCxlLHIpe2lmKCEodDxlKSlyZXR1cm4gdDwxLjUqZT9NYXRoLmZsb29yKHQvZSkrXCIgXCIrcjpNYXRoLmNlaWwodC9lKStcIiBcIityK1wic1wifXZhciBzPTFlMyxhPTYwKnMsYz02MCphLHA9MjQqYyx1PTM2NS4yNSpwO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBlPWV8fHt9LFwic3RyaW5nXCI9PXR5cGVvZiB0P3IodCk6ZS5sb25nP28odCk6bih0KX19LGZ1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIG8odCl7dmFyIHI9XCJcIixuPSExO3JldHVybiByKz10LnR5cGUsZS5CSU5BUllfRVZFTlQhPXQudHlwZSYmZS5CSU5BUllfQUNLIT10LnR5cGV8fChyKz10LmF0dGFjaG1lbnRzLHIrPVwiLVwiKSx0Lm5zcCYmXCIvXCIhPXQubnNwJiYobj0hMCxyKz10Lm5zcCksbnVsbCE9dC5pZCYmKG4mJihyKz1cIixcIixuPSExKSxyKz10LmlkKSxudWxsIT10LmRhdGEmJihuJiYocis9XCIsXCIpLHIrPWguc3RyaW5naWZ5KHQuZGF0YSkpLHUoXCJlbmNvZGVkICVqIGFzICVzXCIsdCxyKSxyfWZ1bmN0aW9uIGkodCxlKXtmdW5jdGlvbiByKHQpe3ZhciByPWwuZGVjb25zdHJ1Y3RQYWNrZXQodCksbj1vKHIucGFja2V0KSxpPXIuYnVmZmVycztpLnVuc2hpZnQobiksZShpKX1sLnJlbW92ZUJsb2JzKHQscil9ZnVuY3Rpb24gcygpe3RoaXMucmVjb25zdHJ1Y3Rvcj1udWxsfWZ1bmN0aW9uIGEodCl7dmFyIHI9e30sbj0wO2lmKHIudHlwZT1OdW1iZXIodC5jaGFyQXQoMCkpLG51bGw9PWUudHlwZXNbci50eXBlXSlyZXR1cm4gcCgpO2lmKGUuQklOQVJZX0VWRU5UPT1yLnR5cGV8fGUuQklOQVJZX0FDSz09ci50eXBlKXtmb3IodmFyIG89XCJcIjtcIi1cIiE9dC5jaGFyQXQoKytuKSYmKG8rPXQuY2hhckF0KG4pLG4hPXQubGVuZ3RoKTspO2lmKG8hPU51bWJlcihvKXx8XCItXCIhPXQuY2hhckF0KG4pKXRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgYXR0YWNobWVudHNcIik7ci5hdHRhY2htZW50cz1OdW1iZXIobyl9aWYoXCIvXCI9PXQuY2hhckF0KG4rMSkpZm9yKHIubnNwPVwiXCI7KytuOyl7dmFyIGk9dC5jaGFyQXQobik7aWYoXCIsXCI9PWkpYnJlYWs7aWYoci5uc3ArPWksbj09dC5sZW5ndGgpYnJlYWt9ZWxzZSByLm5zcD1cIi9cIjt2YXIgcz10LmNoYXJBdChuKzEpO2lmKFwiXCIhPT1zJiZOdW1iZXIocyk9PXMpe2ZvcihyLmlkPVwiXCI7KytuOyl7dmFyIGk9dC5jaGFyQXQobik7aWYobnVsbD09aXx8TnVtYmVyKGkpIT1pKXstLW47YnJlYWt9aWYoci5pZCs9dC5jaGFyQXQobiksbj09dC5sZW5ndGgpYnJlYWt9ci5pZD1OdW1iZXIoci5pZCl9aWYodC5jaGFyQXQoKytuKSl0cnl7ci5kYXRhPWgucGFyc2UodC5zdWJzdHIobikpfWNhdGNoKHQpe3JldHVybiBwKCl9cmV0dXJuIHUoXCJkZWNvZGVkICVzIGFzICVqXCIsdCxyKSxyfWZ1bmN0aW9uIGModCl7dGhpcy5yZWNvblBhY2s9dCx0aGlzLmJ1ZmZlcnM9W119ZnVuY3Rpb24gcCh0KXtyZXR1cm57dHlwZTplLkVSUk9SLGRhdGE6XCJwYXJzZXIgZXJyb3JcIn19dmFyIHU9cigzKShcInNvY2tldC5pby1wYXJzZXJcIiksaD1yKDcpLGY9KHIoMTApLHIoMTEpKSxsPXIoMTIpLGQ9cigxMyk7ZS5wcm90b2NvbD00LGUudHlwZXM9W1wiQ09OTkVDVFwiLFwiRElTQ09OTkVDVFwiLFwiRVZFTlRcIixcIkFDS1wiLFwiRVJST1JcIixcIkJJTkFSWV9FVkVOVFwiLFwiQklOQVJZX0FDS1wiXSxlLkNPTk5FQ1Q9MCxlLkRJU0NPTk5FQ1Q9MSxlLkVWRU5UPTIsZS5BQ0s9MyxlLkVSUk9SPTQsZS5CSU5BUllfRVZFTlQ9NSxlLkJJTkFSWV9BQ0s9NixlLkVuY29kZXI9bixlLkRlY29kZXI9cyxuLnByb3RvdHlwZS5lbmNvZGU9ZnVuY3Rpb24odCxyKXtpZih1KFwiZW5jb2RpbmcgcGFja2V0ICVqXCIsdCksZS5CSU5BUllfRVZFTlQ9PXQudHlwZXx8ZS5CSU5BUllfQUNLPT10LnR5cGUpaSh0LHIpO2Vsc2V7dmFyIG49byh0KTtyKFtuXSl9fSxmKHMucHJvdG90eXBlKSxzLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIHI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcj1hKHQpLGUuQklOQVJZX0VWRU5UPT1yLnR5cGV8fGUuQklOQVJZX0FDSz09ci50eXBlPyh0aGlzLnJlY29uc3RydWN0b3I9bmV3IGMociksMD09PXRoaXMucmVjb25zdHJ1Y3Rvci5yZWNvblBhY2suYXR0YWNobWVudHMmJnRoaXMuZW1pdChcImRlY29kZWRcIixyKSk6dGhpcy5lbWl0KFwiZGVjb2RlZFwiLHIpO2Vsc2V7aWYoIWQodCkmJiF0LmJhc2U2NCl0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHR5cGU6IFwiK3QpO2lmKCF0aGlzLnJlY29uc3RydWN0b3IpdGhyb3cgbmV3IEVycm9yKFwiZ290IGJpbmFyeSBkYXRhIHdoZW4gbm90IHJlY29uc3RydWN0aW5nIGEgcGFja2V0XCIpO3I9dGhpcy5yZWNvbnN0cnVjdG9yLnRha2VCaW5hcnlEYXRhKHQpLHImJih0aGlzLnJlY29uc3RydWN0b3I9bnVsbCx0aGlzLmVtaXQoXCJkZWNvZGVkXCIscikpfX0scy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucmVjb25zdHJ1Y3RvciYmdGhpcy5yZWNvbnN0cnVjdG9yLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKX0sYy5wcm90b3R5cGUudGFrZUJpbmFyeURhdGE9ZnVuY3Rpb24odCl7aWYodGhpcy5idWZmZXJzLnB1c2godCksdGhpcy5idWZmZXJzLmxlbmd0aD09dGhpcy5yZWNvblBhY2suYXR0YWNobWVudHMpe3ZhciBlPWwucmVjb25zdHJ1Y3RQYWNrZXQodGhpcy5yZWNvblBhY2ssdGhpcy5idWZmZXJzKTtyZXR1cm4gdGhpcy5maW5pc2hlZFJlY29uc3RydWN0aW9uKCksZX1yZXR1cm4gbnVsbH0sYy5wcm90b3R5cGUuZmluaXNoZWRSZWNvbnN0cnVjdGlvbj1mdW5jdGlvbigpe3RoaXMucmVjb25QYWNrPW51bGwsdGhpcy5idWZmZXJzPVtdfX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuOyhmdW5jdGlvbih0LG8peyhmdW5jdGlvbigpe2Z1bmN0aW9uIGkodCxlKXtmdW5jdGlvbiByKHQpe2lmKHJbdF0hPT1nKXJldHVybiByW3RdO3ZhciBpO2lmKFwiYnVnLXN0cmluZy1jaGFyLWluZGV4XCI9PXQpaT1cImFcIiE9XCJhXCJbMF07ZWxzZSBpZihcImpzb25cIj09dClpPXIoXCJqc29uLXN0cmluZ2lmeVwiKSYmcihcImpzb24tcGFyc2VcIik7ZWxzZXt2YXIgcyxhPSd7XCJhXCI6WzEsdHJ1ZSxmYWxzZSxudWxsLFwiXFxcXHUwMDAwXFxcXGJcXFxcblxcXFxmXFxcXHJcXFxcdFwiXX0nO2lmKFwianNvbi1zdHJpbmdpZnlcIj09dCl7dmFyIHA9ZS5zdHJpbmdpZnksdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBwJiZiO2lmKHUpeyhzPWZ1bmN0aW9uKCl7cmV0dXJuIDF9KS50b0pTT049czt0cnl7dT1cIjBcIj09PXAoMCkmJlwiMFwiPT09cChuZXcgbikmJidcIlwiJz09cChuZXcgbykmJnAodik9PT1nJiZwKGcpPT09ZyYmcCgpPT09ZyYmXCIxXCI9PT1wKHMpJiZcIlsxXVwiPT1wKFtzXSkmJlwiW251bGxdXCI9PXAoW2ddKSYmXCJudWxsXCI9PXAobnVsbCkmJlwiW251bGwsbnVsbCxudWxsXVwiPT1wKFtnLHYsbnVsbF0pJiZwKHthOltzLCEwLCExLG51bGwsXCJcXDBcXGJcXG5cXGZcXHJcXHRcIl19KT09YSYmXCIxXCI9PT1wKG51bGwscykmJlwiW1xcbiAxLFxcbiAyXFxuXVwiPT1wKFsxLDJdLG51bGwsMSkmJidcIi0yNzE4MjEtMDQtMjBUMDA6MDA6MDAuMDAwWlwiJz09cChuZXcgYygtODY0ZTEzKSkmJidcIisyNzU3NjAtMDktMTNUMDA6MDA6MDAuMDAwWlwiJz09cChuZXcgYyg4NjRlMTMpKSYmJ1wiLTAwMDAwMS0wMS0wMVQwMDowMDowMC4wMDBaXCInPT1wKG5ldyBjKC02MjE5ODc1NTJlNSkpJiYnXCIxOTY5LTEyLTMxVDIzOjU5OjU5Ljk5OVpcIic9PXAobmV3IGMoLTEpKX1jYXRjaCh0KXt1PSExfX1pPXV9aWYoXCJqc29uLXBhcnNlXCI9PXQpe3ZhciBoPWUucGFyc2U7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgaCl0cnl7aWYoMD09PWgoXCIwXCIpJiYhaCghMSkpe3M9aChhKTt2YXIgZj01PT1zLmEubGVuZ3RoJiYxPT09cy5hWzBdO2lmKGYpe3RyeXtmPSFoKCdcIlxcdFwiJyl9Y2F0Y2godCl7fWlmKGYpdHJ5e2Y9MSE9PWgoXCIwMVwiKX1jYXRjaCh0KXt9aWYoZil0cnl7Zj0xIT09aChcIjEuXCIpfWNhdGNoKHQpe319fX1jYXRjaCh0KXtmPSExfWk9Zn19cmV0dXJuIHJbdF09ISFpfXR8fCh0PXAuT2JqZWN0KCkpLGV8fChlPXAuT2JqZWN0KCkpO3ZhciBuPXQuTnVtYmVyfHxwLk51bWJlcixvPXQuU3RyaW5nfHxwLlN0cmluZyxzPXQuT2JqZWN0fHxwLk9iamVjdCxjPXQuRGF0ZXx8cC5EYXRlLHU9dC5TeW50YXhFcnJvcnx8cC5TeW50YXhFcnJvcixoPXQuVHlwZUVycm9yfHxwLlR5cGVFcnJvcixmPXQuTWF0aHx8cC5NYXRoLGw9dC5KU09OfHxwLkpTT047XCJvYmplY3RcIj09dHlwZW9mIGwmJmwmJihlLnN0cmluZ2lmeT1sLnN0cmluZ2lmeSxlLnBhcnNlPWwucGFyc2UpO3ZhciBkLHksZyxtPXMucHJvdG90eXBlLHY9bS50b1N0cmluZyxiPW5ldyBjKC0weGM3ODJiNWI4MDBjZWMpO3RyeXtiPWIuZ2V0VVRDRnVsbFllYXIoKT09LTEwOTI1MiYmMD09PWIuZ2V0VVRDTW9udGgoKSYmMT09PWIuZ2V0VVRDRGF0ZSgpJiYxMD09Yi5nZXRVVENIb3VycygpJiYzNz09Yi5nZXRVVENNaW51dGVzKCkmJjY9PWIuZ2V0VVRDU2Vjb25kcygpJiY3MDg9PWIuZ2V0VVRDTWlsbGlzZWNvbmRzKCl9Y2F0Y2godCl7fWlmKCFyKFwianNvblwiKSl7dmFyIGs9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLHc9XCJbb2JqZWN0IERhdGVdXCIseD1cIltvYmplY3QgTnVtYmVyXVwiLEE9XCJbb2JqZWN0IFN0cmluZ11cIixCPVwiW29iamVjdCBBcnJheV1cIixDPVwiW29iamVjdCBCb29sZWFuXVwiLFM9cihcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiKTtpZighYil2YXIgXz1mLmZsb29yLEU9WzAsMzEsNTksOTAsMTIwLDE1MSwxODEsMjEyLDI0MywyNzMsMzA0LDMzNF0saj1mdW5jdGlvbih0LGUpe3JldHVybiBFW2VdKzM2NSoodC0xOTcwKStfKCh0LTE5NjkrKGU9KyhlPjEpKSkvNCktXygodC0xOTAxK2UpLzEwMCkrXygodC0xNjAxK2UpLzQwMCl9O2lmKChkPW0uaGFzT3duUHJvcGVydHkpfHwoZD1mdW5jdGlvbih0KXt2YXIgZSxyPXt9O3JldHVybihyLl9fcHJvdG9fXz1udWxsLHIuX19wcm90b19fPXt0b1N0cmluZzoxfSxyKS50b1N0cmluZyE9dj9kPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX19wcm90b19fLHI9dCBpbih0aGlzLl9fcHJvdG9fXz1udWxsLHRoaXMpO3JldHVybiB0aGlzLl9fcHJvdG9fXz1lLHJ9OihlPXIuY29uc3RydWN0b3IsZD1mdW5jdGlvbih0KXt2YXIgcj0odGhpcy5jb25zdHJ1Y3Rvcnx8ZSkucHJvdG90eXBlO3JldHVybiB0IGluIHRoaXMmJiEodCBpbiByJiZ0aGlzW3RdPT09clt0XSl9KSxyPW51bGwsZC5jYWxsKHRoaXMsdCl9KSx5PWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixvLGk9MDsocj1mdW5jdGlvbigpe3RoaXMudmFsdWVPZj0wfSkucHJvdG90eXBlLnZhbHVlT2Y9MCxuPW5ldyByO2ZvcihvIGluIG4pZC5jYWxsKG4sbykmJmkrKztyZXR1cm4gcj1uPW51bGwsaT95PTI9PWk/ZnVuY3Rpb24odCxlKXt2YXIgcixuPXt9LG89di5jYWxsKHQpPT1rO2ZvcihyIGluIHQpbyYmXCJwcm90b3R5cGVcIj09cnx8ZC5jYWxsKG4scil8fCEobltyXT0xKXx8IWQuY2FsbCh0LHIpfHxlKHIpfTpmdW5jdGlvbih0LGUpe3ZhciByLG4sbz12LmNhbGwodCk9PWs7Zm9yKHIgaW4gdClvJiZcInByb3RvdHlwZVwiPT1yfHwhZC5jYWxsKHQscil8fChuPVwiY29uc3RydWN0b3JcIj09PXIpfHxlKHIpOyhufHxkLmNhbGwodCxyPVwiY29uc3RydWN0b3JcIikpJiZlKHIpfToobj1bXCJ2YWx1ZU9mXCIsXCJ0b1N0cmluZ1wiLFwidG9Mb2NhbGVTdHJpbmdcIixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXCJpc1Byb3RvdHlwZU9mXCIsXCJoYXNPd25Qcm9wZXJ0eVwiLFwiY29uc3RydWN0b3JcIl0seT1mdW5jdGlvbih0LGUpe3ZhciByLG8saT12LmNhbGwodCk9PWsscz0haSYmXCJmdW5jdGlvblwiIT10eXBlb2YgdC5jb25zdHJ1Y3RvciYmYVt0eXBlb2YgdC5oYXNPd25Qcm9wZXJ0eV0mJnQuaGFzT3duUHJvcGVydHl8fGQ7Zm9yKHIgaW4gdClpJiZcInByb3RvdHlwZVwiPT1yfHwhcy5jYWxsKHQscil8fGUocik7Zm9yKG89bi5sZW5ndGg7cj1uWy0tb107cy5jYWxsKHQscikmJmUocikpO30pLHkodCxlKX0sIXIoXCJqc29uLXN0cmluZ2lmeVwiKSl7dmFyIE89ezkyOlwiXFxcXFxcXFxcIiwzNDonXFxcXFwiJyw4OlwiXFxcXGJcIiwxMjpcIlxcXFxmXCIsMTA6XCJcXFxcblwiLDEzOlwiXFxcXHJcIiw5OlwiXFxcXHRcIn0sVD1cIjAwMDAwMFwiLFA9ZnVuY3Rpb24odCxlKXtyZXR1cm4oVCsoZXx8MCkpLnNsaWNlKC10KX0sTj1cIlxcXFx1MDBcIixSPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0nXCInLHI9MCxuPXQubGVuZ3RoLG89IVN8fG4+MTAsaT1vJiYoUz90LnNwbGl0KFwiXCIpOnQpO3I8bjtyKyspe3ZhciBzPXQuY2hhckNvZGVBdChyKTtzd2l0Y2gocyl7Y2FzZSA4OmNhc2UgOTpjYXNlIDEwOmNhc2UgMTI6Y2FzZSAxMzpjYXNlIDM0OmNhc2UgOTI6ZSs9T1tzXTticmVhaztkZWZhdWx0OmlmKHM8MzIpe2UrPU4rUCgyLHMudG9TdHJpbmcoMTYpKTticmVha31lKz1vP2lbcl06dC5jaGFyQXQocil9fXJldHVybiBlKydcIid9LEQ9ZnVuY3Rpb24odCxlLHIsbixvLGkscyl7dmFyIGEsYyxwLHUsZixsLG0sYixrLFMsRSxPLFQsTixVLHE7dHJ5e2E9ZVt0XX1jYXRjaCh0KXt9aWYoXCJvYmplY3RcIj09dHlwZW9mIGEmJmEpaWYoYz12LmNhbGwoYSksYyE9d3x8ZC5jYWxsKGEsXCJ0b0pTT05cIikpXCJmdW5jdGlvblwiPT10eXBlb2YgYS50b0pTT04mJihjIT14JiZjIT1BJiZjIT1CfHxkLmNhbGwoYSxcInRvSlNPTlwiKSkmJihhPWEudG9KU09OKHQpKTtlbHNlIGlmKGE+LTEvMCYmYTwxLzApe2lmKGope2ZvcihmPV8oYS84NjRlNSkscD1fKGYvMzY1LjI0MjUpKzE5NzAtMTtqKHArMSwwKTw9ZjtwKyspO2Zvcih1PV8oKGYtaihwLDApKS8zMC40Mik7aihwLHUrMSk8PWY7dSsrKTtmPTErZi1qKHAsdSksbD0oYSU4NjRlNSs4NjRlNSklODY0ZTUsbT1fKGwvMzZlNSklMjQsYj1fKGwvNmU0KSU2MCxrPV8obC8xZTMpJTYwLFM9bCUxZTN9ZWxzZSBwPWEuZ2V0VVRDRnVsbFllYXIoKSx1PWEuZ2V0VVRDTW9udGgoKSxmPWEuZ2V0VVRDRGF0ZSgpLG09YS5nZXRVVENIb3VycygpLGI9YS5nZXRVVENNaW51dGVzKCksaz1hLmdldFVUQ1NlY29uZHMoKSxTPWEuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7YT0ocDw9MHx8cD49MWU0PyhwPDA/XCItXCI6XCIrXCIpK1AoNixwPDA/LXA6cCk6UCg0LHApKStcIi1cIitQKDIsdSsxKStcIi1cIitQKDIsZikrXCJUXCIrUCgyLG0pK1wiOlwiK1AoMixiKStcIjpcIitQKDIsaykrXCIuXCIrUCgzLFMpK1wiWlwifWVsc2UgYT1udWxsO2lmKHImJihhPXIuY2FsbChlLHQsYSkpLG51bGw9PT1hKXJldHVyblwibnVsbFwiO2lmKGM9di5jYWxsKGEpLGM9PUMpcmV0dXJuXCJcIithO2lmKGM9PXgpcmV0dXJuIGE+LTEvMCYmYTwxLzA/XCJcIithOlwibnVsbFwiO2lmKGM9PUEpcmV0dXJuIFIoXCJcIithKTtpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7Zm9yKE49cy5sZW5ndGg7Ti0tOylpZihzW05dPT09YSl0aHJvdyBoKCk7aWYocy5wdXNoKGEpLEU9W10sVT1pLGkrPW8sYz09Qil7Zm9yKFQ9MCxOPWEubGVuZ3RoO1Q8TjtUKyspTz1EKFQsYSxyLG4sbyxpLHMpLEUucHVzaChPPT09Zz9cIm51bGxcIjpPKTtxPUUubGVuZ3RoP28/XCJbXFxuXCIraStFLmpvaW4oXCIsXFxuXCIraSkrXCJcXG5cIitVK1wiXVwiOlwiW1wiK0Uuam9pbihcIixcIikrXCJdXCI6XCJbXVwifWVsc2UgeShufHxhLGZ1bmN0aW9uKHQpe3ZhciBlPUQodCxhLHIsbixvLGkscyk7ZSE9PWcmJkUucHVzaChSKHQpK1wiOlwiKyhvP1wiIFwiOlwiXCIpK2UpfSkscT1FLmxlbmd0aD9vP1wie1xcblwiK2krRS5qb2luKFwiLFxcblwiK2kpK1wiXFxuXCIrVStcIn1cIjpcIntcIitFLmpvaW4oXCIsXCIpK1wifVwiOlwie31cIjtyZXR1cm4gcy5wb3AoKSxxfX07ZS5zdHJpbmdpZnk9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLG8saSxzO2lmKGFbdHlwZW9mIGVdJiZlKWlmKChzPXYuY2FsbChlKSk9PWspbz1lO2Vsc2UgaWYocz09Qil7aT17fTtmb3IodmFyIGMscD0wLHU9ZS5sZW5ndGg7cDx1O2M9ZVtwKytdLHM9di5jYWxsKGMpLChzPT1BfHxzPT14KSYmKGlbY109MSkpO31pZihyKWlmKChzPXYuY2FsbChyKSk9PXgpe2lmKChyLT1yJTEpPjApZm9yKG49XCJcIixyPjEwJiYocj0xMCk7bi5sZW5ndGg8cjtuKz1cIiBcIik7fWVsc2Ugcz09QSYmKG49ci5sZW5ndGg8PTEwP3I6ci5zbGljZSgwLDEwKSk7cmV0dXJuIEQoXCJcIiwoYz17fSxjW1wiXCJdPXQsYyksbyxpLG4sXCJcIixbXSl9fWlmKCFyKFwianNvbi1wYXJzZVwiKSl7dmFyIFUscSxMPW8uZnJvbUNoYXJDb2RlLE09ezkyOlwiXFxcXFwiLDM0OidcIicsNDc6XCIvXCIsOTg6XCJcXGJcIiwxMTY6XCJcXHRcIiwxMTA6XCJcXG5cIiwxMDI6XCJcXGZcIiwxMTQ6XCJcXHJcIn0sST1mdW5jdGlvbigpe3Rocm93IFU9cT1udWxsLHUoKX0sSD1mdW5jdGlvbigpe2Zvcih2YXIgdCxlLHIsbixvLGk9cSxzPWkubGVuZ3RoO1U8czspc3dpdGNoKG89aS5jaGFyQ29kZUF0KFUpKXtjYXNlIDk6Y2FzZSAxMDpjYXNlIDEzOmNhc2UgMzI6VSsrO2JyZWFrO2Nhc2UgMTIzOmNhc2UgMTI1OmNhc2UgOTE6Y2FzZSA5MzpjYXNlIDU4OmNhc2UgNDQ6cmV0dXJuIHQ9Uz9pLmNoYXJBdChVKTppW1VdLFUrKyx0O2Nhc2UgMzQ6Zm9yKHQ9XCJAXCIsVSsrO1U8czspaWYobz1pLmNoYXJDb2RlQXQoVSksbzwzMilJKCk7ZWxzZSBpZig5Mj09bylzd2l0Y2gobz1pLmNoYXJDb2RlQXQoKytVKSl7Y2FzZSA5MjpjYXNlIDM0OmNhc2UgNDc6Y2FzZSA5ODpjYXNlIDExNjpjYXNlIDExMDpjYXNlIDEwMjpjYXNlIDExNDp0Kz1NW29dLFUrKzticmVhaztjYXNlIDExNzpmb3IoZT0rK1Uscj1VKzQ7VTxyO1UrKylvPWkuY2hhckNvZGVBdChVKSxvPj00OCYmbzw9NTd8fG8+PTk3JiZvPD0xMDJ8fG8+PTY1JiZvPD03MHx8SSgpO3QrPUwoXCIweFwiK2kuc2xpY2UoZSxVKSk7YnJlYWs7ZGVmYXVsdDpJKCl9ZWxzZXtpZigzND09bylicmVhaztmb3Iobz1pLmNoYXJDb2RlQXQoVSksZT1VO28+PTMyJiY5MiE9byYmMzQhPW87KW89aS5jaGFyQ29kZUF0KCsrVSk7dCs9aS5zbGljZShlLFUpfWlmKDM0PT1pLmNoYXJDb2RlQXQoVSkpcmV0dXJuIFUrKyx0O0koKTtkZWZhdWx0OmlmKGU9VSw0NT09byYmKG49ITAsbz1pLmNoYXJDb2RlQXQoKytVKSksbz49NDgmJm88PTU3KXtmb3IoNDg9PW8mJihvPWkuY2hhckNvZGVBdChVKzEpLG8+PTQ4JiZvPD01NykmJkkoKSxuPSExO1U8cyYmKG89aS5jaGFyQ29kZUF0KFUpLG8+PTQ4JiZvPD01Nyk7VSsrKTtpZig0Nj09aS5jaGFyQ29kZUF0KFUpKXtmb3Iocj0rK1U7cjxzJiYobz1pLmNoYXJDb2RlQXQociksbz49NDgmJm88PTU3KTtyKyspO3I9PVUmJkkoKSxVPXJ9aWYobz1pLmNoYXJDb2RlQXQoVSksMTAxPT1vfHw2OT09byl7Zm9yKG89aS5jaGFyQ29kZUF0KCsrVSksNDMhPW8mJjQ1IT1vfHxVKysscj1VO3I8cyYmKG89aS5jaGFyQ29kZUF0KHIpLG8+PTQ4JiZvPD01Nyk7cisrKTtyPT1VJiZJKCksVT1yfXJldHVybitpLnNsaWNlKGUsVSl9aWYobiYmSSgpLFwidHJ1ZVwiPT1pLnNsaWNlKFUsVSs0KSlyZXR1cm4gVSs9NCwhMDtpZihcImZhbHNlXCI9PWkuc2xpY2UoVSxVKzUpKXJldHVybiBVKz01LCExO2lmKFwibnVsbFwiPT1pLnNsaWNlKFUsVSs0KSlyZXR1cm4gVSs9NCxudWxsO0koKX1yZXR1cm5cIiRcIn0sej1mdW5jdGlvbih0KXt2YXIgZSxyO2lmKFwiJFwiPT10JiZJKCksXCJzdHJpbmdcIj09dHlwZW9mIHQpe2lmKFwiQFwiPT0oUz90LmNoYXJBdCgwKTp0WzBdKSlyZXR1cm4gdC5zbGljZSgxKTtpZihcIltcIj09dCl7Zm9yKGU9W107dD1IKCksXCJdXCIhPXQ7cnx8KHI9ITApKXImJihcIixcIj09dD8odD1IKCksXCJdXCI9PXQmJkkoKSk6SSgpKSxcIixcIj09dCYmSSgpLGUucHVzaCh6KHQpKTtyZXR1cm4gZX1pZihcIntcIj09dCl7Zm9yKGU9e307dD1IKCksXCJ9XCIhPXQ7cnx8KHI9ITApKXImJihcIixcIj09dD8odD1IKCksXCJ9XCI9PXQmJkkoKSk6SSgpKSxcIixcIiE9dCYmXCJzdHJpbmdcIj09dHlwZW9mIHQmJlwiQFwiPT0oUz90LmNoYXJBdCgwKTp0WzBdKSYmXCI6XCI9PUgoKXx8SSgpLGVbdC5zbGljZSgxKV09eihIKCkpO3JldHVybiBlfUkoKX1yZXR1cm4gdH0sSj1mdW5jdGlvbih0LGUscil7dmFyIG49WCh0LGUscik7bj09PWc/ZGVsZXRlIHRbZV06dFtlXT1ufSxYPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixvPXRbZV07aWYoXCJvYmplY3RcIj09dHlwZW9mIG8mJm8paWYodi5jYWxsKG8pPT1CKWZvcihuPW8ubGVuZ3RoO24tLTspSihvLG4scik7ZWxzZSB5KG8sZnVuY3Rpb24odCl7SihvLHQscil9KTtyZXR1cm4gci5jYWxsKHQsZSxvKX07ZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciByLG47cmV0dXJuIFU9MCxxPVwiXCIrdCxyPXooSCgpKSxcIiRcIiE9SCgpJiZJKCksVT1xPW51bGwsZSYmdi5jYWxsKGUpPT1rP1goKG49e30sbltcIlwiXT1yLG4pLFwiXCIsZSk6cn19fXJldHVybiBlLnJ1bkluQ29udGV4dD1pLGV9dmFyIHM9cig5KSxhPXtmdW5jdGlvbjohMCxvYmplY3Q6ITB9LGM9YVt0eXBlb2YgZV0mJmUmJiFlLm5vZGVUeXBlJiZlLHA9YVt0eXBlb2Ygd2luZG93XSYmd2luZG93fHx0aGlzLHU9YyYmYVt0eXBlb2YgdF0mJnQmJiF0Lm5vZGVUeXBlJiZcIm9iamVjdFwiPT10eXBlb2YgbyYmbztpZighdXx8dS5nbG9iYWwhPT11JiZ1LndpbmRvdyE9PXUmJnUuc2VsZiE9PXV8fChwPXUpLGMmJiFzKWkocCxjKTtlbHNle3ZhciBoPXAuSlNPTixmPXAuSlNPTjMsbD0hMSxkPWkocCxwLkpTT04zPXtub0NvbmZsaWN0OmZ1bmN0aW9uKCl7cmV0dXJuIGx8fChsPSEwLHAuSlNPTj1oLHAuSlNPTjM9ZixoPWY9bnVsbCksZH19KTtwLkpTT049e3BhcnNlOmQucGFyc2Usc3RyaW5naWZ5OmQuc3RyaW5naWZ5fX1zJiYobj1mdW5jdGlvbigpe3JldHVybiBkfS5jYWxsKGUscixlLHQpLCEodm9pZCAwIT09biYmKHQuZXhwb3J0cz1uKSkpfSkuY2FsbCh0aGlzKX0pLmNhbGwoZSxyKDgpKHQpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC53ZWJwYWNrUG9seWZpbGx8fCh0LmRlcHJlY2F0ZT1mdW5jdGlvbigpe30sdC5wYXRocz1bXSx0LmNoaWxkcmVuPVtdLHQud2VicGFja1BvbHlmaWxsPTEpLHR9fSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXt0LmV4cG9ydHM9ZX0pLmNhbGwoZSx7fSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQpe2lmKHQpcmV0dXJuIG4odCl9ZnVuY3Rpb24gbih0KXtmb3IodmFyIGUgaW4gci5wcm90b3R5cGUpdFtlXT1yLnByb3RvdHlwZVtlXTtyZXR1cm4gdH10LmV4cG9ydHM9cixyLnByb3RvdHlwZS5vbj1yLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LCh0aGlzLl9jYWxsYmFja3NbdF09dGhpcy5fY2FsbGJhY2tzW3RdfHxbXSkucHVzaChlKSx0aGlzfSxyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe24ub2ZmKHQsciksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIG49dGhpcztyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sci5mbj1lLHRoaXMub24odCxyKSx0aGlzfSxyLnByb3RvdHlwZS5vZmY9ci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwwPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9jYWxsYmFja3M9e30sdGhpczt2YXIgcj10aGlzLl9jYWxsYmFja3NbdF07aWYoIXIpcmV0dXJuIHRoaXM7aWYoMT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1t0XSx0aGlzO2Zvcih2YXIgbixvPTA7bzxyLmxlbmd0aDtvKyspaWYobj1yW29dLG49PT1lfHxuLmZuPT09ZSl7ci5zcGxpY2UobywxKTticmVha31yZXR1cm4gdGhpc30sci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTt2YXIgZT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxyPXRoaXMuX2NhbGxiYWNrc1t0XTtpZihyKXtyPXIuc2xpY2UoMCk7Zm9yKHZhciBuPTAsbz1yLmxlbmd0aDtuPG87KytuKXJbbl0uYXBwbHkodGhpcyxlKX1yZXR1cm4gdGhpc30sci5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSx0aGlzLl9jYWxsYmFja3NbdF18fFtdfSxyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmxpc3RlbmVycyh0KS5sZW5ndGh9fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKHQpe3ZhciBuPXIoMTApLG89cigxMyk7ZS5kZWNvbnN0cnVjdFBhY2tldD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe2lmKCF0KXJldHVybiB0O2lmKG8odCkpe3ZhciBpPXtfcGxhY2Vob2xkZXI6ITAsbnVtOnIubGVuZ3RofTtyZXR1cm4gci5wdXNoKHQpLGl9aWYobih0KSl7Zm9yKHZhciBzPW5ldyBBcnJheSh0Lmxlbmd0aCksYT0wO2E8dC5sZW5ndGg7YSsrKXNbYV09ZSh0W2FdKTtyZXR1cm4gc31pZihcIm9iamVjdFwiPT10eXBlb2YgdCYmISh0IGluc3RhbmNlb2YgRGF0ZSkpe3ZhciBzPXt9O2Zvcih2YXIgYyBpbiB0KXNbY109ZSh0W2NdKTtyZXR1cm4gc31yZXR1cm4gdH12YXIgcj1bXSxpPXQuZGF0YSxzPXQ7cmV0dXJuIHMuZGF0YT1lKGkpLHMuYXR0YWNobWVudHM9ci5sZW5ndGgse3BhY2tldDpzLGJ1ZmZlcnM6cn19LGUucmVjb25zdHJ1Y3RQYWNrZXQ9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQpe2lmKHQmJnQuX3BsYWNlaG9sZGVyKXt2YXIgbz1lW3QubnVtXTtyZXR1cm4gb31pZihuKHQpKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl0W2ldPXIodFtpXSk7cmV0dXJuIHR9aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQpe2Zvcih2YXIgcyBpbiB0KXRbc109cih0W3NdKTtyZXR1cm4gdH1yZXR1cm4gdH1yZXR1cm4gdC5kYXRhPXIodC5kYXRhKSx0LmF0dGFjaG1lbnRzPXZvaWQgMCx0fSxlLnJlbW92ZUJsb2JzPWZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gaShlLGMscCl7aWYoIWUpcmV0dXJuIGU7aWYodC5CbG9iJiZlIGluc3RhbmNlb2YgQmxvYnx8dC5GaWxlJiZlIGluc3RhbmNlb2YgRmlsZSl7cysrO3ZhciB1PW5ldyBGaWxlUmVhZGVyO3Uub25sb2FkPWZ1bmN0aW9uKCl7cD9wW2NdPXRoaXMucmVzdWx0OmE9dGhpcy5yZXN1bHQsLS1zfHxyKGEpfSx1LnJlYWRBc0FycmF5QnVmZmVyKGUpfWVsc2UgaWYobihlKSlmb3IodmFyIGg9MDtoPGUubGVuZ3RoO2grKylpKGVbaF0saCxlKTtlbHNlIGlmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiYhbyhlKSlmb3IodmFyIGYgaW4gZSlpKGVbZl0sZixlKX12YXIgcz0wLGE9ZTtpKGEpLHN8fHIoYSl9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiByKHQpe3JldHVybiBlLkJ1ZmZlciYmZS5CdWZmZXIuaXNCdWZmZXIodCl8fGUuQXJyYXlCdWZmZXImJnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcn10LmV4cG9ydHM9cn0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4/KHQmJlwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQ/XCJ1bmRlZmluZWRcIjpvKHQpKSYmKGU9dCx0PXZvaWQgMCksZT1lfHx7fSxlLnBhdGg9ZS5wYXRofHxcIi9zb2NrZXQuaW9cIix0aGlzLm5zcHM9e30sdGhpcy5zdWJzPVtdLHRoaXMub3B0cz1lLHRoaXMucmVjb25uZWN0aW9uKGUucmVjb25uZWN0aW9uIT09ITEpLHRoaXMucmVjb25uZWN0aW9uQXR0ZW1wdHMoZS5yZWNvbm5lY3Rpb25BdHRlbXB0c3x8MS8wKSx0aGlzLnJlY29ubmVjdGlvbkRlbGF5KGUucmVjb25uZWN0aW9uRGVsYXl8fDFlMyksdGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heChlLnJlY29ubmVjdGlvbkRlbGF5TWF4fHw1ZTMpLHRoaXMucmFuZG9taXphdGlvbkZhY3RvcihlLnJhbmRvbWl6YXRpb25GYWN0b3J8fC41KSx0aGlzLmJhY2tvZmY9bmV3IGwoe21pbjp0aGlzLnJlY29ubmVjdGlvbkRlbGF5KCksbWF4OnRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgoKSxqaXR0ZXI6dGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKCl9KSx0aGlzLnRpbWVvdXQobnVsbD09ZS50aW1lb3V0PzJlNDplLnRpbWVvdXQpLHRoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiLHRoaXMudXJpPXQsdGhpcy5jb25uZWN0aW5nPVtdLHRoaXMubGFzdFBpbmc9bnVsbCx0aGlzLmVuY29kaW5nPSExLHRoaXMucGFja2V0QnVmZmVyPVtdLHRoaXMuZW5jb2Rlcj1uZXcgYy5FbmNvZGVyLHRoaXMuZGVjb2Rlcj1uZXcgYy5EZWNvZGVyLHRoaXMuYXV0b0Nvbm5lY3Q9ZS5hdXRvQ29ubmVjdCE9PSExLHZvaWQodGhpcy5hdXRvQ29ubmVjdCYmdGhpcy5vcGVuKCkpKTpuZXcgbih0LGUpfXZhciBvPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LGk9cigxNSkscz1yKDQyKSxhPXIoNDMpLGM9cig2KSxwPXIoNDUpLHU9cig0NiksaD1yKDMpKFwic29ja2V0LmlvLWNsaWVudDptYW5hZ2VyXCIpLGY9cig0MCksbD1yKDQ5KSxkPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPW4sbi5wcm90b3R5cGUuZW1pdEFsbD1mdW5jdGlvbigpe3RoaXMuZW1pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciB0IGluIHRoaXMubnNwcylkLmNhbGwodGhpcy5uc3BzLHQpJiZ0aGlzLm5zcHNbdF0uZW1pdC5hcHBseSh0aGlzLm5zcHNbdF0sYXJndW1lbnRzKX0sbi5wcm90b3R5cGUudXBkYXRlU29ja2V0SWRzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMubnNwcylkLmNhbGwodGhpcy5uc3BzLHQpJiYodGhpcy5uc3BzW3RdLmlkPXRoaXMuZW5naW5lLmlkKX0sYShuLnByb3RvdHlwZSksbi5wcm90b3R5cGUucmVjb25uZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZWNvbm5lY3Rpb249ISF0LHRoaXMpOnRoaXMuX3JlY29ubmVjdGlvbn0sbi5wcm90b3R5cGUucmVjb25uZWN0aW9uQXR0ZW1wdHM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzPXQsdGhpcyk6dGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHN9LG4ucHJvdG90eXBlLnJlY29ubmVjdGlvbkRlbGF5PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZWNvbm5lY3Rpb25EZWxheT10LHRoaXMuYmFja29mZiYmdGhpcy5iYWNrb2ZmLnNldE1pbih0KSx0aGlzKTp0aGlzLl9yZWNvbm5lY3Rpb25EZWxheX0sbi5wcm90b3R5cGUucmFuZG9taXphdGlvbkZhY3Rvcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmFuZG9taXphdGlvbkZhY3Rvcj10LHRoaXMuYmFja29mZiYmdGhpcy5iYWNrb2ZmLnNldEppdHRlcih0KSx0aGlzKTp0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yfSxuLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheU1heD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXg9dCx0aGlzLmJhY2tvZmYmJnRoaXMuYmFja29mZi5zZXRNYXgodCksdGhpcyk6dGhpcy5fcmVjb25uZWN0aW9uRGVsYXlNYXh9LG4ucHJvdG90eXBlLnRpbWVvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3RpbWVvdXQ9dCx0aGlzKTp0aGlzLl90aW1lb3V0fSxuLnByb3RvdHlwZS5tYXliZVJlY29ubmVjdE9uT3Blbj1mdW5jdGlvbigpeyF0aGlzLnJlY29ubmVjdGluZyYmdGhpcy5fcmVjb25uZWN0aW9uJiYwPT09dGhpcy5iYWNrb2ZmLmF0dGVtcHRzJiZ0aGlzLnJlY29ubmVjdCgpfSxuLnByb3RvdHlwZS5vcGVuPW4ucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24odCxlKXtpZihoKFwicmVhZHlTdGF0ZSAlc1wiLHRoaXMucmVhZHlTdGF0ZSksfnRoaXMucmVhZHlTdGF0ZS5pbmRleE9mKFwib3BlblwiKSlyZXR1cm4gdGhpcztoKFwib3BlbmluZyAlc1wiLHRoaXMudXJpKSx0aGlzLmVuZ2luZT1pKHRoaXMudXJpLHRoaXMub3B0cyk7dmFyIHI9dGhpcy5lbmdpbmUsbj10aGlzO3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5pbmdcIix0aGlzLnNraXBSZWNvbm5lY3Q9ITE7dmFyIG89cChyLFwib3BlblwiLGZ1bmN0aW9uKCl7bi5vbm9wZW4oKSx0JiZ0KCl9KSxzPXAocixcImVycm9yXCIsZnVuY3Rpb24oZSl7aWYoaChcImNvbm5lY3RfZXJyb3JcIiksbi5jbGVhbnVwKCksbi5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsbi5lbWl0QWxsKFwiY29ubmVjdF9lcnJvclwiLGUpLHQpe3ZhciByPW5ldyBFcnJvcihcIkNvbm5lY3Rpb24gZXJyb3JcIik7ci5kYXRhPWUsdChyKX1lbHNlIG4ubWF5YmVSZWNvbm5lY3RPbk9wZW4oKX0pO2lmKCExIT09dGhpcy5fdGltZW91dCl7dmFyIGE9dGhpcy5fdGltZW91dDtoKFwiY29ubmVjdCBhdHRlbXB0IHdpbGwgdGltZW91dCBhZnRlciAlZFwiLGEpO3ZhciBjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtoKFwiY29ubmVjdCBhdHRlbXB0IHRpbWVkIG91dCBhZnRlciAlZFwiLGEpLG8uZGVzdHJveSgpLHIuY2xvc2UoKSxyLmVtaXQoXCJlcnJvclwiLFwidGltZW91dFwiKSxuLmVtaXRBbGwoXCJjb25uZWN0X3RpbWVvdXRcIixhKX0sYSk7dGhpcy5zdWJzLnB1c2goe2Rlc3Ryb3k6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYyl9fSl9cmV0dXJuIHRoaXMuc3Vicy5wdXNoKG8pLHRoaXMuc3Vicy5wdXNoKHMpLHRoaXN9LG4ucHJvdG90eXBlLm9ub3Blbj1mdW5jdGlvbigpe2goXCJvcGVuXCIpLHRoaXMuY2xlYW51cCgpLHRoaXMucmVhZHlTdGF0ZT1cIm9wZW5cIix0aGlzLmVtaXQoXCJvcGVuXCIpO3ZhciB0PXRoaXMuZW5naW5lO3RoaXMuc3Vicy5wdXNoKHAodCxcImRhdGFcIix1KHRoaXMsXCJvbmRhdGFcIikpKSx0aGlzLnN1YnMucHVzaChwKHQsXCJwaW5nXCIsdSh0aGlzLFwib25waW5nXCIpKSksdGhpcy5zdWJzLnB1c2gocCh0LFwicG9uZ1wiLHUodGhpcyxcIm9ucG9uZ1wiKSkpLHRoaXMuc3Vicy5wdXNoKHAodCxcImVycm9yXCIsdSh0aGlzLFwib25lcnJvclwiKSkpLHRoaXMuc3Vicy5wdXNoKHAodCxcImNsb3NlXCIsdSh0aGlzLFwib25jbG9zZVwiKSkpLHRoaXMuc3Vicy5wdXNoKHAodGhpcy5kZWNvZGVyLFwiZGVjb2RlZFwiLHUodGhpcyxcIm9uZGVjb2RlZFwiKSkpfSxuLnByb3RvdHlwZS5vbnBpbmc9ZnVuY3Rpb24oKXt0aGlzLmxhc3RQaW5nPW5ldyBEYXRlLHRoaXMuZW1pdEFsbChcInBpbmdcIil9LG4ucHJvdG90eXBlLm9ucG9uZz1mdW5jdGlvbigpe3RoaXMuZW1pdEFsbChcInBvbmdcIixuZXcgRGF0ZS10aGlzLmxhc3RQaW5nKX0sbi5wcm90b3R5cGUub25kYXRhPWZ1bmN0aW9uKHQpe3RoaXMuZGVjb2Rlci5hZGQodCl9LG4ucHJvdG90eXBlLm9uZGVjb2RlZD1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJwYWNrZXRcIix0KX0sbi5wcm90b3R5cGUub25lcnJvcj1mdW5jdGlvbih0KXtoKFwiZXJyb3JcIix0KSx0aGlzLmVtaXRBbGwoXCJlcnJvclwiLHQpfSxuLnByb3RvdHlwZS5zb2NrZXQ9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKCl7fmYoby5jb25uZWN0aW5nLG4pfHxvLmNvbm5lY3RpbmcucHVzaChuKX12YXIgbj10aGlzLm5zcHNbdF07aWYoIW4pe249bmV3IHModGhpcyx0LGUpLHRoaXMubnNwc1t0XT1uO3ZhciBvPXRoaXM7bi5vbihcImNvbm5lY3RpbmdcIixyKSxuLm9uKFwiY29ubmVjdFwiLGZ1bmN0aW9uKCl7bi5pZD1vLmVuZ2luZS5pZH0pLHRoaXMuYXV0b0Nvbm5lY3QmJnIoKX1yZXR1cm4gbn0sbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbih0KXt2YXIgZT1mKHRoaXMuY29ubmVjdGluZyx0KTt+ZSYmdGhpcy5jb25uZWN0aW5nLnNwbGljZShlLDEpLHRoaXMuY29ubmVjdGluZy5sZW5ndGh8fHRoaXMuY2xvc2UoKX0sbi5wcm90b3R5cGUucGFja2V0PWZ1bmN0aW9uKHQpe2goXCJ3cml0aW5nIHBhY2tldCAlalwiLHQpO3ZhciBlPXRoaXM7dC5xdWVyeSYmMD09PXQudHlwZSYmKHQubnNwKz1cIj9cIit0LnF1ZXJ5KSxlLmVuY29kaW5nP2UucGFja2V0QnVmZmVyLnB1c2godCk6KGUuZW5jb2Rpbmc9ITAsdGhpcy5lbmNvZGVyLmVuY29kZSh0LGZ1bmN0aW9uKHIpe2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bisrKWUuZW5naW5lLndyaXRlKHJbbl0sdC5vcHRpb25zKTtlLmVuY29kaW5nPSExLGUucHJvY2Vzc1BhY2tldFF1ZXVlKCl9KSl9LG4ucHJvdG90eXBlLnByb2Nlc3NQYWNrZXRRdWV1ZT1mdW5jdGlvbigpe2lmKHRoaXMucGFja2V0QnVmZmVyLmxlbmd0aD4wJiYhdGhpcy5lbmNvZGluZyl7dmFyIHQ9dGhpcy5wYWNrZXRCdWZmZXIuc2hpZnQoKTt0aGlzLnBhY2tldCh0KX19LG4ucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24oKXtoKFwiY2xlYW51cFwiKTtmb3IodmFyIHQ9dGhpcy5zdWJzLmxlbmd0aCxlPTA7ZTx0O2UrKyl7dmFyIHI9dGhpcy5zdWJzLnNoaWZ0KCk7ci5kZXN0cm95KCl9dGhpcy5wYWNrZXRCdWZmZXI9W10sdGhpcy5lbmNvZGluZz0hMSx0aGlzLmxhc3RQaW5nPW51bGwsdGhpcy5kZWNvZGVyLmRlc3Ryb3koKX0sbi5wcm90b3R5cGUuY2xvc2U9bi5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe2goXCJkaXNjb25uZWN0XCIpLHRoaXMuc2tpcFJlY29ubmVjdD0hMCx0aGlzLnJlY29ubmVjdGluZz0hMSxcIm9wZW5pbmdcIj09PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5jbGVhbnVwKCksdGhpcy5iYWNrb2ZmLnJlc2V0KCksdGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5lbmdpbmUmJnRoaXMuZW5naW5lLmNsb3NlKCl9LG4ucHJvdG90eXBlLm9uY2xvc2U9ZnVuY3Rpb24odCl7aChcIm9uY2xvc2VcIiksdGhpcy5jbGVhbnVwKCksdGhpcy5iYWNrb2ZmLnJlc2V0KCksdGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5lbWl0KFwiY2xvc2VcIix0KSx0aGlzLl9yZWNvbm5lY3Rpb24mJiF0aGlzLnNraXBSZWNvbm5lY3QmJnRoaXMucmVjb25uZWN0KCl9LG4ucHJvdG90eXBlLnJlY29ubmVjdD1mdW5jdGlvbigpe2lmKHRoaXMucmVjb25uZWN0aW5nfHx0aGlzLnNraXBSZWNvbm5lY3QpcmV0dXJuIHRoaXM7dmFyIHQ9dGhpcztpZih0aGlzLmJhY2tvZmYuYXR0ZW1wdHM+PXRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzKWgoXCJyZWNvbm5lY3QgZmFpbGVkXCIpLHRoaXMuYmFja29mZi5yZXNldCgpLHRoaXMuZW1pdEFsbChcInJlY29ubmVjdF9mYWlsZWRcIiksdGhpcy5yZWNvbm5lY3Rpbmc9ITE7ZWxzZXt2YXIgZT10aGlzLmJhY2tvZmYuZHVyYXRpb24oKTtoKFwid2lsbCB3YWl0ICVkbXMgYmVmb3JlIHJlY29ubmVjdCBhdHRlbXB0XCIsZSksdGhpcy5yZWNvbm5lY3Rpbmc9ITA7dmFyIHI9c2V0VGltZW91dChmdW5jdGlvbigpe3Quc2tpcFJlY29ubmVjdHx8KGgoXCJhdHRlbXB0aW5nIHJlY29ubmVjdFwiKSx0LmVtaXRBbGwoXCJyZWNvbm5lY3RfYXR0ZW1wdFwiLHQuYmFja29mZi5hdHRlbXB0cyksdC5lbWl0QWxsKFwicmVjb25uZWN0aW5nXCIsdC5iYWNrb2ZmLmF0dGVtcHRzKSx0LnNraXBSZWNvbm5lY3R8fHQub3BlbihmdW5jdGlvbihlKXtlPyhoKFwicmVjb25uZWN0IGF0dGVtcHQgZXJyb3JcIiksdC5yZWNvbm5lY3Rpbmc9ITEsdC5yZWNvbm5lY3QoKSx0LmVtaXRBbGwoXCJyZWNvbm5lY3RfZXJyb3JcIixlLmRhdGEpKTooaChcInJlY29ubmVjdCBzdWNjZXNzXCIpLHQub25yZWNvbm5lY3QoKSl9KSl9LGUpO3RoaXMuc3Vicy5wdXNoKHtkZXN0cm95OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpfX0pfX0sbi5wcm90b3R5cGUub25yZWNvbm5lY3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJhY2tvZmYuYXR0ZW1wdHM7dGhpcy5yZWNvbm5lY3Rpbmc9ITEsdGhpcy5iYWNrb2ZmLnJlc2V0KCksdGhpcy51cGRhdGVTb2NrZXRJZHMoKSx0aGlzLmVtaXRBbGwoXCJyZWNvbm5lY3RcIix0KX19LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9cigxNil9LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9cigxNyksdC5leHBvcnRzLnBhcnNlcj1yKDI0KX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQscil7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpcmV0dXJuIG5ldyBuKHQscik7cj1yfHx7fSx0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmKHI9dCx0PW51bGwpLHQ/KHQ9dSh0KSxyLmhvc3RuYW1lPXQuaG9zdCxyLnNlY3VyZT1cImh0dHBzXCI9PXQucHJvdG9jb2x8fFwid3NzXCI9PXQucHJvdG9jb2wsci5wb3J0PXQucG9ydCx0LnF1ZXJ5JiYoci5xdWVyeT10LnF1ZXJ5KSk6ci5ob3N0JiYoci5ob3N0bmFtZT11KHIuaG9zdCkuaG9zdCksdGhpcy5zZWN1cmU9bnVsbCE9ci5zZWN1cmU/ci5zZWN1cmU6ZS5sb2NhdGlvbiYmXCJodHRwczpcIj09bG9jYXRpb24ucHJvdG9jb2wsci5ob3N0bmFtZSYmIXIucG9ydCYmKHIucG9ydD10aGlzLnNlY3VyZT9cIjQ0M1wiOlwiODBcIiksdGhpcy5hZ2VudD1yLmFnZW50fHwhMSx0aGlzLmhvc3RuYW1lPXIuaG9zdG5hbWV8fChlLmxvY2F0aW9uP2xvY2F0aW9uLmhvc3RuYW1lOlwibG9jYWxob3N0XCIpLHRoaXMucG9ydD1yLnBvcnR8fChlLmxvY2F0aW9uJiZsb2NhdGlvbi5wb3J0P2xvY2F0aW9uLnBvcnQ6dGhpcy5zZWN1cmU/NDQzOjgwKSx0aGlzLnF1ZXJ5PXIucXVlcnl8fHt9LFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLnF1ZXJ5JiYodGhpcy5xdWVyeT1mLmRlY29kZSh0aGlzLnF1ZXJ5KSksdGhpcy51cGdyYWRlPSExIT09ci51cGdyYWRlLHRoaXMucGF0aD0oci5wYXRofHxcIi9lbmdpbmUuaW9cIikucmVwbGFjZSgvXFwvJC8sXCJcIikrXCIvXCIsdGhpcy5mb3JjZUpTT05QPSEhci5mb3JjZUpTT05QLHRoaXMuanNvbnA9ITEhPT1yLmpzb25wLHRoaXMuZm9yY2VCYXNlNjQ9ISFyLmZvcmNlQmFzZTY0LHRoaXMuZW5hYmxlc1hEUj0hIXIuZW5hYmxlc1hEUix0aGlzLnRpbWVzdGFtcFBhcmFtPXIudGltZXN0YW1wUGFyYW18fFwidFwiLHRoaXMudGltZXN0YW1wUmVxdWVzdHM9ci50aW1lc3RhbXBSZXF1ZXN0cyx0aGlzLnRyYW5zcG9ydHM9ci50cmFuc3BvcnRzfHxbXCJwb2xsaW5nXCIsXCJ3ZWJzb2NrZXRcIl0sdGhpcy5yZWFkeVN0YXRlPVwiXCIsdGhpcy53cml0ZUJ1ZmZlcj1bXSx0aGlzLnBvbGljeVBvcnQ9ci5wb2xpY3lQb3J0fHw4NDMsdGhpcy5yZW1lbWJlclVwZ3JhZGU9ci5yZW1lbWJlclVwZ3JhZGV8fCExLHRoaXMuYmluYXJ5VHlwZT1udWxsLHRoaXMub25seUJpbmFyeVVwZ3JhZGVzPXIub25seUJpbmFyeVVwZ3JhZGVzLHRoaXMucGVyTWVzc2FnZURlZmxhdGU9ITEhPT1yLnBlck1lc3NhZ2VEZWZsYXRlJiYoci5wZXJNZXNzYWdlRGVmbGF0ZXx8e30pLCEwPT09dGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSYmKHRoaXMucGVyTWVzc2FnZURlZmxhdGU9e30pLHRoaXMucGVyTWVzc2FnZURlZmxhdGUmJm51bGw9PXRoaXMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkJiYodGhpcy5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQ9MTAyNCksdGhpcy5wZng9ci5wZnh8fG51bGwsdGhpcy5rZXk9ci5rZXl8fG51bGwsdGhpcy5wYXNzcGhyYXNlPXIucGFzc3BocmFzZXx8bnVsbCx0aGlzLmNlcnQ9ci5jZXJ0fHxudWxsLHRoaXMuY2E9ci5jYXx8bnVsbCx0aGlzLmNpcGhlcnM9ci5jaXBoZXJzfHxudWxsLHRoaXMucmVqZWN0VW5hdXRob3JpemVkPXZvaWQgMD09PXIucmVqZWN0VW5hdXRob3JpemVkfHxyLnJlamVjdFVuYXV0aG9yaXplZDt2YXIgbz1cIm9iamVjdFwiPT10eXBlb2YgZSYmZTtvLmdsb2JhbD09PW8mJnIuZXh0cmFIZWFkZXJzJiZPYmplY3Qua2V5cyhyLmV4dHJhSGVhZGVycykubGVuZ3RoPjAmJih0aGlzLmV4dHJhSGVhZGVycz1yLmV4dHJhSGVhZGVycyksdGhpcy5vcGVuKCl9ZnVuY3Rpb24gbyh0KXt2YXIgZT17fTtmb3IodmFyIHIgaW4gdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZX12YXIgaT1yKDE4KSxzPXIoMzMpLGE9cigzKShcImVuZ2luZS5pby1jbGllbnQ6c29ja2V0XCIpLGM9cig0MCkscD1yKDI0KSx1PXIoMiksaD1yKDQxKSxmPXIoMzQpO3QuZXhwb3J0cz1uLG4ucHJpb3JXZWJzb2NrZXRTdWNjZXNzPSExLHMobi5wcm90b3R5cGUpLG4ucHJvdG9jb2w9cC5wcm90b2NvbCxuLlNvY2tldD1uLG4uVHJhbnNwb3J0PXIoMjMpLG4udHJhbnNwb3J0cz1yKDE4KSxuLnBhcnNlcj1yKDI0KSxuLnByb3RvdHlwZS5jcmVhdGVUcmFuc3BvcnQ9ZnVuY3Rpb24odCl7YSgnY3JlYXRpbmcgdHJhbnNwb3J0IFwiJXNcIicsdCk7dmFyIGU9byh0aGlzLnF1ZXJ5KTtlLkVJTz1wLnByb3RvY29sLGUudHJhbnNwb3J0PXQsdGhpcy5pZCYmKGUuc2lkPXRoaXMuaWQpO3ZhciByPW5ldyBpW3RdKHthZ2VudDp0aGlzLmFnZW50LGhvc3RuYW1lOnRoaXMuaG9zdG5hbWUscG9ydDp0aGlzLnBvcnQsc2VjdXJlOnRoaXMuc2VjdXJlLHBhdGg6dGhpcy5wYXRoLHF1ZXJ5OmUsZm9yY2VKU09OUDp0aGlzLmZvcmNlSlNPTlAsanNvbnA6dGhpcy5qc29ucCxmb3JjZUJhc2U2NDp0aGlzLmZvcmNlQmFzZTY0LGVuYWJsZXNYRFI6dGhpcy5lbmFibGVzWERSLHRpbWVzdGFtcFJlcXVlc3RzOnRoaXMudGltZXN0YW1wUmVxdWVzdHMsdGltZXN0YW1wUGFyYW06dGhpcy50aW1lc3RhbXBQYXJhbSxwb2xpY3lQb3J0OnRoaXMucG9saWN5UG9ydCxzb2NrZXQ6dGhpcyxwZng6dGhpcy5wZngsa2V5OnRoaXMua2V5LHBhc3NwaHJhc2U6dGhpcy5wYXNzcGhyYXNlLGNlcnQ6dGhpcy5jZXJ0LGNhOnRoaXMuY2EsY2lwaGVyczp0aGlzLmNpcGhlcnMscmVqZWN0VW5hdXRob3JpemVkOnRoaXMucmVqZWN0VW5hdXRob3JpemVkLHBlck1lc3NhZ2VEZWZsYXRlOnRoaXMucGVyTWVzc2FnZURlZmxhdGUsZXh0cmFIZWFkZXJzOnRoaXMuZXh0cmFIZWFkZXJzfSk7cmV0dXJuIHJ9LG4ucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oKXt2YXIgdDtpZih0aGlzLnJlbWVtYmVyVXBncmFkZSYmbi5wcmlvcldlYnNvY2tldFN1Y2Nlc3MmJnRoaXMudHJhbnNwb3J0cy5pbmRleE9mKFwid2Vic29ja2V0XCIpIT0tMSl0PVwid2Vic29ja2V0XCI7ZWxzZXtpZigwPT09dGhpcy50cmFuc3BvcnRzLmxlbmd0aCl7dmFyIGU9dGhpcztyZXR1cm4gdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5lbWl0KFwiZXJyb3JcIixcIk5vIHRyYW5zcG9ydHMgYXZhaWxhYmxlXCIpfSwwKX10PXRoaXMudHJhbnNwb3J0c1swXX10aGlzLnJlYWR5U3RhdGU9XCJvcGVuaW5nXCI7dHJ5e3Q9dGhpcy5jcmVhdGVUcmFuc3BvcnQodCl9Y2F0Y2godCl7cmV0dXJuIHRoaXMudHJhbnNwb3J0cy5zaGlmdCgpLHZvaWQgdGhpcy5vcGVuKCl9dC5vcGVuKCksdGhpcy5zZXRUcmFuc3BvcnQodCl9LG4ucHJvdG90eXBlLnNldFRyYW5zcG9ydD1mdW5jdGlvbih0KXthKFwic2V0dGluZyB0cmFuc3BvcnQgJXNcIix0Lm5hbWUpO3ZhciBlPXRoaXM7dGhpcy50cmFuc3BvcnQmJihhKFwiY2xlYXJpbmcgZXhpc3RpbmcgdHJhbnNwb3J0ICVzXCIsdGhpcy50cmFuc3BvcnQubmFtZSksdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCkpLHRoaXMudHJhbnNwb3J0PXQsdC5vbihcImRyYWluXCIsZnVuY3Rpb24oKXtlLm9uRHJhaW4oKX0pLm9uKFwicGFja2V0XCIsZnVuY3Rpb24odCl7ZS5vblBhY2tldCh0KX0pLm9uKFwiZXJyb3JcIixmdW5jdGlvbih0KXtlLm9uRXJyb3IodCl9KS5vbihcImNsb3NlXCIsZnVuY3Rpb24oKXtlLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIil9KX0sbi5wcm90b3R5cGUucHJvYmU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2lmKGYub25seUJpbmFyeVVwZ3JhZGVzKXt2YXIgZT0hdGhpcy5zdXBwb3J0c0JpbmFyeSYmZi50cmFuc3BvcnQuc3VwcG9ydHNCaW5hcnk7aD1ofHxlfWh8fChhKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIG9wZW5lZCcsdCksdS5zZW5kKFt7dHlwZTpcInBpbmdcIixkYXRhOlwicHJvYmVcIn1dKSx1Lm9uY2UoXCJwYWNrZXRcIixmdW5jdGlvbihlKXtpZighaClpZihcInBvbmdcIj09ZS50eXBlJiZcInByb2JlXCI9PWUuZGF0YSl7aWYoYSgncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBwb25nJyx0KSxmLnVwZ3JhZGluZz0hMCxmLmVtaXQoXCJ1cGdyYWRpbmdcIix1KSwhdSlyZXR1cm47bi5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9XCJ3ZWJzb2NrZXRcIj09dS5uYW1lLGEoJ3BhdXNpbmcgY3VycmVudCB0cmFuc3BvcnQgXCIlc1wiJyxmLnRyYW5zcG9ydC5uYW1lKSxmLnRyYW5zcG9ydC5wYXVzZShmdW5jdGlvbigpe2h8fFwiY2xvc2VkXCIhPWYucmVhZHlTdGF0ZSYmKGEoXCJjaGFuZ2luZyB0cmFuc3BvcnQgYW5kIHNlbmRpbmcgdXBncmFkZSBwYWNrZXRcIikscCgpLGYuc2V0VHJhbnNwb3J0KHUpLHUuc2VuZChbe3R5cGU6XCJ1cGdyYWRlXCJ9XSksZi5lbWl0KFwidXBncmFkZVwiLHUpLHU9bnVsbCxmLnVwZ3JhZGluZz0hMSxmLmZsdXNoKCkpfSl9ZWxzZXthKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIGZhaWxlZCcsdCk7dmFyIHI9bmV3IEVycm9yKFwicHJvYmUgZXJyb3JcIik7ci50cmFuc3BvcnQ9dS5uYW1lLGYuZW1pdChcInVwZ3JhZGVFcnJvclwiLHIpfX0pKX1mdW5jdGlvbiByKCl7aHx8KGg9ITAscCgpLHUuY2xvc2UoKSx1PW51bGwpfWZ1bmN0aW9uIG8oZSl7dmFyIG49bmV3IEVycm9yKFwicHJvYmUgZXJyb3I6IFwiK2UpO24udHJhbnNwb3J0PXUubmFtZSxyKCksYSgncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQgYmVjYXVzZSBvZiBlcnJvcjogJXMnLHQsZSksZi5lbWl0KFwidXBncmFkZUVycm9yXCIsbil9ZnVuY3Rpb24gaSgpe28oXCJ0cmFuc3BvcnQgY2xvc2VkXCIpfWZ1bmN0aW9uIHMoKXtvKFwic29ja2V0IGNsb3NlZFwiKX1mdW5jdGlvbiBjKHQpe3UmJnQubmFtZSE9dS5uYW1lJiYoYSgnXCIlc1wiIHdvcmtzIC0gYWJvcnRpbmcgXCIlc1wiJyx0Lm5hbWUsdS5uYW1lKSxyKCkpfWZ1bmN0aW9uIHAoKXt1LnJlbW92ZUxpc3RlbmVyKFwib3BlblwiLGUpLHUucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLG8pLHUucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLGkpLGYucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHMpLGYucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRpbmdcIixjKX1hKCdwcm9iaW5nIHRyYW5zcG9ydCBcIiVzXCInLHQpO3ZhciB1PXRoaXMuY3JlYXRlVHJhbnNwb3J0KHQse3Byb2JlOjF9KSxoPSExLGY9dGhpcztuLnByaW9yV2Vic29ja2V0U3VjY2Vzcz0hMSx1Lm9uY2UoXCJvcGVuXCIsZSksdS5vbmNlKFwiZXJyb3JcIixvKSx1Lm9uY2UoXCJjbG9zZVwiLGkpLHRoaXMub25jZShcImNsb3NlXCIscyksdGhpcy5vbmNlKFwidXBncmFkaW5nXCIsYyksdS5vcGVuKCl9LG4ucHJvdG90eXBlLm9uT3Blbj1mdW5jdGlvbigpe2lmKGEoXCJzb2NrZXQgb3BlblwiKSx0aGlzLnJlYWR5U3RhdGU9XCJvcGVuXCIsbi5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9XCJ3ZWJzb2NrZXRcIj09dGhpcy50cmFuc3BvcnQubmFtZSx0aGlzLmVtaXQoXCJvcGVuXCIpLHRoaXMuZmx1c2goKSxcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLnVwZ3JhZGUmJnRoaXMudHJhbnNwb3J0LnBhdXNlKXthKFwic3RhcnRpbmcgdXBncmFkZSBwcm9iZXNcIik7Zm9yKHZhciB0PTAsZT10aGlzLnVwZ3JhZGVzLmxlbmd0aDt0PGU7dCsrKXRoaXMucHJvYmUodGhpcy51cGdyYWRlc1t0XSl9fSxuLnByb3RvdHlwZS5vblBhY2tldD1mdW5jdGlvbih0KXtpZihcIm9wZW5pbmdcIj09dGhpcy5yZWFkeVN0YXRlfHxcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlKXN3aXRjaChhKCdzb2NrZXQgcmVjZWl2ZTogdHlwZSBcIiVzXCIsIGRhdGEgXCIlc1wiJyx0LnR5cGUsdC5kYXRhKSx0aGlzLmVtaXQoXCJwYWNrZXRcIix0KSx0aGlzLmVtaXQoXCJoZWFydGJlYXRcIiksdC50eXBlKXtjYXNlXCJvcGVuXCI6dGhpcy5vbkhhbmRzaGFrZShoKHQuZGF0YSkpO2JyZWFrO2Nhc2VcInBvbmdcIjp0aGlzLnNldFBpbmcoKSx0aGlzLmVtaXQoXCJwb25nXCIpO2JyZWFrO2Nhc2VcImVycm9yXCI6dmFyIGU9bmV3IEVycm9yKFwic2VydmVyIGVycm9yXCIpO1xyXG5lLmNvZGU9dC5kYXRhLHRoaXMub25FcnJvcihlKTticmVhaztjYXNlXCJtZXNzYWdlXCI6dGhpcy5lbWl0KFwiZGF0YVwiLHQuZGF0YSksdGhpcy5lbWl0KFwibWVzc2FnZVwiLHQuZGF0YSl9ZWxzZSBhKCdwYWNrZXQgcmVjZWl2ZWQgd2l0aCBzb2NrZXQgcmVhZHlTdGF0ZSBcIiVzXCInLHRoaXMucmVhZHlTdGF0ZSl9LG4ucHJvdG90eXBlLm9uSGFuZHNoYWtlPWZ1bmN0aW9uKHQpe3RoaXMuZW1pdChcImhhbmRzaGFrZVwiLHQpLHRoaXMuaWQ9dC5zaWQsdGhpcy50cmFuc3BvcnQucXVlcnkuc2lkPXQuc2lkLHRoaXMudXBncmFkZXM9dGhpcy5maWx0ZXJVcGdyYWRlcyh0LnVwZ3JhZGVzKSx0aGlzLnBpbmdJbnRlcnZhbD10LnBpbmdJbnRlcnZhbCx0aGlzLnBpbmdUaW1lb3V0PXQucGluZ1RpbWVvdXQsdGhpcy5vbk9wZW4oKSxcImNsb3NlZFwiIT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLnNldFBpbmcoKSx0aGlzLnJlbW92ZUxpc3RlbmVyKFwiaGVhcnRiZWF0XCIsdGhpcy5vbkhlYXJ0YmVhdCksdGhpcy5vbihcImhlYXJ0YmVhdFwiLHRoaXMub25IZWFydGJlYXQpKX0sbi5wcm90b3R5cGUub25IZWFydGJlYXQ9ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXRUaW1lcik7dmFyIGU9dGhpcztlLnBpbmdUaW1lb3V0VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe1wiY2xvc2VkXCIhPWUucmVhZHlTdGF0ZSYmZS5vbkNsb3NlKFwicGluZyB0aW1lb3V0XCIpfSx0fHxlLnBpbmdJbnRlcnZhbCtlLnBpbmdUaW1lb3V0KX0sbi5wcm90b3R5cGUuc2V0UGluZz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7Y2xlYXJUaW1lb3V0KHQucGluZ0ludGVydmFsVGltZXIpLHQucGluZ0ludGVydmFsVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2EoXCJ3cml0aW5nIHBpbmcgcGFja2V0IC0gZXhwZWN0aW5nIHBvbmcgd2l0aGluICVzbXNcIix0LnBpbmdUaW1lb3V0KSx0LnBpbmcoKSx0Lm9uSGVhcnRiZWF0KHQucGluZ1RpbWVvdXQpfSx0LnBpbmdJbnRlcnZhbCl9LG4ucHJvdG90eXBlLnBpbmc9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc2VuZFBhY2tldChcInBpbmdcIixmdW5jdGlvbigpe3QuZW1pdChcInBpbmdcIil9KX0sbi5wcm90b3R5cGUub25EcmFpbj1mdW5jdGlvbigpe3RoaXMud3JpdGVCdWZmZXIuc3BsaWNlKDAsdGhpcy5wcmV2QnVmZmVyTGVuKSx0aGlzLnByZXZCdWZmZXJMZW49MCwwPT09dGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg/dGhpcy5lbWl0KFwiZHJhaW5cIik6dGhpcy5mbHVzaCgpfSxuLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe1wiY2xvc2VkXCIhPXRoaXMucmVhZHlTdGF0ZSYmdGhpcy50cmFuc3BvcnQud3JpdGFibGUmJiF0aGlzLnVwZ3JhZGluZyYmdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgmJihhKFwiZmx1c2hpbmcgJWQgcGFja2V0cyBpbiBzb2NrZXRcIix0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCksdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLndyaXRlQnVmZmVyKSx0aGlzLnByZXZCdWZmZXJMZW49dGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgsdGhpcy5lbWl0KFwiZmx1c2hcIikpfSxuLnByb3RvdHlwZS53cml0ZT1uLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdGhpcy5zZW5kUGFja2V0KFwibWVzc2FnZVwiLHQsZSxyKSx0aGlzfSxuLnByb3RvdHlwZS5zZW5kUGFja2V0PWZ1bmN0aW9uKHQsZSxyLG4pe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihuPWUsZT12b2lkIDApLFwiZnVuY3Rpb25cIj09dHlwZW9mIHImJihuPXIscj1udWxsKSxcImNsb3NpbmdcIiE9dGhpcy5yZWFkeVN0YXRlJiZcImNsb3NlZFwiIT10aGlzLnJlYWR5U3RhdGUpe3I9cnx8e30sci5jb21wcmVzcz0hMSE9PXIuY29tcHJlc3M7dmFyIG89e3R5cGU6dCxkYXRhOmUsb3B0aW9uczpyfTt0aGlzLmVtaXQoXCJwYWNrZXRDcmVhdGVcIixvKSx0aGlzLndyaXRlQnVmZmVyLnB1c2gobyksbiYmdGhpcy5vbmNlKFwiZmx1c2hcIixuKSx0aGlzLmZsdXNoKCl9fSxuLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuLm9uQ2xvc2UoXCJmb3JjZWQgY2xvc2VcIiksYShcInNvY2tldCBjbG9zaW5nIC0gdGVsbGluZyB0cmFuc3BvcnQgdG8gY2xvc2VcIiksbi50cmFuc3BvcnQuY2xvc2UoKX1mdW5jdGlvbiBlKCl7bi5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVcIixlKSxuLnJlbW92ZUxpc3RlbmVyKFwidXBncmFkZUVycm9yXCIsZSksdCgpfWZ1bmN0aW9uIHIoKXtuLm9uY2UoXCJ1cGdyYWRlXCIsZSksbi5vbmNlKFwidXBncmFkZUVycm9yXCIsZSl9aWYoXCJvcGVuaW5nXCI9PXRoaXMucmVhZHlTdGF0ZXx8XCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZSl7dGhpcy5yZWFkeVN0YXRlPVwiY2xvc2luZ1wiO3ZhciBuPXRoaXM7dGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg/dGhpcy5vbmNlKFwiZHJhaW5cIixmdW5jdGlvbigpe3RoaXMudXBncmFkaW5nP3IoKTp0KCl9KTp0aGlzLnVwZ3JhZGluZz9yKCk6dCgpfXJldHVybiB0aGlzfSxuLnByb3RvdHlwZS5vbkVycm9yPWZ1bmN0aW9uKHQpe2EoXCJzb2NrZXQgZXJyb3IgJWpcIix0KSxuLnByaW9yV2Vic29ja2V0U3VjY2Vzcz0hMSx0aGlzLmVtaXQoXCJlcnJvclwiLHQpLHRoaXMub25DbG9zZShcInRyYW5zcG9ydCBlcnJvclwiLHQpfSxuLnByb3RvdHlwZS5vbkNsb3NlPWZ1bmN0aW9uKHQsZSl7aWYoXCJvcGVuaW5nXCI9PXRoaXMucmVhZHlTdGF0ZXx8XCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZXx8XCJjbG9zaW5nXCI9PXRoaXMucmVhZHlTdGF0ZSl7YSgnc29ja2V0IGNsb3NlIHdpdGggcmVhc29uOiBcIiVzXCInLHQpO3ZhciByPXRoaXM7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ0ludGVydmFsVGltZXIpLGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpLHRoaXMudHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycyhcImNsb3NlXCIpLHRoaXMudHJhbnNwb3J0LmNsb3NlKCksdGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCksdGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCIsdGhpcy5pZD1udWxsLHRoaXMuZW1pdChcImNsb3NlXCIsdCxlKSxyLndyaXRlQnVmZmVyPVtdLHIucHJldkJ1ZmZlckxlbj0wfX0sbi5wcm90b3R5cGUuZmlsdGVyVXBncmFkZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLHI9MCxuPXQubGVuZ3RoO3I8bjtyKyspfmModGhpcy50cmFuc3BvcnRzLHRbcl0pJiZlLnB1c2godFtyXSk7cmV0dXJuIGV9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHIsbj0hMSxhPSExLGM9ITEhPT1lLmpzb25wO2lmKHQubG9jYXRpb24pe3ZhciBwPVwiaHR0cHM6XCI9PWxvY2F0aW9uLnByb3RvY29sLHU9bG9jYXRpb24ucG9ydDt1fHwodT1wPzQ0Mzo4MCksbj1lLmhvc3RuYW1lIT1sb2NhdGlvbi5ob3N0bmFtZXx8dSE9ZS5wb3J0LGE9ZS5zZWN1cmUhPXB9aWYoZS54ZG9tYWluPW4sZS54c2NoZW1lPWEscj1uZXcgbyhlKSxcIm9wZW5cImluIHImJiFlLmZvcmNlSlNPTlApcmV0dXJuIG5ldyBpKGUpO2lmKCFjKXRocm93IG5ldyBFcnJvcihcIkpTT05QIGRpc2FibGVkXCIpO3JldHVybiBuZXcgcyhlKX12YXIgbz1yKDE5KSxpPXIoMjEpLHM9cigzNyksYT1yKDM4KTtlLnBvbGxpbmc9bixlLndlYnNvY2tldD1hfSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUscil7dmFyIG49cigyMCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXQueGRvbWFpbixyPXQueHNjaGVtZSxvPXQuZW5hYmxlc1hEUjt0cnl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0JiYoIWV8fG4pKXJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9Y2F0Y2godCl7fXRyeXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgWERvbWFpblJlcXVlc3QmJiFyJiZvKXJldHVybiBuZXcgWERvbWFpblJlcXVlc3R9Y2F0Y2godCl7fWlmKCFlKXRyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKX1jYXRjaCh0KXt9fX0sZnVuY3Rpb24odCxlKXt0cnl7dC5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdCYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt0LmV4cG9ydHM9ITF9fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4oKXt9ZnVuY3Rpb24gbyh0KXtpZihjLmNhbGwodGhpcyx0KSxlLmxvY2F0aW9uKXt2YXIgcj1cImh0dHBzOlwiPT1sb2NhdGlvbi5wcm90b2NvbCxuPWxvY2F0aW9uLnBvcnQ7bnx8KG49cj80NDM6ODApLHRoaXMueGQ9dC5ob3N0bmFtZSE9ZS5sb2NhdGlvbi5ob3N0bmFtZXx8biE9dC5wb3J0LHRoaXMueHM9dC5zZWN1cmUhPXJ9ZWxzZSB0aGlzLmV4dHJhSGVhZGVycz10LmV4dHJhSGVhZGVyc31mdW5jdGlvbiBpKHQpe3RoaXMubWV0aG9kPXQubWV0aG9kfHxcIkdFVFwiLHRoaXMudXJpPXQudXJpLHRoaXMueGQ9ISF0LnhkLHRoaXMueHM9ISF0LnhzLHRoaXMuYXN5bmM9ITEhPT10LmFzeW5jLHRoaXMuZGF0YT12b2lkIDAhPXQuZGF0YT90LmRhdGE6bnVsbCx0aGlzLmFnZW50PXQuYWdlbnQsdGhpcy5pc0JpbmFyeT10LmlzQmluYXJ5LHRoaXMuc3VwcG9ydHNCaW5hcnk9dC5zdXBwb3J0c0JpbmFyeSx0aGlzLmVuYWJsZXNYRFI9dC5lbmFibGVzWERSLHRoaXMucGZ4PXQucGZ4LHRoaXMua2V5PXQua2V5LHRoaXMucGFzc3BocmFzZT10LnBhc3NwaHJhc2UsdGhpcy5jZXJ0PXQuY2VydCx0aGlzLmNhPXQuY2EsdGhpcy5jaXBoZXJzPXQuY2lwaGVycyx0aGlzLnJlamVjdFVuYXV0aG9yaXplZD10LnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmV4dHJhSGVhZGVycz10LmV4dHJhSGVhZGVycyx0aGlzLmNyZWF0ZSgpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIHQgaW4gaS5yZXF1ZXN0cylpLnJlcXVlc3RzLmhhc093blByb3BlcnR5KHQpJiZpLnJlcXVlc3RzW3RdLmFib3J0KCl9dmFyIGE9cigxOSksYz1yKDIyKSxwPXIoMzMpLHU9cigzNSksaD1yKDMpKFwiZW5naW5lLmlvLWNsaWVudDpwb2xsaW5nLXhoclwiKTt0LmV4cG9ydHM9byx0LmV4cG9ydHMuUmVxdWVzdD1pLHUobyxjKSxvLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeT0hMCxvLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXR8fHt9LHQudXJpPXRoaXMudXJpKCksdC54ZD10aGlzLnhkLHQueHM9dGhpcy54cyx0LmFnZW50PXRoaXMuYWdlbnR8fCExLHQuc3VwcG9ydHNCaW5hcnk9dGhpcy5zdXBwb3J0c0JpbmFyeSx0LmVuYWJsZXNYRFI9dGhpcy5lbmFibGVzWERSLHQucGZ4PXRoaXMucGZ4LHQua2V5PXRoaXMua2V5LHQucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2UsdC5jZXJ0PXRoaXMuY2VydCx0LmNhPXRoaXMuY2EsdC5jaXBoZXJzPXRoaXMuY2lwaGVycyx0LnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZCx0LmV4dHJhSGVhZGVycz10aGlzLmV4dHJhSGVhZGVycyxuZXcgaSh0KX0sby5wcm90b3R5cGUuZG9Xcml0ZT1mdW5jdGlvbih0LGUpe3ZhciByPVwic3RyaW5nXCIhPXR5cGVvZiB0JiZ2b2lkIDAhPT10LG49dGhpcy5yZXF1ZXN0KHttZXRob2Q6XCJQT1NUXCIsZGF0YTp0LGlzQmluYXJ5OnJ9KSxvPXRoaXM7bi5vbihcInN1Y2Nlc3NcIixlKSxuLm9uKFwiZXJyb3JcIixmdW5jdGlvbih0KXtvLm9uRXJyb3IoXCJ4aHIgcG9zdCBlcnJvclwiLHQpfSksdGhpcy5zZW5kWGhyPW59LG8ucHJvdG90eXBlLmRvUG9sbD1mdW5jdGlvbigpe2goXCJ4aHIgcG9sbFwiKTt2YXIgdD10aGlzLnJlcXVlc3QoKSxlPXRoaXM7dC5vbihcImRhdGFcIixmdW5jdGlvbih0KXtlLm9uRGF0YSh0KX0pLHQub24oXCJlcnJvclwiLGZ1bmN0aW9uKHQpe2Uub25FcnJvcihcInhociBwb2xsIGVycm9yXCIsdCl9KSx0aGlzLnBvbGxYaHI9dH0scChpLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9e2FnZW50OnRoaXMuYWdlbnQseGRvbWFpbjp0aGlzLnhkLHhzY2hlbWU6dGhpcy54cyxlbmFibGVzWERSOnRoaXMuZW5hYmxlc1hEUn07dC5wZng9dGhpcy5wZngsdC5rZXk9dGhpcy5rZXksdC5wYXNzcGhyYXNlPXRoaXMucGFzc3BocmFzZSx0LmNlcnQ9dGhpcy5jZXJ0LHQuY2E9dGhpcy5jYSx0LmNpcGhlcnM9dGhpcy5jaXBoZXJzLHQucmVqZWN0VW5hdXRob3JpemVkPXRoaXMucmVqZWN0VW5hdXRob3JpemVkO3ZhciByPXRoaXMueGhyPW5ldyBhKHQpLG49dGhpczt0cnl7aChcInhociBvcGVuICVzOiAlc1wiLHRoaXMubWV0aG9kLHRoaXMudXJpKSxyLm9wZW4odGhpcy5tZXRob2QsdGhpcy51cmksdGhpcy5hc3luYyk7dHJ5e2lmKHRoaXMuZXh0cmFIZWFkZXJzKXtyLnNldERpc2FibGVIZWFkZXJDaGVjayghMCk7Zm9yKHZhciBvIGluIHRoaXMuZXh0cmFIZWFkZXJzKXRoaXMuZXh0cmFIZWFkZXJzLmhhc093blByb3BlcnR5KG8pJiZyLnNldFJlcXVlc3RIZWFkZXIobyx0aGlzLmV4dHJhSGVhZGVyc1tvXSl9fWNhdGNoKHQpe31pZih0aGlzLnN1cHBvcnRzQmluYXJ5JiYoci5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiKSxcIlBPU1RcIj09dGhpcy5tZXRob2QpdHJ5e3RoaXMuaXNCaW5hcnk/ci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIik6ci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLThcIil9Y2F0Y2godCl7fVwid2l0aENyZWRlbnRpYWxzXCJpbiByJiYoci53aXRoQ3JlZGVudGlhbHM9ITApLHRoaXMuaGFzWERSKCk/KHIub25sb2FkPWZ1bmN0aW9uKCl7bi5vbkxvYWQoKX0sci5vbmVycm9yPWZ1bmN0aW9uKCl7bi5vbkVycm9yKHIucmVzcG9uc2VUZXh0KX0pOnIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09ci5yZWFkeVN0YXRlJiYoMjAwPT1yLnN0YXR1c3x8MTIyMz09ci5zdGF0dXM/bi5vbkxvYWQoKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5vbkVycm9yKHIuc3RhdHVzKX0sMCkpfSxoKFwieGhyIGRhdGEgJXNcIix0aGlzLmRhdGEpLHIuc2VuZCh0aGlzLmRhdGEpfWNhdGNoKHQpe3JldHVybiB2b2lkIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLm9uRXJyb3IodCl9LDApfWUuZG9jdW1lbnQmJih0aGlzLmluZGV4PWkucmVxdWVzdHNDb3VudCsrLGkucmVxdWVzdHNbdGhpcy5pbmRleF09dGhpcyl9LGkucHJvdG90eXBlLm9uU3VjY2Vzcz1mdW5jdGlvbigpe3RoaXMuZW1pdChcInN1Y2Nlc3NcIiksdGhpcy5jbGVhbnVwKCl9LGkucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJkYXRhXCIsdCksdGhpcy5vblN1Y2Nlc3MoKX0saS5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJlcnJvclwiLHQpLHRoaXMuY2xlYW51cCghMCl9LGkucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24odCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMueGhyJiZudWxsIT09dGhpcy54aHIpe2lmKHRoaXMuaGFzWERSKCk/dGhpcy54aHIub25sb2FkPXRoaXMueGhyLm9uZXJyb3I9bjp0aGlzLnhoci5vbnJlYWR5c3RhdGVjaGFuZ2U9bix0KXRyeXt0aGlzLnhoci5hYm9ydCgpfWNhdGNoKHQpe31lLmRvY3VtZW50JiZkZWxldGUgaS5yZXF1ZXN0c1t0aGlzLmluZGV4XSx0aGlzLnhocj1udWxsfX0saS5wcm90b3R5cGUub25Mb2FkPWZ1bmN0aW9uKCl7dmFyIHQ7dHJ5e3ZhciBlO3RyeXtlPXRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLnNwbGl0KFwiO1wiKVswXX1jYXRjaCh0KXt9aWYoXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIj09PWUpdD10aGlzLnhoci5yZXNwb25zZTtlbHNlIGlmKHRoaXMuc3VwcG9ydHNCaW5hcnkpdHJ5e3Q9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KHRoaXMueGhyLnJlc3BvbnNlKSl9Y2F0Y2goZSl7Zm9yKHZhciByPW5ldyBVaW50OEFycmF5KHRoaXMueGhyLnJlc3BvbnNlKSxuPVtdLG89MCxpPXIubGVuZ3RoO288aTtvKyspbi5wdXNoKHJbb10pO3Q9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG4pfWVsc2UgdD10aGlzLnhoci5yZXNwb25zZVRleHR9Y2F0Y2godCl7dGhpcy5vbkVycm9yKHQpfW51bGwhPXQmJnRoaXMub25EYXRhKHQpfSxpLnByb3RvdHlwZS5oYXNYRFI9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgZS5YRG9tYWluUmVxdWVzdCYmIXRoaXMueHMmJnRoaXMuZW5hYmxlc1hEUn0saS5wcm90b3R5cGUuYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKX0sZS5kb2N1bWVudCYmKGkucmVxdWVzdHNDb3VudD0wLGkucmVxdWVzdHM9e30sZS5hdHRhY2hFdmVudD9lLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixzKTplLmFkZEV2ZW50TGlzdGVuZXImJmUuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLHMsITEpKX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4odCl7dmFyIGU9dCYmdC5mb3JjZUJhc2U2NDt1JiYhZXx8KHRoaXMuc3VwcG9ydHNCaW5hcnk9ITEpLG8uY2FsbCh0aGlzLHQpfXZhciBvPXIoMjMpLGk9cigzNCkscz1yKDI0KSxhPXIoMzUpLGM9cigzNikscD1yKDMpKFwiZW5naW5lLmlvLWNsaWVudDpwb2xsaW5nXCIpO3QuZXhwb3J0cz1uO3ZhciB1PWZ1bmN0aW9uKCl7dmFyIHQ9cigxOSksZT1uZXcgdCh7eGRvbWFpbjohMX0pO3JldHVybiBudWxsIT1lLnJlc3BvbnNlVHlwZX0oKTthKG4sbyksbi5wcm90b3R5cGUubmFtZT1cInBvbGxpbmdcIixuLnByb3RvdHlwZS5kb09wZW49ZnVuY3Rpb24oKXt0aGlzLnBvbGwoKX0sbi5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AoXCJwYXVzZWRcIiksci5yZWFkeVN0YXRlPVwicGF1c2VkXCIsdCgpfXZhciByPXRoaXM7aWYodGhpcy5yZWFkeVN0YXRlPVwicGF1c2luZ1wiLHRoaXMucG9sbGluZ3x8IXRoaXMud3JpdGFibGUpe3ZhciBuPTA7dGhpcy5wb2xsaW5nJiYocChcIndlIGFyZSBjdXJyZW50bHkgcG9sbGluZyAtIHdhaXRpbmcgdG8gcGF1c2VcIiksbisrLHRoaXMub25jZShcInBvbGxDb21wbGV0ZVwiLGZ1bmN0aW9uKCl7cChcInByZS1wYXVzZSBwb2xsaW5nIGNvbXBsZXRlXCIpLC0tbnx8ZSgpfSkpLHRoaXMud3JpdGFibGV8fChwKFwid2UgYXJlIGN1cnJlbnRseSB3cml0aW5nIC0gd2FpdGluZyB0byBwYXVzZVwiKSxuKyssdGhpcy5vbmNlKFwiZHJhaW5cIixmdW5jdGlvbigpe3AoXCJwcmUtcGF1c2Ugd3JpdGluZyBjb21wbGV0ZVwiKSwtLW58fGUoKX0pKX1lbHNlIGUoKX0sbi5wcm90b3R5cGUucG9sbD1mdW5jdGlvbigpe3AoXCJwb2xsaW5nXCIpLHRoaXMucG9sbGluZz0hMCx0aGlzLmRvUG9sbCgpLHRoaXMuZW1pdChcInBvbGxcIil9LG4ucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3AoXCJwb2xsaW5nIGdvdCBkYXRhICVzXCIsdCk7dmFyIHI9ZnVuY3Rpb24odCxyLG4pe3JldHVyblwib3BlbmluZ1wiPT1lLnJlYWR5U3RhdGUmJmUub25PcGVuKCksXCJjbG9zZVwiPT10LnR5cGU/KGUub25DbG9zZSgpLCExKTp2b2lkIGUub25QYWNrZXQodCl9O3MuZGVjb2RlUGF5bG9hZCh0LHRoaXMuc29ja2V0LmJpbmFyeVR5cGUsciksXCJjbG9zZWRcIiE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5wb2xsaW5nPSExLHRoaXMuZW1pdChcInBvbGxDb21wbGV0ZVwiKSxcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlP3RoaXMucG9sbCgpOnAoJ2lnbm9yaW5nIHBvbGwgLSB0cmFuc3BvcnQgc3RhdGUgXCIlc1wiJyx0aGlzLnJlYWR5U3RhdGUpKX0sbi5wcm90b3R5cGUuZG9DbG9zZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKFwid3JpdGluZyBjbG9zZSBwYWNrZXRcIiksZS53cml0ZShbe3R5cGU6XCJjbG9zZVwifV0pfXZhciBlPXRoaXM7XCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZT8ocChcInRyYW5zcG9ydCBvcGVuIC0gY2xvc2luZ1wiKSx0KCkpOihwKFwidHJhbnNwb3J0IG5vdCBvcGVuIC0gZGVmZXJyaW5nIGNsb3NlXCIpLHRoaXMub25jZShcIm9wZW5cIix0KSl9LG4ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy53cml0YWJsZT0hMTt2YXIgcj1mdW5jdGlvbigpe2Uud3JpdGFibGU9ITAsZS5lbWl0KFwiZHJhaW5cIil9LGU9dGhpcztzLmVuY29kZVBheWxvYWQodCx0aGlzLnN1cHBvcnRzQmluYXJ5LGZ1bmN0aW9uKHQpe2UuZG9Xcml0ZSh0LHIpfSl9LG4ucHJvdG90eXBlLnVyaT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucXVlcnl8fHt9LGU9dGhpcy5zZWN1cmU/XCJodHRwc1wiOlwiaHR0cFwiLHI9XCJcIjshMSE9PXRoaXMudGltZXN0YW1wUmVxdWVzdHMmJih0W3RoaXMudGltZXN0YW1wUGFyYW1dPWMoKSksdGhpcy5zdXBwb3J0c0JpbmFyeXx8dC5zaWR8fCh0LmI2ND0xKSx0PWkuZW5jb2RlKHQpLHRoaXMucG9ydCYmKFwiaHR0cHNcIj09ZSYmNDQzIT10aGlzLnBvcnR8fFwiaHR0cFwiPT1lJiY4MCE9dGhpcy5wb3J0KSYmKHI9XCI6XCIrdGhpcy5wb3J0KSx0Lmxlbmd0aCYmKHQ9XCI/XCIrdCk7dmFyIG49dGhpcy5ob3N0bmFtZS5pbmRleE9mKFwiOlwiKSE9PS0xO3JldHVybiBlK1wiOi8vXCIrKG4/XCJbXCIrdGhpcy5ob3N0bmFtZStcIl1cIjp0aGlzLmhvc3RuYW1lKStyK3RoaXMucGF0aCt0fX0sZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4odCl7dGhpcy5wYXRoPXQucGF0aCx0aGlzLmhvc3RuYW1lPXQuaG9zdG5hbWUsdGhpcy5wb3J0PXQucG9ydCx0aGlzLnNlY3VyZT10LnNlY3VyZSx0aGlzLnF1ZXJ5PXQucXVlcnksdGhpcy50aW1lc3RhbXBQYXJhbT10LnRpbWVzdGFtcFBhcmFtLHRoaXMudGltZXN0YW1wUmVxdWVzdHM9dC50aW1lc3RhbXBSZXF1ZXN0cyx0aGlzLnJlYWR5U3RhdGU9XCJcIix0aGlzLmFnZW50PXQuYWdlbnR8fCExLHRoaXMuc29ja2V0PXQuc29ja2V0LHRoaXMuZW5hYmxlc1hEUj10LmVuYWJsZXNYRFIsdGhpcy5wZng9dC5wZngsdGhpcy5rZXk9dC5rZXksdGhpcy5wYXNzcGhyYXNlPXQucGFzc3BocmFzZSx0aGlzLmNlcnQ9dC5jZXJ0LHRoaXMuY2E9dC5jYSx0aGlzLmNpcGhlcnM9dC5jaXBoZXJzLHRoaXMucmVqZWN0VW5hdXRob3JpemVkPXQucmVqZWN0VW5hdXRob3JpemVkLHRoaXMuZXh0cmFIZWFkZXJzPXQuZXh0cmFIZWFkZXJzfXZhciBvPXIoMjQpLGk9cigzMyk7dC5leHBvcnRzPW4saShuLnByb3RvdHlwZSksbi5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbih0LGUpe3ZhciByPW5ldyBFcnJvcih0KTtyZXR1cm4gci50eXBlPVwiVHJhbnNwb3J0RXJyb3JcIixyLmRlc2NyaXB0aW9uPWUsdGhpcy5lbWl0KFwiZXJyb3JcIixyKSx0aGlzfSxuLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7cmV0dXJuXCJjbG9zZWRcIiE9dGhpcy5yZWFkeVN0YXRlJiZcIlwiIT10aGlzLnJlYWR5U3RhdGV8fCh0aGlzLnJlYWR5U3RhdGU9XCJvcGVuaW5nXCIsdGhpcy5kb09wZW4oKSksdGhpc30sbi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm5cIm9wZW5pbmdcIiE9dGhpcy5yZWFkeVN0YXRlJiZcIm9wZW5cIiE9dGhpcy5yZWFkeVN0YXRlfHwodGhpcy5kb0Nsb3NlKCksdGhpcy5vbkNsb3NlKCkpLHRoaXN9LG4ucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24odCl7aWYoXCJvcGVuXCIhPXRoaXMucmVhZHlTdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc3BvcnQgbm90IG9wZW5cIik7dGhpcy53cml0ZSh0KX0sbi5wcm90b3R5cGUub25PcGVuPWZ1bmN0aW9uKCl7dGhpcy5yZWFkeVN0YXRlPVwib3BlblwiLHRoaXMud3JpdGFibGU9ITAsdGhpcy5lbWl0KFwib3BlblwiKX0sbi5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPW8uZGVjb2RlUGFja2V0KHQsdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSk7dGhpcy5vblBhY2tldChlKX0sbi5wcm90b3R5cGUub25QYWNrZXQ9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwicGFja2V0XCIsdCl9LG4ucHJvdG90eXBlLm9uQ2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnJlYWR5U3RhdGU9XCJjbG9zZWRcIix0aGlzLmVtaXQoXCJjbG9zZVwiKX19LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24odCl7ZnVuY3Rpb24gbih0LHIpe3ZhciBuPVwiYlwiK2UucGFja2V0c1t0LnR5cGVdK3QuZGF0YS5kYXRhO3JldHVybiByKG4pfWZ1bmN0aW9uIG8odCxyLG4pe2lmKCFyKXJldHVybiBlLmVuY29kZUJhc2U2NFBhY2tldCh0LG4pO3ZhciBvPXQuZGF0YSxpPW5ldyBVaW50OEFycmF5KG8pLHM9bmV3IFVpbnQ4QXJyYXkoMStvLmJ5dGVMZW5ndGgpO3NbMF09bVt0LnR5cGVdO2Zvcih2YXIgYT0wO2E8aS5sZW5ndGg7YSsrKXNbYSsxXT1pW2FdO3JldHVybiBuKHMuYnVmZmVyKX1mdW5jdGlvbiBpKHQscixuKXtpZighcilyZXR1cm4gZS5lbmNvZGVCYXNlNjRQYWNrZXQodCxuKTt2YXIgbz1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gby5vbmxvYWQ9ZnVuY3Rpb24oKXt0LmRhdGE9by5yZXN1bHQsZS5lbmNvZGVQYWNrZXQodCxyLCEwLG4pfSxvLnJlYWRBc0FycmF5QnVmZmVyKHQuZGF0YSl9ZnVuY3Rpb24gcyh0LHIsbil7aWYoIXIpcmV0dXJuIGUuZW5jb2RlQmFzZTY0UGFja2V0KHQsbik7aWYoZylyZXR1cm4gaSh0LHIsbik7dmFyIG89bmV3IFVpbnQ4QXJyYXkoMSk7b1swXT1tW3QudHlwZV07dmFyIHM9bmV3IGsoW28uYnVmZmVyLHQuZGF0YV0pO3JldHVybiBuKHMpfWZ1bmN0aW9uIGEodCxlLHIpe2Zvcih2YXIgbj1uZXcgQXJyYXkodC5sZW5ndGgpLG89Zih0Lmxlbmd0aCxyKSxpPWZ1bmN0aW9uKHQscixvKXtlKHIsZnVuY3Rpb24oZSxyKXtuW3RdPXIsbyhlLG4pfSl9LHM9MDtzPHQubGVuZ3RoO3MrKylpKHMsdFtzXSxvKX12YXIgYz1yKDI1KSxwPXIoMjYpLHU9cigyOCksaD1yKDI5KSxmPXIoMzApLGw9cigzMSksZD1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpLHk9L1BoYW50b21KUy9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksZz1kfHx5O2UucHJvdG9jb2w9Mzt2YXIgbT1lLnBhY2tldHM9e29wZW46MCxjbG9zZToxLHBpbmc6Mixwb25nOjMsbWVzc2FnZTo0LHVwZ3JhZGU6NSxub29wOjZ9LHY9YyhtKSxiPXt0eXBlOlwiZXJyb3JcIixkYXRhOlwicGFyc2VyIGVycm9yXCJ9LGs9cigzMik7ZS5lbmNvZGVQYWNrZXQ9ZnVuY3Rpb24oZSxyLGksYSl7XCJmdW5jdGlvblwiPT10eXBlb2YgciYmKGE9cixyPSExKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiYoYT1pLGk9bnVsbCk7dmFyIGM9dm9pZCAwPT09ZS5kYXRhP3ZvaWQgMDplLmRhdGEuYnVmZmVyfHxlLmRhdGE7aWYodC5BcnJheUJ1ZmZlciYmYyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXJldHVybiBvKGUscixhKTtpZihrJiZjIGluc3RhbmNlb2YgdC5CbG9iKXJldHVybiBzKGUscixhKTtpZihjJiZjLmJhc2U2NClyZXR1cm4gbihlLGEpO3ZhciBwPW1bZS50eXBlXTtyZXR1cm4gdm9pZCAwIT09ZS5kYXRhJiYocCs9aT9sLmVuY29kZShTdHJpbmcoZS5kYXRhKSk6U3RyaW5nKGUuZGF0YSkpLGEoXCJcIitwKX0sZS5lbmNvZGVCYXNlNjRQYWNrZXQ9ZnVuY3Rpb24ocixuKXt2YXIgbz1cImJcIitlLnBhY2tldHNbci50eXBlXTtpZihrJiZyLmRhdGEgaW5zdGFuY2VvZiB0LkJsb2Ipe3ZhciBpPW5ldyBGaWxlUmVhZGVyO3JldHVybiBpLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0PWkucmVzdWx0LnNwbGl0KFwiLFwiKVsxXTtuKG8rdCl9LGkucmVhZEFzRGF0YVVSTChyLmRhdGEpfXZhciBzO3RyeXtzPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheShyLmRhdGEpKX1jYXRjaCh0KXtmb3IodmFyIGE9bmV3IFVpbnQ4QXJyYXkoci5kYXRhKSxjPW5ldyBBcnJheShhLmxlbmd0aCkscD0wO3A8YS5sZW5ndGg7cCsrKWNbcF09YVtwXTtzPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxjKX1yZXR1cm4gbys9dC5idG9hKHMpLG4obyl9LGUuZGVjb2RlUGFja2V0PWZ1bmN0aW9uKHQscixuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgdHx8dm9pZCAwPT09dCl7aWYoXCJiXCI9PXQuY2hhckF0KDApKXJldHVybiBlLmRlY29kZUJhc2U2NFBhY2tldCh0LnN1YnN0cigxKSxyKTtpZihuKXRyeXt0PWwuZGVjb2RlKHQpfWNhdGNoKHQpe3JldHVybiBifXZhciBvPXQuY2hhckF0KDApO3JldHVybiBOdW1iZXIobyk9PW8mJnZbb10/dC5sZW5ndGg+MT97dHlwZTp2W29dLGRhdGE6dC5zdWJzdHJpbmcoMSl9Ont0eXBlOnZbb119OmJ9dmFyIGk9bmV3IFVpbnQ4QXJyYXkodCksbz1pWzBdLHM9dSh0LDEpO3JldHVybiBrJiZcImJsb2JcIj09PXImJihzPW5ldyBrKFtzXSkpLHt0eXBlOnZbb10sZGF0YTpzfX0sZS5kZWNvZGVCYXNlNjRQYWNrZXQ9ZnVuY3Rpb24oZSxyKXt2YXIgbj12W2UuY2hhckF0KDApXTtpZighdC5BcnJheUJ1ZmZlcilyZXR1cm57dHlwZTpuLGRhdGE6e2Jhc2U2NDohMCxkYXRhOmUuc3Vic3RyKDEpfX07dmFyIG89aC5kZWNvZGUoZS5zdWJzdHIoMSkpO3JldHVyblwiYmxvYlwiPT09ciYmayYmKG89bmV3IGsoW29dKSkse3R5cGU6bixkYXRhOm99fSxlLmVuY29kZVBheWxvYWQ9ZnVuY3Rpb24odCxyLG4pe2Z1bmN0aW9uIG8odCl7cmV0dXJuIHQubGVuZ3RoK1wiOlwiK3R9ZnVuY3Rpb24gaSh0LG4pe2UuZW5jb2RlUGFja2V0KHQsISFzJiZyLCEwLGZ1bmN0aW9uKHQpe24obnVsbCxvKHQpKX0pfVwiZnVuY3Rpb25cIj09dHlwZW9mIHImJihuPXIscj1udWxsKTt2YXIgcz1wKHQpO3JldHVybiByJiZzP2smJiFnP2UuZW5jb2RlUGF5bG9hZEFzQmxvYih0LG4pOmUuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXIodCxuKTp0Lmxlbmd0aD92b2lkIGEodCxpLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4oZS5qb2luKFwiXCIpKX0pOm4oXCIwOlwiKX0sZS5kZWNvZGVQYXlsb2FkPWZ1bmN0aW9uKHQscixuKXtpZihcInN0cmluZ1wiIT10eXBlb2YgdClyZXR1cm4gZS5kZWNvZGVQYXlsb2FkQXNCaW5hcnkodCxyLG4pO1wiZnVuY3Rpb25cIj09dHlwZW9mIHImJihuPXIscj1udWxsKTt2YXIgbztpZihcIlwiPT10KXJldHVybiBuKGIsMCwxKTtmb3IodmFyIGkscyxhPVwiXCIsYz0wLHA9dC5sZW5ndGg7YzxwO2MrKyl7dmFyIHU9dC5jaGFyQXQoYyk7aWYoXCI6XCIhPXUpYSs9dTtlbHNle2lmKFwiXCI9PWF8fGEhPShpPU51bWJlcihhKSkpcmV0dXJuIG4oYiwwLDEpO2lmKHM9dC5zdWJzdHIoYysxLGkpLGEhPXMubGVuZ3RoKXJldHVybiBuKGIsMCwxKTtpZihzLmxlbmd0aCl7aWYobz1lLmRlY29kZVBhY2tldChzLHIsITApLGIudHlwZT09by50eXBlJiZiLmRhdGE9PW8uZGF0YSlyZXR1cm4gbihiLDAsMSk7dmFyIGg9bihvLGMraSxwKTtpZighMT09PWgpcmV0dXJufWMrPWksYT1cIlwifX1yZXR1cm5cIlwiIT1hP24oYiwwLDEpOnZvaWQgMH0sZS5lbmNvZGVQYXlsb2FkQXNBcnJheUJ1ZmZlcj1mdW5jdGlvbih0LHIpe2Z1bmN0aW9uIG4odCxyKXtlLmVuY29kZVBhY2tldCh0LCEwLCEwLGZ1bmN0aW9uKHQpe3JldHVybiByKG51bGwsdCl9KX1yZXR1cm4gdC5sZW5ndGg/dm9pZCBhKHQsbixmdW5jdGlvbih0LGUpe3ZhciBuPWUucmVkdWNlKGZ1bmN0aW9uKHQsZSl7dmFyIHI7cmV0dXJuIHI9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZS5sZW5ndGg6ZS5ieXRlTGVuZ3RoLHQrci50b1N0cmluZygpLmxlbmd0aCtyKzJ9LDApLG89bmV3IFVpbnQ4QXJyYXkobiksaT0wO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9XCJzdHJpbmdcIj09dHlwZW9mIHQscj10O2lmKGUpe2Zvcih2YXIgbj1uZXcgVWludDhBcnJheSh0Lmxlbmd0aCkscz0wO3M8dC5sZW5ndGg7cysrKW5bc109dC5jaGFyQ29kZUF0KHMpO3I9bi5idWZmZXJ9ZT9vW2krK109MDpvW2krK109MTtmb3IodmFyIGE9ci5ieXRlTGVuZ3RoLnRvU3RyaW5nKCkscz0wO3M8YS5sZW5ndGg7cysrKW9baSsrXT1wYXJzZUludChhW3NdKTtvW2krK109MjU1O2Zvcih2YXIgbj1uZXcgVWludDhBcnJheShyKSxzPTA7czxuLmxlbmd0aDtzKyspb1tpKytdPW5bc119KSxyKG8uYnVmZmVyKX0pOnIobmV3IEFycmF5QnVmZmVyKDApKX0sZS5lbmNvZGVQYXlsb2FkQXNCbG9iPWZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gbih0LHIpe2UuZW5jb2RlUGFja2V0KHQsITAsITAsZnVuY3Rpb24odCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoMSk7aWYoZVswXT0xLFwic3RyaW5nXCI9PXR5cGVvZiB0KXtmb3IodmFyIG49bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpLG89MDtvPHQubGVuZ3RoO28rKyluW29dPXQuY2hhckNvZGVBdChvKTt0PW4uYnVmZmVyLGVbMF09MH1mb3IodmFyIGk9dCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP3QuYnl0ZUxlbmd0aDp0LnNpemUscz1pLnRvU3RyaW5nKCksYT1uZXcgVWludDhBcnJheShzLmxlbmd0aCsxKSxvPTA7bzxzLmxlbmd0aDtvKyspYVtvXT1wYXJzZUludChzW29dKTtpZihhW3MubGVuZ3RoXT0yNTUsayl7dmFyIGM9bmV3IGsoW2UuYnVmZmVyLGEuYnVmZmVyLHRdKTtyKG51bGwsYyl9fSl9YSh0LG4sZnVuY3Rpb24odCxlKXtyZXR1cm4gcihuZXcgayhlKSl9KX0sZS5kZWNvZGVQYXlsb2FkQXNCaW5hcnk9ZnVuY3Rpb24odCxyLG4pe1wiZnVuY3Rpb25cIj09dHlwZW9mIHImJihuPXIscj1udWxsKTtmb3IodmFyIG89dCxpPVtdLHM9ITE7by5ieXRlTGVuZ3RoPjA7KXtmb3IodmFyIGE9bmV3IFVpbnQ4QXJyYXkobyksYz0wPT09YVswXSxwPVwiXCIsaD0xOzI1NSE9YVtoXTtoKyspe2lmKHAubGVuZ3RoPjMxMCl7cz0hMDticmVha31wKz1hW2hdfWlmKHMpcmV0dXJuIG4oYiwwLDEpO289dShvLDIrcC5sZW5ndGgpLHA9cGFyc2VJbnQocCk7dmFyIGY9dShvLDAscCk7aWYoYyl0cnl7Zj1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoZikpfWNhdGNoKHQpe3ZhciBsPW5ldyBVaW50OEFycmF5KGYpO2Y9XCJcIjtmb3IodmFyIGg9MDtoPGwubGVuZ3RoO2grKylmKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGxbaF0pfWkucHVzaChmKSxvPXUobyxwKX12YXIgZD1pLmxlbmd0aDtpLmZvckVhY2goZnVuY3Rpb24odCxvKXtuKGUuZGVjb2RlUGFja2V0KHQsciwhMCksbyxkKX0pfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3ZhciBlPVtdLHI9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmb3IodmFyIG4gaW4gdClyLmNhbGwodCxuKSYmZS5wdXNoKG4pO3JldHVybiBlfX0sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbihlKXtmdW5jdGlvbiBuKHQpe2Z1bmN0aW9uIHIodCl7aWYoIXQpcmV0dXJuITE7aWYoZS5CdWZmZXImJmUuQnVmZmVyLmlzQnVmZmVyKHQpfHxlLkFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ8fGUuQmxvYiYmdCBpbnN0YW5jZW9mIEJsb2J8fGUuRmlsZSYmdCBpbnN0YW5jZW9mIEZpbGUpcmV0dXJuITA7aWYobyh0KSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYocih0W25dKSlyZXR1cm4hMH1lbHNlIGlmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0KXt0LnRvSlNPTiYmKHQ9dC50b0pTT04oKSk7Zm9yKHZhciBpIGluIHQpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsaSkmJnIodFtpXSkpcmV0dXJuITB9cmV0dXJuITF9cmV0dXJuIHIodCl9dmFyIG89cigyNyk7dC5leHBvcnRzPW59KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQuYnl0ZUxlbmd0aDtpZihlPWV8fDAscj1yfHxuLHQuc2xpY2UpcmV0dXJuIHQuc2xpY2UoZSxyKTtpZihlPDAmJihlKz1uKSxyPDAmJihyKz1uKSxyPm4mJihyPW4pLGU+PW58fGU+PXJ8fDA9PT1uKXJldHVybiBuZXcgQXJyYXlCdWZmZXIoMCk7Zm9yKHZhciBvPW5ldyBVaW50OEFycmF5KHQpLGk9bmV3IFVpbnQ4QXJyYXkoci1lKSxzPWUsYT0wO3M8cjtzKyssYSsrKWlbYV09b1tzXTtyZXR1cm4gaS5idWZmZXJ9fSxmdW5jdGlvbih0LGUpeyFmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtlLmVuY29kZT1mdW5jdGlvbihlKXt2YXIgcixuPW5ldyBVaW50OEFycmF5KGUpLG89bi5sZW5ndGgsaT1cIlwiO2ZvcihyPTA7cjxvO3IrPTMpaSs9dFtuW3JdPj4yXSxpKz10WygzJm5bcl0pPDw0fG5bcisxXT4+NF0saSs9dFsoMTUmbltyKzFdKTw8MnxuW3IrMl0+PjZdLGkrPXRbNjMmbltyKzJdXTtyZXR1cm4gbyUzPT09Mj9pPWkuc3Vic3RyaW5nKDAsaS5sZW5ndGgtMSkrXCI9XCI6byUzPT09MSYmKGk9aS5zdWJzdHJpbmcoMCxpLmxlbmd0aC0yKStcIj09XCIpLGl9LGUuZGVjb2RlPWZ1bmN0aW9uKGUpe3ZhciByLG4sbyxpLHMsYT0uNzUqZS5sZW5ndGgsYz1lLmxlbmd0aCxwPTA7XCI9XCI9PT1lW2UubGVuZ3RoLTFdJiYoYS0tLFwiPVwiPT09ZVtlLmxlbmd0aC0yXSYmYS0tKTt2YXIgdT1uZXcgQXJyYXlCdWZmZXIoYSksaD1uZXcgVWludDhBcnJheSh1KTtmb3Iocj0wO3I8YztyKz00KW49dC5pbmRleE9mKGVbcl0pLG89dC5pbmRleE9mKGVbcisxXSksaT10LmluZGV4T2YoZVtyKzJdKSxzPXQuaW5kZXhPZihlW3IrM10pLGhbcCsrXT1uPDwyfG8+PjQsaFtwKytdPSgxNSZvKTw8NHxpPj4yLGhbcCsrXT0oMyZpKTw8Nnw2MyZzO3JldHVybiB1fX0oXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIHIodCxlLHIpe2Z1bmN0aW9uIG8odCxuKXtpZihvLmNvdW50PD0wKXRocm93IG5ldyBFcnJvcihcImFmdGVyIGNhbGxlZCB0b28gbWFueSB0aW1lc1wiKTstLW8uY291bnQsdD8oaT0hMCxlKHQpLGU9cik6MCE9PW8uY291bnR8fGl8fGUobnVsbCxuKX12YXIgaT0hMTtyZXR1cm4gcj1yfHxuLG8uY291bnQ9dCwwPT09dD9lKCk6b31mdW5jdGlvbiBuKCl7fXQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUscil7dmFyIG47KGZ1bmN0aW9uKHQsbyl7IWZ1bmN0aW9uKGkpe2Z1bmN0aW9uIHModCl7Zm9yKHZhciBlLHIsbj1bXSxvPTAsaT10Lmxlbmd0aDtvPGk7KWU9dC5jaGFyQ29kZUF0KG8rKyksZT49NTUyOTYmJmU8PTU2MzE5JiZvPGk/KHI9dC5jaGFyQ29kZUF0KG8rKyksNTYzMjA9PSg2NDUxMiZyKT9uLnB1c2goKCgxMDIzJmUpPDwxMCkrKDEwMjMmcikrNjU1MzYpOihuLnB1c2goZSksby0tKSk6bi5wdXNoKGUpO3JldHVybiBufWZ1bmN0aW9uIGEodCl7Zm9yKHZhciBlLHI9dC5sZW5ndGgsbj0tMSxvPVwiXCI7KytuPHI7KWU9dFtuXSxlPjY1NTM1JiYoZS09NjU1MzYsbys9ayhlPj4+MTAmMTAyM3w1NTI5NiksZT01NjMyMHwxMDIzJmUpLG8rPWsoZSk7cmV0dXJuIG99ZnVuY3Rpb24gYyh0KXtpZih0Pj01NTI5NiYmdDw9NTczNDMpdGhyb3cgRXJyb3IoXCJMb25lIHN1cnJvZ2F0ZSBVK1wiK3QudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkrXCIgaXMgbm90IGEgc2NhbGFyIHZhbHVlXCIpfWZ1bmN0aW9uIHAodCxlKXtyZXR1cm4gayh0Pj5lJjYzfDEyOCl9ZnVuY3Rpb24gdSh0KXtpZigwPT0oNDI5NDk2NzE2OCZ0KSlyZXR1cm4gayh0KTt2YXIgZT1cIlwiO3JldHVybiAwPT0oNDI5NDk2NTI0OCZ0KT9lPWsodD4+NiYzMXwxOTIpOjA9PSg0Mjk0OTAxNzYwJnQpPyhjKHQpLGU9ayh0Pj4xMiYxNXwyMjQpLGUrPXAodCw2KSk6MD09KDQyOTI4NzAxNDQmdCkmJihlPWsodD4+MTgmN3wyNDApLGUrPXAodCwxMiksZSs9cCh0LDYpKSxlKz1rKDYzJnR8MTI4KX1mdW5jdGlvbiBoKHQpe2Zvcih2YXIgZSxyPXModCksbj1yLmxlbmd0aCxvPS0xLGk9XCJcIjsrK288bjspZT1yW29dLGkrPXUoZSk7cmV0dXJuIGl9ZnVuY3Rpb24gZigpe2lmKGI+PXYpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGJ5dGUgaW5kZXhcIik7dmFyIHQ9MjU1Jm1bYl07aWYoYisrLDEyOD09KDE5MiZ0KSlyZXR1cm4gNjMmdDt0aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIil9ZnVuY3Rpb24gbCgpe3ZhciB0LGUscixuLG87aWYoYj52KXRocm93IEVycm9yKFwiSW52YWxpZCBieXRlIGluZGV4XCIpO2lmKGI9PXYpcmV0dXJuITE7aWYodD0yNTUmbVtiXSxiKyssMD09KDEyOCZ0KSlyZXR1cm4gdDtpZigxOTI9PSgyMjQmdCkpe3ZhciBlPWYoKTtpZihvPSgzMSZ0KTw8NnxlLG8+PTEyOClyZXR1cm4gbzt0aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIil9aWYoMjI0PT0oMjQwJnQpKXtpZihlPWYoKSxyPWYoKSxvPSgxNSZ0KTw8MTJ8ZTw8NnxyLG8+PTIwNDgpcmV0dXJuIGMobyksbzt0aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIil9aWYoMjQwPT0oMjQ4JnQpJiYoZT1mKCkscj1mKCksbj1mKCksbz0oMTUmdCk8PDE4fGU8PDEyfHI8PDZ8bixvPj02NTUzNiYmbzw9MTExNDExMSkpcmV0dXJuIG87dGhyb3cgRXJyb3IoXCJJbnZhbGlkIFVURi04IGRldGVjdGVkXCIpfWZ1bmN0aW9uIGQodCl7bT1zKHQpLHY9bS5sZW5ndGgsYj0wO2Zvcih2YXIgZSxyPVtdOyhlPWwoKSkhPT0hMTspci5wdXNoKGUpO3JldHVybiBhKHIpfXZhciB5PVwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLGc9KFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0LmV4cG9ydHM9PXkmJnQsXCJvYmplY3RcIj09dHlwZW9mIG8mJm8pO2cuZ2xvYmFsIT09ZyYmZy53aW5kb3chPT1nfHwoaT1nKTt2YXIgbSx2LGIsaz1TdHJpbmcuZnJvbUNoYXJDb2RlLHc9e3ZlcnNpb246XCIyLjAuMFwiLGVuY29kZTpoLGRlY29kZTpkfTtuPWZ1bmN0aW9uKCl7cmV0dXJuIHd9LmNhbGwoZSxyLGUsdCksISh2b2lkIDAhPT1uJiYodC5leHBvcnRzPW4pKX0odGhpcyl9KS5jYWxsKGUscig4KSh0KSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTtpZihyLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXt2YXIgbj1yLmJ1ZmZlcjtpZihyLmJ5dGVMZW5ndGghPT1uLmJ5dGVMZW5ndGgpe3ZhciBvPW5ldyBVaW50OEFycmF5KHIuYnl0ZUxlbmd0aCk7by5zZXQobmV3IFVpbnQ4QXJyYXkobixyLmJ5dGVPZmZzZXQsci5ieXRlTGVuZ3RoKSksbj1vLmJ1ZmZlcn10W2VdPW59fX1mdW5jdGlvbiBuKHQsZSl7ZT1lfHx7fTt2YXIgbj1uZXcgaTtyKHQpO2Zvcih2YXIgbz0wO288dC5sZW5ndGg7bysrKW4uYXBwZW5kKHRbb10pO3JldHVybiBlLnR5cGU/bi5nZXRCbG9iKGUudHlwZSk6bi5nZXRCbG9iKCl9ZnVuY3Rpb24gbyh0LGUpe3JldHVybiByKHQpLG5ldyBCbG9iKHQsZXx8e30pfXZhciBpPWUuQmxvYkJ1aWxkZXJ8fGUuV2ViS2l0QmxvYkJ1aWxkZXJ8fGUuTVNCbG9iQnVpbGRlcnx8ZS5Nb3pCbG9iQnVpbGRlcixzPWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PW5ldyBCbG9iKFtcImhpXCJdKTtyZXR1cm4gMj09PXQuc2l6ZX1jYXRjaCh0KXtyZXR1cm4hMX19KCksYT1zJiZmdW5jdGlvbigpe3RyeXt2YXIgdD1uZXcgQmxvYihbbmV3IFVpbnQ4QXJyYXkoWzEsMl0pXSk7cmV0dXJuIDI9PT10LnNpemV9Y2F0Y2godCl7cmV0dXJuITF9fSgpLGM9aSYmaS5wcm90b3R5cGUuYXBwZW5kJiZpLnByb3RvdHlwZS5nZXRCbG9iO3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBzP2E/ZS5CbG9iOm86Yz9uOnZvaWQgMH0oKX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQpe2lmKHQpcmV0dXJuIG4odCl9ZnVuY3Rpb24gbih0KXtmb3IodmFyIGUgaW4gci5wcm90b3R5cGUpdFtlXT1yLnByb3RvdHlwZVtlXTtyZXR1cm4gdH10LmV4cG9ydHM9cixyLnByb3RvdHlwZS5vbj1yLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LCh0aGlzLl9jYWxsYmFja3NbdF09dGhpcy5fY2FsbGJhY2tzW3RdfHxbXSkucHVzaChlKSx0aGlzfSxyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe24ub2ZmKHQsciksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9dmFyIG49dGhpcztyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sci5mbj1lLHRoaXMub24odCxyKSx0aGlzfSxyLnByb3RvdHlwZS5vZmY9ci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwwPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9jYWxsYmFja3M9e30sdGhpczt2YXIgcj10aGlzLl9jYWxsYmFja3NbdF07aWYoIXIpcmV0dXJuIHRoaXM7aWYoMT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1t0XSx0aGlzO2Zvcih2YXIgbixvPTA7bzxyLmxlbmd0aDtvKyspaWYobj1yW29dLG49PT1lfHxuLmZuPT09ZSl7ci5zcGxpY2UobywxKTticmVha31yZXR1cm4gdGhpc30sci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTt2YXIgZT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxyPXRoaXMuX2NhbGxiYWNrc1t0XTtpZihyKXtyPXIuc2xpY2UoMCk7Zm9yKHZhciBuPTAsbz1yLmxlbmd0aDtuPG87KytuKXJbbl0uYXBwbHkodGhpcyxlKX1yZXR1cm4gdGhpc30sci5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSx0aGlzLl9jYWxsYmFja3NbdF18fFtdfSxyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmxpc3RlbmVycyh0KS5sZW5ndGh9fSxmdW5jdGlvbih0LGUpe2UuZW5jb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPVwiXCI7Zm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKGUubGVuZ3RoJiYoZSs9XCImXCIpLGUrPWVuY29kZVVSSUNvbXBvbmVudChyKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQodFtyXSkpO3JldHVybiBlfSxlLmRlY29kZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9e30scj10LnNwbGl0KFwiJlwiKSxuPTAsbz1yLmxlbmd0aDtuPG87bisrKXt2YXIgaT1yW25dLnNwbGl0KFwiPVwiKTtlW2RlY29kZVVSSUNvbXBvbmVudChpWzBdKV09ZGVjb2RlVVJJQ29tcG9uZW50KGlbMV0pfXJldHVybiBlfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgcj1mdW5jdGlvbigpe307ci5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IHIsdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dH19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0KXt2YXIgZT1cIlwiO2RvIGU9c1t0JWFdK2UsdD1NYXRoLmZsb29yKHQvYSk7d2hpbGUodD4wKTtyZXR1cm4gZX1mdW5jdGlvbiBuKHQpe3ZhciBlPTA7Zm9yKHU9MDt1PHQubGVuZ3RoO3UrKyllPWUqYStjW3QuY2hhckF0KHUpXTtyZXR1cm4gZX1mdW5jdGlvbiBvKCl7dmFyIHQ9cigrbmV3IERhdGUpO3JldHVybiB0IT09aT8ocD0wLGk9dCk6dCtcIi5cIityKHArKyl9Zm9yKHZhciBpLHM9XCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ei1fXCIuc3BsaXQoXCJcIiksYT02NCxjPXt9LHA9MCx1PTA7dTxhO3UrKyljW3NbdV1dPXU7by5lbmNvZGU9cixvLmRlY29kZT1uLHQuZXhwb3J0cz1vfSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4oKXt9ZnVuY3Rpb24gbyh0KXtpLmNhbGwodGhpcyx0KSx0aGlzLnF1ZXJ5PXRoaXMucXVlcnl8fHt9LGF8fChlLl9fX2Vpb3x8KGUuX19fZWlvPVtdKSxhPWUuX19fZWlvKSx0aGlzLmluZGV4PWEubGVuZ3RoO3ZhciByPXRoaXM7YS5wdXNoKGZ1bmN0aW9uKHQpe3Iub25EYXRhKHQpfSksdGhpcy5xdWVyeS5qPXRoaXMuaW5kZXgsZS5kb2N1bWVudCYmZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixmdW5jdGlvbigpe3Iuc2NyaXB0JiYoci5zY3JpcHQub25lcnJvcj1uKX0sITEpfXZhciBpPXIoMjIpLHM9cigzNSk7dC5leHBvcnRzPW87dmFyIGEsYz0vXFxuL2cscD0vXFxcXG4vZztzKG8saSksby5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnk9ITEsby5wcm90b3R5cGUuZG9DbG9zZT1mdW5jdGlvbigpe3RoaXMuc2NyaXB0JiYodGhpcy5zY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNjcmlwdCksdGhpcy5zY3JpcHQ9bnVsbCksdGhpcy5mb3JtJiYodGhpcy5mb3JtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5mb3JtKSx0aGlzLmZvcm09bnVsbCx0aGlzLmlmcmFtZT1udWxsKSxpLnByb3RvdHlwZS5kb0Nsb3NlLmNhbGwodGhpcyl9LG8ucHJvdG90eXBlLmRvUG9sbD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3RoaXMuc2NyaXB0JiYodGhpcy5zY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNjcmlwdCksdGhpcy5zY3JpcHQ9bnVsbCksZS5hc3luYz0hMCxlLnNyYz10aGlzLnVyaSgpLGUub25lcnJvcj1mdW5jdGlvbihlKXt0Lm9uRXJyb3IoXCJqc29ucCBwb2xsIGVycm9yXCIsZSl9O3ZhciByPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdO3I/ci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHIpOihkb2N1bWVudC5oZWFkfHxkb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChlKSx0aGlzLnNjcmlwdD1lO3ZhciBuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9nZWNrby9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7biYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0KSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpfSwxMDApfSxvLnByb3RvdHlwZS5kb1dyaXRlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe24oKSxlKCl9ZnVuY3Rpb24gbigpe2lmKG8uaWZyYW1lKXRyeXtvLmZvcm0ucmVtb3ZlQ2hpbGQoby5pZnJhbWUpfWNhdGNoKHQpe28ub25FcnJvcihcImpzb25wIHBvbGxpbmcgaWZyYW1lIHJlbW92YWwgZXJyb3JcIix0KX10cnl7dmFyIHQ9JzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDowXCIgbmFtZT1cIicrby5pZnJhbWVJZCsnXCI+JztpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCl9Y2F0Y2godCl7aT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpLGkubmFtZT1vLmlmcmFtZUlkLGkuc3JjPVwiamF2YXNjcmlwdDowXCJ9aS5pZD1vLmlmcmFtZUlkLG8uZm9ybS5hcHBlbmRDaGlsZChpKSxvLmlmcmFtZT1pfXZhciBvPXRoaXM7aWYoIXRoaXMuZm9ybSl7dmFyIGkscz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKSxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKSx1PXRoaXMuaWZyYW1lSWQ9XCJlaW9faWZyYW1lX1wiK3RoaXMuaW5kZXg7cy5jbGFzc05hbWU9XCJzb2NrZXRpb1wiLHMuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHMuc3R5bGUudG9wPVwiLTEwMDBweFwiLHMuc3R5bGUubGVmdD1cIi0xMDAwcHhcIixzLnRhcmdldD11LHMubWV0aG9kPVwiUE9TVFwiLHMuc2V0QXR0cmlidXRlKFwiYWNjZXB0LWNoYXJzZXRcIixcInV0Zi04XCIpLGEubmFtZT1cImRcIixzLmFwcGVuZENoaWxkKGEpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocyksdGhpcy5mb3JtPXMsdGhpcy5hcmVhPWF9dGhpcy5mb3JtLmFjdGlvbj10aGlzLnVyaSgpLG4oKSx0PXQucmVwbGFjZShwLFwiXFxcXFxcblwiKSx0aGlzLmFyZWEudmFsdWU9dC5yZXBsYWNlKGMsXCJcXFxcblwiKTt0cnl7dGhpcy5mb3JtLnN1Ym1pdCgpfWNhdGNoKHQpe310aGlzLmlmcmFtZS5hdHRhY2hFdmVudD90aGlzLmlmcmFtZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtcImNvbXBsZXRlXCI9PW8uaWZyYW1lLnJlYWR5U3RhdGUmJnIoKX06dGhpcy5pZnJhbWUub25sb2FkPXJ9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4odCl7dmFyIGU9dCYmdC5mb3JjZUJhc2U2NDtlJiYodGhpcy5zdXBwb3J0c0JpbmFyeT0hMSksdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZT10LnBlck1lc3NhZ2VEZWZsYXRlLG8uY2FsbCh0aGlzLHQpfXZhciBvPXIoMjMpLGk9cigyNCkscz1yKDM0KSxhPXIoMzUpLGM9cigzNikscD1yKDMpKFwiZW5naW5lLmlvLWNsaWVudDp3ZWJzb2NrZXRcIiksdT1lLldlYlNvY2tldHx8ZS5Nb3pXZWJTb2NrZXQsaD11O2lmKCFoJiZcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93KXRyeXtoPXIoMzkpfWNhdGNoKHQpe310LmV4cG9ydHM9bixhKG4sbyksbi5wcm90b3R5cGUubmFtZT1cIndlYnNvY2tldFwiLG4ucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5PSEwLG4ucHJvdG90eXBlLmRvT3Blbj1mdW5jdGlvbigpe2lmKHRoaXMuY2hlY2soKSl7dmFyIHQ9dGhpcy51cmkoKSxlPXZvaWQgMCxyPXthZ2VudDp0aGlzLmFnZW50LHBlck1lc3NhZ2VEZWZsYXRlOnRoaXMucGVyTWVzc2FnZURlZmxhdGV9O3IucGZ4PXRoaXMucGZ4LHIua2V5PXRoaXMua2V5LHIucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2Usci5jZXJ0PXRoaXMuY2VydCxyLmNhPXRoaXMuY2Esci5jaXBoZXJzPXRoaXMuY2lwaGVycyxyLnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZCx0aGlzLmV4dHJhSGVhZGVycyYmKHIuaGVhZGVycz10aGlzLmV4dHJhSGVhZGVycyksdGhpcy53cz11P25ldyBoKHQpOm5ldyBoKHQsZSxyKSx2b2lkIDA9PT10aGlzLndzLmJpbmFyeVR5cGUmJih0aGlzLnN1cHBvcnRzQmluYXJ5PSExKSx0aGlzLndzLnN1cHBvcnRzJiZ0aGlzLndzLnN1cHBvcnRzLmJpbmFyeT8odGhpcy5zdXBwb3J0c0JpbmFyeT0hMCx0aGlzLndzLmJpbmFyeVR5cGU9XCJidWZmZXJcIik6dGhpcy53cy5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIix0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCl9fSxuLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy53cy5vbm9wZW49ZnVuY3Rpb24oKXt0Lm9uT3BlbigpfSx0aGlzLndzLm9uY2xvc2U9ZnVuY3Rpb24oKXt0Lm9uQ2xvc2UoKX0sdGhpcy53cy5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7dC5vbkRhdGEoZS5kYXRhKX0sdGhpcy53cy5vbmVycm9yPWZ1bmN0aW9uKGUpe3Qub25FcnJvcihcIndlYnNvY2tldCBlcnJvclwiLGUpfX0sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmL2lQYWR8aVBob25lfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYobi5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe28ucHJvdG90eXBlLm9uRGF0YS5jYWxsKGUsdCl9LDApfSksbi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcigpe24uZW1pdChcImZsdXNoXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLndyaXRhYmxlPSEwLG4uZW1pdChcImRyYWluXCIpfSwwKX12YXIgbj10aGlzO3RoaXMud3JpdGFibGU9ITE7Zm9yKHZhciBvPXQubGVuZ3RoLHM9MCxhPW87czxhO3MrKykhZnVuY3Rpb24odCl7aS5lbmNvZGVQYWNrZXQodCxuLnN1cHBvcnRzQmluYXJ5LGZ1bmN0aW9uKGkpe2lmKCF1KXt2YXIgcz17fTtpZih0Lm9wdGlvbnMmJihzLmNvbXByZXNzPXQub3B0aW9ucy5jb21wcmVzcyksbi5wZXJNZXNzYWdlRGVmbGF0ZSl7dmFyIGE9XCJzdHJpbmdcIj09dHlwZW9mIGk/ZS5CdWZmZXIuYnl0ZUxlbmd0aChpKTppLmxlbmd0aDthPG4ucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkJiYocy5jb21wcmVzcz0hMSl9fXRyeXt1P24ud3Muc2VuZChpKTpuLndzLnNlbmQoaSxzKX1jYXRjaCh0KXtwKFwid2Vic29ja2V0IGNsb3NlZCBiZWZvcmUgb25jbG9zZSBldmVudFwiKX0tLW98fHIoKX0pfSh0W3NdKX0sbi5wcm90b3R5cGUub25DbG9zZT1mdW5jdGlvbigpe28ucHJvdG90eXBlLm9uQ2xvc2UuY2FsbCh0aGlzKX0sbi5wcm90b3R5cGUuZG9DbG9zZT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLndzJiZ0aGlzLndzLmNsb3NlKCl9LG4ucHJvdG90eXBlLnVyaT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucXVlcnl8fHt9LGU9dGhpcy5zZWN1cmU/XCJ3c3NcIjpcIndzXCIscj1cIlwiO3RoaXMucG9ydCYmKFwid3NzXCI9PWUmJjQ0MyE9dGhpcy5wb3J0fHxcIndzXCI9PWUmJjgwIT10aGlzLnBvcnQpJiYocj1cIjpcIit0aGlzLnBvcnQpLHRoaXMudGltZXN0YW1wUmVxdWVzdHMmJih0W3RoaXMudGltZXN0YW1wUGFyYW1dPWMoKSksdGhpcy5zdXBwb3J0c0JpbmFyeXx8KHQuYjY0PTEpLHQ9cy5lbmNvZGUodCksdC5sZW5ndGgmJih0PVwiP1wiK3QpO3ZhciBuPXRoaXMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikhPT0tMTtyZXR1cm4gZStcIjovL1wiKyhuP1wiW1wiK3RoaXMuaG9zdG5hbWUrXCJdXCI6dGhpcy5ob3N0bmFtZSkrcit0aGlzLnBhdGgrdH0sbi5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtyZXR1cm4hKCFofHxcIl9faW5pdGlhbGl6ZVwiaW4gaCYmdGhpcy5uYW1lPT09bi5wcm90b3R5cGUubmFtZSl9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlKXt2YXIgcj1bXS5pbmRleE9mO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKHIpcmV0dXJuIHQuaW5kZXhPZihlKTtmb3IodmFyIG49MDtuPHQubGVuZ3RoOysrbilpZih0W25dPT09ZSlyZXR1cm4gbjtyZXR1cm4tMX19LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpe3ZhciByPS9eW1xcXSw6e31cXHNdKiQvLG49L1xcXFwoPzpbXCJcXFxcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZyxvPS9cIlteXCJcXFxcXFxuXFxyXSpcInx0cnVlfGZhbHNlfG51bGx8LT9cXGQrKD86XFwuXFxkKik/KD86W2VFXVsrXFwtXT9cXGQrKT8vZyxpPS8oPzpefDp8LCkoPzpcXHMqXFxbKSsvZyxzPS9eXFxzKy8sYT0vXFxzKyQvO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmdD8odD10LnJlcGxhY2UocyxcIlwiKS5yZXBsYWNlKGEsXCJcIiksZS5KU09OJiZKU09OLnBhcnNlP0pTT04ucGFyc2UodCk6ci50ZXN0KHQucmVwbGFjZShuLFwiQFwiKS5yZXBsYWNlKG8sXCJdXCIpLnJlcGxhY2UoaSxcIlwiKSk/bmV3IEZ1bmN0aW9uKFwicmV0dXJuIFwiK3QpKCk6dm9pZCAwKTpudWxsfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlLHIpe3RoaXMuaW89dCx0aGlzLm5zcD1lLHRoaXMuanNvbj10aGlzLHRoaXMuaWRzPTAsdGhpcy5hY2tzPXt9LHRoaXMucmVjZWl2ZUJ1ZmZlcj1bXSx0aGlzLnNlbmRCdWZmZXI9W10sdGhpcy5jb25uZWN0ZWQ9ITEsdGhpcy5kaXNjb25uZWN0ZWQ9ITAsciYmci5xdWVyeSYmKHRoaXMucXVlcnk9ci5xdWVyeSksdGhpcy5pby5hdXRvQ29ubmVjdCYmdGhpcy5vcGVuKCl9dmFyIG89cig2KSxpPXIoNDMpLHM9cig0NCksYT1yKDQ1KSxjPXIoNDYpLHA9cigzKShcInNvY2tldC5pby1jbGllbnQ6c29ja2V0XCIpLHU9cig0Nyk7dC5leHBvcnRzPWU9bjt2YXIgaD17Y29ubmVjdDoxLGNvbm5lY3RfZXJyb3I6MSxjb25uZWN0X3RpbWVvdXQ6MSxjb25uZWN0aW5nOjEsZGlzY29ubmVjdDoxLGVycm9yOjEscmVjb25uZWN0OjEscmVjb25uZWN0X2F0dGVtcHQ6MSxyZWNvbm5lY3RfZmFpbGVkOjEscmVjb25uZWN0X2Vycm9yOjEscmVjb25uZWN0aW5nOjEscGluZzoxLHBvbmc6MX0sZj1pLnByb3RvdHlwZS5lbWl0O2kobi5wcm90b3R5cGUpLG4ucHJvdG90eXBlLnN1YkV2ZW50cz1mdW5jdGlvbigpe2lmKCF0aGlzLnN1YnMpe3ZhciB0PXRoaXMuaW87dGhpcy5zdWJzPVthKHQsXCJvcGVuXCIsYyh0aGlzLFwib25vcGVuXCIpKSxhKHQsXCJwYWNrZXRcIixjKHRoaXMsXCJvbnBhY2tldFwiKSksYSh0LFwiY2xvc2VcIixjKHRoaXMsXCJvbmNsb3NlXCIpKV19fSxuLnByb3RvdHlwZS5vcGVuPW4ucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25uZWN0ZWQ/dGhpczoodGhpcy5zdWJFdmVudHMoKSx0aGlzLmlvLm9wZW4oKSxcIm9wZW5cIj09PXRoaXMuaW8ucmVhZHlTdGF0ZSYmdGhpcy5vbm9wZW4oKSx0aGlzLmVtaXQoXCJjb25uZWN0aW5nXCIpLHRoaXMpfSxuLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dmFyIHQ9cyhhcmd1bWVudHMpO3JldHVybiB0LnVuc2hpZnQoXCJtZXNzYWdlXCIpLHRoaXMuZW1pdC5hcHBseSh0aGlzLHQpLHRoaXN9LG4ucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7aWYoaC5oYXNPd25Qcm9wZXJ0eSh0KSlyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpczt2YXIgZT1zKGFyZ3VtZW50cykscj1vLkVWRU5UO3UoZSkmJihyPW8uQklOQVJZX0VWRU5UKTt2YXIgbj17dHlwZTpyLGRhdGE6ZX07cmV0dXJuIG4ub3B0aW9ucz17fSxuLm9wdGlvbnMuY29tcHJlc3M9IXRoaXMuZmxhZ3N8fCExIT09dGhpcy5mbGFncy5jb21wcmVzcyxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlW2UubGVuZ3RoLTFdJiYocChcImVtaXR0aW5nIHBhY2tldCB3aXRoIGFjayBpZCAlZFwiLHRoaXMuaWRzKSx0aGlzLmFja3NbdGhpcy5pZHNdPWUucG9wKCksbi5pZD10aGlzLmlkcysrKSx0aGlzLmNvbm5lY3RlZD90aGlzLnBhY2tldChuKTp0aGlzLnNlbmRCdWZmZXIucHVzaChuKSxkZWxldGUgdGhpcy5mbGFncyx0aGlzfSxuLnByb3RvdHlwZS5wYWNrZXQ9ZnVuY3Rpb24odCl7dC5uc3A9dGhpcy5uc3AsdGhpcy5pby5wYWNrZXQodCl9LG4ucHJvdG90eXBlLm9ub3Blbj1mdW5jdGlvbigpe3AoXCJ0cmFuc3BvcnQgaXMgb3BlbiAtIGNvbm5lY3RpbmdcIiksXCIvXCIhPT10aGlzLm5zcCYmKHRoaXMucXVlcnk/dGhpcy5wYWNrZXQoe3R5cGU6by5DT05ORUNULHF1ZXJ5OnRoaXMucXVlcnl9KTp0aGlzLnBhY2tldCh7dHlwZTpvLkNPTk5FQ1R9KSl9LG4ucHJvdG90eXBlLm9uY2xvc2U9ZnVuY3Rpb24odCl7cChcImNsb3NlICglcylcIix0KSx0aGlzLmNvbm5lY3RlZD0hMSx0aGlzLmRpc2Nvbm5lY3RlZD0hMCxkZWxldGUgdGhpcy5pZCx0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIsdCl9LG4ucHJvdG90eXBlLm9ucGFja2V0PWZ1bmN0aW9uKHQpe2lmKHQubnNwPT09dGhpcy5uc3Apc3dpdGNoKHQudHlwZSl7Y2FzZSBvLkNPTk5FQ1Q6dGhpcy5vbmNvbm5lY3QoKTticmVhaztjYXNlIG8uRVZFTlQ6dGhpcy5vbmV2ZW50KHQpO2JyZWFrO2Nhc2Ugby5CSU5BUllfRVZFTlQ6dGhpcy5vbmV2ZW50KHQpO2JyZWFrO2Nhc2Ugby5BQ0s6dGhpcy5vbmFjayh0KTticmVhaztjYXNlIG8uQklOQVJZX0FDSzp0aGlzLm9uYWNrKHQpO2JyZWFrO2Nhc2Ugby5ESVNDT05ORUNUOnRoaXMub25kaXNjb25uZWN0KCk7YnJlYWs7Y2FzZSBvLkVSUk9SOnRoaXMuZW1pdChcImVycm9yXCIsdC5kYXRhKX19LG4ucHJvdG90eXBlLm9uZXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRhfHxbXTtwKFwiZW1pdHRpbmcgZXZlbnQgJWpcIixlKSxudWxsIT10LmlkJiYocChcImF0dGFjaGluZyBhY2sgY2FsbGJhY2sgdG8gZXZlbnRcIiksZS5wdXNoKHRoaXMuYWNrKHQuaWQpKSksdGhpcy5jb25uZWN0ZWQ/Zi5hcHBseSh0aGlzLGUpOnRoaXMucmVjZWl2ZUJ1ZmZlci5wdXNoKGUpfSxuLnByb3RvdHlwZS5hY2s9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxyPSExO3JldHVybiBmdW5jdGlvbigpe2lmKCFyKXtyPSEwO3ZhciBuPXMoYXJndW1lbnRzKTtwKFwic2VuZGluZyBhY2sgJWpcIixuKTt2YXIgaT11KG4pP28uQklOQVJZX0FDSzpvLkFDSztlLnBhY2tldCh7dHlwZTppLGlkOnQsZGF0YTpufSl9fX0sbi5wcm90b3R5cGUub25hY2s9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hY2tzW3QuaWRdO1wiZnVuY3Rpb25cIj09dHlwZW9mIGU/KHAoXCJjYWxsaW5nIGFjayAlcyB3aXRoICVqXCIsdC5pZCx0LmRhdGEpLGUuYXBwbHkodGhpcyx0LmRhdGEpLGRlbGV0ZSB0aGlzLmFja3NbdC5pZF0pOnAoXCJiYWQgYWNrICVzXCIsdC5pZCl9LG4ucHJvdG90eXBlLm9uY29ubmVjdD1mdW5jdGlvbigpe3RoaXMuY29ubmVjdGVkPSEwLHRoaXMuZGlzY29ubmVjdGVkPSExLHRoaXMuZW1pdChcImNvbm5lY3RcIiksdGhpcy5lbWl0QnVmZmVyZWQoKX0sbi5wcm90b3R5cGUuZW1pdEJ1ZmZlcmVkPWZ1bmN0aW9uKCl7dmFyIHQ7Zm9yKHQ9MDt0PHRoaXMucmVjZWl2ZUJ1ZmZlci5sZW5ndGg7dCsrKWYuYXBwbHkodGhpcyx0aGlzLnJlY2VpdmVCdWZmZXJbdF0pO2Zvcih0aGlzLnJlY2VpdmVCdWZmZXI9W10sXHJcbnQ9MDt0PHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGg7dCsrKXRoaXMucGFja2V0KHRoaXMuc2VuZEJ1ZmZlclt0XSk7dGhpcy5zZW5kQnVmZmVyPVtdfSxuLnByb3RvdHlwZS5vbmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtwKFwic2VydmVyIGRpc2Nvbm5lY3QgKCVzKVwiLHRoaXMubnNwKSx0aGlzLmRlc3Ryb3koKSx0aGlzLm9uY2xvc2UoXCJpbyBzZXJ2ZXIgZGlzY29ubmVjdFwiKX0sbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2lmKHRoaXMuc3Vicyl7Zm9yKHZhciB0PTA7dDx0aGlzLnN1YnMubGVuZ3RoO3QrKyl0aGlzLnN1YnNbdF0uZGVzdHJveSgpO3RoaXMuc3Vicz1udWxsfXRoaXMuaW8uZGVzdHJveSh0aGlzKX0sbi5wcm90b3R5cGUuY2xvc2U9bi5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbm5lY3RlZCYmKHAoXCJwZXJmb3JtaW5nIGRpc2Nvbm5lY3QgKCVzKVwiLHRoaXMubnNwKSx0aGlzLnBhY2tldCh7dHlwZTpvLkRJU0NPTk5FQ1R9KSksdGhpcy5kZXN0cm95KCksdGhpcy5jb25uZWN0ZWQmJnRoaXMub25jbG9zZShcImlvIGNsaWVudCBkaXNjb25uZWN0XCIpLHRoaXN9LG4ucHJvdG90eXBlLmNvbXByZXNzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZsYWdzPXRoaXMuZmxhZ3N8fHt9LHRoaXMuZmxhZ3MuY29tcHJlc3M9dCx0aGlzfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQpe2lmKHQpcmV0dXJuIG4odCl9ZnVuY3Rpb24gbih0KXtmb3IodmFyIGUgaW4gci5wcm90b3R5cGUpdFtlXT1yLnByb3RvdHlwZVtlXTtyZXR1cm4gdH10LmV4cG9ydHM9cixyLnByb3RvdHlwZS5vbj1yLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9LCh0aGlzLl9jYWxsYmFja3NbXCIkXCIrdF09dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdfHxbXSkucHVzaChlKSx0aGlzfSxyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcigpe3RoaXMub2ZmKHQsciksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHIuZm49ZSx0aGlzLm9uKHQsciksdGhpc30sci5wcm90b3R5cGUub2ZmPXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1yLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXt9LHRoaXM7dmFyIHI9dGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdO2lmKCFyKXJldHVybiB0aGlzO2lmKDE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbXCIkXCIrdF0sdGhpcztmb3IodmFyIG4sbz0wO288ci5sZW5ndGg7bysrKWlmKG49cltvXSxuPT09ZXx8bi5mbj09PWUpe3Iuc3BsaWNlKG8sMSk7YnJlYWt9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkscj10aGlzLl9jYWxsYmFja3NbXCIkXCIrdF07aWYocil7cj1yLnNsaWNlKDApO2Zvcih2YXIgbj0wLG89ci5sZW5ndGg7bjxvOysrbilyW25dLmFwcGx5KHRoaXMsZSl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sdGhpcy5fY2FsbGJhY2tzW1wiJFwiK3RdfHxbXX0sci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnModCkubGVuZ3RofX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiByKHQsZSl7dmFyIHI9W107ZT1lfHwwO2Zvcih2YXIgbj1lfHwwO248dC5sZW5ndGg7bisrKXJbbi1lXT10W25dO3JldHVybiByfXQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxlLHIpe3JldHVybiB0Lm9uKGUscikse2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0LnJlbW92ZUxpc3RlbmVyKGUscil9fX10LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlKXt2YXIgcj1bXS5zbGljZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9dFtlXSksXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJiaW5kKCkgcmVxdWlyZXMgYSBmdW5jdGlvblwiKTt2YXIgbj1yLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsbi5jb25jYXQoci5jYWxsKGFyZ3VtZW50cykpKX19fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4odCl7ZnVuY3Rpb24gcih0KXtpZighdClyZXR1cm4hMTtpZihlLkJ1ZmZlciYmZS5CdWZmZXIuaXNCdWZmZXImJmUuQnVmZmVyLmlzQnVmZmVyKHQpfHxlLkFycmF5QnVmZmVyJiZ0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ8fGUuQmxvYiYmdCBpbnN0YW5jZW9mIEJsb2J8fGUuRmlsZSYmdCBpbnN0YW5jZW9mIEZpbGUpcmV0dXJuITA7aWYobyh0KSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYocih0W25dKSlyZXR1cm4hMH1lbHNlIGlmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0KXt0LnRvSlNPTiYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC50b0pTT04mJih0PXQudG9KU09OKCkpO2Zvcih2YXIgaSBpbiB0KWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiZyKHRbaV0pKXJldHVybiEwfXJldHVybiExfXJldHVybiByKHQpfXZhciBvPXIoNDgpO3QuZXhwb3J0cz1ufSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gcih0KXt0PXR8fHt9LHRoaXMubXM9dC5taW58fDEwMCx0aGlzLm1heD10Lm1heHx8MWU0LHRoaXMuZmFjdG9yPXQuZmFjdG9yfHwyLHRoaXMuaml0dGVyPXQuaml0dGVyPjAmJnQuaml0dGVyPD0xP3Quaml0dGVyOjAsdGhpcy5hdHRlbXB0cz0wfXQuZXhwb3J0cz1yLHIucHJvdG90eXBlLmR1cmF0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5tcypNYXRoLnBvdyh0aGlzLmZhY3Rvcix0aGlzLmF0dGVtcHRzKyspO2lmKHRoaXMuaml0dGVyKXt2YXIgZT1NYXRoLnJhbmRvbSgpLHI9TWF0aC5mbG9vcihlKnRoaXMuaml0dGVyKnQpO3Q9MD09KDEmTWF0aC5mbG9vcigxMCplKSk/dC1yOnQrcn1yZXR1cm4gMHxNYXRoLm1pbih0LHRoaXMubWF4KX0sci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmF0dGVtcHRzPTB9LHIucHJvdG90eXBlLnNldE1pbj1mdW5jdGlvbih0KXt0aGlzLm1zPXR9LHIucHJvdG90eXBlLnNldE1heD1mdW5jdGlvbih0KXt0aGlzLm1heD10fSxyLnByb3RvdHlwZS5zZXRKaXR0ZXI9ZnVuY3Rpb24odCl7dGhpcy5qaXR0ZXI9dH19XSl9KTsiXSwiZmlsZSI6InNvY2tldC5pby5taW4uanMifQ==

var cspx = function(n) {
  return 88 - 8 * (n - 2);
};

var ars = function(n) {
  return parseFloat((1.2 - (n >= 5 ? (n - 5) * .15 : (n - 5) * .12)).toFixed(4));
};

var ods = function(n) {
  return [.0795 - .006 * n, .1395 - .008 * n, .1995 - .01 * n];
};

var e = function(img) { // check if image is empty
  return img.width == 0 && img.height == 0;
};

var snap = function(n, a, b) {
  return Math.max(0, Math.round((Math.round((n - a) / b) * b + a) * 1000) / 1000);
}

var concatImages = function(arr, overlap) {
  if (!overlap) overlap = 0;
  var canvas = document.createElement('canvas');
  var maxh = arr[0].height,
    w = arr[0].width;
  for (var i = 1; i < arr.length; i++) {
    if (arr[i].height > maxh) maxh = arr[i].height;
    w += arr[i].width - overlap;
  }
  canvas.width = w;
  canvas.height = maxh;
  var x = 0;
  var ctx = canvas.getContext('2d');
  for (i = 0; i < arr.length; i++) {
    ctx.drawImage(arr[i], x, (maxh - arr[i].height) / 2);
    x += arr[i].width - overlap;
  }
  return canvas;
};

var tint = function(img, col) {
  if (col == undefined) return img;
  var canvas = document.createElement('canvas');
  canvas.height = img.height;
  canvas.width = img.width;
  var ctx = canvas.getContext('2d');
  ctx.drawImage(img, 0, 0);
  var w = img.width,
    h = img.height;
  if(!w || !h) return img;
  var imgdata = ctx.getImageData(0, 0, w, h);
  var rgba = imgdata.data;
  //console.log(imgdata.data);
  for (var px = 0, ct = w * h * 4; px < ct; px += 4) {
    rgba[px] *= col[0] / 255;
    rgba[px + 1] *= col[1] / 255;
    rgba[px + 2] *= col[2] / 255;
  }
  ctx.putImageData(imgdata, 0, 0);
  return canvas;
};

var colorToArray = function(s) {
  var color = s.split(',');
  var temp = [];
  for (var i = 0; i < color.length; i++) {
    temp.push(parseFloat(color[i]));
  }
  return temp;
};

var pow = Math.pow;

Array.prototype.equals = function(other) {
  if (this.length !== other.length) return false;
  for (var i = 0; i < this.length; i++) {
    if (this[i] != other[i]) return false;
  }
  return true;
};

var toRGB = function(arr) { // from an array of numbers in range 0-255 to rgb or rgba color string
  var [r, g, b, a] = arr;
  return a === undefined ? 'rgb(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ')' : 'rgba(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ',' + a + ')';
};

var min = function(arr) {
  var m = arr[0];
  for (var i = 1; i < arr.length; i++) {
    if (arr[i] < m) m = arr[i];
  }
  return m;
};

var max = function(arr) {
  var m = arr[0];
  for (var i = 1; i < arr.length; i++) {
    if (arr[i] > m) m = arr[i];
  }
  return m;
};

var sum = function(arr) {
  var r = 0;
  for (var i = 0; i < arr.length; i++) r += arr[i];
  return r;
};

var fa = function(n) {
  var r = 1;
  for (var i = 2; i <= n; i++)
    r *= i;
  return r;
};

var bcoef = function(n, k) {
  return fa(n) / fa(k) / fa(n - k);
};

var spline_len = function(p) {
  var l = 0;
  for (var i = 0; i < p.length - 1; i++) {
    l += dist(p[i], p[i + 1]);
  }
  return l;
};

var lenp = function(p) {
  var n = p.length - 1;
  if (n == 1) return p[0].distanceTo(p[1]);
  var [px, py] = p[0].toArray();
  var l = 0;
  for (var s = 0; s < 101; s++) {
    var t = s / 100;
    var x = 0;
    for (var i = 0; i < n + 1; i++) {
      x += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].x;
    }
    var y = 0;
    for (i = 0; i < n + 1; i++) {
      y += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].y;
    }
    l += new Vector(x, y).distanceTo(new Vector(px, py));
    px = x, py = y;
  }
  return l;
};

var bezier2 = function(p, l) {
  if (l === undefined) l = lenp(p);
  var prec = l / 40;
  var n = p.length - 1;

  function b(t) {
    var x = 0;
    for (var i = 0; i < n + 1; i++) {
      x += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].x;
    }
    var y = 0;
    for (i = 0; i < n + 1; i++) {
      y += bcoef(n, i) * pow(1 - t, n - i) * pow(t, i) * p[i].y;
    }
    return [x, y];
  }
  var arr = [],
    l1 = 0;
  var [px, py] = p[0].toArray();
  var x, y, dx, dy, m, t;
  for (var i = 0; i < Math.floor(l / prec); i++) {
    t = i * prec / l;
    [x, y] = b(t);
    dx = x - px;
    dy = y - py;
    m = Math.sqrt(pow(dx, 2) + pow(dy, 2));
    if (m != 0 && l1 + m >= l) return [arr.concat([
      [px + dx / m * (l1 - l), py + dy / m * (l1 - l)]
    ]), l];
    arr.push([x, y]);
    l1 += m;
    px = x, py = y;
  }
  return [arr, l1];
};

var line = function(p, l) {
  // if (l === undefined) l = -1;
  // if (step === undefined) step = 10;
  var dx = p[1].x - p[0].x,
    dy = p[1].y - p[0].y;
  var m = Math.sqrt(pow(dx, 2) + pow(dy, 2));
  if (l == undefined) l = m;
  dx /= m;
  dy /= m;
  // var a = [];
  // for (var i = 0; i < Math.round(l / step); i++) {
  //   a.push([p[0][0] + dx * i, p[0][1] + dy * i]);
  // }
  return [
    [
      [p[0].x, p[0].y],
      [p[0].x + dx * l, p[0].y + dy * l]
    ], l
  ];
};

var bezier = function(p, l) {
  if (p.length == 2) return line(p, l)[0];
  var arr = [];
  var prev = 0;
  var part, c;
  for (var i = 1; i < p.length + 1; i++) {
    if (i == p.length) {
      part = p.slice(prev, i);
      c = bezier2(part, l);
      arr = arr.concat(c[0]);
    } else if (i < p.length && p[i].equals(p[i - 1])) {
      part = p.slice(prev, i);
      c = part.length == 2 ? line(part) : bezier2(part);
      c[0].pop();
      arr = arr.concat(c[0]);
      l -= c[1];
      prev = i;
    }
  }
  if (arr.length == 0) arr = bezier2(p)[0];
  return arr;
};

var passthrough = function(p, l, step) {
  if (step === undefined) step = 4;
  var [a, b, c] = p;
  var [x1, y1] = p[0].midpoint(p[1]);
  var [x2, y2] = p[1].midpoint(p[2]);
  if (a.y == b.y && b.y == c.y) return line(p, l)[0];
  var m, x, y;
  if (a.y == b.y) {
    m = -(b.x - c.x) / (b.y - c.y);
    x = x1;
    y = m * (x - x2) + y2;
  } else if (b.y == c.y) {
    m = -(b.x - a.x) / (b.y - a.y);
    x = x2;
    y = m * (x - x1) + y1;
  } else {
    var m1 = -(b.x - a.x) / (b.y - a.y),
      m2 = -(b.x - c.x) / (b.y - c.y);
    if (m1 == m2) return line(p, l)[0];
    x = (m1 * x1 - m2 * x2 - y1 + y2) / (m1 - m2);
    y = m1 * (x - x1) + y1;
  }
  var r = new Vector(x,y).distanceTo(a),
    t = l / r,
    t1 = Math.atan2(a.y - y, a.x - x),
    dt = step * t / l,
    d = ((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) < 0 ? -1 : 1;
  //if(p[0][0]==296 && p[1][0]==368) console.log(m1,m2,x1,y1,x2,y2);
  p = [];
  for (var i = 0; i < Math.floor(t / dt); i++) {
    var j = i * d;
    p.push([x + r * Math.cos(t1 + dt * j), y + r * Math.sin(t1 + dt * j)]);
  }
  p.push([x + r * Math.cos(t1 + t * d), y + r * Math.sin(t1 + t * d)]);
  return p;
};

var render_curve = function(p, cs, c1, c2) {
  if (cs === undefined) cs = 72 * 2;
  if (c1 === undefined) c1 = [0, 0, 0];
  if (c2 === undefined) c2 = [1, 1, 1];
  var k = 2.5;
  cs *= 22 / 12;
  var x = [],
    y = [];
  for (var i = 0; i < p.length; i++) {
    x.push(p[i][0] * 2);
    y.push(p[i][1] * 2);
  }
  var minx = min(x),
    miny = min(y),
    maxx = max(x),
    maxy = max(y);
  var w = maxx - minx,
    h = maxy - miny;
  // for(var i = 0; i < y.length; i++){
  //   y[i] -= h;
  // }
  var canvas = document.createElement('canvas');
  canvas.width = Math.ceil(w + cs);
  canvas.height = Math.ceil(h + cs);
  var ctx = canvas.getContext('2d');
  var canvas2 = document.createElement('canvas');
  canvas2.width = Math.ceil(w + cs);
  canvas2.height = Math.ceil(h + cs);
  var ctx2 = canvas2.getContext('2d');
  var a = 0;
  ctx.beginPath();
  ctx2.beginPath();
  ctx.lineCap = ctx2.lineCap = 'round';
  ctx.lineJoin = ctx2.lineJoin = 'round';
  ctx.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
  ctx2.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
  for (i = 1; i < p.length; i++) {
    ctx.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
    ctx2.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
  }
  i = 0;
  while (a < cs / k) {
    ctx.lineWidth = ctx2.lineWidth = cs - a * k;
    if (i == 0) {
      ctx2.strokeStyle = toRGB(c2);
      a += cs / 10 / k;
      ctx2.stroke();
    } else {
      var c = a / cs * k / 4 * 255;
      ctx.strokeStyle = toRGB([c1[0] + c, c1[1] + c, c1[2] + c]);
      a += k;
      ctx.stroke();
      ctx2.globalCompositeOperation = 'destination-out';
      ctx2.stroke();
      ctx2.globalCompositeOperation = 'source-over';
    }
    i++;
  }
  ctx2.globalAlpha = .75;
  ctx2.drawImage(canvas, 0, 0);
  return [canvas2, [minx / 2 - cs / 4, miny / 2 - cs / 4]];
};

// p: array of points
// cs: circle size
// c1: border color
// returns: [[border, body, overlay], [positionx, positiony]]
var render_curve2 = function(p, cs) {
  var csi = cs;
  if (cs === undefined) cs = 72 * 2;
  var k = 2.5;
  cs *= 22 / 12;
  var x = [],
    y = [];
  for (var i = 0; i < p.length; i++) {
    x.push(p[i][0] * 2);
    y.push(p[i][1] * 2);
  }
  var minx = min(x),
    miny = min(y),
    maxx = max(x),
    maxy = max(y);
  var w = maxx - minx,
    h = maxy - miny;
  // for(var i = 0; i < y.length; i++){
  //   y[i] -= h;
  // }
  var overlay = document.createElement('canvas');
  overlay.width = Math.ceil(w + cs);
  overlay.height = Math.ceil(h + cs);
  var ctx = overlay.getContext('2d');
  var border = document.createElement('canvas');
  border.width = Math.ceil(w + cs);
  border.height = Math.ceil(h + cs);
  var ctx2 = border.getContext('2d');
  var body = document.createElement('canvas');
  body.width = Math.ceil(w + cs);
  body.height = Math.ceil(h + cs);
  var ctx3 = body.getContext('2d');
  var a = 0;
  ctx.beginPath();
  ctx2.beginPath();
  ctx3.beginPath();
  ctx.lineCap = ctx2.lineCap = 'round';
  ctx.lineJoin = ctx2.lineJoin = 'round';
  ctx2.lineCap = ctx2.lineCap = 'round';
  ctx2.lineJoin = ctx2.lineJoin = 'round';
  ctx3.lineCap = ctx2.lineCap = 'round';
  ctx3.lineJoin = ctx2.lineJoin = 'round';
  ctx.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
  ctx2.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
  ctx3.moveTo(x[0] - minx + cs / 2, y[0] - miny + cs / 2);
  for (i = 1; i < p.length; i++) {
    ctx.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
    ctx2.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
    ctx3.lineTo(x[i] - minx + cs / 2, y[i] - miny + cs / 2);
  }
  i = 0;
  while (a < cs / k) {
    ctx.lineWidth = ctx2.lineWidth = ctx3.lineWidth = cs - a * k;
    if (i == 0) {
      ctx2.strokeStyle = '#FFF';
      a += cs / 10 / k;
      ctx2.stroke();
    } else {
      var c = a / cs * k / 8;
      ctx.globalAlpha = c;
      ctx.strokeStyle = '#FFF';
      a += k;
      ctx.stroke();
      if (i == 1) {
        ctx3.fillStyle = '#FFF';
        ctx3.fillRect(0, 0, body.width, body.height);
        ctx3.globalCompositeOperation = 'destination-in';
        ctx3.stroke();
      }
      ctx.globalCompositeOperation = 'source-over';
    }
    i++;
  }
  ctx.globalCompositeOperation = 'copy';
  ctx.globalAlpha = .5;
  ctx.drawImage(overlay, 0, 0);
  return [
    [border, body, overlay],
    [minx / 2 - cs / 4, miny / 2 - cs / 4]
  ];
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbnNvL25zb3V0aWxzMi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY3NweCA9IGZ1bmN0aW9uKG4pIHtcclxuICByZXR1cm4gODggLSA4ICogKG4gLSAyKTtcclxufTtcclxuXHJcbnZhciBhcnMgPSBmdW5jdGlvbihuKSB7XHJcbiAgcmV0dXJuIHBhcnNlRmxvYXQoKDEuMiAtIChuID49IDUgPyAobiAtIDUpICogLjE1IDogKG4gLSA1KSAqIC4xMikpLnRvRml4ZWQoNCkpO1xyXG59O1xyXG5cclxudmFyIG9kcyA9IGZ1bmN0aW9uKG4pIHtcclxuICByZXR1cm4gWy4wNzk1IC0gLjAwNiAqIG4sIC4xMzk1IC0gLjAwOCAqIG4sIC4xOTk1IC0gLjAxICogbl07XHJcbn07XHJcblxyXG52YXIgZSA9IGZ1bmN0aW9uKGltZykgeyAvLyBjaGVjayBpZiBpbWFnZSBpcyBlbXB0eVxyXG4gIHJldHVybiBpbWcud2lkdGggPT0gMCAmJiBpbWcuaGVpZ2h0ID09IDA7XHJcbn07XHJcblxyXG52YXIgc25hcCA9IGZ1bmN0aW9uKG4sIGEsIGIpIHtcclxuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZCgoTWF0aC5yb3VuZCgobiAtIGEpIC8gYikgKiBiICsgYSkgKiAxMDAwKSAvIDEwMDApO1xyXG59XHJcblxyXG52YXIgY29uY2F0SW1hZ2VzID0gZnVuY3Rpb24oYXJyLCBvdmVybGFwKSB7XHJcbiAgaWYgKCFvdmVybGFwKSBvdmVybGFwID0gMDtcclxuICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgdmFyIG1heGggPSBhcnJbMF0uaGVpZ2h0LFxyXG4gICAgdyA9IGFyclswXS53aWR0aDtcclxuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKGFycltpXS5oZWlnaHQgPiBtYXhoKSBtYXhoID0gYXJyW2ldLmhlaWdodDtcclxuICAgIHcgKz0gYXJyW2ldLndpZHRoIC0gb3ZlcmxhcDtcclxuICB9XHJcbiAgY2FudmFzLndpZHRoID0gdztcclxuICBjYW52YXMuaGVpZ2h0ID0gbWF4aDtcclxuICB2YXIgeCA9IDA7XHJcbiAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgIGN0eC5kcmF3SW1hZ2UoYXJyW2ldLCB4LCAobWF4aCAtIGFycltpXS5oZWlnaHQpIC8gMik7XHJcbiAgICB4ICs9IGFycltpXS53aWR0aCAtIG92ZXJsYXA7XHJcbiAgfVxyXG4gIHJldHVybiBjYW52YXM7XHJcbn07XHJcblxyXG52YXIgdGludCA9IGZ1bmN0aW9uKGltZywgY29sKSB7XHJcbiAgaWYgKGNvbCA9PSB1bmRlZmluZWQpIHJldHVybiBpbWc7XHJcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xyXG4gIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcclxuICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApO1xyXG4gIHZhciB3ID0gaW1nLndpZHRoLFxyXG4gICAgaCA9IGltZy5oZWlnaHQ7XHJcbiAgaWYoIXcgfHwgIWgpIHJldHVybiBpbWc7XHJcbiAgdmFyIGltZ2RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHcsIGgpO1xyXG4gIHZhciByZ2JhID0gaW1nZGF0YS5kYXRhO1xyXG4gIC8vY29uc29sZS5sb2coaW1nZGF0YS5kYXRhKTtcclxuICBmb3IgKHZhciBweCA9IDAsIGN0ID0gdyAqIGggKiA0OyBweCA8IGN0OyBweCArPSA0KSB7XHJcbiAgICByZ2JhW3B4XSAqPSBjb2xbMF0gLyAyNTU7XHJcbiAgICByZ2JhW3B4ICsgMV0gKj0gY29sWzFdIC8gMjU1O1xyXG4gICAgcmdiYVtweCArIDJdICo9IGNvbFsyXSAvIDI1NTtcclxuICB9XHJcbiAgY3R4LnB1dEltYWdlRGF0YShpbWdkYXRhLCAwLCAwKTtcclxuICByZXR1cm4gY2FudmFzO1xyXG59O1xyXG5cclxudmFyIGNvbG9yVG9BcnJheSA9IGZ1bmN0aW9uKHMpIHtcclxuICB2YXIgY29sb3IgPSBzLnNwbGl0KCcsJyk7XHJcbiAgdmFyIHRlbXAgPSBbXTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbG9yLmxlbmd0aDsgaSsrKSB7XHJcbiAgICB0ZW1wLnB1c2gocGFyc2VGbG9hdChjb2xvcltpXSkpO1xyXG4gIH1cclxuICByZXR1cm4gdGVtcDtcclxufTtcclxuXHJcbnZhciBwb3cgPSBNYXRoLnBvdztcclxuXHJcbkFycmF5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvdGhlcikge1xyXG4gIGlmICh0aGlzLmxlbmd0aCAhPT0gb3RoZXIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAodGhpc1tpXSAhPSBvdGhlcltpXSkgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbnZhciB0b1JHQiA9IGZ1bmN0aW9uKGFycikgeyAvLyBmcm9tIGFuIGFycmF5IG9mIG51bWJlcnMgaW4gcmFuZ2UgMC0yNTUgdG8gcmdiIG9yIHJnYmEgY29sb3Igc3RyaW5nXHJcbiAgdmFyIFtyLCBnLCBiLCBhXSA9IGFycjtcclxuICByZXR1cm4gYSA9PT0gdW5kZWZpbmVkID8gJ3JnYignICsgTWF0aC5yb3VuZChyKSArICcsJyArIE1hdGgucm91bmQoZykgKyAnLCcgKyBNYXRoLnJvdW5kKGIpICsgJyknIDogJ3JnYmEoJyArIE1hdGgucm91bmQocikgKyAnLCcgKyBNYXRoLnJvdW5kKGcpICsgJywnICsgTWF0aC5yb3VuZChiKSArICcsJyArIGEgKyAnKSc7XHJcbn07XHJcblxyXG52YXIgbWluID0gZnVuY3Rpb24oYXJyKSB7XHJcbiAgdmFyIG0gPSBhcnJbMF07XHJcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmIChhcnJbaV0gPCBtKSBtID0gYXJyW2ldO1xyXG4gIH1cclxuICByZXR1cm4gbTtcclxufTtcclxuXHJcbnZhciBtYXggPSBmdW5jdGlvbihhcnIpIHtcclxuICB2YXIgbSA9IGFyclswXTtcclxuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKGFycltpXSA+IG0pIG0gPSBhcnJbaV07XHJcbiAgfVxyXG4gIHJldHVybiBtO1xyXG59O1xyXG5cclxudmFyIHN1bSA9IGZ1bmN0aW9uKGFycikge1xyXG4gIHZhciByID0gMDtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgciArPSBhcnJbaV07XHJcbiAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG52YXIgZmEgPSBmdW5jdGlvbihuKSB7XHJcbiAgdmFyIHIgPSAxO1xyXG4gIGZvciAodmFyIGkgPSAyOyBpIDw9IG47IGkrKylcclxuICAgIHIgKj0gaTtcclxuICByZXR1cm4gcjtcclxufTtcclxuXHJcbnZhciBiY29lZiA9IGZ1bmN0aW9uKG4sIGspIHtcclxuICByZXR1cm4gZmEobikgLyBmYShrKSAvIGZhKG4gLSBrKTtcclxufTtcclxuXHJcbnZhciBzcGxpbmVfbGVuID0gZnVuY3Rpb24ocCkge1xyXG4gIHZhciBsID0gMDtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHAubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICBsICs9IGRpc3QocFtpXSwgcFtpICsgMV0pO1xyXG4gIH1cclxuICByZXR1cm4gbDtcclxufTtcclxuXHJcbnZhciBsZW5wID0gZnVuY3Rpb24ocCkge1xyXG4gIHZhciBuID0gcC5sZW5ndGggLSAxO1xyXG4gIGlmIChuID09IDEpIHJldHVybiBwWzBdLmRpc3RhbmNlVG8ocFsxXSk7XHJcbiAgdmFyIFtweCwgcHldID0gcFswXS50b0FycmF5KCk7XHJcbiAgdmFyIGwgPSAwO1xyXG4gIGZvciAodmFyIHMgPSAwOyBzIDwgMTAxOyBzKyspIHtcclxuICAgIHZhciB0ID0gcyAvIDEwMDtcclxuICAgIHZhciB4ID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbiArIDE7IGkrKykge1xyXG4gICAgICB4ICs9IGJjb2VmKG4sIGkpICogcG93KDEgLSB0LCBuIC0gaSkgKiBwb3codCwgaSkgKiBwW2ldLng7XHJcbiAgICB9XHJcbiAgICB2YXIgeSA9IDA7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbiArIDE7IGkrKykge1xyXG4gICAgICB5ICs9IGJjb2VmKG4sIGkpICogcG93KDEgLSB0LCBuIC0gaSkgKiBwb3codCwgaSkgKiBwW2ldLnk7XHJcbiAgICB9XHJcbiAgICBsICs9IG5ldyBWZWN0b3IoeCwgeSkuZGlzdGFuY2VUbyhuZXcgVmVjdG9yKHB4LCBweSkpO1xyXG4gICAgcHggPSB4LCBweSA9IHk7XHJcbiAgfVxyXG4gIHJldHVybiBsO1xyXG59O1xyXG5cclxudmFyIGJlemllcjIgPSBmdW5jdGlvbihwLCBsKSB7XHJcbiAgaWYgKGwgPT09IHVuZGVmaW5lZCkgbCA9IGxlbnAocCk7XHJcbiAgdmFyIHByZWMgPSBsIC8gNDA7XHJcbiAgdmFyIG4gPSBwLmxlbmd0aCAtIDE7XHJcblxyXG4gIGZ1bmN0aW9uIGIodCkge1xyXG4gICAgdmFyIHggPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuICsgMTsgaSsrKSB7XHJcbiAgICAgIHggKz0gYmNvZWYobiwgaSkgKiBwb3coMSAtIHQsIG4gLSBpKSAqIHBvdyh0LCBpKSAqIHBbaV0ueDtcclxuICAgIH1cclxuICAgIHZhciB5ID0gMDtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBuICsgMTsgaSsrKSB7XHJcbiAgICAgIHkgKz0gYmNvZWYobiwgaSkgKiBwb3coMSAtIHQsIG4gLSBpKSAqIHBvdyh0LCBpKSAqIHBbaV0ueTtcclxuICAgIH1cclxuICAgIHJldHVybiBbeCwgeV07XHJcbiAgfVxyXG4gIHZhciBhcnIgPSBbXSxcclxuICAgIGwxID0gMDtcclxuICB2YXIgW3B4LCBweV0gPSBwWzBdLnRvQXJyYXkoKTtcclxuICB2YXIgeCwgeSwgZHgsIGR5LCBtLCB0O1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5mbG9vcihsIC8gcHJlYyk7IGkrKykge1xyXG4gICAgdCA9IGkgKiBwcmVjIC8gbDtcclxuICAgIFt4LCB5XSA9IGIodCk7XHJcbiAgICBkeCA9IHggLSBweDtcclxuICAgIGR5ID0geSAtIHB5O1xyXG4gICAgbSA9IE1hdGguc3FydChwb3coZHgsIDIpICsgcG93KGR5LCAyKSk7XHJcbiAgICBpZiAobSAhPSAwICYmIGwxICsgbSA+PSBsKSByZXR1cm4gW2Fyci5jb25jYXQoW1xyXG4gICAgICBbcHggKyBkeCAvIG0gKiAobDEgLSBsKSwgcHkgKyBkeSAvIG0gKiAobDEgLSBsKV1cclxuICAgIF0pLCBsXTtcclxuICAgIGFyci5wdXNoKFt4LCB5XSk7XHJcbiAgICBsMSArPSBtO1xyXG4gICAgcHggPSB4LCBweSA9IHk7XHJcbiAgfVxyXG4gIHJldHVybiBbYXJyLCBsMV07XHJcbn07XHJcblxyXG52YXIgbGluZSA9IGZ1bmN0aW9uKHAsIGwpIHtcclxuICAvLyBpZiAobCA9PT0gdW5kZWZpbmVkKSBsID0gLTE7XHJcbiAgLy8gaWYgKHN0ZXAgPT09IHVuZGVmaW5lZCkgc3RlcCA9IDEwO1xyXG4gIHZhciBkeCA9IHBbMV0ueCAtIHBbMF0ueCxcclxuICAgIGR5ID0gcFsxXS55IC0gcFswXS55O1xyXG4gIHZhciBtID0gTWF0aC5zcXJ0KHBvdyhkeCwgMikgKyBwb3coZHksIDIpKTtcclxuICBpZiAobCA9PSB1bmRlZmluZWQpIGwgPSBtO1xyXG4gIGR4IC89IG07XHJcbiAgZHkgLz0gbTtcclxuICAvLyB2YXIgYSA9IFtdO1xyXG4gIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5yb3VuZChsIC8gc3RlcCk7IGkrKykge1xyXG4gIC8vICAgYS5wdXNoKFtwWzBdWzBdICsgZHggKiBpLCBwWzBdWzFdICsgZHkgKiBpXSk7XHJcbiAgLy8gfVxyXG4gIHJldHVybiBbXHJcbiAgICBbXHJcbiAgICAgIFtwWzBdLngsIHBbMF0ueV0sXHJcbiAgICAgIFtwWzBdLnggKyBkeCAqIGwsIHBbMF0ueSArIGR5ICogbF1cclxuICAgIF0sIGxcclxuICBdO1xyXG59O1xyXG5cclxudmFyIGJlemllciA9IGZ1bmN0aW9uKHAsIGwpIHtcclxuICBpZiAocC5sZW5ndGggPT0gMikgcmV0dXJuIGxpbmUocCwgbClbMF07XHJcbiAgdmFyIGFyciA9IFtdO1xyXG4gIHZhciBwcmV2ID0gMDtcclxuICB2YXIgcGFydCwgYztcclxuICBmb3IgKHZhciBpID0gMTsgaSA8IHAubGVuZ3RoICsgMTsgaSsrKSB7XHJcbiAgICBpZiAoaSA9PSBwLmxlbmd0aCkge1xyXG4gICAgICBwYXJ0ID0gcC5zbGljZShwcmV2LCBpKTtcclxuICAgICAgYyA9IGJlemllcjIocGFydCwgbCk7XHJcbiAgICAgIGFyciA9IGFyci5jb25jYXQoY1swXSk7XHJcbiAgICB9IGVsc2UgaWYgKGkgPCBwLmxlbmd0aCAmJiBwW2ldLmVxdWFscyhwW2kgLSAxXSkpIHtcclxuICAgICAgcGFydCA9IHAuc2xpY2UocHJldiwgaSk7XHJcbiAgICAgIGMgPSBwYXJ0Lmxlbmd0aCA9PSAyID8gbGluZShwYXJ0KSA6IGJlemllcjIocGFydCk7XHJcbiAgICAgIGNbMF0ucG9wKCk7XHJcbiAgICAgIGFyciA9IGFyci5jb25jYXQoY1swXSk7XHJcbiAgICAgIGwgLT0gY1sxXTtcclxuICAgICAgcHJldiA9IGk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmIChhcnIubGVuZ3RoID09IDApIGFyciA9IGJlemllcjIocClbMF07XHJcbiAgcmV0dXJuIGFycjtcclxufTtcclxuXHJcbnZhciBwYXNzdGhyb3VnaCA9IGZ1bmN0aW9uKHAsIGwsIHN0ZXApIHtcclxuICBpZiAoc3RlcCA9PT0gdW5kZWZpbmVkKSBzdGVwID0gNDtcclxuICB2YXIgW2EsIGIsIGNdID0gcDtcclxuICB2YXIgW3gxLCB5MV0gPSBwWzBdLm1pZHBvaW50KHBbMV0pO1xyXG4gIHZhciBbeDIsIHkyXSA9IHBbMV0ubWlkcG9pbnQocFsyXSk7XHJcbiAgaWYgKGEueSA9PSBiLnkgJiYgYi55ID09IGMueSkgcmV0dXJuIGxpbmUocCwgbClbMF07XHJcbiAgdmFyIG0sIHgsIHk7XHJcbiAgaWYgKGEueSA9PSBiLnkpIHtcclxuICAgIG0gPSAtKGIueCAtIGMueCkgLyAoYi55IC0gYy55KTtcclxuICAgIHggPSB4MTtcclxuICAgIHkgPSBtICogKHggLSB4MikgKyB5MjtcclxuICB9IGVsc2UgaWYgKGIueSA9PSBjLnkpIHtcclxuICAgIG0gPSAtKGIueCAtIGEueCkgLyAoYi55IC0gYS55KTtcclxuICAgIHggPSB4MjtcclxuICAgIHkgPSBtICogKHggLSB4MSkgKyB5MTtcclxuICB9IGVsc2Uge1xyXG4gICAgdmFyIG0xID0gLShiLnggLSBhLngpIC8gKGIueSAtIGEueSksXHJcbiAgICAgIG0yID0gLShiLnggLSBjLngpIC8gKGIueSAtIGMueSk7XHJcbiAgICBpZiAobTEgPT0gbTIpIHJldHVybiBsaW5lKHAsIGwpWzBdO1xyXG4gICAgeCA9IChtMSAqIHgxIC0gbTIgKiB4MiAtIHkxICsgeTIpIC8gKG0xIC0gbTIpO1xyXG4gICAgeSA9IG0xICogKHggLSB4MSkgKyB5MTtcclxuICB9XHJcbiAgdmFyIHIgPSBuZXcgVmVjdG9yKHgseSkuZGlzdGFuY2VUbyhhKSxcclxuICAgIHQgPSBsIC8gcixcclxuICAgIHQxID0gTWF0aC5hdGFuMihhLnkgLSB5LCBhLnggLSB4KSxcclxuICAgIGR0ID0gc3RlcCAqIHQgLyBsLFxyXG4gICAgZCA9ICgoYi54IC0gYS54KSAqIChjLnkgLSBhLnkpIC0gKGIueSAtIGEueSkgKiAoYy54IC0gYS54KSkgPCAwID8gLTEgOiAxO1xyXG4gIC8vaWYocFswXVswXT09Mjk2ICYmIHBbMV1bMF09PTM2OCkgY29uc29sZS5sb2cobTEsbTIseDEseTEseDIseTIpO1xyXG4gIHAgPSBbXTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGguZmxvb3IodCAvIGR0KTsgaSsrKSB7XHJcbiAgICB2YXIgaiA9IGkgKiBkO1xyXG4gICAgcC5wdXNoKFt4ICsgciAqIE1hdGguY29zKHQxICsgZHQgKiBqKSwgeSArIHIgKiBNYXRoLnNpbih0MSArIGR0ICogaildKTtcclxuICB9XHJcbiAgcC5wdXNoKFt4ICsgciAqIE1hdGguY29zKHQxICsgdCAqIGQpLCB5ICsgciAqIE1hdGguc2luKHQxICsgdCAqIGQpXSk7XHJcbiAgcmV0dXJuIHA7XHJcbn07XHJcblxyXG52YXIgcmVuZGVyX2N1cnZlID0gZnVuY3Rpb24ocCwgY3MsIGMxLCBjMikge1xyXG4gIGlmIChjcyA9PT0gdW5kZWZpbmVkKSBjcyA9IDcyICogMjtcclxuICBpZiAoYzEgPT09IHVuZGVmaW5lZCkgYzEgPSBbMCwgMCwgMF07XHJcbiAgaWYgKGMyID09PSB1bmRlZmluZWQpIGMyID0gWzEsIDEsIDFdO1xyXG4gIHZhciBrID0gMi41O1xyXG4gIGNzICo9IDIyIC8gMTI7XHJcbiAgdmFyIHggPSBbXSxcclxuICAgIHkgPSBbXTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgIHgucHVzaChwW2ldWzBdICogMik7XHJcbiAgICB5LnB1c2gocFtpXVsxXSAqIDIpO1xyXG4gIH1cclxuICB2YXIgbWlueCA9IG1pbih4KSxcclxuICAgIG1pbnkgPSBtaW4oeSksXHJcbiAgICBtYXh4ID0gbWF4KHgpLFxyXG4gICAgbWF4eSA9IG1heCh5KTtcclxuICB2YXIgdyA9IG1heHggLSBtaW54LFxyXG4gICAgaCA9IG1heHkgLSBtaW55O1xyXG4gIC8vIGZvcih2YXIgaSA9IDA7IGkgPCB5Lmxlbmd0aDsgaSsrKXtcclxuICAvLyAgIHlbaV0gLT0gaDtcclxuICAvLyB9XHJcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gIGNhbnZhcy53aWR0aCA9IE1hdGguY2VpbCh3ICsgY3MpO1xyXG4gIGNhbnZhcy5oZWlnaHQgPSBNYXRoLmNlaWwoaCArIGNzKTtcclxuICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgdmFyIGNhbnZhczIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICBjYW52YXMyLndpZHRoID0gTWF0aC5jZWlsKHcgKyBjcyk7XHJcbiAgY2FudmFzMi5oZWlnaHQgPSBNYXRoLmNlaWwoaCArIGNzKTtcclxuICB2YXIgY3R4MiA9IGNhbnZhczIuZ2V0Q29udGV4dCgnMmQnKTtcclxuICB2YXIgYSA9IDA7XHJcbiAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gIGN0eDIuYmVnaW5QYXRoKCk7XHJcbiAgY3R4LmxpbmVDYXAgPSBjdHgyLmxpbmVDYXAgPSAncm91bmQnO1xyXG4gIGN0eC5saW5lSm9pbiA9IGN0eDIubGluZUpvaW4gPSAncm91bmQnO1xyXG4gIGN0eC5tb3ZlVG8oeFswXSAtIG1pbnggKyBjcyAvIDIsIHlbMF0gLSBtaW55ICsgY3MgLyAyKTtcclxuICBjdHgyLm1vdmVUbyh4WzBdIC0gbWlueCArIGNzIC8gMiwgeVswXSAtIG1pbnkgKyBjcyAvIDIpO1xyXG4gIGZvciAoaSA9IDE7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjdHgubGluZVRvKHhbaV0gLSBtaW54ICsgY3MgLyAyLCB5W2ldIC0gbWlueSArIGNzIC8gMik7XHJcbiAgICBjdHgyLmxpbmVUbyh4W2ldIC0gbWlueCArIGNzIC8gMiwgeVtpXSAtIG1pbnkgKyBjcyAvIDIpO1xyXG4gIH1cclxuICBpID0gMDtcclxuICB3aGlsZSAoYSA8IGNzIC8gaykge1xyXG4gICAgY3R4LmxpbmVXaWR0aCA9IGN0eDIubGluZVdpZHRoID0gY3MgLSBhICogaztcclxuICAgIGlmIChpID09IDApIHtcclxuICAgICAgY3R4Mi5zdHJva2VTdHlsZSA9IHRvUkdCKGMyKTtcclxuICAgICAgYSArPSBjcyAvIDEwIC8gaztcclxuICAgICAgY3R4Mi5zdHJva2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBjID0gYSAvIGNzICogayAvIDQgKiAyNTU7XHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRvUkdCKFtjMVswXSArIGMsIGMxWzFdICsgYywgYzFbMl0gKyBjXSk7XHJcbiAgICAgIGEgKz0gaztcclxuICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICBjdHgyLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdXQnO1xyXG4gICAgICBjdHgyLnN0cm9rZSgpO1xyXG4gICAgICBjdHgyLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XHJcbiAgICB9XHJcbiAgICBpKys7XHJcbiAgfVxyXG4gIGN0eDIuZ2xvYmFsQWxwaGEgPSAuNzU7XHJcbiAgY3R4Mi5kcmF3SW1hZ2UoY2FudmFzLCAwLCAwKTtcclxuICByZXR1cm4gW2NhbnZhczIsIFttaW54IC8gMiAtIGNzIC8gNCwgbWlueSAvIDIgLSBjcyAvIDRdXTtcclxufTtcclxuXHJcbi8vIHA6IGFycmF5IG9mIHBvaW50c1xyXG4vLyBjczogY2lyY2xlIHNpemVcclxuLy8gYzE6IGJvcmRlciBjb2xvclxyXG4vLyByZXR1cm5zOiBbW2JvcmRlciwgYm9keSwgb3ZlcmxheV0sIFtwb3NpdGlvbngsIHBvc2l0aW9ueV1dXHJcbnZhciByZW5kZXJfY3VydmUyID0gZnVuY3Rpb24ocCwgY3MpIHtcclxuICB2YXIgY3NpID0gY3M7XHJcbiAgaWYgKGNzID09PSB1bmRlZmluZWQpIGNzID0gNzIgKiAyO1xyXG4gIHZhciBrID0gMi41O1xyXG4gIGNzICo9IDIyIC8gMTI7XHJcbiAgdmFyIHggPSBbXSxcclxuICAgIHkgPSBbXTtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgIHgucHVzaChwW2ldWzBdICogMik7XHJcbiAgICB5LnB1c2gocFtpXVsxXSAqIDIpO1xyXG4gIH1cclxuICB2YXIgbWlueCA9IG1pbih4KSxcclxuICAgIG1pbnkgPSBtaW4oeSksXHJcbiAgICBtYXh4ID0gbWF4KHgpLFxyXG4gICAgbWF4eSA9IG1heCh5KTtcclxuICB2YXIgdyA9IG1heHggLSBtaW54LFxyXG4gICAgaCA9IG1heHkgLSBtaW55O1xyXG4gIC8vIGZvcih2YXIgaSA9IDA7IGkgPCB5Lmxlbmd0aDsgaSsrKXtcclxuICAvLyAgIHlbaV0gLT0gaDtcclxuICAvLyB9XHJcbiAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICBvdmVybGF5LndpZHRoID0gTWF0aC5jZWlsKHcgKyBjcyk7XHJcbiAgb3ZlcmxheS5oZWlnaHQgPSBNYXRoLmNlaWwoaCArIGNzKTtcclxuICB2YXIgY3R4ID0gb3ZlcmxheS5nZXRDb250ZXh0KCcyZCcpO1xyXG4gIHZhciBib3JkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICBib3JkZXIud2lkdGggPSBNYXRoLmNlaWwodyArIGNzKTtcclxuICBib3JkZXIuaGVpZ2h0ID0gTWF0aC5jZWlsKGggKyBjcyk7XHJcbiAgdmFyIGN0eDIgPSBib3JkZXIuZ2V0Q29udGV4dCgnMmQnKTtcclxuICB2YXIgYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gIGJvZHkud2lkdGggPSBNYXRoLmNlaWwodyArIGNzKTtcclxuICBib2R5LmhlaWdodCA9IE1hdGguY2VpbChoICsgY3MpO1xyXG4gIHZhciBjdHgzID0gYm9keS5nZXRDb250ZXh0KCcyZCcpO1xyXG4gIHZhciBhID0gMDtcclxuICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgY3R4Mi5iZWdpblBhdGgoKTtcclxuICBjdHgzLmJlZ2luUGF0aCgpO1xyXG4gIGN0eC5saW5lQ2FwID0gY3R4Mi5saW5lQ2FwID0gJ3JvdW5kJztcclxuICBjdHgubGluZUpvaW4gPSBjdHgyLmxpbmVKb2luID0gJ3JvdW5kJztcclxuICBjdHgyLmxpbmVDYXAgPSBjdHgyLmxpbmVDYXAgPSAncm91bmQnO1xyXG4gIGN0eDIubGluZUpvaW4gPSBjdHgyLmxpbmVKb2luID0gJ3JvdW5kJztcclxuICBjdHgzLmxpbmVDYXAgPSBjdHgyLmxpbmVDYXAgPSAncm91bmQnO1xyXG4gIGN0eDMubGluZUpvaW4gPSBjdHgyLmxpbmVKb2luID0gJ3JvdW5kJztcclxuICBjdHgubW92ZVRvKHhbMF0gLSBtaW54ICsgY3MgLyAyLCB5WzBdIC0gbWlueSArIGNzIC8gMik7XHJcbiAgY3R4Mi5tb3ZlVG8oeFswXSAtIG1pbnggKyBjcyAvIDIsIHlbMF0gLSBtaW55ICsgY3MgLyAyKTtcclxuICBjdHgzLm1vdmVUbyh4WzBdIC0gbWlueCArIGNzIC8gMiwgeVswXSAtIG1pbnkgKyBjcyAvIDIpO1xyXG4gIGZvciAoaSA9IDE7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjdHgubGluZVRvKHhbaV0gLSBtaW54ICsgY3MgLyAyLCB5W2ldIC0gbWlueSArIGNzIC8gMik7XHJcbiAgICBjdHgyLmxpbmVUbyh4W2ldIC0gbWlueCArIGNzIC8gMiwgeVtpXSAtIG1pbnkgKyBjcyAvIDIpO1xyXG4gICAgY3R4My5saW5lVG8oeFtpXSAtIG1pbnggKyBjcyAvIDIsIHlbaV0gLSBtaW55ICsgY3MgLyAyKTtcclxuICB9XHJcbiAgaSA9IDA7XHJcbiAgd2hpbGUgKGEgPCBjcyAvIGspIHtcclxuICAgIGN0eC5saW5lV2lkdGggPSBjdHgyLmxpbmVXaWR0aCA9IGN0eDMubGluZVdpZHRoID0gY3MgLSBhICogaztcclxuICAgIGlmIChpID09IDApIHtcclxuICAgICAgY3R4Mi5zdHJva2VTdHlsZSA9ICcjRkZGJztcclxuICAgICAgYSArPSBjcyAvIDEwIC8gaztcclxuICAgICAgY3R4Mi5zdHJva2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciBjID0gYSAvIGNzICogayAvIDg7XHJcbiAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IGM7XHJcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjRkZGJztcclxuICAgICAgYSArPSBrO1xyXG4gICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgIGlmIChpID09IDEpIHtcclxuICAgICAgICBjdHgzLmZpbGxTdHlsZSA9ICcjRkZGJztcclxuICAgICAgICBjdHgzLmZpbGxSZWN0KDAsIDAsIGJvZHkud2lkdGgsIGJvZHkuaGVpZ2h0KTtcclxuICAgICAgICBjdHgzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1pbic7XHJcbiAgICAgICAgY3R4My5zdHJva2UoKTtcclxuICAgICAgfVxyXG4gICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcclxuICAgIH1cclxuICAgIGkrKztcclxuICB9XHJcbiAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb3B5JztcclxuICBjdHguZ2xvYmFsQWxwaGEgPSAuNTtcclxuICBjdHguZHJhd0ltYWdlKG92ZXJsYXksIDAsIDApO1xyXG4gIHJldHVybiBbXHJcbiAgICBbYm9yZGVyLCBib2R5LCBvdmVybGF5XSxcclxuICAgIFttaW54IC8gMiAtIGNzIC8gNCwgbWlueSAvIDIgLSBjcyAvIDRdXHJcbiAgXTtcclxufTsiXSwiZmlsZSI6Im5zb3V0aWxzMi5qcyJ9

(function() {
	var lastTime = 0;
	var vendors = ["ms", "moz", "webkit", "o"];
	for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
		window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"];
		window.cancelAnimationFrame = window[vendors[x] + "CancelAnimationFrame"] ||
			window[vendors[x] + "CancelRequestAnimationFrame"];
	}

	if (!window.requestAnimationFrame)
		window.requestAnimationFrame = function(callback, element) {
			var currTime = new Date().getTime();
			var timeToCall = Math.max(0, 16 - (currTime - lastTime));
			var id = window.setTimeout(function() {
					callback(currTime + timeToCall);
				},
				timeToCall);
			lastTime = currTime + timeToCall;
			return id;
		};

	if (!window.cancelAnimationFrame)
		window.cancelAnimationFrame = function(id) {
			clearTimeout(id);
		};
}());

String.prototype.pad = function(length, fill) {
	fill = fill || "0";
	var padded = Array(length + 1).join("0") + this;
	return padded.substring(padded.length - length);
};

Array.prototype.equals = function(other) {
	if (this.length !== other.length) return false;
	for (var i = 0; i < this.length; i++) {
		if (this[i] != other[i]) return false;
	}
	return true;
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL1BvbHlmaWxsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuXHR2YXIgbGFzdFRpbWUgPSAwO1xyXG5cdHZhciB2ZW5kb3JzID0gW1wibXNcIiwgXCJtb3pcIiwgXCJ3ZWJraXRcIiwgXCJvXCJdO1xyXG5cdGZvciAodmFyIHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xyXG5cdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XHJcblx0XHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArIFwiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIl0gfHxcclxuXHRcdFx0d2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZVwiXTtcclxuXHR9XHJcblxyXG5cdGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcclxuXHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaywgZWxlbWVudCkge1xyXG5cdFx0XHR2YXIgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdFx0dmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XHJcblx0XHRcdHZhciBpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0Y2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHRpbWVUb0NhbGwpO1xyXG5cdFx0XHRsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcclxuXHRcdFx0cmV0dXJuIGlkO1xyXG5cdFx0fTtcclxuXHJcblx0aWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXHJcblx0XHR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQoaWQpO1xyXG5cdFx0fTtcclxufSgpKTtcclxuXHJcblN0cmluZy5wcm90b3R5cGUucGFkID0gZnVuY3Rpb24obGVuZ3RoLCBmaWxsKSB7XHJcblx0ZmlsbCA9IGZpbGwgfHwgXCIwXCI7XHJcblx0dmFyIHBhZGRlZCA9IEFycmF5KGxlbmd0aCArIDEpLmpvaW4oXCIwXCIpICsgdGhpcztcclxuXHRyZXR1cm4gcGFkZGVkLnN1YnN0cmluZyhwYWRkZWQubGVuZ3RoIC0gbGVuZ3RoKTtcclxufTtcclxuXHJcbkFycmF5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvdGhlcikge1xyXG5cdGlmICh0aGlzLmxlbmd0aCAhPT0gb3RoZXIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAodGhpc1tpXSAhPSBvdGhlcltpXSkgcmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufTsiXSwiZmlsZSI6IlBvbHlmaWxsLmpzIn0=

var Editor = Editor || {};

class Color {
	static hex(red, green, blue) {
		red = Math.floor(Math.min(red, 255)),
			green = Math.floor(Math.min(green, 255)),
			blue = Math.floor(Math.min(blue, 255));

		var redH = red.toString(16),
			greenH = green.toString(16),
			blueH = blue.toString(16);

		return redH.pad(2) + greenH.pad(2) + blueH.pad(2);
	}
	static fromArray(colors) {
		return new Color(colors[0], colors[1], colors[2]);
	}
	constructor(_red, _green, _blue) {
		this.red = parseFloat(_red);
		this.green = parseFloat(_green);
		this.blue = parseFloat(_blue);
	}
	hex() {
		return Color.hex(this.red, this.green, this.blue);
	}

	toArray() {
		return [this.red, this.green, this.blue];
	}
}

if (typeof module !== "undefined") {
	module.exports = Color;
} else {
	window.Color = Editor.Color = Color;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL0NvbG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBFZGl0b3IgPSBFZGl0b3IgfHwge307XHJcblxyXG5jbGFzcyBDb2xvciB7XHJcblx0c3RhdGljIGhleChyZWQsIGdyZWVuLCBibHVlKSB7XHJcblx0XHRyZWQgPSBNYXRoLmZsb29yKE1hdGgubWluKHJlZCwgMjU1KSksXHJcblx0XHRcdGdyZWVuID0gTWF0aC5mbG9vcihNYXRoLm1pbihncmVlbiwgMjU1KSksXHJcblx0XHRcdGJsdWUgPSBNYXRoLmZsb29yKE1hdGgubWluKGJsdWUsIDI1NSkpO1xyXG5cclxuXHRcdHZhciByZWRIID0gcmVkLnRvU3RyaW5nKDE2KSxcclxuXHRcdFx0Z3JlZW5IID0gZ3JlZW4udG9TdHJpbmcoMTYpLFxyXG5cdFx0XHRibHVlSCA9IGJsdWUudG9TdHJpbmcoMTYpO1xyXG5cclxuXHRcdHJldHVybiByZWRILnBhZCgyKSArIGdyZWVuSC5wYWQoMikgKyBibHVlSC5wYWQoMik7XHJcblx0fVxyXG5cdHN0YXRpYyBmcm9tQXJyYXkoY29sb3JzKSB7XHJcblx0XHRyZXR1cm4gbmV3IENvbG9yKGNvbG9yc1swXSwgY29sb3JzWzFdLCBjb2xvcnNbMl0pO1xyXG5cdH1cclxuXHRjb25zdHJ1Y3RvcihfcmVkLCBfZ3JlZW4sIF9ibHVlKSB7XHJcblx0XHR0aGlzLnJlZCA9IHBhcnNlRmxvYXQoX3JlZCk7XHJcblx0XHR0aGlzLmdyZWVuID0gcGFyc2VGbG9hdChfZ3JlZW4pO1xyXG5cdFx0dGhpcy5ibHVlID0gcGFyc2VGbG9hdChfYmx1ZSk7XHJcblx0fVxyXG5cdGhleCgpIHtcclxuXHRcdHJldHVybiBDb2xvci5oZXgodGhpcy5yZWQsIHRoaXMuZ3JlZW4sIHRoaXMuYmx1ZSk7XHJcblx0fVxyXG5cclxuXHR0b0FycmF5KCkge1xyXG5cdFx0cmV0dXJuIFt0aGlzLnJlZCwgdGhpcy5ncmVlbiwgdGhpcy5ibHVlXTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBDb2xvcjtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuQ29sb3IgPSBFZGl0b3IuQ29sb3IgPSBDb2xvcjtcclxufSJdLCJmaWxlIjoiQ29sb3IuanMifQ==

var Editor = Editor || {};

var array_values = function (array) {
	var out = [];
	for (var key in array) out.push(array[key]);
	return out;
}

class Math2 {
	static Cpn(p, n) {
		if (p < 0 || p > n)
			return 0;
		var p = Math.min(p, n - p),
			out = 1;
		for (var i = 1; i < p + 1; i += 1)
			out = out * (n - p + i) / i;
		return out;
	}
	static distanceFromPoints(array) {
		var distance = 0;
		for (var i = 1; i < array.length; i += 1) {
			distance += array[i].distanceTo(array[i - 1]);
		}
		return distance;
	}
	static isLeft(a, b, c) {
		return ((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x)) < 0;
	}
	static getCircumCircle(p1, p2, p3) {
		var x1 = p1.x,
			y1 = p1.y,
			x2 = p2.x,
			y2 = p2.y,
			x3 = p3.x,
			y3 = p3.y;
		var D = 2 * (x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2));
		var Ux = ((x1 * x1 + y1 * y1) * (y2 - y3) + (x2 * x2 + y2 * y2) * (y3 - y1) + (x3 * x3 + y3 * y3) * (y1 - y2)) / D;
		var Uy = ((x1 * x1 + y1 * y1) * (x3 - x2) + (x2 * x2 + y2 * y2) * (x1 - x3) + (x3 * x3 + y3 * y3) * (x2 - x1)) / D;
		var center = new Vector(Ux, Uy);
		var r = center.distanceTo(new Vector(x1, y1));
		return [center, r];
	}
	static pointAtDistance(array, distance) {
		var current_distance = 0,
			last_distance = 0,
			coord, angle, cart, new_distance;
		if (array.length < 2)
			return [new Vector(0, 0), new Vector(0, 0)];
		if (distance == 0) {
			var angle = array[0].angleTo(array[1]);
			return [array[0], new Vector(angle, 0)];
		}
		if (Math2.distanceFromPoints(array) <= distance) {
			var angle = array[array.length - 2].angleTo(array[array.length - 1]);
			return [array[array.length - 1], new Vector(angle, array.length - 2)];
		}
		for (var i = 0; i < array.length - 1; i += 1) {
			new_distance = array[i].distanceTo(array[i + 1]);
			current_distance += new_distance;
			if (distance <= current_distance) break;
		}
		current_distance -= new_distance;
		if (distance == current_distance) {
			coord = array[i];
			angle = array[i].angleTo(array[i + 1]);
		} else {
			angle = array[i].angleTo(array[i + 1]);
			cart = new Vector(distance - current_distance, angle);
			if (array[i].x > array[i + 1].x)
				coord = new Vector(array[i].x - cart.x, array[i].y - cart.y);
			else
				coord = new Vector(array[i].x + cart.x, array[i].y + cart.y);
		}
		return [coord, new Vector(angle, i)];
	}
	static pointOnLine(p1, p2, length) {
		var fullLength = p1.distanceTo(p2);
		var n = fullLength - length;

		var x = (n * p1.x + length * p2.x) / fullLength;
		var y = (n * p1.y + length * p2.y) / fullLength;
		return new Vector(x, y);
	}
	static rotate(center, point, angle) {
		var nx = Math.cos(angle),
			ny = Math.sin(angle);
		return new Vector(nx * (point.x - center.x) - ny * (point.y - center.y) + center.x, ny * (point.x - center.x) + nx * (point.y - center.y) + center.y);
	}
}

class Bezier {
	constructor(points) {
		this.points = points;
		this.order = points.length;

		this.step = 0.0025 / this.order;
		this.pos = {};
		this.calcPoints();
	}
	at(t) {
		if (typeof this.pos[t] !== "undefined") return this.pos[t];
		var x = 0,
			y = 0;
		var n = this.order - 1;
		for (var i = 0; i <= n; i += 1) {
			var c = Math2.Cpn(i, n) * Math.pow((1 - t), (n - i)) * Math.pow(t, i);
			x += c * this.points[i].x;
			y += c * this.points[i].y;
		}
		this.pos[t] = new Vector(x, y);
		return new Vector(x, y);
	}
	calcPoints() {
		if (Object.keys(this.pos).length)
			return;
		this.pxLength = 0;
		var prev = this.at(0),
			current;
		for (var i = 0; i < 1 + this.step; i += this.step) {
			current = this.at(i);
			this.pxLength += prev.distanceTo(current);
			prev = current;
		}
	}
	pointAtDistance(dist) {
		switch (this.order) {
			case 0:
				return false;
			case 1:
				return this.points[0];
			default:
				this.calcPoints();
				return Math2.pointAtDistance(array_values(this.pos), dist)[0];
		}
	}
}

if (typeof module !== "undefined") {
	module.exports = Math2;
	module.exports.Bezier = Bezier;
} else {
	window.Math2 = Editor.Math2 = Math2;
	window.Bezier = Editor.Bezier = Bezier;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL01hdGgyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBFZGl0b3IgPSBFZGl0b3IgfHwge307XHJcblxyXG52YXIgYXJyYXlfdmFsdWVzID0gZnVuY3Rpb24gKGFycmF5KSB7XHJcblx0dmFyIG91dCA9IFtdO1xyXG5cdGZvciAodmFyIGtleSBpbiBhcnJheSkgb3V0LnB1c2goYXJyYXlba2V5XSk7XHJcblx0cmV0dXJuIG91dDtcclxufVxyXG5cclxuY2xhc3MgTWF0aDIge1xyXG5cdHN0YXRpYyBDcG4ocCwgbikge1xyXG5cdFx0aWYgKHAgPCAwIHx8IHAgPiBuKVxyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdHZhciBwID0gTWF0aC5taW4ocCwgbiAtIHApLFxyXG5cdFx0XHRvdXQgPSAxO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCBwICsgMTsgaSArPSAxKVxyXG5cdFx0XHRvdXQgPSBvdXQgKiAobiAtIHAgKyBpKSAvIGk7XHJcblx0XHRyZXR1cm4gb3V0O1xyXG5cdH1cclxuXHRzdGF0aWMgZGlzdGFuY2VGcm9tUG9pbnRzKGFycmF5KSB7XHJcblx0XHR2YXIgZGlzdGFuY2UgPSAwO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCBhcnJheS5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHRkaXN0YW5jZSArPSBhcnJheVtpXS5kaXN0YW5jZVRvKGFycmF5W2kgLSAxXSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZGlzdGFuY2U7XHJcblx0fVxyXG5cdHN0YXRpYyBpc0xlZnQoYSwgYiwgYykge1xyXG5cdFx0cmV0dXJuICgoYi54IC0gYS54KSAqIChjLnkgLSBhLnkpIC0gKGIueSAtIGEueSkgKiAoYy54IC0gYS54KSkgPCAwO1xyXG5cdH1cclxuXHRzdGF0aWMgZ2V0Q2lyY3VtQ2lyY2xlKHAxLCBwMiwgcDMpIHtcclxuXHRcdHZhciB4MSA9IHAxLngsXHJcblx0XHRcdHkxID0gcDEueSxcclxuXHRcdFx0eDIgPSBwMi54LFxyXG5cdFx0XHR5MiA9IHAyLnksXHJcblx0XHRcdHgzID0gcDMueCxcclxuXHRcdFx0eTMgPSBwMy55O1xyXG5cdFx0dmFyIEQgPSAyICogKHgxICogKHkyIC0geTMpICsgeDIgKiAoeTMgLSB5MSkgKyB4MyAqICh5MSAtIHkyKSk7XHJcblx0XHR2YXIgVXggPSAoKHgxICogeDEgKyB5MSAqIHkxKSAqICh5MiAtIHkzKSArICh4MiAqIHgyICsgeTIgKiB5MikgKiAoeTMgLSB5MSkgKyAoeDMgKiB4MyArIHkzICogeTMpICogKHkxIC0geTIpKSAvIEQ7XHJcblx0XHR2YXIgVXkgPSAoKHgxICogeDEgKyB5MSAqIHkxKSAqICh4MyAtIHgyKSArICh4MiAqIHgyICsgeTIgKiB5MikgKiAoeDEgLSB4MykgKyAoeDMgKiB4MyArIHkzICogeTMpICogKHgyIC0geDEpKSAvIEQ7XHJcblx0XHR2YXIgY2VudGVyID0gbmV3IFZlY3RvcihVeCwgVXkpO1xyXG5cdFx0dmFyIHIgPSBjZW50ZXIuZGlzdGFuY2VUbyhuZXcgVmVjdG9yKHgxLCB5MSkpO1xyXG5cdFx0cmV0dXJuIFtjZW50ZXIsIHJdO1xyXG5cdH1cclxuXHRzdGF0aWMgcG9pbnRBdERpc3RhbmNlKGFycmF5LCBkaXN0YW5jZSkge1xyXG5cdFx0dmFyIGN1cnJlbnRfZGlzdGFuY2UgPSAwLFxyXG5cdFx0XHRsYXN0X2Rpc3RhbmNlID0gMCxcclxuXHRcdFx0Y29vcmQsIGFuZ2xlLCBjYXJ0LCBuZXdfZGlzdGFuY2U7XHJcblx0XHRpZiAoYXJyYXkubGVuZ3RoIDwgMilcclxuXHRcdFx0cmV0dXJuIFtuZXcgVmVjdG9yKDAsIDApLCBuZXcgVmVjdG9yKDAsIDApXTtcclxuXHRcdGlmIChkaXN0YW5jZSA9PSAwKSB7XHJcblx0XHRcdHZhciBhbmdsZSA9IGFycmF5WzBdLmFuZ2xlVG8oYXJyYXlbMV0pO1xyXG5cdFx0XHRyZXR1cm4gW2FycmF5WzBdLCBuZXcgVmVjdG9yKGFuZ2xlLCAwKV07XHJcblx0XHR9XHJcblx0XHRpZiAoTWF0aDIuZGlzdGFuY2VGcm9tUG9pbnRzKGFycmF5KSA8PSBkaXN0YW5jZSkge1xyXG5cdFx0XHR2YXIgYW5nbGUgPSBhcnJheVthcnJheS5sZW5ndGggLSAyXS5hbmdsZVRvKGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdKTtcclxuXHRcdFx0cmV0dXJuIFthcnJheVthcnJheS5sZW5ndGggLSAxXSwgbmV3IFZlY3RvcihhbmdsZSwgYXJyYXkubGVuZ3RoIC0gMildO1xyXG5cdFx0fVxyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGggLSAxOyBpICs9IDEpIHtcclxuXHRcdFx0bmV3X2Rpc3RhbmNlID0gYXJyYXlbaV0uZGlzdGFuY2VUbyhhcnJheVtpICsgMV0pO1xyXG5cdFx0XHRjdXJyZW50X2Rpc3RhbmNlICs9IG5ld19kaXN0YW5jZTtcclxuXHRcdFx0aWYgKGRpc3RhbmNlIDw9IGN1cnJlbnRfZGlzdGFuY2UpIGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0Y3VycmVudF9kaXN0YW5jZSAtPSBuZXdfZGlzdGFuY2U7XHJcblx0XHRpZiAoZGlzdGFuY2UgPT0gY3VycmVudF9kaXN0YW5jZSkge1xyXG5cdFx0XHRjb29yZCA9IGFycmF5W2ldO1xyXG5cdFx0XHRhbmdsZSA9IGFycmF5W2ldLmFuZ2xlVG8oYXJyYXlbaSArIDFdKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGFuZ2xlID0gYXJyYXlbaV0uYW5nbGVUbyhhcnJheVtpICsgMV0pO1xyXG5cdFx0XHRjYXJ0ID0gbmV3IFZlY3RvcihkaXN0YW5jZSAtIGN1cnJlbnRfZGlzdGFuY2UsIGFuZ2xlKTtcclxuXHRcdFx0aWYgKGFycmF5W2ldLnggPiBhcnJheVtpICsgMV0ueClcclxuXHRcdFx0XHRjb29yZCA9IG5ldyBWZWN0b3IoYXJyYXlbaV0ueCAtIGNhcnQueCwgYXJyYXlbaV0ueSAtIGNhcnQueSk7XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRjb29yZCA9IG5ldyBWZWN0b3IoYXJyYXlbaV0ueCArIGNhcnQueCwgYXJyYXlbaV0ueSArIGNhcnQueSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gW2Nvb3JkLCBuZXcgVmVjdG9yKGFuZ2xlLCBpKV07XHJcblx0fVxyXG5cdHN0YXRpYyBwb2ludE9uTGluZShwMSwgcDIsIGxlbmd0aCkge1xyXG5cdFx0dmFyIGZ1bGxMZW5ndGggPSBwMS5kaXN0YW5jZVRvKHAyKTtcclxuXHRcdHZhciBuID0gZnVsbExlbmd0aCAtIGxlbmd0aDtcclxuXHJcblx0XHR2YXIgeCA9IChuICogcDEueCArIGxlbmd0aCAqIHAyLngpIC8gZnVsbExlbmd0aDtcclxuXHRcdHZhciB5ID0gKG4gKiBwMS55ICsgbGVuZ3RoICogcDIueSkgLyBmdWxsTGVuZ3RoO1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IoeCwgeSk7XHJcblx0fVxyXG5cdHN0YXRpYyByb3RhdGUoY2VudGVyLCBwb2ludCwgYW5nbGUpIHtcclxuXHRcdHZhciBueCA9IE1hdGguY29zKGFuZ2xlKSxcclxuXHRcdFx0bnkgPSBNYXRoLnNpbihhbmdsZSk7XHJcblx0XHRyZXR1cm4gbmV3IFZlY3RvcihueCAqIChwb2ludC54IC0gY2VudGVyLngpIC0gbnkgKiAocG9pbnQueSAtIGNlbnRlci55KSArIGNlbnRlci54LCBueSAqIChwb2ludC54IC0gY2VudGVyLngpICsgbnggKiAocG9pbnQueSAtIGNlbnRlci55KSArIGNlbnRlci55KTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEJlemllciB7XHJcblx0Y29uc3RydWN0b3IocG9pbnRzKSB7XHJcblx0XHR0aGlzLnBvaW50cyA9IHBvaW50cztcclxuXHRcdHRoaXMub3JkZXIgPSBwb2ludHMubGVuZ3RoO1xyXG5cclxuXHRcdHRoaXMuc3RlcCA9IDAuMDAyNSAvIHRoaXMub3JkZXI7XHJcblx0XHR0aGlzLnBvcyA9IHt9O1xyXG5cdFx0dGhpcy5jYWxjUG9pbnRzKCk7XHJcblx0fVxyXG5cdGF0KHQpIHtcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5wb3NbdF0gIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiB0aGlzLnBvc1t0XTtcclxuXHRcdHZhciB4ID0gMCxcclxuXHRcdFx0eSA9IDA7XHJcblx0XHR2YXIgbiA9IHRoaXMub3JkZXIgLSAxO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPD0gbjsgaSArPSAxKSB7XHJcblx0XHRcdHZhciBjID0gTWF0aDIuQ3BuKGksIG4pICogTWF0aC5wb3coKDEgLSB0KSwgKG4gLSBpKSkgKiBNYXRoLnBvdyh0LCBpKTtcclxuXHRcdFx0eCArPSBjICogdGhpcy5wb2ludHNbaV0ueDtcclxuXHRcdFx0eSArPSBjICogdGhpcy5wb2ludHNbaV0ueTtcclxuXHRcdH1cclxuXHRcdHRoaXMucG9zW3RdID0gbmV3IFZlY3Rvcih4LCB5KTtcclxuXHRcdHJldHVybiBuZXcgVmVjdG9yKHgsIHkpO1xyXG5cdH1cclxuXHRjYWxjUG9pbnRzKCkge1xyXG5cdFx0aWYgKE9iamVjdC5rZXlzKHRoaXMucG9zKS5sZW5ndGgpXHJcblx0XHRcdHJldHVybjtcclxuXHRcdHRoaXMucHhMZW5ndGggPSAwO1xyXG5cdFx0dmFyIHByZXYgPSB0aGlzLmF0KDApLFxyXG5cdFx0XHRjdXJyZW50O1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAxICsgdGhpcy5zdGVwOyBpICs9IHRoaXMuc3RlcCkge1xyXG5cdFx0XHRjdXJyZW50ID0gdGhpcy5hdChpKTtcclxuXHRcdFx0dGhpcy5weExlbmd0aCArPSBwcmV2LmRpc3RhbmNlVG8oY3VycmVudCk7XHJcblx0XHRcdHByZXYgPSBjdXJyZW50O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRwb2ludEF0RGlzdGFuY2UoZGlzdCkge1xyXG5cdFx0c3dpdGNoICh0aGlzLm9yZGVyKSB7XHJcblx0XHRcdGNhc2UgMDpcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdGNhc2UgMTpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5wb2ludHNbMF07XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0dGhpcy5jYWxjUG9pbnRzKCk7XHJcblx0XHRcdFx0cmV0dXJuIE1hdGgyLnBvaW50QXREaXN0YW5jZShhcnJheV92YWx1ZXModGhpcy5wb3MpLCBkaXN0KVswXTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBNYXRoMjtcclxuXHRtb2R1bGUuZXhwb3J0cy5CZXppZXIgPSBCZXppZXI7XHJcbn0gZWxzZSB7XHJcblx0d2luZG93Lk1hdGgyID0gRWRpdG9yLk1hdGgyID0gTWF0aDI7XHJcblx0d2luZG93LkJlemllciA9IEVkaXRvci5CZXppZXIgPSBCZXppZXI7XHJcbn0iXSwiZmlsZSI6Ik1hdGgyLmpzIn0=

var Editor = Editor || {};

class Vector {
	constructor(_x, _y) {
		this.x = _x;
		this.y = _y;
	}
	angleTo(other) {
		var dx = other.x - this.x;
		var dy = other.y - this.y;
		return Math.atan(dy / dx);
	}
	distanceTo(other) {
		var dx = other.x - this.x;
		var dy = other.y - this.y;
		return Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));
	}
	midpoint(other) {
		return [(this.x + other.x) / 2, (this.y + other.y) / 2];
	};
	equals(other) {
		return this.x == other.x && this.y == other.y;
	}
	toPol() {
		// treating x, y as r, theta
		var x = this.x * Math.cos(this.y);
		var y = this.x * Math.sin(this.y);
		return new Vector(x, y);
	}
	get m() {
		return Math.pow(this.x * this.x + this.y * this.y, .5);
	}
	add(v) {
		return new Vector(this.x + v.x, this.y + v.y);
	}
	sub(v) {
		return new Vector(this.x - v.x, this.y - v.y);
	}
	norm() {
		return Vector(this.x / this.m, this.y / this.m);
	}
	toString(separator) {
		separator = separator || ",";
		return [this.x, this.y].join(separator);
	}
	toArray() {
		return [this.x, this.y];
	}
}

if (typeof module !== "undefined") {
	module.exports = Vector;
} else {
	window.Vector = Editor.Vector = Vector;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL1ZlY3Rvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRWRpdG9yID0gRWRpdG9yIHx8IHt9O1xyXG5cclxuY2xhc3MgVmVjdG9yIHtcclxuXHRjb25zdHJ1Y3RvcihfeCwgX3kpIHtcclxuXHRcdHRoaXMueCA9IF94O1xyXG5cdFx0dGhpcy55ID0gX3k7XHJcblx0fVxyXG5cdGFuZ2xlVG8ob3RoZXIpIHtcclxuXHRcdHZhciBkeCA9IG90aGVyLnggLSB0aGlzLng7XHJcblx0XHR2YXIgZHkgPSBvdGhlci55IC0gdGhpcy55O1xyXG5cdFx0cmV0dXJuIE1hdGguYXRhbihkeSAvIGR4KTtcclxuXHR9XHJcblx0ZGlzdGFuY2VUbyhvdGhlcikge1xyXG5cdFx0dmFyIGR4ID0gb3RoZXIueCAtIHRoaXMueDtcclxuXHRcdHZhciBkeSA9IG90aGVyLnkgLSB0aGlzLnk7XHJcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGR4LCAyKSArIE1hdGgucG93KGR5LCAyKSk7XHJcblx0fVxyXG5cdG1pZHBvaW50KG90aGVyKSB7XHJcblx0XHRyZXR1cm4gWyh0aGlzLnggKyBvdGhlci54KSAvIDIsICh0aGlzLnkgKyBvdGhlci55KSAvIDJdO1xyXG5cdH07XHJcblx0ZXF1YWxzKG90aGVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy54ID09IG90aGVyLnggJiYgdGhpcy55ID09IG90aGVyLnk7XHJcblx0fVxyXG5cdHRvUG9sKCkge1xyXG5cdFx0Ly8gdHJlYXRpbmcgeCwgeSBhcyByLCB0aGV0YVxyXG5cdFx0dmFyIHggPSB0aGlzLnggKiBNYXRoLmNvcyh0aGlzLnkpO1xyXG5cdFx0dmFyIHkgPSB0aGlzLnggKiBNYXRoLnNpbih0aGlzLnkpO1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IoeCwgeSk7XHJcblx0fVxyXG5cdGdldCBtKCkge1xyXG5cdFx0cmV0dXJuIE1hdGgucG93KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSwgLjUpO1xyXG5cdH1cclxuXHRhZGQodikge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IodGhpcy54ICsgdi54LCB0aGlzLnkgKyB2LnkpO1xyXG5cdH1cclxuXHRzdWIodikge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWN0b3IodGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkpO1xyXG5cdH1cclxuXHRub3JtKCkge1xyXG5cdFx0cmV0dXJuIFZlY3Rvcih0aGlzLnggLyB0aGlzLm0sIHRoaXMueSAvIHRoaXMubSk7XHJcblx0fVxyXG5cdHRvU3RyaW5nKHNlcGFyYXRvcikge1xyXG5cdFx0c2VwYXJhdG9yID0gc2VwYXJhdG9yIHx8IFwiLFwiO1xyXG5cdFx0cmV0dXJuIFt0aGlzLngsIHRoaXMueV0uam9pbihzZXBhcmF0b3IpO1xyXG5cdH1cclxuXHR0b0FycmF5KCkge1xyXG5cdFx0cmV0dXJuIFt0aGlzLngsIHRoaXMueV07XHJcblx0fVxyXG59XHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdG1vZHVsZS5leHBvcnRzID0gVmVjdG9yO1xyXG59IGVsc2Uge1xyXG5cdHdpbmRvdy5WZWN0b3IgPSBFZGl0b3IuVmVjdG9yID0gVmVjdG9yO1xyXG59XHJcbiJdLCJmaWxlIjoiVmVjdG9yLmpzIn0=

var Editor = Editor || {};

if (typeof require !== "undefined") {
	Math2 = require("./../Math2");
	Bezier = Math2.Bezier;
	Vector = require("./../Vector");
}

var curveTypes = {
	"C": "catmull",
	"B": "bezier",
	"L": "linear",
	"P": "pass-through",
	"catmull": "C",
	"bezier": "B",
	"linear": "L",
	"pass-through": "P"
};
var additionTypes = [null, "normal", "soft", "drum"];

class HitObject {
	static serializeSoundTypes(array) {
		var number = 0;
		if (array.indexOf("whistle") >= 0) number |= 2;
		if (array.indexOf("finish") >= 0) number |= 4;
		if (array.indexOf("clap") >= 0) number |= 8;
		return number;
	}
	static parseAdditions(str) {
		var additions = {};
		if (!str) return additions;
		var parts = str.split(":");

		if (parts[0] && parts[0] !== "0")
			additions.sample = additionTypes[parseInt(parts[0])];
		if (parts[1] && parts[1] !== "0")
			additions.additionalSample = additionTypes[parseInt(parts[1])];
		if (parts[2] && parts[2] !== "0")
			additions.customSampleIndex = parseInt(parts[2]);
		if (parts[3] && parts[3] !== "0")
			additions.hitsoundVolume = parseInt(parts[3]);
		if (parts[4] && parts[4] !== "0")
			additions.hitsound = parts[4];
		return additions;
	}
	static parseEdgeAdditions(str) {
		var additions = {};
		if (!str) return additions;
		var parts = str.split(":");

		if (parts[0] && parts[0] !== "0")
			additions.sampleset = additionTypes[parseInt(parts[0])];
		if (parts[1] && parts[1] !== "0")
			additions.additionsSampleset = additionTypes[parseInt(parts[1])];
		return additions;
	}
	static parse(line) {
		var parts = line.split(",");
		var soundType = parseInt(parts[4]);
		var objectType = parseInt(parts[3]);
		var properties = {};

		properties.originalLine = line;
		properties.startTime = parseInt(parts[2]);
		properties.soundTypes = [];
		properties.newCombo = (objectType & 4) == 4;
		properties.position = new Vector(parseInt(parts[0]), parseInt(parts[1]));

		if ((soundType & 2) == 2) properties.soundTypes.push("whistle");
		if ((soundType & 4) == 4) properties.soundTypes.push("finish");
		if ((soundType & 8) == 8) properties.soundTypes.push("clap");
		if (properties.soundTypes.length == 0) properties.soundTypes.push("normal");

		if ((objectType & 1) == 1) {
			properties.additions = HitObject.parseAdditions(parts[5]);
			return new HitCircle(properties);
		} else if ((objectType & 2) == 2) {
			properties.repeatCount = parseInt(parts[6]);
			properties.pixelLength = parseFloat(parts[7]);
			properties.additions = HitObject.parseAdditions(parts[10]);
			properties.edges = [];
			properties.points = [properties.position];
			var points = (parts[5] || "").split("|");
			if (points.length) {
				properties.curveType = curveTypes[points[0]] || "unknown";
				for (var i = 1; i < points.length; i += 1) {
					var coordinates = points[i].split(":");
					properties.points.push(new Vector(
						parseInt(coordinates[0]),
						parseInt(coordinates[1])
					));
				}
			}
			var edgeSounds = [];
			var edgeAdditions = [];
			if (parts[8]) edgeSounds = parts[8].split("|");
			if (parts[9]) edgeAdditions = parts[9].split("|");

			for (var i = 0; i < properties.repeatCount + 1; i += 1) {
				var edge = {
					"soundTypes": [],
					"additions": HitObject.parseEdgeAdditions(edgeAdditions[i])
				};
				if (edgeSounds[i]) {
					var sound = parseInt(edgeSounds[i]);
					if ((sound & 2) == 2) edge.soundTypes.push("whistle");
					if ((sound & 4) == 4) edge.soundTypes.push("finish");
					if ((sound & 8) == 8) edge.soundTypes.push("clap");
					if (edge.soundTypes.length == 0) edge.soundTypes.push("normal");
				} else {
					edge.soundTypes.push("normal");
				}
				properties.edges.push(edge);
			}

			return new Slider(properties);
		} else if ((objectType & 8) == 8) {
			properties.endTime = parseInt(parts[5]);
			properties.duration = properties.endTime - properties.startTime;
			properties.additions = HitObject.parseAdditions(parts[6]);
			return new Spinner(properties);
		}
	}
	constructor(properties) {
		for (var key in properties) {
			this[key] = properties[key];
		}
		this.selected = false;
	}
	serialize() {
		throw "Not implemented.";
	}
	render() {
		throw "Not implemented.";
	}
}

class HitCircle extends HitObject {
	constructor(properties) {
		super(properties);
		this.fadetime = .8;
	}
	serialize() {
		var parts = [];
		parts.push(this.position.x);
		parts.push(this.position.y);
		parts.push(this.startTime);
		parts.push(1 | (this.newCombo ? 4 : 0));
		parts.push(HitObject.serializeSoundTypes(this.soundTypes));
		var additions = [];
		additions.push(this.additions.sample ? additionTypes.indexOf(this.additions.sample) : 0);
		additions.push(this.additions.additionalSample ? additionTypes.indexOf(this.additions.additionalSample) : 0);
		additions.push(this.additions.customSampleIndex ? this.additions.customSampleIndex : 0);
		additions.push(this.additions.hitsoundVolume ? this.additions.hitsoundVolume : 0);
		additions.push("");
		parts.push(additions.join(":"));
		return parts.join(",");
	}
	render(t, colIndex, comboNumber) {
		if (!t) t = Editor.source.t;
		if (!colIndex || !comboNumber) {
			var i = this.beatmap.HitObjects.indexOf(this);
			if (!colIndex) colIndex = Editor.objc[i][0] % Editor.cols.length;
			if (!comboNumber) comboNumber = Editor.objc[i][1];
		}
		var ar = ars(parseFloat(this.beatmap['ApproachRate']));
		var cs = cspx(parseFloat(this.beatmap['CircleSize']));
		var offset = this.startTime / 1000;
		var x = this.position.x - cs / 2,
			y = this.position.y - cs / 2;
		var td = offset - t;
		if (td > ar || td < -this.fadetime) return false;
		var color = Editor.cols[colIndex];
		var ctx = document.getElementById('gridcanvas').getContext('2d');
		ctx.save();
		if (td > 0) {
			ctx.globalAlpha = 2 - 2 * td / ar;
			var r_as = cs * (2.5 * td / ar + 1);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin['hitcircle' + colIndex], x, y, cs, cs);
		} else {
			ctx.globalAlpha = Math.max(1 + td / this.fadetime, 0);
			var r_as = cs * Math.min(-td / ar + 1, 13 / 12);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin['hitcircle'], x, y, cs, cs);
		}

		var drawOverlay = function () {
			ctx.drawImage(Editor.skin.hitcircleoverlay, x, y, cs, cs);
		};
		var drawNumber = function () {
			var num = Editor.skin['default-' + comboNumber];
			var newh = num.height / Editor.skin['hitcircle'].height * cs * 3 / 4;
			var dh = newh / num.height;
			ctx.drawImage(num, x - num.width * dh / 2 + cs / 2, y - newh / 2 + cs / 2, num.width * dh, newh);

		};
		if (parseInt(Editor.skin._meta.options.HitCircleOverlayAboveNumber || Editor.skin._meta.options.HitCircleOverlayAboveNumer, 10)) {
			drawNumber();
			drawOverlay();
		} else {
			drawOverlay();
			drawNumber();
		}
		ctx.restore();
		return true;
	}
}

class Slider extends HitObject {
	constructor(properties) {
		super(properties);
		this.fadetime = .25;
		this.cache = { flag: true };
	}
	static getEndPoint(curveType, sliderLength, points) {
		if (!curveType || !sliderLength || !points) return;
		switch (curveType) {
			case "linear":
				return Math2.pointOnLine(points[0], points[1], sliderLength);
			case "catmull":
				// not supported
				return;
			case "bezier":
				if (!points || points.length < 2)
					return undefined;
				if (points.length == 2) {
					return Math2.pointOnLine(points[0], points[1], sliderLength);
				}
				points = points.slice();
				var bezier, previous, point;
				for (var i = 0, l = points.length; i < l; i += 1) {
					point = points[i];
					if (!point)
						continue;
					if (!previous) {
						previous = point;
						continue;
					}
					if (point.equals(previous)) {
						bezier = new Bezier(points.splice(0, i));
						sliderLength -= bezier.pxLength;
						i = 0; //, length = points.length;
					}
					previous = point;
				}
				bezier = new Bezier(points);
				return bezier.pointAtDistance(sliderLength);
			case "pass-through":
				if (!points || points.length < 2)
					return undefined;
				if (points.length == 2)
					return Math2.pointOnLine(points[0], points[1], sliderLength);
				if (points.length > 3)
					return Slider.getEndPoint("bezier", sliderLength, points);
				var [circumCenter, radius] = Math2.getCircumCircle(points[0], points[1], points[2]);
				var radians = sliderLength / radius;
				if (Math2.isLeft(points[0], points[1], points[2]))
					radians *= -1;
				return Math2.rotate(circumCenter, points[1], radians);
		}
	}
	calculate() {
		var timing = this.beatmap.getTimingPoint(this.startTime);
		if (timing) {
			var pxPerBeat = this.beatmap.SliderMultiplier * 100 * timing.velocity;
			var beatsNumber = (this.pixelLength * this.repeatCount) / pxPerBeat;
			this.duration = Math.ceil(beatsNumber * timing.beatLength);
			this.endTime = this.startTime + this.duration;
		}
		var endPoint = Slider.getEndPoint(this.curveType, this.pixelLength, this.points);
		if (endPoint) {
			this.endPosition = endPoint;
		} else {
			this.endPosition = this.points[this.points.length - 1];
		}
		if (this.curveType == "pass-through") {
			this.passthroughcircle = Math2.getCircumCircle(this.points[0], this.points[1], this.points[2]);
		}
		try {
			if (this.curveType == 'pass-through') {
				this.spline = passthrough(this.points, this.pixelLength);
			} else if (this.curveType == 'line') {
				this.spline = line(this.points, this.pixelLength)[0];
			} else { //assume it's a Bezier
				this.spline = bezier(this.points, this.pixelLength);
				this.spline.splice(-1, 1, this.endPosition.toArray());
			}
		} catch (e) { }
		if (typeof Path2D != "undefined") {
			this.path = new Path2D();
			for (var j = 0; j < this.spline.length; j++) {
				this.path.lineTo(this.spline[j][0], this.spline[j][1]);
			}
		}
	}
	serialize() {
		var parts = [];
		parts.push(this.position.x);
		parts.push(this.position.y);
		parts.push(this.startTime);
		parts.push(2 | (this.newCombo ? 4 : 0));
		parts.push(HitObject.serializeSoundTypes(this.soundTypes));
		var sliderPoints = [curveTypes[this.curveType]];
		sliderPoints.push(...this.points.slice(1).map(function (item) {
			return item.toString(":");
		}));
		parts.push(sliderPoints.join("|"));
		parts.push(this.repeatCount);
		parts.push(this.pixelLength);
		var edgeSounds = [],
			edgeAdditions = [];
		this.edges.forEach(edge => {
			edgeSounds.push(HitObject.serializeSoundTypes(edge.soundTypes));
			edgeAdditions.push((edge.additions.sampleset ? additionTypes.indexOf(edge.additions.sampleset) : 0) + ":" +
				(edge.additions.additionsSampleset ? additionTypes.indexOf(edge.additions.additionsSampleset) : 0));
		});
		parts.push(edgeSounds.join('|'));
		parts.push(edgeAdditions.join('|'));
		var additions = [];
		additions.push(this.additions.sample ? additionTypes.indexOf(this.additions.sample) : 0);
		additions.push(this.additions.additionalSample ? additionTypes.indexOf(this.additions.additionalSample) : 0);
		additions.push(this.additions.customSampleIndex ? this.additions.customSampleIndex : 0);
		additions.push(this.additions.hitsoundVolume ? this.additions.hitsoundVolume : 0);
		additions.push("");
		parts.push(additions.join(":"));
		return parts.join(",");
	}
	hover() {
		var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
		ctx2.lineWidth = .5;
		ctx2.strokeStyle = '#555';
		ctx2.beginPath();
		var skip = false;
		for (var i = 0; i < this.points.length; i++) {
			var in_box = this.points[i].x - 2.5 < mouseX && this.points[i].x + 2.5 > mouseX && this.points[i].y - 2.5 < mouseY && this.points[i].y + 2.5 > mouseY;
			if (skip) {
				skip = false;
				continue;
			}
			if (i < this.points.length - 1 && this.points[i].equals(this.points[i + 1])) {
				skip = true;
				ctx2.fillStyle = in_box ? '#F00' : '#E00';
			} else
				ctx2.fillStyle = in_box ? '#FFF' : '#DDD';
			ctx2.globalAlpha = in_box ? 1 : .75;
			ctx2.fillRect(this.points[i].x - 2, this.points[i].y - 2, 4, 4);
			ctx2.globalAlpha = 1;
			ctx2.strokeRect(this.points[i].x - 2, this.points[i].y - 2, 4, 4);
			ctx2.lineTo(this.points[i].x, this.points[i].y);
		}
		ctx2.lineWidth = .25;
		ctx2.strokeStyle = '#FFF';
		ctx2.stroke();
	}
	render(t, colIndex, comboNumber) {
		if (!t) t = Editor.source.t;
		if (!colIndex || !comboNumber) {
			var i = this.beatmap.HitObjects.indexOf(this);
			if (!colIndex) colIndex = Editor.objc[i][0] % Editor.cols.length;
			if (!comboNumber) comboNumber = Editor.objc[i][1];
		}
		var ar = ars(parseFloat(this.beatmap['ApproachRate']));
		var cs = cspx(parseFloat(this.beatmap['CircleSize']));
		var offset = this.startTime / 1000;
		var x = this.position.x - cs / 2,
			y = this.position.y - cs / 2;
		var td = offset - t;
		var endTime = this.endTime / 1000;
		if (td > ar || t > endTime + .8) return false;
		var color = Editor.cols[colIndex];
		var ctx = document.getElementById('gridcanvas').getContext('2d');
		ctx.save();
		var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
		ctx2.save();
		if (td > 0) ctx.globalAlpha = 2 - 2 * td / ar;
		else {
			ctx.globalAlpha = Math.max(1 - (t - endTime) / this.fadetime, 0);
			ctx2.globalAlpha = Math.max(1 - (t - endTime) / this.fadetime, 0);
		}
		if (this.cache.col != Editor.cols[colIndex] || this.cache.cs != cs || this.cache.flag) {
			if (this.cache.cs != cs || !this.cache.cached || this.cache.flag) {
				this.cache.render = render_curve2(this.spline, cs);
				this.cache.flag = false;
			}
			this.cache.col = Editor.cols[colIndex];
			this.cache.cs = cs;
			var slider_border = Editor.skin._meta.options.SliderBorder ? colorToArray(Editor.skin._meta.options.SliderBorder) : undefined;
			var slider_trackcolor = Editor.skin._meta.options.SliderTrackOverride ? colorToArray(Editor.skin._meta.options.SliderTrackOverride) : Editor.cols[colIndex];
			this.cache.cached = document.createElement('canvas');
			this.cache.cached.width = this.cache.render[0][0].width;
			this.cache.cached.height = this.cache.render[0][0].height;
			var tempctx = this.cache.cached.getContext('2d');
			tempctx.drawImage(tint(this.cache.render[0][0], slider_border), 0, 0);
			tempctx.globalCompositeOperation = 'destination-out';
			tempctx.drawImage(this.cache.render[0][1], 0, 0);
			tempctx.globalCompositeOperation = 'source-over';
			tempctx.globalAlpha = .75;
			tempctx.drawImage(tint(this.cache.render[0][1], slider_trackcolor), 0, 0);
			tempctx.drawImage(this.cache.render[0][2], 0, 0);
		}
		ctx.drawImage(this.cache.cached, this.cache.render[1][0], this.cache.render[1][1], this.cache.cached.width / 2, this.cache.cached.height / 2);
		var r = this.repeatCount;
		for (var p = 1; p < r; p++) {
			//repeat arrows/slider ends
		}
		if (td <= 0 && this.duration / 1000 + td > -.2) {
			var prog = -td / this.duration * 1000; // progress percentage (0-1)
			var curp = prog * r; // current progress (equivalent to distance traveled divided by slider length)
			var dir = 1 - 2 * (Math.floor(curp) % 2); // direction the ball is traveling, 1 for normal, -1 for reverse
			var distance = curp % 1 * this.pixelLength;
			var j = dir == 1 ? 0 : this.spline.length - 1;
			var jend = dir == 1 ? this.spline.length - 1 : 0;
			while (j != jend) {
				var p1 = this.spline[j];
				var p2 = this.spline[j + dir];
				var dpart = Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));
				if (dpart > distance) {
					//without extra interpolation stuff
					//ctx.drawImage(Editor.skin['sliderb0'], p1[0] - cs / 2, p1[1] - cs / 2, cs, cs);
					if (this.duration / 1000 + td >= -.001) {
						var posx = p1[0] + distance / dpart * (p2[0] - p1[0]),
							posy = p1[1] + distance / dpart * (p2[1] - p1[1]);
						var cs2 = cs * 11 / 12;
						ctx2.save();
						ctx2.translate(posx, posy);
						ctx2.rotate(Math.atan2(p2[1] - p1[1], p2[0] - p1[0]) + (Editor.skin._meta.options.SliderBallFlip == 0 && dir == -1 ? Math.PI : 0));
						ctx2.drawImage(Editor.skin['sliderb0' + colIndex], -cs2 / 2, -cs2 / 2, cs2, cs2);
						ctx2.restore();
					} else {
						var temp = r % 2 ? this.spline.length - 1 : 0;
						var posx = this.spline[temp][0],
							posy = this.spline[temp][1];
					}
					ctx2.save();
					var r_fs = td > -.1 ? cs * (1 - td * 10) : (td < -this.duration / 1000 ? 2 * cs + (td + this.duration / 1000) * 5 * .5 * cs : 2 * cs);
					ctx2.drawImage(Editor.skin['sliderfollowcircle'], posx - r_fs / 2, posy - r_fs / 2, r_fs, r_fs);
					ctx2.restore();
					break;
				} else {
					distance -= dpart;
				}
				j += dir;
			}
		}
		if (td > 0) {
			var r_as = cs * (2.5 * td / ar + 1);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin['hitcircle' + colIndex], x, y, cs, cs);
		} else {
			ctx.globalAlpha = Math.max(1 + td / .8, 0);
			var r_as = cs * Math.min(-td / ar + 1, 13 / 12);
			ctx.drawImage(Editor.skin['approachcircle' + colIndex], x + cs / 2 - r_as / 2, y + cs / 2 - r_as / 2, r_as, r_as);
			ctx.drawImage(Editor.skin['hitcircle'], x, y, cs, cs);
		}

		var drawOverlay = function () {
			ctx.drawImage(Editor.skin.hitcircleoverlay, x, y, cs, cs);
		};
		var drawNumber = function () {
			var num = Editor.skin['default-' + comboNumber];
			var newh = num.height / Editor.skin['hitcircle'].height * cs * 3 / 4;
			var dh = newh / num.height;
			ctx.drawImage(num, x - num.width * dh / 2 + cs / 2, y - newh / 2 + cs / 2, num.width * dh, newh);
		};
		if (parseInt(Editor.skin._meta.options.HitCircleOverlayAboveNumber || Editor.skin._meta.options.HitCircleOverlayAboveNumer, 10)) {
			drawNumber();
			drawOverlay();
		} else {
			drawOverlay();
			drawNumber();
		}
		ctx.restore();
		ctx2.restore();
		return true;
	}
}

class Spinner extends HitObject {
	constructor(properties) {
		super(properties);
		this.fadetime = .25;
	}
	serialize() {
		var parts = [];
		parts.push(this.position.x);
		parts.push(this.position.y);
		parts.push(this.startTime);
		parts.push(8 | (this.newCombo ? 4 : 0));
		parts.push(HitObject.serializeSoundTypes(this.soundTypes));
		parts.push(this.endTime);
		var additions = [];
		additions.push(this.additions.sample ? additionTypes.indexOf(this.additions.sample) : 0);
		additions.push(this.additions.additionalSample ? additionTypes.indexOf(this.additions.additionalSample) : 0);
		additions.push(this.additions.customSampleIndex ? this.additions.customSampleIndex : 0);
		additions.push(this.additions.hitsoundVolume ? this.additions.hitsoundVolume : 0);
		additions.push("");
		parts.push(additions.join(":"));
		return parts.join(",");
	}
	render(t, colIndex, comboNumber) {
		var dur = this.duration / 1000;
		var td = this.startTime / 1000 - t;
		if (this.endTime / 1000 + this.fadetime < t || td > .4) return false;
		var ctx = document.getElementById('gridcanvas').getContext('2d');
		ctx.save();
		ctx.globalCompositeOperation = "destination-over";
		ctx.translate(256, 192);
		var drawspinner = function (r, a, t, middle) {
			ctx.globalAlpha = a;
			if (!middle) middle = Editor.skin['spinner-middle'];
			ctx.drawImage(middle, -r * 1.01, -r * 1.01, 2.02 * r, 2.02 * r);
			ctx.drawImage(Editor.skin['spinner-middle2'], -r * .025, -r * .025, 2 * r * .025, 2 * r * .025);
			ctx.save();
			ctx.rotate(t * 4 * Math.PI);
			ctx.drawImage(Editor.skin['spinner-top'], -r, -r, 2 * r, 2 * r);
			ctx.restore();
			ctx.drawImage(Editor.skin['spinner-bottom'], -r, -r, 2 * r, 2 * r);
		};
		if (td < 0 && -td < dur) {
			//first one gradually has it turn red, lags more
			//drawspinner(172 + 40 * Math.sqrt(-td / dur), 1, td, tint(Editor.skin['spinner-middle'], [255, 255 * (1 + td / dur), 255 * (1 + td / dur)]));
			drawspinner(172 + 40 * Math.sqrt(-td / dur), 1, td);
		} else if (td > 0 && td < .4) {
			drawspinner(172, 1 - td / .4, 0);
		} else if (td < 0 && -td < dur + this.fadetime) {
			drawspinner(212, 1 + (dur + td) / .25, dur);
		}
		ctx.restore();
		return true;
	}
}

if (typeof module !== "undefined") {
	module.exports = HitObject;
	module.exports.HitCircle = HitCircle;
	module.exports.Slider = Slider;
	module.exports.Spinner = Spinner;
} else {
	window.HitObject = Editor.HitObject = HitObject;
	window.HitCircle = Editor.HitCircle = HitCircle;
	window.Slider = Editor.Slider = Slider;
	window.Spinner = Editor.Spinner = Spinner;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL2JlYXRtYXAvSGl0T2JqZWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBFZGl0b3IgPSBFZGl0b3IgfHwge307XHJcblxyXG5pZiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRNYXRoMiA9IHJlcXVpcmUoXCIuLy4uL01hdGgyXCIpO1xyXG5cdEJlemllciA9IE1hdGgyLkJlemllcjtcclxuXHRWZWN0b3IgPSByZXF1aXJlKFwiLi8uLi9WZWN0b3JcIik7XHJcbn1cclxuXHJcbnZhciBjdXJ2ZVR5cGVzID0ge1xyXG5cdFwiQ1wiOiBcImNhdG11bGxcIixcclxuXHRcIkJcIjogXCJiZXppZXJcIixcclxuXHRcIkxcIjogXCJsaW5lYXJcIixcclxuXHRcIlBcIjogXCJwYXNzLXRocm91Z2hcIixcclxuXHRcImNhdG11bGxcIjogXCJDXCIsXHJcblx0XCJiZXppZXJcIjogXCJCXCIsXHJcblx0XCJsaW5lYXJcIjogXCJMXCIsXHJcblx0XCJwYXNzLXRocm91Z2hcIjogXCJQXCJcclxufTtcclxudmFyIGFkZGl0aW9uVHlwZXMgPSBbbnVsbCwgXCJub3JtYWxcIiwgXCJzb2Z0XCIsIFwiZHJ1bVwiXTtcclxuXHJcbmNsYXNzIEhpdE9iamVjdCB7XHJcblx0c3RhdGljIHNlcmlhbGl6ZVNvdW5kVHlwZXMoYXJyYXkpIHtcclxuXHRcdHZhciBudW1iZXIgPSAwO1xyXG5cdFx0aWYgKGFycmF5LmluZGV4T2YoXCJ3aGlzdGxlXCIpID49IDApIG51bWJlciB8PSAyO1xyXG5cdFx0aWYgKGFycmF5LmluZGV4T2YoXCJmaW5pc2hcIikgPj0gMCkgbnVtYmVyIHw9IDQ7XHJcblx0XHRpZiAoYXJyYXkuaW5kZXhPZihcImNsYXBcIikgPj0gMCkgbnVtYmVyIHw9IDg7XHJcblx0XHRyZXR1cm4gbnVtYmVyO1xyXG5cdH1cclxuXHRzdGF0aWMgcGFyc2VBZGRpdGlvbnMoc3RyKSB7XHJcblx0XHR2YXIgYWRkaXRpb25zID0ge307XHJcblx0XHRpZiAoIXN0cikgcmV0dXJuIGFkZGl0aW9ucztcclxuXHRcdHZhciBwYXJ0cyA9IHN0ci5zcGxpdChcIjpcIik7XHJcblxyXG5cdFx0aWYgKHBhcnRzWzBdICYmIHBhcnRzWzBdICE9PSBcIjBcIilcclxuXHRcdFx0YWRkaXRpb25zLnNhbXBsZSA9IGFkZGl0aW9uVHlwZXNbcGFyc2VJbnQocGFydHNbMF0pXTtcclxuXHRcdGlmIChwYXJ0c1sxXSAmJiBwYXJ0c1sxXSAhPT0gXCIwXCIpXHJcblx0XHRcdGFkZGl0aW9ucy5hZGRpdGlvbmFsU2FtcGxlID0gYWRkaXRpb25UeXBlc1twYXJzZUludChwYXJ0c1sxXSldO1xyXG5cdFx0aWYgKHBhcnRzWzJdICYmIHBhcnRzWzJdICE9PSBcIjBcIilcclxuXHRcdFx0YWRkaXRpb25zLmN1c3RvbVNhbXBsZUluZGV4ID0gcGFyc2VJbnQocGFydHNbMl0pO1xyXG5cdFx0aWYgKHBhcnRzWzNdICYmIHBhcnRzWzNdICE9PSBcIjBcIilcclxuXHRcdFx0YWRkaXRpb25zLmhpdHNvdW5kVm9sdW1lID0gcGFyc2VJbnQocGFydHNbM10pO1xyXG5cdFx0aWYgKHBhcnRzWzRdICYmIHBhcnRzWzRdICE9PSBcIjBcIilcclxuXHRcdFx0YWRkaXRpb25zLmhpdHNvdW5kID0gcGFydHNbNF07XHJcblx0XHRyZXR1cm4gYWRkaXRpb25zO1xyXG5cdH1cclxuXHRzdGF0aWMgcGFyc2VFZGdlQWRkaXRpb25zKHN0cikge1xyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IHt9O1xyXG5cdFx0aWYgKCFzdHIpIHJldHVybiBhZGRpdGlvbnM7XHJcblx0XHR2YXIgcGFydHMgPSBzdHIuc3BsaXQoXCI6XCIpO1xyXG5cclxuXHRcdGlmIChwYXJ0c1swXSAmJiBwYXJ0c1swXSAhPT0gXCIwXCIpXHJcblx0XHRcdGFkZGl0aW9ucy5zYW1wbGVzZXQgPSBhZGRpdGlvblR5cGVzW3BhcnNlSW50KHBhcnRzWzBdKV07XHJcblx0XHRpZiAocGFydHNbMV0gJiYgcGFydHNbMV0gIT09IFwiMFwiKVxyXG5cdFx0XHRhZGRpdGlvbnMuYWRkaXRpb25zU2FtcGxlc2V0ID0gYWRkaXRpb25UeXBlc1twYXJzZUludChwYXJ0c1sxXSldO1xyXG5cdFx0cmV0dXJuIGFkZGl0aW9ucztcclxuXHR9XHJcblx0c3RhdGljIHBhcnNlKGxpbmUpIHtcclxuXHRcdHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoXCIsXCIpO1xyXG5cdFx0dmFyIHNvdW5kVHlwZSA9IHBhcnNlSW50KHBhcnRzWzRdKTtcclxuXHRcdHZhciBvYmplY3RUeXBlID0gcGFyc2VJbnQocGFydHNbM10pO1xyXG5cdFx0dmFyIHByb3BlcnRpZXMgPSB7fTtcclxuXHJcblx0XHRwcm9wZXJ0aWVzLm9yaWdpbmFsTGluZSA9IGxpbmU7XHJcblx0XHRwcm9wZXJ0aWVzLnN0YXJ0VGltZSA9IHBhcnNlSW50KHBhcnRzWzJdKTtcclxuXHRcdHByb3BlcnRpZXMuc291bmRUeXBlcyA9IFtdO1xyXG5cdFx0cHJvcGVydGllcy5uZXdDb21ibyA9IChvYmplY3RUeXBlICYgNCkgPT0gNDtcclxuXHRcdHByb3BlcnRpZXMucG9zaXRpb24gPSBuZXcgVmVjdG9yKHBhcnNlSW50KHBhcnRzWzBdKSwgcGFyc2VJbnQocGFydHNbMV0pKTtcclxuXHJcblx0XHRpZiAoKHNvdW5kVHlwZSAmIDIpID09IDIpIHByb3BlcnRpZXMuc291bmRUeXBlcy5wdXNoKFwid2hpc3RsZVwiKTtcclxuXHRcdGlmICgoc291bmRUeXBlICYgNCkgPT0gNCkgcHJvcGVydGllcy5zb3VuZFR5cGVzLnB1c2goXCJmaW5pc2hcIik7XHJcblx0XHRpZiAoKHNvdW5kVHlwZSAmIDgpID09IDgpIHByb3BlcnRpZXMuc291bmRUeXBlcy5wdXNoKFwiY2xhcFwiKTtcclxuXHRcdGlmIChwcm9wZXJ0aWVzLnNvdW5kVHlwZXMubGVuZ3RoID09IDApIHByb3BlcnRpZXMuc291bmRUeXBlcy5wdXNoKFwibm9ybWFsXCIpO1xyXG5cclxuXHRcdGlmICgob2JqZWN0VHlwZSAmIDEpID09IDEpIHtcclxuXHRcdFx0cHJvcGVydGllcy5hZGRpdGlvbnMgPSBIaXRPYmplY3QucGFyc2VBZGRpdGlvbnMocGFydHNbNV0pO1xyXG5cdFx0XHRyZXR1cm4gbmV3IEhpdENpcmNsZShwcm9wZXJ0aWVzKTtcclxuXHRcdH0gZWxzZSBpZiAoKG9iamVjdFR5cGUgJiAyKSA9PSAyKSB7XHJcblx0XHRcdHByb3BlcnRpZXMucmVwZWF0Q291bnQgPSBwYXJzZUludChwYXJ0c1s2XSk7XHJcblx0XHRcdHByb3BlcnRpZXMucGl4ZWxMZW5ndGggPSBwYXJzZUZsb2F0KHBhcnRzWzddKTtcclxuXHRcdFx0cHJvcGVydGllcy5hZGRpdGlvbnMgPSBIaXRPYmplY3QucGFyc2VBZGRpdGlvbnMocGFydHNbMTBdKTtcclxuXHRcdFx0cHJvcGVydGllcy5lZGdlcyA9IFtdO1xyXG5cdFx0XHRwcm9wZXJ0aWVzLnBvaW50cyA9IFtwcm9wZXJ0aWVzLnBvc2l0aW9uXTtcclxuXHRcdFx0dmFyIHBvaW50cyA9IChwYXJ0c1s1XSB8fCBcIlwiKS5zcGxpdChcInxcIik7XHJcblx0XHRcdGlmIChwb2ludHMubGVuZ3RoKSB7XHJcblx0XHRcdFx0cHJvcGVydGllcy5jdXJ2ZVR5cGUgPSBjdXJ2ZVR5cGVzW3BvaW50c1swXV0gfHwgXCJ1bmtub3duXCI7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcclxuXHRcdFx0XHRcdHZhciBjb29yZGluYXRlcyA9IHBvaW50c1tpXS5zcGxpdChcIjpcIik7XHJcblx0XHRcdFx0XHRwcm9wZXJ0aWVzLnBvaW50cy5wdXNoKG5ldyBWZWN0b3IoXHJcblx0XHRcdFx0XHRcdHBhcnNlSW50KGNvb3JkaW5hdGVzWzBdKSxcclxuXHRcdFx0XHRcdFx0cGFyc2VJbnQoY29vcmRpbmF0ZXNbMV0pXHJcblx0XHRcdFx0XHQpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIGVkZ2VTb3VuZHMgPSBbXTtcclxuXHRcdFx0dmFyIGVkZ2VBZGRpdGlvbnMgPSBbXTtcclxuXHRcdFx0aWYgKHBhcnRzWzhdKSBlZGdlU291bmRzID0gcGFydHNbOF0uc3BsaXQoXCJ8XCIpO1xyXG5cdFx0XHRpZiAocGFydHNbOV0pIGVkZ2VBZGRpdGlvbnMgPSBwYXJ0c1s5XS5zcGxpdChcInxcIik7XHJcblxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXMucmVwZWF0Q291bnQgKyAxOyBpICs9IDEpIHtcclxuXHRcdFx0XHR2YXIgZWRnZSA9IHtcclxuXHRcdFx0XHRcdFwic291bmRUeXBlc1wiOiBbXSxcclxuXHRcdFx0XHRcdFwiYWRkaXRpb25zXCI6IEhpdE9iamVjdC5wYXJzZUVkZ2VBZGRpdGlvbnMoZWRnZUFkZGl0aW9uc1tpXSlcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdGlmIChlZGdlU291bmRzW2ldKSB7XHJcblx0XHRcdFx0XHR2YXIgc291bmQgPSBwYXJzZUludChlZGdlU291bmRzW2ldKTtcclxuXHRcdFx0XHRcdGlmICgoc291bmQgJiAyKSA9PSAyKSBlZGdlLnNvdW5kVHlwZXMucHVzaChcIndoaXN0bGVcIik7XHJcblx0XHRcdFx0XHRpZiAoKHNvdW5kICYgNCkgPT0gNCkgZWRnZS5zb3VuZFR5cGVzLnB1c2goXCJmaW5pc2hcIik7XHJcblx0XHRcdFx0XHRpZiAoKHNvdW5kICYgOCkgPT0gOCkgZWRnZS5zb3VuZFR5cGVzLnB1c2goXCJjbGFwXCIpO1xyXG5cdFx0XHRcdFx0aWYgKGVkZ2Uuc291bmRUeXBlcy5sZW5ndGggPT0gMCkgZWRnZS5zb3VuZFR5cGVzLnB1c2goXCJub3JtYWxcIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGVkZ2Uuc291bmRUeXBlcy5wdXNoKFwibm9ybWFsXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwcm9wZXJ0aWVzLmVkZ2VzLnB1c2goZWRnZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBuZXcgU2xpZGVyKHByb3BlcnRpZXMpO1xyXG5cdFx0fSBlbHNlIGlmICgob2JqZWN0VHlwZSAmIDgpID09IDgpIHtcclxuXHRcdFx0cHJvcGVydGllcy5lbmRUaW1lID0gcGFyc2VJbnQocGFydHNbNV0pO1xyXG5cdFx0XHRwcm9wZXJ0aWVzLmR1cmF0aW9uID0gcHJvcGVydGllcy5lbmRUaW1lIC0gcHJvcGVydGllcy5zdGFydFRpbWU7XHJcblx0XHRcdHByb3BlcnRpZXMuYWRkaXRpb25zID0gSGl0T2JqZWN0LnBhcnNlQWRkaXRpb25zKHBhcnRzWzZdKTtcclxuXHRcdFx0cmV0dXJuIG5ldyBTcGlubmVyKHByb3BlcnRpZXMpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XHJcblx0XHRmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xyXG5cdFx0XHR0aGlzW2tleV0gPSBwcm9wZXJ0aWVzW2tleV07XHJcblx0XHR9XHJcblx0XHR0aGlzLnNlbGVjdGVkID0gZmFsc2U7XHJcblx0fVxyXG5cdHNlcmlhbGl6ZSgpIHtcclxuXHRcdHRocm93IFwiTm90IGltcGxlbWVudGVkLlwiO1xyXG5cdH1cclxuXHRyZW5kZXIoKSB7XHJcblx0XHR0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZC5cIjtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIEhpdENpcmNsZSBleHRlbmRzIEhpdE9iamVjdCB7XHJcblx0Y29uc3RydWN0b3IocHJvcGVydGllcykge1xyXG5cdFx0c3VwZXIocHJvcGVydGllcyk7XHJcblx0XHR0aGlzLmZhZGV0aW1lID0gLjg7XHJcblx0fVxyXG5cdHNlcmlhbGl6ZSgpIHtcclxuXHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLngpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLnkpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnN0YXJ0VGltZSk7XHJcblx0XHRwYXJ0cy5wdXNoKDEgfCAodGhpcy5uZXdDb21ibyA/IDQgOiAwKSk7XHJcblx0XHRwYXJ0cy5wdXNoKEhpdE9iamVjdC5zZXJpYWxpemVTb3VuZFR5cGVzKHRoaXMuc291bmRUeXBlcykpO1xyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IFtdO1xyXG5cdFx0YWRkaXRpb25zLnB1c2godGhpcy5hZGRpdGlvbnMuc2FtcGxlID8gYWRkaXRpb25UeXBlcy5pbmRleE9mKHRoaXMuYWRkaXRpb25zLnNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmFkZGl0aW9uYWxTYW1wbGUgPyBhZGRpdGlvblR5cGVzLmluZGV4T2YodGhpcy5hZGRpdGlvbnMuYWRkaXRpb25hbFNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmN1c3RvbVNhbXBsZUluZGV4ID8gdGhpcy5hZGRpdGlvbnMuY3VzdG9tU2FtcGxlSW5kZXggOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmhpdHNvdW5kVm9sdW1lID8gdGhpcy5hZGRpdGlvbnMuaGl0c291bmRWb2x1bWUgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKFwiXCIpO1xyXG5cdFx0cGFydHMucHVzaChhZGRpdGlvbnMuam9pbihcIjpcIikpO1xyXG5cdFx0cmV0dXJuIHBhcnRzLmpvaW4oXCIsXCIpO1xyXG5cdH1cclxuXHRyZW5kZXIodCwgY29sSW5kZXgsIGNvbWJvTnVtYmVyKSB7XHJcblx0XHRpZiAoIXQpIHQgPSBFZGl0b3Iuc291cmNlLnQ7XHJcblx0XHRpZiAoIWNvbEluZGV4IHx8ICFjb21ib051bWJlcikge1xyXG5cdFx0XHR2YXIgaSA9IHRoaXMuYmVhdG1hcC5IaXRPYmplY3RzLmluZGV4T2YodGhpcyk7XHJcblx0XHRcdGlmICghY29sSW5kZXgpIGNvbEluZGV4ID0gRWRpdG9yLm9iamNbaV1bMF0gJSBFZGl0b3IuY29scy5sZW5ndGg7XHJcblx0XHRcdGlmICghY29tYm9OdW1iZXIpIGNvbWJvTnVtYmVyID0gRWRpdG9yLm9iamNbaV1bMV07XHJcblx0XHR9XHJcblx0XHR2YXIgYXIgPSBhcnMocGFyc2VGbG9hdCh0aGlzLmJlYXRtYXBbJ0FwcHJvYWNoUmF0ZSddKSk7XHJcblx0XHR2YXIgY3MgPSBjc3B4KHBhcnNlRmxvYXQodGhpcy5iZWF0bWFwWydDaXJjbGVTaXplJ10pKTtcclxuXHRcdHZhciBvZmZzZXQgPSB0aGlzLnN0YXJ0VGltZSAvIDEwMDA7XHJcblx0XHR2YXIgeCA9IHRoaXMucG9zaXRpb24ueCAtIGNzIC8gMixcclxuXHRcdFx0eSA9IHRoaXMucG9zaXRpb24ueSAtIGNzIC8gMjtcclxuXHRcdHZhciB0ZCA9IG9mZnNldCAtIHQ7XHJcblx0XHRpZiAodGQgPiBhciB8fCB0ZCA8IC10aGlzLmZhZGV0aW1lKSByZXR1cm4gZmFsc2U7XHJcblx0XHR2YXIgY29sb3IgPSBFZGl0b3IuY29sc1tjb2xJbmRleF07XHJcblx0XHR2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWRjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdFx0Y3R4LnNhdmUoKTtcclxuXHRcdGlmICh0ZCA+IDApIHtcclxuXHRcdFx0Y3R4Lmdsb2JhbEFscGhhID0gMiAtIDIgKiB0ZCAvIGFyO1xyXG5cdFx0XHR2YXIgcl9hcyA9IGNzICogKDIuNSAqIHRkIC8gYXIgKyAxKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpblsnYXBwcm9hY2hjaXJjbGUnICsgY29sSW5kZXhdLCB4ICsgY3MgLyAyIC0gcl9hcyAvIDIsIHkgKyBjcyAvIDIgLSByX2FzIC8gMiwgcl9hcywgcl9hcyk7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2hpdGNpcmNsZScgKyBjb2xJbmRleF0sIHgsIHksIGNzLCBjcyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjdHguZ2xvYmFsQWxwaGEgPSBNYXRoLm1heCgxICsgdGQgLyB0aGlzLmZhZGV0aW1lLCAwKTtcclxuXHRcdFx0dmFyIHJfYXMgPSBjcyAqIE1hdGgubWluKC10ZCAvIGFyICsgMSwgMTMgLyAxMik7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2FwcHJvYWNoY2lyY2xlJyArIGNvbEluZGV4XSwgeCArIGNzIC8gMiAtIHJfYXMgLyAyLCB5ICsgY3MgLyAyIC0gcl9hcyAvIDIsIHJfYXMsIHJfYXMpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydoaXRjaXJjbGUnXSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgZHJhd092ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW4uaGl0Y2lyY2xlb3ZlcmxheSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdH07XHJcblx0XHR2YXIgZHJhd051bWJlciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIG51bSA9IEVkaXRvci5za2luWydkZWZhdWx0LScgKyBjb21ib051bWJlcl07XHJcblx0XHRcdHZhciBuZXdoID0gbnVtLmhlaWdodCAvIEVkaXRvci5za2luWydoaXRjaXJjbGUnXS5oZWlnaHQgKiBjcyAqIDMgLyA0O1xyXG5cdFx0XHR2YXIgZGggPSBuZXdoIC8gbnVtLmhlaWdodDtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShudW0sIHggLSBudW0ud2lkdGggKiBkaCAvIDIgKyBjcyAvIDIsIHkgLSBuZXdoIC8gMiArIGNzIC8gMiwgbnVtLndpZHRoICogZGgsIG5ld2gpO1xyXG5cclxuXHRcdH07XHJcblx0XHRpZiAocGFyc2VJbnQoRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1iZXIgfHwgRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGF5QWJvdmVOdW1lciwgMTApKSB7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdFx0ZHJhd092ZXJsYXkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRyYXdPdmVybGF5KCk7XHJcblx0XHRcdGRyYXdOdW1iZXIoKTtcclxuXHRcdH1cclxuXHRcdGN0eC5yZXN0b3JlKCk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFNsaWRlciBleHRlbmRzIEhpdE9iamVjdCB7XHJcblx0Y29uc3RydWN0b3IocHJvcGVydGllcykge1xyXG5cdFx0c3VwZXIocHJvcGVydGllcyk7XHJcblx0XHR0aGlzLmZhZGV0aW1lID0gLjI1O1xyXG5cdFx0dGhpcy5jYWNoZSA9IHsgZmxhZzogdHJ1ZSB9O1xyXG5cdH1cclxuXHRzdGF0aWMgZ2V0RW5kUG9pbnQoY3VydmVUeXBlLCBzbGlkZXJMZW5ndGgsIHBvaW50cykge1xyXG5cdFx0aWYgKCFjdXJ2ZVR5cGUgfHwgIXNsaWRlckxlbmd0aCB8fCAhcG9pbnRzKSByZXR1cm47XHJcblx0XHRzd2l0Y2ggKGN1cnZlVHlwZSkge1xyXG5cdFx0XHRjYXNlIFwibGluZWFyXCI6XHJcblx0XHRcdFx0cmV0dXJuIE1hdGgyLnBvaW50T25MaW5lKHBvaW50c1swXSwgcG9pbnRzWzFdLCBzbGlkZXJMZW5ndGgpO1xyXG5cdFx0XHRjYXNlIFwiY2F0bXVsbFwiOlxyXG5cdFx0XHRcdC8vIG5vdCBzdXBwb3J0ZWRcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGNhc2UgXCJiZXppZXJcIjpcclxuXHRcdFx0XHRpZiAoIXBvaW50cyB8fCBwb2ludHMubGVuZ3RoIDwgMilcclxuXHRcdFx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHRcdFx0aWYgKHBvaW50cy5sZW5ndGggPT0gMikge1xyXG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgyLnBvaW50T25MaW5lKHBvaW50c1swXSwgcG9pbnRzWzFdLCBzbGlkZXJMZW5ndGgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwb2ludHMgPSBwb2ludHMuc2xpY2UoKTtcclxuXHRcdFx0XHR2YXIgYmV6aWVyLCBwcmV2aW91cywgcG9pbnQ7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIGwgPSBwb2ludHMubGVuZ3RoOyBpIDwgbDsgaSArPSAxKSB7XHJcblx0XHRcdFx0XHRwb2ludCA9IHBvaW50c1tpXTtcclxuXHRcdFx0XHRcdGlmICghcG9pbnQpXHJcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0aWYgKCFwcmV2aW91cykge1xyXG5cdFx0XHRcdFx0XHRwcmV2aW91cyA9IHBvaW50O1xyXG5cdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChwb2ludC5lcXVhbHMocHJldmlvdXMpKSB7XHJcblx0XHRcdFx0XHRcdGJlemllciA9IG5ldyBCZXppZXIocG9pbnRzLnNwbGljZSgwLCBpKSk7XHJcblx0XHRcdFx0XHRcdHNsaWRlckxlbmd0aCAtPSBiZXppZXIucHhMZW5ndGg7XHJcblx0XHRcdFx0XHRcdGkgPSAwOyAvLywgbGVuZ3RoID0gcG9pbnRzLmxlbmd0aDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHByZXZpb3VzID0gcG9pbnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJlemllciA9IG5ldyBCZXppZXIocG9pbnRzKTtcclxuXHRcdFx0XHRyZXR1cm4gYmV6aWVyLnBvaW50QXREaXN0YW5jZShzbGlkZXJMZW5ndGgpO1xyXG5cdFx0XHRjYXNlIFwicGFzcy10aHJvdWdoXCI6XHJcblx0XHRcdFx0aWYgKCFwb2ludHMgfHwgcG9pbnRzLmxlbmd0aCA8IDIpXHJcblx0XHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdGlmIChwb2ludHMubGVuZ3RoID09IDIpXHJcblx0XHRcdFx0XHRyZXR1cm4gTWF0aDIucG9pbnRPbkxpbmUocG9pbnRzWzBdLCBwb2ludHNbMV0sIHNsaWRlckxlbmd0aCk7XHJcblx0XHRcdFx0aWYgKHBvaW50cy5sZW5ndGggPiAzKVxyXG5cdFx0XHRcdFx0cmV0dXJuIFNsaWRlci5nZXRFbmRQb2ludChcImJlemllclwiLCBzbGlkZXJMZW5ndGgsIHBvaW50cyk7XHJcblx0XHRcdFx0dmFyIFtjaXJjdW1DZW50ZXIsIHJhZGl1c10gPSBNYXRoMi5nZXRDaXJjdW1DaXJjbGUocG9pbnRzWzBdLCBwb2ludHNbMV0sIHBvaW50c1syXSk7XHJcblx0XHRcdFx0dmFyIHJhZGlhbnMgPSBzbGlkZXJMZW5ndGggLyByYWRpdXM7XHJcblx0XHRcdFx0aWYgKE1hdGgyLmlzTGVmdChwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdKSlcclxuXHRcdFx0XHRcdHJhZGlhbnMgKj0gLTE7XHJcblx0XHRcdFx0cmV0dXJuIE1hdGgyLnJvdGF0ZShjaXJjdW1DZW50ZXIsIHBvaW50c1sxXSwgcmFkaWFucyk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGNhbGN1bGF0ZSgpIHtcclxuXHRcdHZhciB0aW1pbmcgPSB0aGlzLmJlYXRtYXAuZ2V0VGltaW5nUG9pbnQodGhpcy5zdGFydFRpbWUpO1xyXG5cdFx0aWYgKHRpbWluZykge1xyXG5cdFx0XHR2YXIgcHhQZXJCZWF0ID0gdGhpcy5iZWF0bWFwLlNsaWRlck11bHRpcGxpZXIgKiAxMDAgKiB0aW1pbmcudmVsb2NpdHk7XHJcblx0XHRcdHZhciBiZWF0c051bWJlciA9ICh0aGlzLnBpeGVsTGVuZ3RoICogdGhpcy5yZXBlYXRDb3VudCkgLyBweFBlckJlYXQ7XHJcblx0XHRcdHRoaXMuZHVyYXRpb24gPSBNYXRoLmNlaWwoYmVhdHNOdW1iZXIgKiB0aW1pbmcuYmVhdExlbmd0aCk7XHJcblx0XHRcdHRoaXMuZW5kVGltZSA9IHRoaXMuc3RhcnRUaW1lICsgdGhpcy5kdXJhdGlvbjtcclxuXHRcdH1cclxuXHRcdHZhciBlbmRQb2ludCA9IFNsaWRlci5nZXRFbmRQb2ludCh0aGlzLmN1cnZlVHlwZSwgdGhpcy5waXhlbExlbmd0aCwgdGhpcy5wb2ludHMpO1xyXG5cdFx0aWYgKGVuZFBvaW50KSB7XHJcblx0XHRcdHRoaXMuZW5kUG9zaXRpb24gPSBlbmRQb2ludDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZW5kUG9zaXRpb24gPSB0aGlzLnBvaW50c1t0aGlzLnBvaW50cy5sZW5ndGggLSAxXTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmN1cnZlVHlwZSA9PSBcInBhc3MtdGhyb3VnaFwiKSB7XHJcblx0XHRcdHRoaXMucGFzc3Rocm91Z2hjaXJjbGUgPSBNYXRoMi5nZXRDaXJjdW1DaXJjbGUodGhpcy5wb2ludHNbMF0sIHRoaXMucG9pbnRzWzFdLCB0aGlzLnBvaW50c1syXSk7XHJcblx0XHR9XHJcblx0XHR0cnkge1xyXG5cdFx0XHRpZiAodGhpcy5jdXJ2ZVR5cGUgPT0gJ3Bhc3MtdGhyb3VnaCcpIHtcclxuXHRcdFx0XHR0aGlzLnNwbGluZSA9IHBhc3N0aHJvdWdoKHRoaXMucG9pbnRzLCB0aGlzLnBpeGVsTGVuZ3RoKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmN1cnZlVHlwZSA9PSAnbGluZScpIHtcclxuXHRcdFx0XHR0aGlzLnNwbGluZSA9IGxpbmUodGhpcy5wb2ludHMsIHRoaXMucGl4ZWxMZW5ndGgpWzBdO1xyXG5cdFx0XHR9IGVsc2UgeyAvL2Fzc3VtZSBpdCdzIGEgQmV6aWVyXHJcblx0XHRcdFx0dGhpcy5zcGxpbmUgPSBiZXppZXIodGhpcy5wb2ludHMsIHRoaXMucGl4ZWxMZW5ndGgpO1xyXG5cdFx0XHRcdHRoaXMuc3BsaW5lLnNwbGljZSgtMSwgMSwgdGhpcy5lbmRQb3NpdGlvbi50b0FycmF5KCkpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlKSB7IH1cclxuXHRcdGlmICh0eXBlb2YgUGF0aDJEICE9IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0dGhpcy5wYXRoID0gbmV3IFBhdGgyRCgpO1xyXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc3BsaW5lLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0dGhpcy5wYXRoLmxpbmVUbyh0aGlzLnNwbGluZVtqXVswXSwgdGhpcy5zcGxpbmVbal1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHNlcmlhbGl6ZSgpIHtcclxuXHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLngpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLnkpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnN0YXJ0VGltZSk7XHJcblx0XHRwYXJ0cy5wdXNoKDIgfCAodGhpcy5uZXdDb21ibyA/IDQgOiAwKSk7XHJcblx0XHRwYXJ0cy5wdXNoKEhpdE9iamVjdC5zZXJpYWxpemVTb3VuZFR5cGVzKHRoaXMuc291bmRUeXBlcykpO1xyXG5cdFx0dmFyIHNsaWRlclBvaW50cyA9IFtjdXJ2ZVR5cGVzW3RoaXMuY3VydmVUeXBlXV07XHJcblx0XHRzbGlkZXJQb2ludHMucHVzaCguLi50aGlzLnBvaW50cy5zbGljZSgxKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHRcdFx0cmV0dXJuIGl0ZW0udG9TdHJpbmcoXCI6XCIpO1xyXG5cdFx0fSkpO1xyXG5cdFx0cGFydHMucHVzaChzbGlkZXJQb2ludHMuam9pbihcInxcIikpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnJlcGVhdENvdW50KTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy5waXhlbExlbmd0aCk7XHJcblx0XHR2YXIgZWRnZVNvdW5kcyA9IFtdLFxyXG5cdFx0XHRlZGdlQWRkaXRpb25zID0gW107XHJcblx0XHR0aGlzLmVkZ2VzLmZvckVhY2goZWRnZSA9PiB7XHJcblx0XHRcdGVkZ2VTb3VuZHMucHVzaChIaXRPYmplY3Quc2VyaWFsaXplU291bmRUeXBlcyhlZGdlLnNvdW5kVHlwZXMpKTtcclxuXHRcdFx0ZWRnZUFkZGl0aW9ucy5wdXNoKChlZGdlLmFkZGl0aW9ucy5zYW1wbGVzZXQgPyBhZGRpdGlvblR5cGVzLmluZGV4T2YoZWRnZS5hZGRpdGlvbnMuc2FtcGxlc2V0KSA6IDApICsgXCI6XCIgK1xyXG5cdFx0XHRcdChlZGdlLmFkZGl0aW9ucy5hZGRpdGlvbnNTYW1wbGVzZXQgPyBhZGRpdGlvblR5cGVzLmluZGV4T2YoZWRnZS5hZGRpdGlvbnMuYWRkaXRpb25zU2FtcGxlc2V0KSA6IDApKTtcclxuXHRcdH0pO1xyXG5cdFx0cGFydHMucHVzaChlZGdlU291bmRzLmpvaW4oJ3wnKSk7XHJcblx0XHRwYXJ0cy5wdXNoKGVkZ2VBZGRpdGlvbnMuam9pbignfCcpKTtcclxuXHRcdHZhciBhZGRpdGlvbnMgPSBbXTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLnNhbXBsZSA/IGFkZGl0aW9uVHlwZXMuaW5kZXhPZih0aGlzLmFkZGl0aW9ucy5zYW1wbGUpIDogMCk7XHJcblx0XHRhZGRpdGlvbnMucHVzaCh0aGlzLmFkZGl0aW9ucy5hZGRpdGlvbmFsU2FtcGxlID8gYWRkaXRpb25UeXBlcy5pbmRleE9mKHRoaXMuYWRkaXRpb25zLmFkZGl0aW9uYWxTYW1wbGUpIDogMCk7XHJcblx0XHRhZGRpdGlvbnMucHVzaCh0aGlzLmFkZGl0aW9ucy5jdXN0b21TYW1wbGVJbmRleCA/IHRoaXMuYWRkaXRpb25zLmN1c3RvbVNhbXBsZUluZGV4IDogMCk7XHJcblx0XHRhZGRpdGlvbnMucHVzaCh0aGlzLmFkZGl0aW9ucy5oaXRzb3VuZFZvbHVtZSA/IHRoaXMuYWRkaXRpb25zLmhpdHNvdW5kVm9sdW1lIDogMCk7XHJcblx0XHRhZGRpdGlvbnMucHVzaChcIlwiKTtcclxuXHRcdHBhcnRzLnB1c2goYWRkaXRpb25zLmpvaW4oXCI6XCIpKTtcclxuXHRcdHJldHVybiBwYXJ0cy5qb2luKFwiLFwiKTtcclxuXHR9XHJcblx0aG92ZXIoKSB7XHJcblx0XHR2YXIgY3R4MiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkY2FudmFzMicpLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHRjdHgyLmxpbmVXaWR0aCA9IC41O1xyXG5cdFx0Y3R4Mi5zdHJva2VTdHlsZSA9ICcjNTU1JztcclxuXHRcdGN0eDIuYmVnaW5QYXRoKCk7XHJcblx0XHR2YXIgc2tpcCA9IGZhbHNlO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaW5fYm94ID0gdGhpcy5wb2ludHNbaV0ueCAtIDIuNSA8IG1vdXNlWCAmJiB0aGlzLnBvaW50c1tpXS54ICsgMi41ID4gbW91c2VYICYmIHRoaXMucG9pbnRzW2ldLnkgLSAyLjUgPCBtb3VzZVkgJiYgdGhpcy5wb2ludHNbaV0ueSArIDIuNSA+IG1vdXNlWTtcclxuXHRcdFx0aWYgKHNraXApIHtcclxuXHRcdFx0XHRza2lwID0gZmFsc2U7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGkgPCB0aGlzLnBvaW50cy5sZW5ndGggLSAxICYmIHRoaXMucG9pbnRzW2ldLmVxdWFscyh0aGlzLnBvaW50c1tpICsgMV0pKSB7XHJcblx0XHRcdFx0c2tpcCA9IHRydWU7XHJcblx0XHRcdFx0Y3R4Mi5maWxsU3R5bGUgPSBpbl9ib3ggPyAnI0YwMCcgOiAnI0UwMCc7XHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdGN0eDIuZmlsbFN0eWxlID0gaW5fYm94ID8gJyNGRkYnIDogJyNEREQnO1xyXG5cdFx0XHRjdHgyLmdsb2JhbEFscGhhID0gaW5fYm94ID8gMSA6IC43NTtcclxuXHRcdFx0Y3R4Mi5maWxsUmVjdCh0aGlzLnBvaW50c1tpXS54IC0gMiwgdGhpcy5wb2ludHNbaV0ueSAtIDIsIDQsIDQpO1xyXG5cdFx0XHRjdHgyLmdsb2JhbEFscGhhID0gMTtcclxuXHRcdFx0Y3R4Mi5zdHJva2VSZWN0KHRoaXMucG9pbnRzW2ldLnggLSAyLCB0aGlzLnBvaW50c1tpXS55IC0gMiwgNCwgNCk7XHJcblx0XHRcdGN0eDIubGluZVRvKHRoaXMucG9pbnRzW2ldLngsIHRoaXMucG9pbnRzW2ldLnkpO1xyXG5cdFx0fVxyXG5cdFx0Y3R4Mi5saW5lV2lkdGggPSAuMjU7XHJcblx0XHRjdHgyLnN0cm9rZVN0eWxlID0gJyNGRkYnO1xyXG5cdFx0Y3R4Mi5zdHJva2UoKTtcclxuXHR9XHJcblx0cmVuZGVyKHQsIGNvbEluZGV4LCBjb21ib051bWJlcikge1xyXG5cdFx0aWYgKCF0KSB0ID0gRWRpdG9yLnNvdXJjZS50O1xyXG5cdFx0aWYgKCFjb2xJbmRleCB8fCAhY29tYm9OdW1iZXIpIHtcclxuXHRcdFx0dmFyIGkgPSB0aGlzLmJlYXRtYXAuSGl0T2JqZWN0cy5pbmRleE9mKHRoaXMpO1xyXG5cdFx0XHRpZiAoIWNvbEluZGV4KSBjb2xJbmRleCA9IEVkaXRvci5vYmpjW2ldWzBdICUgRWRpdG9yLmNvbHMubGVuZ3RoO1xyXG5cdFx0XHRpZiAoIWNvbWJvTnVtYmVyKSBjb21ib051bWJlciA9IEVkaXRvci5vYmpjW2ldWzFdO1xyXG5cdFx0fVxyXG5cdFx0dmFyIGFyID0gYXJzKHBhcnNlRmxvYXQodGhpcy5iZWF0bWFwWydBcHByb2FjaFJhdGUnXSkpO1xyXG5cdFx0dmFyIGNzID0gY3NweChwYXJzZUZsb2F0KHRoaXMuYmVhdG1hcFsnQ2lyY2xlU2l6ZSddKSk7XHJcblx0XHR2YXIgb2Zmc2V0ID0gdGhpcy5zdGFydFRpbWUgLyAxMDAwO1xyXG5cdFx0dmFyIHggPSB0aGlzLnBvc2l0aW9uLnggLSBjcyAvIDIsXHJcblx0XHRcdHkgPSB0aGlzLnBvc2l0aW9uLnkgLSBjcyAvIDI7XHJcblx0XHR2YXIgdGQgPSBvZmZzZXQgLSB0O1xyXG5cdFx0dmFyIGVuZFRpbWUgPSB0aGlzLmVuZFRpbWUgLyAxMDAwO1xyXG5cdFx0aWYgKHRkID4gYXIgfHwgdCA+IGVuZFRpbWUgKyAuOCkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0dmFyIGNvbG9yID0gRWRpdG9yLmNvbHNbY29sSW5kZXhdO1xyXG5cdFx0dmFyIGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRcdGN0eC5zYXZlKCk7XHJcblx0XHR2YXIgY3R4MiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkY2FudmFzMicpLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHRjdHgyLnNhdmUoKTtcclxuXHRcdGlmICh0ZCA+IDApIGN0eC5nbG9iYWxBbHBoYSA9IDIgLSAyICogdGQgLyBhcjtcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjdHguZ2xvYmFsQWxwaGEgPSBNYXRoLm1heCgxIC0gKHQgLSBlbmRUaW1lKSAvIHRoaXMuZmFkZXRpbWUsIDApO1xyXG5cdFx0XHRjdHgyLmdsb2JhbEFscGhhID0gTWF0aC5tYXgoMSAtICh0IC0gZW5kVGltZSkgLyB0aGlzLmZhZGV0aW1lLCAwKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmNhY2hlLmNvbCAhPSBFZGl0b3IuY29sc1tjb2xJbmRleF0gfHwgdGhpcy5jYWNoZS5jcyAhPSBjcyB8fCB0aGlzLmNhY2hlLmZsYWcpIHtcclxuXHRcdFx0aWYgKHRoaXMuY2FjaGUuY3MgIT0gY3MgfHwgIXRoaXMuY2FjaGUuY2FjaGVkIHx8IHRoaXMuY2FjaGUuZmxhZykge1xyXG5cdFx0XHRcdHRoaXMuY2FjaGUucmVuZGVyID0gcmVuZGVyX2N1cnZlMih0aGlzLnNwbGluZSwgY3MpO1xyXG5cdFx0XHRcdHRoaXMuY2FjaGUuZmxhZyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuY2FjaGUuY29sID0gRWRpdG9yLmNvbHNbY29sSW5kZXhdO1xyXG5cdFx0XHR0aGlzLmNhY2hlLmNzID0gY3M7XHJcblx0XHRcdHZhciBzbGlkZXJfYm9yZGVyID0gRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5TbGlkZXJCb3JkZXIgPyBjb2xvclRvQXJyYXkoRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5TbGlkZXJCb3JkZXIpIDogdW5kZWZpbmVkO1xyXG5cdFx0XHR2YXIgc2xpZGVyX3RyYWNrY29sb3IgPSBFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLlNsaWRlclRyYWNrT3ZlcnJpZGUgPyBjb2xvclRvQXJyYXkoRWRpdG9yLnNraW4uX21ldGEub3B0aW9ucy5TbGlkZXJUcmFja092ZXJyaWRlKSA6IEVkaXRvci5jb2xzW2NvbEluZGV4XTtcclxuXHRcdFx0dGhpcy5jYWNoZS5jYWNoZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHRcdFx0dGhpcy5jYWNoZS5jYWNoZWQud2lkdGggPSB0aGlzLmNhY2hlLnJlbmRlclswXVswXS53aWR0aDtcclxuXHRcdFx0dGhpcy5jYWNoZS5jYWNoZWQuaGVpZ2h0ID0gdGhpcy5jYWNoZS5yZW5kZXJbMF1bMF0uaGVpZ2h0O1xyXG5cdFx0XHR2YXIgdGVtcGN0eCA9IHRoaXMuY2FjaGUuY2FjaGVkLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHRcdHRlbXBjdHguZHJhd0ltYWdlKHRpbnQodGhpcy5jYWNoZS5yZW5kZXJbMF1bMF0sIHNsaWRlcl9ib3JkZXIpLCAwLCAwKTtcclxuXHRcdFx0dGVtcGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0JztcclxuXHRcdFx0dGVtcGN0eC5kcmF3SW1hZ2UodGhpcy5jYWNoZS5yZW5kZXJbMF1bMV0sIDAsIDApO1xyXG5cdFx0XHR0ZW1wY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XHJcblx0XHRcdHRlbXBjdHguZ2xvYmFsQWxwaGEgPSAuNzU7XHJcblx0XHRcdHRlbXBjdHguZHJhd0ltYWdlKHRpbnQodGhpcy5jYWNoZS5yZW5kZXJbMF1bMV0sIHNsaWRlcl90cmFja2NvbG9yKSwgMCwgMCk7XHJcblx0XHRcdHRlbXBjdHguZHJhd0ltYWdlKHRoaXMuY2FjaGUucmVuZGVyWzBdWzJdLCAwLCAwKTtcclxuXHRcdH1cclxuXHRcdGN0eC5kcmF3SW1hZ2UodGhpcy5jYWNoZS5jYWNoZWQsIHRoaXMuY2FjaGUucmVuZGVyWzFdWzBdLCB0aGlzLmNhY2hlLnJlbmRlclsxXVsxXSwgdGhpcy5jYWNoZS5jYWNoZWQud2lkdGggLyAyLCB0aGlzLmNhY2hlLmNhY2hlZC5oZWlnaHQgLyAyKTtcclxuXHRcdHZhciByID0gdGhpcy5yZXBlYXRDb3VudDtcclxuXHRcdGZvciAodmFyIHAgPSAxOyBwIDwgcjsgcCsrKSB7XHJcblx0XHRcdC8vcmVwZWF0IGFycm93cy9zbGlkZXIgZW5kc1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRkIDw9IDAgJiYgdGhpcy5kdXJhdGlvbiAvIDEwMDAgKyB0ZCA+IC0uMikge1xyXG5cdFx0XHR2YXIgcHJvZyA9IC10ZCAvIHRoaXMuZHVyYXRpb24gKiAxMDAwOyAvLyBwcm9ncmVzcyBwZXJjZW50YWdlICgwLTEpXHJcblx0XHRcdHZhciBjdXJwID0gcHJvZyAqIHI7IC8vIGN1cnJlbnQgcHJvZ3Jlc3MgKGVxdWl2YWxlbnQgdG8gZGlzdGFuY2UgdHJhdmVsZWQgZGl2aWRlZCBieSBzbGlkZXIgbGVuZ3RoKVxyXG5cdFx0XHR2YXIgZGlyID0gMSAtIDIgKiAoTWF0aC5mbG9vcihjdXJwKSAlIDIpOyAvLyBkaXJlY3Rpb24gdGhlIGJhbGwgaXMgdHJhdmVsaW5nLCAxIGZvciBub3JtYWwsIC0xIGZvciByZXZlcnNlXHJcblx0XHRcdHZhciBkaXN0YW5jZSA9IGN1cnAgJSAxICogdGhpcy5waXhlbExlbmd0aDtcclxuXHRcdFx0dmFyIGogPSBkaXIgPT0gMSA/IDAgOiB0aGlzLnNwbGluZS5sZW5ndGggLSAxO1xyXG5cdFx0XHR2YXIgamVuZCA9IGRpciA9PSAxID8gdGhpcy5zcGxpbmUubGVuZ3RoIC0gMSA6IDA7XHJcblx0XHRcdHdoaWxlIChqICE9IGplbmQpIHtcclxuXHRcdFx0XHR2YXIgcDEgPSB0aGlzLnNwbGluZVtqXTtcclxuXHRcdFx0XHR2YXIgcDIgPSB0aGlzLnNwbGluZVtqICsgZGlyXTtcclxuXHRcdFx0XHR2YXIgZHBhcnQgPSBNYXRoLnNxcnQoTWF0aC5wb3cocDFbMF0gLSBwMlswXSwgMikgKyBNYXRoLnBvdyhwMVsxXSAtIHAyWzFdLCAyKSk7XHJcblx0XHRcdFx0aWYgKGRwYXJ0ID4gZGlzdGFuY2UpIHtcclxuXHRcdFx0XHRcdC8vd2l0aG91dCBleHRyYSBpbnRlcnBvbGF0aW9uIHN0dWZmXHJcblx0XHRcdFx0XHQvL2N0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ3NsaWRlcmIwJ10sIHAxWzBdIC0gY3MgLyAyLCBwMVsxXSAtIGNzIC8gMiwgY3MsIGNzKTtcclxuXHRcdFx0XHRcdGlmICh0aGlzLmR1cmF0aW9uIC8gMTAwMCArIHRkID49IC0uMDAxKSB7XHJcblx0XHRcdFx0XHRcdHZhciBwb3N4ID0gcDFbMF0gKyBkaXN0YW5jZSAvIGRwYXJ0ICogKHAyWzBdIC0gcDFbMF0pLFxyXG5cdFx0XHRcdFx0XHRcdHBvc3kgPSBwMVsxXSArIGRpc3RhbmNlIC8gZHBhcnQgKiAocDJbMV0gLSBwMVsxXSk7XHJcblx0XHRcdFx0XHRcdHZhciBjczIgPSBjcyAqIDExIC8gMTI7XHJcblx0XHRcdFx0XHRcdGN0eDIuc2F2ZSgpO1xyXG5cdFx0XHRcdFx0XHRjdHgyLnRyYW5zbGF0ZShwb3N4LCBwb3N5KTtcclxuXHRcdFx0XHRcdFx0Y3R4Mi5yb3RhdGUoTWF0aC5hdGFuMihwMlsxXSAtIHAxWzFdLCBwMlswXSAtIHAxWzBdKSArIChFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLlNsaWRlckJhbGxGbGlwID09IDAgJiYgZGlyID09IC0xID8gTWF0aC5QSSA6IDApKTtcclxuXHRcdFx0XHRcdFx0Y3R4Mi5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ3NsaWRlcmIwJyArIGNvbEluZGV4XSwgLWNzMiAvIDIsIC1jczIgLyAyLCBjczIsIGNzMik7XHJcblx0XHRcdFx0XHRcdGN0eDIucmVzdG9yZSgpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dmFyIHRlbXAgPSByICUgMiA/IHRoaXMuc3BsaW5lLmxlbmd0aCAtIDEgOiAwO1xyXG5cdFx0XHRcdFx0XHR2YXIgcG9zeCA9IHRoaXMuc3BsaW5lW3RlbXBdWzBdLFxyXG5cdFx0XHRcdFx0XHRcdHBvc3kgPSB0aGlzLnNwbGluZVt0ZW1wXVsxXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGN0eDIuc2F2ZSgpO1xyXG5cdFx0XHRcdFx0dmFyIHJfZnMgPSB0ZCA+IC0uMSA/IGNzICogKDEgLSB0ZCAqIDEwKSA6ICh0ZCA8IC10aGlzLmR1cmF0aW9uIC8gMTAwMCA/IDIgKiBjcyArICh0ZCArIHRoaXMuZHVyYXRpb24gLyAxMDAwKSAqIDUgKiAuNSAqIGNzIDogMiAqIGNzKTtcclxuXHRcdFx0XHRcdGN0eDIuZHJhd0ltYWdlKEVkaXRvci5za2luWydzbGlkZXJmb2xsb3djaXJjbGUnXSwgcG9zeCAtIHJfZnMgLyAyLCBwb3N5IC0gcl9mcyAvIDIsIHJfZnMsIHJfZnMpO1xyXG5cdFx0XHRcdFx0Y3R4Mi5yZXN0b3JlKCk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZGlzdGFuY2UgLT0gZHBhcnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGogKz0gZGlyO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAodGQgPiAwKSB7XHJcblx0XHRcdHZhciByX2FzID0gY3MgKiAoMi41ICogdGQgLyBhciArIDEpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydhcHByb2FjaGNpcmNsZScgKyBjb2xJbmRleF0sIHggKyBjcyAvIDIgLSByX2FzIC8gMiwgeSArIGNzIC8gMiAtIHJfYXMgLyAyLCByX2FzLCByX2FzKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpblsnaGl0Y2lyY2xlJyArIGNvbEluZGV4XSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGN0eC5nbG9iYWxBbHBoYSA9IE1hdGgubWF4KDEgKyB0ZCAvIC44LCAwKTtcclxuXHRcdFx0dmFyIHJfYXMgPSBjcyAqIE1hdGgubWluKC10ZCAvIGFyICsgMSwgMTMgLyAxMik7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2FwcHJvYWNoY2lyY2xlJyArIGNvbEluZGV4XSwgeCArIGNzIC8gMiAtIHJfYXMgLyAyLCB5ICsgY3MgLyAyIC0gcl9hcyAvIDIsIHJfYXMsIHJfYXMpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydoaXRjaXJjbGUnXSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgZHJhd092ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW4uaGl0Y2lyY2xlb3ZlcmxheSwgeCwgeSwgY3MsIGNzKTtcclxuXHRcdH07XHJcblx0XHR2YXIgZHJhd051bWJlciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIG51bSA9IEVkaXRvci5za2luWydkZWZhdWx0LScgKyBjb21ib051bWJlcl07XHJcblx0XHRcdHZhciBuZXdoID0gbnVtLmhlaWdodCAvIEVkaXRvci5za2luWydoaXRjaXJjbGUnXS5oZWlnaHQgKiBjcyAqIDMgLyA0O1xyXG5cdFx0XHR2YXIgZGggPSBuZXdoIC8gbnVtLmhlaWdodDtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShudW0sIHggLSBudW0ud2lkdGggKiBkaCAvIDIgKyBjcyAvIDIsIHkgLSBuZXdoIC8gMiArIGNzIC8gMiwgbnVtLndpZHRoICogZGgsIG5ld2gpO1xyXG5cdFx0fTtcclxuXHRcdGlmIChwYXJzZUludChFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLkhpdENpcmNsZU92ZXJsYXlBYm92ZU51bWJlciB8fCBFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLkhpdENpcmNsZU92ZXJsYXlBYm92ZU51bWVyLCAxMCkpIHtcclxuXHRcdFx0ZHJhd051bWJlcigpO1xyXG5cdFx0XHRkcmF3T3ZlcmxheSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZHJhd092ZXJsYXkoKTtcclxuXHRcdFx0ZHJhd051bWJlcigpO1xyXG5cdFx0fVxyXG5cdFx0Y3R4LnJlc3RvcmUoKTtcclxuXHRcdGN0eDIucmVzdG9yZSgpO1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBTcGlubmVyIGV4dGVuZHMgSGl0T2JqZWN0IHtcclxuXHRjb25zdHJ1Y3Rvcihwcm9wZXJ0aWVzKSB7XHJcblx0XHRzdXBlcihwcm9wZXJ0aWVzKTtcclxuXHRcdHRoaXMuZmFkZXRpbWUgPSAuMjU7XHJcblx0fVxyXG5cdHNlcmlhbGl6ZSgpIHtcclxuXHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLngpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnBvc2l0aW9uLnkpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnN0YXJ0VGltZSk7XHJcblx0XHRwYXJ0cy5wdXNoKDggfCAodGhpcy5uZXdDb21ibyA/IDQgOiAwKSk7XHJcblx0XHRwYXJ0cy5wdXNoKEhpdE9iamVjdC5zZXJpYWxpemVTb3VuZFR5cGVzKHRoaXMuc291bmRUeXBlcykpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLmVuZFRpbWUpO1xyXG5cdFx0dmFyIGFkZGl0aW9ucyA9IFtdO1xyXG5cdFx0YWRkaXRpb25zLnB1c2godGhpcy5hZGRpdGlvbnMuc2FtcGxlID8gYWRkaXRpb25UeXBlcy5pbmRleE9mKHRoaXMuYWRkaXRpb25zLnNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmFkZGl0aW9uYWxTYW1wbGUgPyBhZGRpdGlvblR5cGVzLmluZGV4T2YodGhpcy5hZGRpdGlvbnMuYWRkaXRpb25hbFNhbXBsZSkgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmN1c3RvbVNhbXBsZUluZGV4ID8gdGhpcy5hZGRpdGlvbnMuY3VzdG9tU2FtcGxlSW5kZXggOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKHRoaXMuYWRkaXRpb25zLmhpdHNvdW5kVm9sdW1lID8gdGhpcy5hZGRpdGlvbnMuaGl0c291bmRWb2x1bWUgOiAwKTtcclxuXHRcdGFkZGl0aW9ucy5wdXNoKFwiXCIpO1xyXG5cdFx0cGFydHMucHVzaChhZGRpdGlvbnMuam9pbihcIjpcIikpO1xyXG5cdFx0cmV0dXJuIHBhcnRzLmpvaW4oXCIsXCIpO1xyXG5cdH1cclxuXHRyZW5kZXIodCwgY29sSW5kZXgsIGNvbWJvTnVtYmVyKSB7XHJcblx0XHR2YXIgZHVyID0gdGhpcy5kdXJhdGlvbiAvIDEwMDA7XHJcblx0XHR2YXIgdGQgPSB0aGlzLnN0YXJ0VGltZSAvIDEwMDAgLSB0O1xyXG5cdFx0aWYgKHRoaXMuZW5kVGltZSAvIDEwMDAgKyB0aGlzLmZhZGV0aW1lIDwgdCB8fCB0ZCA+IC40KSByZXR1cm4gZmFsc2U7XHJcblx0XHR2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWRjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdFx0Y3R4LnNhdmUoKTtcclxuXHRcdGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLW92ZXJcIjtcclxuXHRcdGN0eC50cmFuc2xhdGUoMjU2LCAxOTIpO1xyXG5cdFx0dmFyIGRyYXdzcGlubmVyID0gZnVuY3Rpb24gKHIsIGEsIHQsIG1pZGRsZSkge1xyXG5cdFx0XHRjdHguZ2xvYmFsQWxwaGEgPSBhO1xyXG5cdFx0XHRpZiAoIW1pZGRsZSkgbWlkZGxlID0gRWRpdG9yLnNraW5bJ3NwaW5uZXItbWlkZGxlJ107XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UobWlkZGxlLCAtciAqIDEuMDEsIC1yICogMS4wMSwgMi4wMiAqIHIsIDIuMDIgKiByKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpblsnc3Bpbm5lci1taWRkbGUyJ10sIC1yICogLjAyNSwgLXIgKiAuMDI1LCAyICogciAqIC4wMjUsIDIgKiByICogLjAyNSk7XHJcblx0XHRcdGN0eC5zYXZlKCk7XHJcblx0XHRcdGN0eC5yb3RhdGUodCAqIDQgKiBNYXRoLlBJKTtcclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShFZGl0b3Iuc2tpblsnc3Bpbm5lci10b3AnXSwgLXIsIC1yLCAyICogciwgMiAqIHIpO1xyXG5cdFx0XHRjdHgucmVzdG9yZSgpO1xyXG5cdFx0XHRjdHguZHJhd0ltYWdlKEVkaXRvci5za2luWydzcGlubmVyLWJvdHRvbSddLCAtciwgLXIsIDIgKiByLCAyICogcik7XHJcblx0XHR9O1xyXG5cdFx0aWYgKHRkIDwgMCAmJiAtdGQgPCBkdXIpIHtcclxuXHRcdFx0Ly9maXJzdCBvbmUgZ3JhZHVhbGx5IGhhcyBpdCB0dXJuIHJlZCwgbGFncyBtb3JlXHJcblx0XHRcdC8vZHJhd3NwaW5uZXIoMTcyICsgNDAgKiBNYXRoLnNxcnQoLXRkIC8gZHVyKSwgMSwgdGQsIHRpbnQoRWRpdG9yLnNraW5bJ3NwaW5uZXItbWlkZGxlJ10sIFsyNTUsIDI1NSAqICgxICsgdGQgLyBkdXIpLCAyNTUgKiAoMSArIHRkIC8gZHVyKV0pKTtcclxuXHRcdFx0ZHJhd3NwaW5uZXIoMTcyICsgNDAgKiBNYXRoLnNxcnQoLXRkIC8gZHVyKSwgMSwgdGQpO1xyXG5cdFx0fSBlbHNlIGlmICh0ZCA+IDAgJiYgdGQgPCAuNCkge1xyXG5cdFx0XHRkcmF3c3Bpbm5lcigxNzIsIDEgLSB0ZCAvIC40LCAwKTtcclxuXHRcdH0gZWxzZSBpZiAodGQgPCAwICYmIC10ZCA8IGR1ciArIHRoaXMuZmFkZXRpbWUpIHtcclxuXHRcdFx0ZHJhd3NwaW5uZXIoMjEyLCAxICsgKGR1ciArIHRkKSAvIC4yNSwgZHVyKTtcclxuXHRcdH1cclxuXHRcdGN0eC5yZXN0b3JlKCk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcbn1cclxuXHJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBIaXRPYmplY3Q7XHJcblx0bW9kdWxlLmV4cG9ydHMuSGl0Q2lyY2xlID0gSGl0Q2lyY2xlO1xyXG5cdG1vZHVsZS5leHBvcnRzLlNsaWRlciA9IFNsaWRlcjtcclxuXHRtb2R1bGUuZXhwb3J0cy5TcGlubmVyID0gU3Bpbm5lcjtcclxufSBlbHNlIHtcclxuXHR3aW5kb3cuSGl0T2JqZWN0ID0gRWRpdG9yLkhpdE9iamVjdCA9IEhpdE9iamVjdDtcclxuXHR3aW5kb3cuSGl0Q2lyY2xlID0gRWRpdG9yLkhpdENpcmNsZSA9IEhpdENpcmNsZTtcclxuXHR3aW5kb3cuU2xpZGVyID0gRWRpdG9yLlNsaWRlciA9IFNsaWRlcjtcclxuXHR3aW5kb3cuU3Bpbm5lciA9IEVkaXRvci5TcGlubmVyID0gU3Bpbm5lcjtcclxufVxyXG4iXSwiZmlsZSI6IkhpdE9iamVjdC5qcyJ9

var Editor = Editor || {};

class TimingPoint {
	constructor(line) {
		var parts = line.split(",");

		this.offset = parseInt(parts[0]);
		this.velocity = 1;
		this.beatLength = parseFloat(parts[1]);
		this.timingSignature = parseInt(parts[2]);
		this.sampleSetId = parseInt(parts[3]);
		this.customSampleIndex = parseInt(parts[4]);
		this.sampleVolume = parseInt(parts[5]);
		this.timingChange = (parts[6] == 1);
		this.kiaiTimeActive = (parts[7] == 1);

		if (!isNaN(this.beatLength) && this.beatLength !== 0) {
			if (this.beatLength > 0) {
				this.bpm = Math.round(60000 / this.beatLength);
				this.baseOffset = this.offset;
			} else {
				this.velocity = Math.abs(100 / this.beatLength);
			}
		}
	}
	serialize() {
		var parts = [];
		parts.push(this.offset);
		parts.push(this.timingChange ? this.beatLength : -100 / this.velocity);
		parts.push(this.timingSignature);
		parts.push(this.sampleSetId);
		parts.push(this.customSampleIndex);
		parts.push(this.sampleVolume);
		parts.push(this.timingChange ? '1' : '0');
		parts.push(this.kiaiTimeActive ? '1' : '0');
		return parts.join(",");
	}
}

if (typeof module !== "undefined") {
	module.exports = TimingPoint;
} else {
	window.TimingPoint = Editor.TimingPoint = TimingPoint;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL2JlYXRtYXAvVGltaW5nUG9pbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVkaXRvciA9IEVkaXRvciB8fCB7fTtcclxuXHJcbmNsYXNzIFRpbWluZ1BvaW50IHtcclxuXHRjb25zdHJ1Y3RvcihsaW5lKSB7XHJcblx0XHR2YXIgcGFydHMgPSBsaW5lLnNwbGl0KFwiLFwiKTtcclxuXHJcblx0XHR0aGlzLm9mZnNldCA9IHBhcnNlSW50KHBhcnRzWzBdKTtcclxuXHRcdHRoaXMudmVsb2NpdHkgPSAxO1xyXG5cdFx0dGhpcy5iZWF0TGVuZ3RoID0gcGFyc2VGbG9hdChwYXJ0c1sxXSk7XHJcblx0XHR0aGlzLnRpbWluZ1NpZ25hdHVyZSA9IHBhcnNlSW50KHBhcnRzWzJdKTtcclxuXHRcdHRoaXMuc2FtcGxlU2V0SWQgPSBwYXJzZUludChwYXJ0c1szXSk7XHJcblx0XHR0aGlzLmN1c3RvbVNhbXBsZUluZGV4ID0gcGFyc2VJbnQocGFydHNbNF0pO1xyXG5cdFx0dGhpcy5zYW1wbGVWb2x1bWUgPSBwYXJzZUludChwYXJ0c1s1XSk7XHJcblx0XHR0aGlzLnRpbWluZ0NoYW5nZSA9IChwYXJ0c1s2XSA9PSAxKTtcclxuXHRcdHRoaXMua2lhaVRpbWVBY3RpdmUgPSAocGFydHNbN10gPT0gMSk7XHJcblxyXG5cdFx0aWYgKCFpc05hTih0aGlzLmJlYXRMZW5ndGgpICYmIHRoaXMuYmVhdExlbmd0aCAhPT0gMCkge1xyXG5cdFx0XHRpZiAodGhpcy5iZWF0TGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdHRoaXMuYnBtID0gTWF0aC5yb3VuZCg2MDAwMCAvIHRoaXMuYmVhdExlbmd0aCk7XHJcblx0XHRcdFx0dGhpcy5iYXNlT2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy52ZWxvY2l0eSA9IE1hdGguYWJzKDEwMCAvIHRoaXMuYmVhdExlbmd0aCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0c2VyaWFsaXplKCkge1xyXG5cdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRwYXJ0cy5wdXNoKHRoaXMub2Zmc2V0KTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy50aW1pbmdDaGFuZ2UgPyB0aGlzLmJlYXRMZW5ndGggOiAtMTAwIC8gdGhpcy52ZWxvY2l0eSk7XHJcblx0XHRwYXJ0cy5wdXNoKHRoaXMudGltaW5nU2lnbmF0dXJlKTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy5zYW1wbGVTZXRJZCk7XHJcblx0XHRwYXJ0cy5wdXNoKHRoaXMuY3VzdG9tU2FtcGxlSW5kZXgpO1xyXG5cdFx0cGFydHMucHVzaCh0aGlzLnNhbXBsZVZvbHVtZSk7XHJcblx0XHRwYXJ0cy5wdXNoKHRoaXMudGltaW5nQ2hhbmdlID8gJzEnIDogJzAnKTtcclxuXHRcdHBhcnRzLnB1c2godGhpcy5raWFpVGltZUFjdGl2ZSA/ICcxJyA6ICcwJyk7XHJcblx0XHRyZXR1cm4gcGFydHMuam9pbihcIixcIik7XHJcblx0fVxyXG59XHJcblxyXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG5cdG1vZHVsZS5leHBvcnRzID0gVGltaW5nUG9pbnQ7XHJcbn0gZWxzZSB7XHJcblx0d2luZG93LlRpbWluZ1BvaW50ID0gRWRpdG9yLlRpbWluZ1BvaW50ID0gVGltaW5nUG9pbnQ7XHJcbn1cclxuIl0sImZpbGUiOiJUaW1pbmdQb2ludC5qcyJ9

var Editor = Editor || {};

var sectionPattern = /^\[([a-zA-Z0-9]+)\]$/,
	keyPairPattern = /^([a-zA-Z0-9]+)[ ]*:[ ]*(.+)?$/;
var fs = null;
const KEEP_THROUGH_SERIALIZATION = [
	"ComboColors", "Bookmarks", "Tags", "FileFormat", "AudioFilename",
	"AudioLeadIn", "PreviewTime", "Countdown", "SampleSet", "StackLeniency",
	"Mode", "LetterboxInBreaks", "WidescreenStoryboard", "DistanceSpacing",
	"BeatDivisor", "GridSize", "TimelineZoom", "Title", "TitleUnicode",
	"Artist", "ArtistUnicode", "Creator", "Version", "Source", "BeatmapID",
	"BeatmapSetID", "HPDrainRate", "CircleSize", "OverallDifficulty",
	"ApproachRate", "SliderMultiplier", "SliderTickRate", "breakTimes",
	"bgFilename"
];

if (typeof require !== "undefined") {
	var fs = require("fs");
	Color = require("./Color");
	HitObject = require("./beatmap/HitObject");
	Slider = HitObject.Slider;
	TimingPoint = require("./beatmap/TimingPoint");
	var Util = require("./Util");
}

class Beatmap {
	constructor() { }
	static ParseFile(file, callback) {
		fs.exists(file, function (exists) {
			if (!exists) {
				callback(new Error("File doesn't exist."));
			}
			Beatmap.ParseStream(fs.createReadStream(file), function (beatmap) {
				callback(beatmap);
			});
		});
	}
	static ParseFileSync(file) {
		if (!fs.existsSync(file)) {
			return new Error("File doesn't exist.");
		}
		return Beatmap.ParseString(fs.readFileSync(file, "utf-8"));
	}
	static ParseStream(stream, callback) {
		var buffer = "";
		stream.on("data", function (chunk) {
			buffer += chunk;
		});
		stream.on("error", function (err) {
			callback(err);
		});
		stream.on("end", function () {
			callback(Beatmap.ParseString(buffer));
		});
	}
	newID() {
		var id;
		while (true) {
			id = Util.randomString();
			if (id in this.HitObjects) continue;
			if (id in this.TimingPoints) continue;
			break;
		}
		return id;
	}
	static ParseString(data) {
		var beatmap = new Beatmap();
		var lines = data.split(/\r?\n/);
		var osuSection;
		var sections = {};
		beatmap["ComboColors"] = [];
		beatmap["Bookmarks"] = [];
		beatmap["Tags"] = [];
		for (var i = 0; i < lines.length; i += 1) {
			var line = lines[i].trim();
			if (!line) continue;
			var match = sectionPattern.exec(line);
			if (match) {
				osuSection = match[1].toLowerCase();
				continue;
			}
			switch (osuSection) {
				case "timingpoints":
					if (!("TimingPoints" in sections))
						sections["TimingPoints"] = []
					sections["TimingPoints"].push(line);
					break;
				case "hitobjects":
					if (!("HitObjects" in sections))
						sections["HitObjects"] = []
					sections["HitObjects"].push(line);
					break;
				case "events":
					if (!("Events" in sections))
						sections["Events"] = []
					sections["Events"].push(line);
					break;
				default:
					if (!osuSection) {
						match = /^osu file format (v[0-9]+)$/.exec(line);
						if (match) {
							beatmap.FileFormat = match[1];
							continue;
						}
					} else {
						match = keyPairPattern.exec(line);
						if (match) {
							if (!match[2]) match[2] = '';
							if (/combo(\d+)/i.exec(match[1])) {
								beatmap["ComboColors"].push(Color.fromArray(match[2].split(",")));
								continue;
							}
							switch (match[1].toLowerCase()) {
								case "tags":
									beatmap[match[1]] = match[2].split(" ");
									break;
								case "bookmarks":
									beatmap[match[1]] = match[2].split(",").map(function (bookmark) {
										return parseInt(bookmark);
									});
									break;
								case "stackleniency":
								case "distancespacing":
								case "beatdivisor":
								case "gridsize":
								case "previewtime":
								case "mode":
								case "hpdrainrate":
								case "circlesize":
								case "approachrate":
								case "overalldifficulty":
								case "slidermultiplier":
								case "slidertickrate":
									beatmap[match[1]] = parseFloat(match[2]);
									break;
								default:
									beatmap[match[1]] = match[2];
									break;
							}
						}
					}
					break;
			}
		}

		beatmap["TimingPoints"] = [];
		beatmap["HitObjects"] = [];

		beatmap["BpmMin"] = Infinity;
		beatmap["BpmMax"] = 0;
		var prev = null;
		for (var i = 0; i < sections["TimingPoints"].length; i += 1) {
			var timingPoint = new TimingPoint(sections["TimingPoints"][i]);
			if (timingPoint.bpm) {
				beatmap["BpmMin"] = Math.min(beatmap["BpmMin"], timingPoint.bpm);
				beatmap["BpmMax"] = Math.max(beatmap["BpmMax"], timingPoint.bpm);
				timingPoint.baseOffset = timingPoint.offset;
			} else if (prev) {
				timingPoint.beatLength = prev.beatLength;
				timingPoint.bpm = prev.bpm;
				timingPoint.baseOffset = prev.baseOffset;
			}
			prev = timingPoint;
			var id = beatmap.newID();
			timingPoint.id = id;
			beatmap["TimingPoints"].push(timingPoint);
		}
		beatmap["TimingPoints"].sort(function (a, b) {
			return a.offset - b.offset;
		});
		for (var i = 0; i < sections["HitObjects"].length; i += 1) {
			var hitObject = HitObject.parse(sections["HitObjects"][i]);
			hitObject.beatmap = beatmap;
			if (hitObject instanceof Slider) {
				hitObject.calculate();
			}
			var id = beatmap.newID();
			hitObject.id = id;
			beatmap["HitObjects"].push(hitObject);
		}
		beatmap["HitObjects"].sort(function (a, b) {
			return a.startTime - b.startTime;
		});

		beatmap.breakTimes = [];
		beatmap.originalEvents = sections["Events"].join('\n');
		for (var i = 0; i < sections["Events"].length; i += 1) {
			var members = sections["Events"][i].split(',');

			if (members[0] == '0' && members[1] == '0' && members[2]) {
				var bgName = members[2].trim();

				if (bgName.charAt(0) == '"' && bgName.charAt(bgName.length - 1) == '"') {
					beatmap.bgFilename = bgName.substring(1, bgName.length - 1);
				} else {
					beatmap.bgFilename = bgName;
				}
			} else if (members[0] == '2' && /^[0-9]+$/.test(members[1]) && /^[0-9]+$/.test(members[2])) {
				beatmap.breakTimes.push({
					startTime: parseInt(members[1]),
					endTime: parseInt(members[2])
				});
			}
		}

		// console.log(sections);
		return beatmap;
	}
	serialize() {
		var osu = `osu file format ${this.FileFormat}\n`;
		osu += '\n[General]\n';
		['AudioFilename', 'AudioLeadIn', 'PreviewTime', 'Countdown', 'SampleSet',
			'StackLeniency', 'Mode', 'LetterboxInBreaks', 'WidescreenStoryboard'
		].forEach(property => {
			osu += `${property}: ${this[property]}\n`;
		});

		osu += '\n[Editor]\n';
		if (this.hasOwnProperty('Bookmarks') && this.Bookmarks.length > 0)
			osu += `Bookmarks: ${this.Bookmarks.join(',')}\n`;
		['DistanceSpacing', 'BeatDivisor', 'GridSize', 'TimelineZoom'].forEach(property => {
			osu += `${property}: ${this[property]}\n`;
		});

		osu += '\n[Metadata]\n';
		['Title', 'TitleUnicode', 'Artist', 'ArtistUnicode', 'Creator',
			'Version', 'Source', 'Tags', 'BeatmapID', 'BeatmapSetID'
		].forEach(property => {
			osu += `${property}:${property == 'Tags' ? this[property].join(' ') : this[property]}\n`;
		});

		osu += '\n[Difficulty]\n';
		['HPDrainRate', 'CircleSize', 'OverallDifficulty',
			'ApproachRate', 'SliderMultiplier', 'SliderTickRate'
		].forEach(property => {
			osu += `${property}:${this[property]}\n`;
		});

		osu += '\n[Events]\n';
		osu += this.originalEvents + '\n';

		osu += '\n[TimingPoints]\n';
		this.TimingPoints.forEach(tpt => {
			osu += tpt.serialize() + '\n';
		});

		osu += '\n';
		if (this.hasOwnProperty('ComboColors') && this.ComboColors.length > 0) {
			osu += '\n[Colours]\n';
			for (var i = 0; i < this.ComboColors.length; i++) {
				osu += `Combo${i + 1} : ${this.ComboColors[i].toArray().join(',')}\n`;
			}
		}

		osu += '\n[HitObjects]\n';
		this.HitObjects.forEach(obj => {
			osu += obj.serialize() + '\n';
		});

		return osu + '\n';
	}
	getTimingPoint(offset) {
		var left = 0,
			right = this.TimingPoints.length - 1;
		var result = 0;
		while (left <= right) {
			var midpoint = ~~((left + right) / 2);
			if (this.TimingPoints[midpoint].offset > offset) {
				right = midpoint - 1;
			} else {
				result = midpoint;
				left = midpoint + 1;
			}
		}
		return this.TimingPoints[result];
		// for (var i = this.TimingPoints.length - 1; i >= 0; i -= 1) {
		// 	if (this.TimingPoints[i].offset <= offset)
		// 		return this.TimingPoints[i];
		// }
		// return this.TimingPoints[0];
	}

	getIndexAt(offset) {
		for (var i = 0; i < this.HitObjects.length; i++) {
			var obj = this.HitObjects[i];
			if (obj instanceof Slider || obj instanceof Spinner) {
				if (offset < obj.endTime) {
					return i;
				}
			} else {
				if (offset <= obj.startTime) {
					return i;
				}
			}
		}
		return i - 1;
	}

	matchObj(id) {
		for (var i = 0; i < this.HitObjects.length; i++) {
			if (this.HitObjects[i].hasOwnProperty('id') && this.HitObjects[i].id == id) return this.HitObjects[i];
		}
	}

	static unjson(object) {
		var beatmap = new Beatmap();
		for (var key of KEEP_THROUGH_SERIALIZATION) {
			if (object.hasOwnProperty(key)) {
				beatmap[key] = object[key];
			}
		}
		if (object.hasOwnProperty("TimingPoints")) {
			var prev;
			beatmap.TimingPoints = object.TimingPoints.map(function (data) {
				var point = new TimingPoint(data.serialized);
				if (point.bpm) {
					beatmap["BpmMin"] = Math.min(beatmap["BpmMin"], point.bpm);
					beatmap["BpmMax"] = Math.max(beatmap["BpmMax"], point.bpm);
					point.baseOffset = point.offset;
				} else if (prev) {
					point.beatLength = prev.beatLength;
					point.bpm = prev.bpm;
					point.baseOffset = prev.baseOffset;
				}
				prev = point;
				point.id = data.id;
				return point;
			});
			beatmap.TimingPoints.sort(function (a, b) {
				return a.offset - b.offset;
			});
		}
		if (object.hasOwnProperty("HitObjects")) {
			beatmap.HitObjects = object.HitObjects.map(function (data) {
				var object = HitObject.parse(data.serialized);
				object.id = data.id;
				object.beatmap = beatmap;
				if (object instanceof Slider) {
					object.calculate();
				}
				return object;
			});
			beatmap.HitObjects.sort(function (a, b) {
				return a.startTime - b.startTime;
			});
		}
		return beatmap;
	}

	json() {
		var obj = {};
		for (var key of KEEP_THROUGH_SERIALIZATION) {
			obj[key] = this[key];
		}
		obj["TimingPoints"] = this.TimingPoints.map(function (point) {
			return {
				id: point.id,
				serialized: point.serialize()
			};
		});
		obj["HitObjects"] = this.HitObjects.map(function (object) {
			return {
				id: object.id,
				serialized: object.serialize()
			};
		});
		return obj;
	}
}


if (typeof module !== "undefined") {
	module.exports = Beatmap;
} else {
	window.Beatmap = Editor.Beatmap = Beatmap;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL0JlYXRtYXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVkaXRvciA9IEVkaXRvciB8fCB7fTtcclxuXHJcbnZhciBzZWN0aW9uUGF0dGVybiA9IC9eXFxbKFthLXpBLVowLTldKylcXF0kLyxcclxuXHRrZXlQYWlyUGF0dGVybiA9IC9eKFthLXpBLVowLTldKylbIF0qOlsgXSooLispPyQvO1xyXG52YXIgZnMgPSBudWxsO1xyXG5jb25zdCBLRUVQX1RIUk9VR0hfU0VSSUFMSVpBVElPTiA9IFtcclxuXHRcIkNvbWJvQ29sb3JzXCIsIFwiQm9va21hcmtzXCIsIFwiVGFnc1wiLCBcIkZpbGVGb3JtYXRcIiwgXCJBdWRpb0ZpbGVuYW1lXCIsXHJcblx0XCJBdWRpb0xlYWRJblwiLCBcIlByZXZpZXdUaW1lXCIsIFwiQ291bnRkb3duXCIsIFwiU2FtcGxlU2V0XCIsIFwiU3RhY2tMZW5pZW5jeVwiLFxyXG5cdFwiTW9kZVwiLCBcIkxldHRlcmJveEluQnJlYWtzXCIsIFwiV2lkZXNjcmVlblN0b3J5Ym9hcmRcIiwgXCJEaXN0YW5jZVNwYWNpbmdcIixcclxuXHRcIkJlYXREaXZpc29yXCIsIFwiR3JpZFNpemVcIiwgXCJUaW1lbGluZVpvb21cIiwgXCJUaXRsZVwiLCBcIlRpdGxlVW5pY29kZVwiLFxyXG5cdFwiQXJ0aXN0XCIsIFwiQXJ0aXN0VW5pY29kZVwiLCBcIkNyZWF0b3JcIiwgXCJWZXJzaW9uXCIsIFwiU291cmNlXCIsIFwiQmVhdG1hcElEXCIsXHJcblx0XCJCZWF0bWFwU2V0SURcIiwgXCJIUERyYWluUmF0ZVwiLCBcIkNpcmNsZVNpemVcIiwgXCJPdmVyYWxsRGlmZmljdWx0eVwiLFxyXG5cdFwiQXBwcm9hY2hSYXRlXCIsIFwiU2xpZGVyTXVsdGlwbGllclwiLCBcIlNsaWRlclRpY2tSYXRlXCIsIFwiYnJlYWtUaW1lc1wiLFxyXG5cdFwiYmdGaWxlbmFtZVwiXHJcbl07XHJcblxyXG5pZiAodHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHR2YXIgZnMgPSByZXF1aXJlKFwiZnNcIik7XHJcblx0Q29sb3IgPSByZXF1aXJlKFwiLi9Db2xvclwiKTtcclxuXHRIaXRPYmplY3QgPSByZXF1aXJlKFwiLi9iZWF0bWFwL0hpdE9iamVjdFwiKTtcclxuXHRTbGlkZXIgPSBIaXRPYmplY3QuU2xpZGVyO1xyXG5cdFRpbWluZ1BvaW50ID0gcmVxdWlyZShcIi4vYmVhdG1hcC9UaW1pbmdQb2ludFwiKTtcclxuXHR2YXIgVXRpbCA9IHJlcXVpcmUoXCIuL1V0aWxcIik7XHJcbn1cclxuXHJcbmNsYXNzIEJlYXRtYXAge1xyXG5cdGNvbnN0cnVjdG9yKCkgeyB9XHJcblx0c3RhdGljIFBhcnNlRmlsZShmaWxlLCBjYWxsYmFjaykge1xyXG5cdFx0ZnMuZXhpc3RzKGZpbGUsIGZ1bmN0aW9uIChleGlzdHMpIHtcclxuXHRcdFx0aWYgKCFleGlzdHMpIHtcclxuXHRcdFx0XHRjYWxsYmFjayhuZXcgRXJyb3IoXCJGaWxlIGRvZXNuJ3QgZXhpc3QuXCIpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRCZWF0bWFwLlBhcnNlU3RyZWFtKGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZSksIGZ1bmN0aW9uIChiZWF0bWFwKSB7XHJcblx0XHRcdFx0Y2FsbGJhY2soYmVhdG1hcCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHN0YXRpYyBQYXJzZUZpbGVTeW5jKGZpbGUpIHtcclxuXHRcdGlmICghZnMuZXhpc3RzU3luYyhmaWxlKSkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IEVycm9yKFwiRmlsZSBkb2Vzbid0IGV4aXN0LlwiKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBCZWF0bWFwLlBhcnNlU3RyaW5nKGZzLnJlYWRGaWxlU3luYyhmaWxlLCBcInV0Zi04XCIpKTtcclxuXHR9XHJcblx0c3RhdGljIFBhcnNlU3RyZWFtKHN0cmVhbSwgY2FsbGJhY2spIHtcclxuXHRcdHZhciBidWZmZXIgPSBcIlwiO1xyXG5cdFx0c3RyZWFtLm9uKFwiZGF0YVwiLCBmdW5jdGlvbiAoY2h1bmspIHtcclxuXHRcdFx0YnVmZmVyICs9IGNodW5rO1xyXG5cdFx0fSk7XHJcblx0XHRzdHJlYW0ub24oXCJlcnJvclwiLCBmdW5jdGlvbiAoZXJyKSB7XHJcblx0XHRcdGNhbGxiYWNrKGVycik7XHJcblx0XHR9KTtcclxuXHRcdHN0cmVhbS5vbihcImVuZFwiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGNhbGxiYWNrKEJlYXRtYXAuUGFyc2VTdHJpbmcoYnVmZmVyKSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0bmV3SUQoKSB7XHJcblx0XHR2YXIgaWQ7XHJcblx0XHR3aGlsZSAodHJ1ZSkge1xyXG5cdFx0XHRpZCA9IFV0aWwucmFuZG9tU3RyaW5nKCk7XHJcblx0XHRcdGlmIChpZCBpbiB0aGlzLkhpdE9iamVjdHMpIGNvbnRpbnVlO1xyXG5cdFx0XHRpZiAoaWQgaW4gdGhpcy5UaW1pbmdQb2ludHMpIGNvbnRpbnVlO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHRcdHJldHVybiBpZDtcclxuXHR9XHJcblx0c3RhdGljIFBhcnNlU3RyaW5nKGRhdGEpIHtcclxuXHRcdHZhciBiZWF0bWFwID0gbmV3IEJlYXRtYXAoKTtcclxuXHRcdHZhciBsaW5lcyA9IGRhdGEuc3BsaXQoL1xccj9cXG4vKTtcclxuXHRcdHZhciBvc3VTZWN0aW9uO1xyXG5cdFx0dmFyIHNlY3Rpb25zID0ge307XHJcblx0XHRiZWF0bWFwW1wiQ29tYm9Db2xvcnNcIl0gPSBbXTtcclxuXHRcdGJlYXRtYXBbXCJCb29rbWFya3NcIl0gPSBbXTtcclxuXHRcdGJlYXRtYXBbXCJUYWdzXCJdID0gW107XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSArPSAxKSB7XHJcblx0XHRcdHZhciBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xyXG5cdFx0XHRpZiAoIWxpbmUpIGNvbnRpbnVlO1xyXG5cdFx0XHR2YXIgbWF0Y2ggPSBzZWN0aW9uUGF0dGVybi5leGVjKGxpbmUpO1xyXG5cdFx0XHRpZiAobWF0Y2gpIHtcclxuXHRcdFx0XHRvc3VTZWN0aW9uID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzd2l0Y2ggKG9zdVNlY3Rpb24pIHtcclxuXHRcdFx0XHRjYXNlIFwidGltaW5ncG9pbnRzXCI6XHJcblx0XHRcdFx0XHRpZiAoIShcIlRpbWluZ1BvaW50c1wiIGluIHNlY3Rpb25zKSlcclxuXHRcdFx0XHRcdFx0c2VjdGlvbnNbXCJUaW1pbmdQb2ludHNcIl0gPSBbXVxyXG5cdFx0XHRcdFx0c2VjdGlvbnNbXCJUaW1pbmdQb2ludHNcIl0ucHVzaChsaW5lKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJoaXRvYmplY3RzXCI6XHJcblx0XHRcdFx0XHRpZiAoIShcIkhpdE9iamVjdHNcIiBpbiBzZWN0aW9ucykpXHJcblx0XHRcdFx0XHRcdHNlY3Rpb25zW1wiSGl0T2JqZWN0c1wiXSA9IFtdXHJcblx0XHRcdFx0XHRzZWN0aW9uc1tcIkhpdE9iamVjdHNcIl0ucHVzaChsaW5lKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJldmVudHNcIjpcclxuXHRcdFx0XHRcdGlmICghKFwiRXZlbnRzXCIgaW4gc2VjdGlvbnMpKVxyXG5cdFx0XHRcdFx0XHRzZWN0aW9uc1tcIkV2ZW50c1wiXSA9IFtdXHJcblx0XHRcdFx0XHRzZWN0aW9uc1tcIkV2ZW50c1wiXS5wdXNoKGxpbmUpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGlmICghb3N1U2VjdGlvbikge1xyXG5cdFx0XHRcdFx0XHRtYXRjaCA9IC9eb3N1IGZpbGUgZm9ybWF0ICh2WzAtOV0rKSQvLmV4ZWMobGluZSk7XHJcblx0XHRcdFx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRcdGJlYXRtYXAuRmlsZUZvcm1hdCA9IG1hdGNoWzFdO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRtYXRjaCA9IGtleVBhaXJQYXR0ZXJuLmV4ZWMobGluZSk7XHJcblx0XHRcdFx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICghbWF0Y2hbMl0pIG1hdGNoWzJdID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0aWYgKC9jb21ibyhcXGQrKS9pLmV4ZWMobWF0Y2hbMV0pKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRiZWF0bWFwW1wiQ29tYm9Db2xvcnNcIl0ucHVzaChDb2xvci5mcm9tQXJyYXkobWF0Y2hbMl0uc3BsaXQoXCIsXCIpKSk7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0c3dpdGNoIChtYXRjaFsxXS50b0xvd2VyQ2FzZSgpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwidGFnc1wiOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRiZWF0bWFwW21hdGNoWzFdXSA9IG1hdGNoWzJdLnNwbGl0KFwiIFwiKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiYm9va21hcmtzXCI6XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJlYXRtYXBbbWF0Y2hbMV1dID0gbWF0Y2hbMl0uc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbiAoYm9va21hcmspIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcGFyc2VJbnQoYm9va21hcmspO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwic3RhY2tsZW5pZW5jeVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImRpc3RhbmNlc3BhY2luZ1wiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImJlYXRkaXZpc29yXCI6XHJcblx0XHRcdFx0XHRcdFx0XHRjYXNlIFwiZ3JpZHNpemVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJwcmV2aWV3dGltZVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcIm1vZGVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJocGRyYWlucmF0ZVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcImNpcmNsZXNpemVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJhcHByb2FjaHJhdGVcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJvdmVyYWxsZGlmZmljdWx0eVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBcInNsaWRlcm11bHRpcGxpZXJcIjpcclxuXHRcdFx0XHRcdFx0XHRcdGNhc2UgXCJzbGlkZXJ0aWNrcmF0ZVwiOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRiZWF0bWFwW21hdGNoWzFdXSA9IHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJlYXRtYXBbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XHJcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRiZWF0bWFwW1wiVGltaW5nUG9pbnRzXCJdID0gW107XHJcblx0XHRiZWF0bWFwW1wiSGl0T2JqZWN0c1wiXSA9IFtdO1xyXG5cclxuXHRcdGJlYXRtYXBbXCJCcG1NaW5cIl0gPSBJbmZpbml0eTtcclxuXHRcdGJlYXRtYXBbXCJCcG1NYXhcIl0gPSAwO1xyXG5cdFx0dmFyIHByZXYgPSBudWxsO1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzZWN0aW9uc1tcIlRpbWluZ1BvaW50c1wiXS5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHR2YXIgdGltaW5nUG9pbnQgPSBuZXcgVGltaW5nUG9pbnQoc2VjdGlvbnNbXCJUaW1pbmdQb2ludHNcIl1baV0pO1xyXG5cdFx0XHRpZiAodGltaW5nUG9pbnQuYnBtKSB7XHJcblx0XHRcdFx0YmVhdG1hcFtcIkJwbU1pblwiXSA9IE1hdGgubWluKGJlYXRtYXBbXCJCcG1NaW5cIl0sIHRpbWluZ1BvaW50LmJwbSk7XHJcblx0XHRcdFx0YmVhdG1hcFtcIkJwbU1heFwiXSA9IE1hdGgubWF4KGJlYXRtYXBbXCJCcG1NYXhcIl0sIHRpbWluZ1BvaW50LmJwbSk7XHJcblx0XHRcdFx0dGltaW5nUG9pbnQuYmFzZU9mZnNldCA9IHRpbWluZ1BvaW50Lm9mZnNldDtcclxuXHRcdFx0fSBlbHNlIGlmIChwcmV2KSB7XHJcblx0XHRcdFx0dGltaW5nUG9pbnQuYmVhdExlbmd0aCA9IHByZXYuYmVhdExlbmd0aDtcclxuXHRcdFx0XHR0aW1pbmdQb2ludC5icG0gPSBwcmV2LmJwbTtcclxuXHRcdFx0XHR0aW1pbmdQb2ludC5iYXNlT2Zmc2V0ID0gcHJldi5iYXNlT2Zmc2V0O1xyXG5cdFx0XHR9XHJcblx0XHRcdHByZXYgPSB0aW1pbmdQb2ludDtcclxuXHRcdFx0dmFyIGlkID0gYmVhdG1hcC5uZXdJRCgpO1xyXG5cdFx0XHR0aW1pbmdQb2ludC5pZCA9IGlkO1xyXG5cdFx0XHRiZWF0bWFwW1wiVGltaW5nUG9pbnRzXCJdLnB1c2godGltaW5nUG9pbnQpO1xyXG5cdFx0fVxyXG5cdFx0YmVhdG1hcFtcIlRpbWluZ1BvaW50c1wiXS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcblx0XHRcdHJldHVybiBhLm9mZnNldCAtIGIub2Zmc2V0O1xyXG5cdFx0fSk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlY3Rpb25zW1wiSGl0T2JqZWN0c1wiXS5sZW5ndGg7IGkgKz0gMSkge1xyXG5cdFx0XHR2YXIgaGl0T2JqZWN0ID0gSGl0T2JqZWN0LnBhcnNlKHNlY3Rpb25zW1wiSGl0T2JqZWN0c1wiXVtpXSk7XHJcblx0XHRcdGhpdE9iamVjdC5iZWF0bWFwID0gYmVhdG1hcDtcclxuXHRcdFx0aWYgKGhpdE9iamVjdCBpbnN0YW5jZW9mIFNsaWRlcikge1xyXG5cdFx0XHRcdGhpdE9iamVjdC5jYWxjdWxhdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgaWQgPSBiZWF0bWFwLm5ld0lEKCk7XHJcblx0XHRcdGhpdE9iamVjdC5pZCA9IGlkO1xyXG5cdFx0XHRiZWF0bWFwW1wiSGl0T2JqZWN0c1wiXS5wdXNoKGhpdE9iamVjdCk7XHJcblx0XHR9XHJcblx0XHRiZWF0bWFwW1wiSGl0T2JqZWN0c1wiXS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcblx0XHRcdHJldHVybiBhLnN0YXJ0VGltZSAtIGIuc3RhcnRUaW1lO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YmVhdG1hcC5icmVha1RpbWVzID0gW107XHJcblx0XHRiZWF0bWFwLm9yaWdpbmFsRXZlbnRzID0gc2VjdGlvbnNbXCJFdmVudHNcIl0uam9pbignXFxuJyk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNlY3Rpb25zW1wiRXZlbnRzXCJdLmxlbmd0aDsgaSArPSAxKSB7XHJcblx0XHRcdHZhciBtZW1iZXJzID0gc2VjdGlvbnNbXCJFdmVudHNcIl1baV0uc3BsaXQoJywnKTtcclxuXHJcblx0XHRcdGlmIChtZW1iZXJzWzBdID09ICcwJyAmJiBtZW1iZXJzWzFdID09ICcwJyAmJiBtZW1iZXJzWzJdKSB7XHJcblx0XHRcdFx0dmFyIGJnTmFtZSA9IG1lbWJlcnNbMl0udHJpbSgpO1xyXG5cclxuXHRcdFx0XHRpZiAoYmdOYW1lLmNoYXJBdCgwKSA9PSAnXCInICYmIGJnTmFtZS5jaGFyQXQoYmdOYW1lLmxlbmd0aCAtIDEpID09ICdcIicpIHtcclxuXHRcdFx0XHRcdGJlYXRtYXAuYmdGaWxlbmFtZSA9IGJnTmFtZS5zdWJzdHJpbmcoMSwgYmdOYW1lLmxlbmd0aCAtIDEpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRiZWF0bWFwLmJnRmlsZW5hbWUgPSBiZ05hbWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKG1lbWJlcnNbMF0gPT0gJzInICYmIC9eWzAtOV0rJC8udGVzdChtZW1iZXJzWzFdKSAmJiAvXlswLTldKyQvLnRlc3QobWVtYmVyc1syXSkpIHtcclxuXHRcdFx0XHRiZWF0bWFwLmJyZWFrVGltZXMucHVzaCh7XHJcblx0XHRcdFx0XHRzdGFydFRpbWU6IHBhcnNlSW50KG1lbWJlcnNbMV0pLFxyXG5cdFx0XHRcdFx0ZW5kVGltZTogcGFyc2VJbnQobWVtYmVyc1syXSlcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNvbnNvbGUubG9nKHNlY3Rpb25zKTtcclxuXHRcdHJldHVybiBiZWF0bWFwO1xyXG5cdH1cclxuXHRzZXJpYWxpemUoKSB7XHJcblx0XHR2YXIgb3N1ID0gYG9zdSBmaWxlIGZvcm1hdCAke3RoaXMuRmlsZUZvcm1hdH1cXG5gO1xyXG5cdFx0b3N1ICs9ICdcXG5bR2VuZXJhbF1cXG4nO1xyXG5cdFx0WydBdWRpb0ZpbGVuYW1lJywgJ0F1ZGlvTGVhZEluJywgJ1ByZXZpZXdUaW1lJywgJ0NvdW50ZG93bicsICdTYW1wbGVTZXQnLFxyXG5cdFx0XHQnU3RhY2tMZW5pZW5jeScsICdNb2RlJywgJ0xldHRlcmJveEluQnJlYWtzJywgJ1dpZGVzY3JlZW5TdG9yeWJvYXJkJ1xyXG5cdFx0XS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcclxuXHRcdFx0b3N1ICs9IGAke3Byb3BlcnR5fTogJHt0aGlzW3Byb3BlcnR5XX1cXG5gO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0b3N1ICs9ICdcXG5bRWRpdG9yXVxcbic7XHJcblx0XHRpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eSgnQm9va21hcmtzJykgJiYgdGhpcy5Cb29rbWFya3MubGVuZ3RoID4gMClcclxuXHRcdFx0b3N1ICs9IGBCb29rbWFya3M6ICR7dGhpcy5Cb29rbWFya3Muam9pbignLCcpfVxcbmA7XHJcblx0XHRbJ0Rpc3RhbmNlU3BhY2luZycsICdCZWF0RGl2aXNvcicsICdHcmlkU2l6ZScsICdUaW1lbGluZVpvb20nXS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcclxuXHRcdFx0b3N1ICs9IGAke3Byb3BlcnR5fTogJHt0aGlzW3Byb3BlcnR5XX1cXG5gO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0b3N1ICs9ICdcXG5bTWV0YWRhdGFdXFxuJztcclxuXHRcdFsnVGl0bGUnLCAnVGl0bGVVbmljb2RlJywgJ0FydGlzdCcsICdBcnRpc3RVbmljb2RlJywgJ0NyZWF0b3InLFxyXG5cdFx0XHQnVmVyc2lvbicsICdTb3VyY2UnLCAnVGFncycsICdCZWF0bWFwSUQnLCAnQmVhdG1hcFNldElEJ1xyXG5cdFx0XS5mb3JFYWNoKHByb3BlcnR5ID0+IHtcclxuXHRcdFx0b3N1ICs9IGAke3Byb3BlcnR5fToke3Byb3BlcnR5ID09ICdUYWdzJyA/IHRoaXNbcHJvcGVydHldLmpvaW4oJyAnKSA6IHRoaXNbcHJvcGVydHldfVxcbmA7XHJcblx0XHR9KTtcclxuXHJcblx0XHRvc3UgKz0gJ1xcbltEaWZmaWN1bHR5XVxcbic7XHJcblx0XHRbJ0hQRHJhaW5SYXRlJywgJ0NpcmNsZVNpemUnLCAnT3ZlcmFsbERpZmZpY3VsdHknLFxyXG5cdFx0XHQnQXBwcm9hY2hSYXRlJywgJ1NsaWRlck11bHRpcGxpZXInLCAnU2xpZGVyVGlja1JhdGUnXHJcblx0XHRdLmZvckVhY2gocHJvcGVydHkgPT4ge1xyXG5cdFx0XHRvc3UgKz0gYCR7cHJvcGVydHl9OiR7dGhpc1twcm9wZXJ0eV19XFxuYDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG9zdSArPSAnXFxuW0V2ZW50c11cXG4nO1xyXG5cdFx0b3N1ICs9IHRoaXMub3JpZ2luYWxFdmVudHMgKyAnXFxuJztcclxuXHJcblx0XHRvc3UgKz0gJ1xcbltUaW1pbmdQb2ludHNdXFxuJztcclxuXHRcdHRoaXMuVGltaW5nUG9pbnRzLmZvckVhY2godHB0ID0+IHtcclxuXHRcdFx0b3N1ICs9IHRwdC5zZXJpYWxpemUoKSArICdcXG4nO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0b3N1ICs9ICdcXG4nO1xyXG5cdFx0aWYgKHRoaXMuaGFzT3duUHJvcGVydHkoJ0NvbWJvQ29sb3JzJykgJiYgdGhpcy5Db21ib0NvbG9ycy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdG9zdSArPSAnXFxuW0NvbG91cnNdXFxuJztcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLkNvbWJvQ29sb3JzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0b3N1ICs9IGBDb21ibyR7aSArIDF9IDogJHt0aGlzLkNvbWJvQ29sb3JzW2ldLnRvQXJyYXkoKS5qb2luKCcsJyl9XFxuYDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdG9zdSArPSAnXFxuW0hpdE9iamVjdHNdXFxuJztcclxuXHRcdHRoaXMuSGl0T2JqZWN0cy5mb3JFYWNoKG9iaiA9PiB7XHJcblx0XHRcdG9zdSArPSBvYmouc2VyaWFsaXplKCkgKyAnXFxuJztcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBvc3UgKyAnXFxuJztcclxuXHR9XHJcblx0Z2V0VGltaW5nUG9pbnQob2Zmc2V0KSB7XHJcblx0XHR2YXIgbGVmdCA9IDAsXHJcblx0XHRcdHJpZ2h0ID0gdGhpcy5UaW1pbmdQb2ludHMubGVuZ3RoIC0gMTtcclxuXHRcdHZhciByZXN1bHQgPSAwO1xyXG5cdFx0d2hpbGUgKGxlZnQgPD0gcmlnaHQpIHtcclxuXHRcdFx0dmFyIG1pZHBvaW50ID0gfn4oKGxlZnQgKyByaWdodCkgLyAyKTtcclxuXHRcdFx0aWYgKHRoaXMuVGltaW5nUG9pbnRzW21pZHBvaW50XS5vZmZzZXQgPiBvZmZzZXQpIHtcclxuXHRcdFx0XHRyaWdodCA9IG1pZHBvaW50IC0gMTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXN1bHQgPSBtaWRwb2ludDtcclxuXHRcdFx0XHRsZWZ0ID0gbWlkcG9pbnQgKyAxO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpcy5UaW1pbmdQb2ludHNbcmVzdWx0XTtcclxuXHRcdC8vIGZvciAodmFyIGkgPSB0aGlzLlRpbWluZ1BvaW50cy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xyXG5cdFx0Ly8gXHRpZiAodGhpcy5UaW1pbmdQb2ludHNbaV0ub2Zmc2V0IDw9IG9mZnNldClcclxuXHRcdC8vIFx0XHRyZXR1cm4gdGhpcy5UaW1pbmdQb2ludHNbaV07XHJcblx0XHQvLyB9XHJcblx0XHQvLyByZXR1cm4gdGhpcy5UaW1pbmdQb2ludHNbMF07XHJcblx0fVxyXG5cclxuXHRnZXRJbmRleEF0KG9mZnNldCkge1xyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLkhpdE9iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIG9iaiA9IHRoaXMuSGl0T2JqZWN0c1tpXTtcclxuXHRcdFx0aWYgKG9iaiBpbnN0YW5jZW9mIFNsaWRlciB8fCBvYmogaW5zdGFuY2VvZiBTcGlubmVyKSB7XHJcblx0XHRcdFx0aWYgKG9mZnNldCA8IG9iai5lbmRUaW1lKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gaTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKG9mZnNldCA8PSBvYmouc3RhcnRUaW1lKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gaTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBpIC0gMTtcclxuXHR9XHJcblxyXG5cdG1hdGNoT2JqKGlkKSB7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuSGl0T2JqZWN0cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRpZiAodGhpcy5IaXRPYmplY3RzW2ldLmhhc093blByb3BlcnR5KCdpZCcpICYmIHRoaXMuSGl0T2JqZWN0c1tpXS5pZCA9PSBpZCkgcmV0dXJuIHRoaXMuSGl0T2JqZWN0c1tpXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHN0YXRpYyB1bmpzb24ob2JqZWN0KSB7XHJcblx0XHR2YXIgYmVhdG1hcCA9IG5ldyBCZWF0bWFwKCk7XHJcblx0XHRmb3IgKHZhciBrZXkgb2YgS0VFUF9USFJPVUdIX1NFUklBTElaQVRJT04pIHtcclxuXHRcdFx0aWYgKG9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcblx0XHRcdFx0YmVhdG1hcFtrZXldID0gb2JqZWN0W2tleV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkoXCJUaW1pbmdQb2ludHNcIikpIHtcclxuXHRcdFx0dmFyIHByZXY7XHJcblx0XHRcdGJlYXRtYXAuVGltaW5nUG9pbnRzID0gb2JqZWN0LlRpbWluZ1BvaW50cy5tYXAoZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHR2YXIgcG9pbnQgPSBuZXcgVGltaW5nUG9pbnQoZGF0YS5zZXJpYWxpemVkKTtcclxuXHRcdFx0XHRpZiAocG9pbnQuYnBtKSB7XHJcblx0XHRcdFx0XHRiZWF0bWFwW1wiQnBtTWluXCJdID0gTWF0aC5taW4oYmVhdG1hcFtcIkJwbU1pblwiXSwgcG9pbnQuYnBtKTtcclxuXHRcdFx0XHRcdGJlYXRtYXBbXCJCcG1NYXhcIl0gPSBNYXRoLm1heChiZWF0bWFwW1wiQnBtTWF4XCJdLCBwb2ludC5icG0pO1xyXG5cdFx0XHRcdFx0cG9pbnQuYmFzZU9mZnNldCA9IHBvaW50Lm9mZnNldDtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKHByZXYpIHtcclxuXHRcdFx0XHRcdHBvaW50LmJlYXRMZW5ndGggPSBwcmV2LmJlYXRMZW5ndGg7XHJcblx0XHRcdFx0XHRwb2ludC5icG0gPSBwcmV2LmJwbTtcclxuXHRcdFx0XHRcdHBvaW50LmJhc2VPZmZzZXQgPSBwcmV2LmJhc2VPZmZzZXQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHByZXYgPSBwb2ludDtcclxuXHRcdFx0XHRwb2ludC5pZCA9IGRhdGEuaWQ7XHJcblx0XHRcdFx0cmV0dXJuIHBvaW50O1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YmVhdG1hcC5UaW1pbmdQb2ludHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG5cdFx0XHRcdHJldHVybiBhLm9mZnNldCAtIGIub2Zmc2V0O1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkoXCJIaXRPYmplY3RzXCIpKSB7XHJcblx0XHRcdGJlYXRtYXAuSGl0T2JqZWN0cyA9IG9iamVjdC5IaXRPYmplY3RzLm1hcChmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdHZhciBvYmplY3QgPSBIaXRPYmplY3QucGFyc2UoZGF0YS5zZXJpYWxpemVkKTtcclxuXHRcdFx0XHRvYmplY3QuaWQgPSBkYXRhLmlkO1xyXG5cdFx0XHRcdG9iamVjdC5iZWF0bWFwID0gYmVhdG1hcDtcclxuXHRcdFx0XHRpZiAob2JqZWN0IGluc3RhbmNlb2YgU2xpZGVyKSB7XHJcblx0XHRcdFx0XHRvYmplY3QuY2FsY3VsYXRlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBvYmplY3Q7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRiZWF0bWFwLkhpdE9iamVjdHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG5cdFx0XHRcdHJldHVybiBhLnN0YXJ0VGltZSAtIGIuc3RhcnRUaW1lO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBiZWF0bWFwO1xyXG5cdH1cclxuXHJcblx0anNvbigpIHtcclxuXHRcdHZhciBvYmogPSB7fTtcclxuXHRcdGZvciAodmFyIGtleSBvZiBLRUVQX1RIUk9VR0hfU0VSSUFMSVpBVElPTikge1xyXG5cdFx0XHRvYmpba2V5XSA9IHRoaXNba2V5XTtcclxuXHRcdH1cclxuXHRcdG9ialtcIlRpbWluZ1BvaW50c1wiXSA9IHRoaXMuVGltaW5nUG9pbnRzLm1hcChmdW5jdGlvbiAocG9pbnQpIHtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRpZDogcG9pbnQuaWQsXHJcblx0XHRcdFx0c2VyaWFsaXplZDogcG9pbnQuc2VyaWFsaXplKClcclxuXHRcdFx0fTtcclxuXHRcdH0pO1xyXG5cdFx0b2JqW1wiSGl0T2JqZWN0c1wiXSA9IHRoaXMuSGl0T2JqZWN0cy5tYXAoZnVuY3Rpb24gKG9iamVjdCkge1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGlkOiBvYmplY3QuaWQsXHJcblx0XHRcdFx0c2VyaWFsaXplZDogb2JqZWN0LnNlcmlhbGl6ZSgpXHJcblx0XHRcdH07XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBvYmo7XHJcblx0fVxyXG59XHJcblxyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRtb2R1bGUuZXhwb3J0cyA9IEJlYXRtYXA7XHJcbn0gZWxzZSB7XHJcblx0d2luZG93LkJlYXRtYXAgPSBFZGl0b3IuQmVhdG1hcCA9IEJlYXRtYXA7XHJcbn1cclxuIl0sImZpbGUiOiJCZWF0bWFwLmpzIn0=

var Editor = Editor || {};

class Player {
	constructor(buffer, context, volume) {
		this.buffer = buffer;
		this.context = context;
		this.sourceNode = null;
		this.startedAt = 0;
		this.pausedAt;
		this.playing = false;
		this.gain;
		this._volume = volume || .5;
	}

	play(offset, delay) {
		delay = delay || 0;
		if (this.sourceNode) this.sourceNode.stop();
		this.sourceNode = this.context.createBufferSource();
		this.gain = this.context.createGain();
		this.gain.gain.value = this.volume;
		this.sourceNode.connect(this.gain);
		this.gain.connect(this.context.destination);
		this.sourceNode.buffer = this.buffer;
		if (offset == undefined) {
			if (!this.playing && typeof this.pausedAt !== "undefined")
				offset = this.pausedAt;
			else
				offset = 0;
		}
		this.pausedAt = undefined;
		if (offset >= this.buffer.duration) offset = 0;
		this.sourceNode.start(delay, offset);
		this.startedAt = this.context.currentTime - offset + delay;
		this.playing = true;
	};

	pause(offset) {
		this.pausedAt = offset !== undefined ? offset : this.t;
		this.stop();
	};

	seek(offset) {
		var offset = Math.max(0, Math.min(offset, this.duration));
		var temp = this.playing;
		this.pause(offset);
		if(temp)
			this.play();
	}

	stop() {
		if (this.sourceNode) {
			this.sourceNode.disconnect();
			this.sourceNode.stop(0);
			this.sourceNode = null;
		}
		this.playing = false;
	};

	get t() {
		if (this.pausedAt !== undefined)
			return this.pausedAt;
		else {
			if (this.playing)
				return this.context.currentTime - this.startedAt;
			return 0;
		}
	}

	set t(offset) {
		this.seek(offset);
	}

	get duration() {
		return this.buffer.duration;
	}

	get volume() {
		return this._volume;
	}

	set volume(x) {
		this._volume = x;
		if(this.gain) this.gain.gain.value = x;
	}
}

window.Player = Editor.Player = Player;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL1BsYXllci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRWRpdG9yID0gRWRpdG9yIHx8IHt9O1xyXG5cclxuY2xhc3MgUGxheWVyIHtcclxuXHRjb25zdHJ1Y3RvcihidWZmZXIsIGNvbnRleHQsIHZvbHVtZSkge1xyXG5cdFx0dGhpcy5idWZmZXIgPSBidWZmZXI7XHJcblx0XHR0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cdFx0dGhpcy5zb3VyY2VOb2RlID0gbnVsbDtcclxuXHRcdHRoaXMuc3RhcnRlZEF0ID0gMDtcclxuXHRcdHRoaXMucGF1c2VkQXQ7XHJcblx0XHR0aGlzLnBsYXlpbmcgPSBmYWxzZTtcclxuXHRcdHRoaXMuZ2FpbjtcclxuXHRcdHRoaXMuX3ZvbHVtZSA9IHZvbHVtZSB8fCAuNTtcclxuXHR9XHJcblxyXG5cdHBsYXkob2Zmc2V0LCBkZWxheSkge1xyXG5cdFx0ZGVsYXkgPSBkZWxheSB8fCAwO1xyXG5cdFx0aWYgKHRoaXMuc291cmNlTm9kZSkgdGhpcy5zb3VyY2VOb2RlLnN0b3AoKTtcclxuXHRcdHRoaXMuc291cmNlTm9kZSA9IHRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuXHRcdHRoaXMuZ2FpbiA9IHRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk7XHJcblx0XHR0aGlzLmdhaW4uZ2Fpbi52YWx1ZSA9IHRoaXMudm9sdW1lO1xyXG5cdFx0dGhpcy5zb3VyY2VOb2RlLmNvbm5lY3QodGhpcy5nYWluKTtcclxuXHRcdHRoaXMuZ2Fpbi5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbik7XHJcblx0XHR0aGlzLnNvdXJjZU5vZGUuYnVmZmVyID0gdGhpcy5idWZmZXI7XHJcblx0XHRpZiAob2Zmc2V0ID09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRpZiAoIXRoaXMucGxheWluZyAmJiB0eXBlb2YgdGhpcy5wYXVzZWRBdCAhPT0gXCJ1bmRlZmluZWRcIilcclxuXHRcdFx0XHRvZmZzZXQgPSB0aGlzLnBhdXNlZEF0O1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0b2Zmc2V0ID0gMDtcclxuXHRcdH1cclxuXHRcdHRoaXMucGF1c2VkQXQgPSB1bmRlZmluZWQ7XHJcblx0XHRpZiAob2Zmc2V0ID49IHRoaXMuYnVmZmVyLmR1cmF0aW9uKSBvZmZzZXQgPSAwO1xyXG5cdFx0dGhpcy5zb3VyY2VOb2RlLnN0YXJ0KGRlbGF5LCBvZmZzZXQpO1xyXG5cdFx0dGhpcy5zdGFydGVkQXQgPSB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgLSBvZmZzZXQgKyBkZWxheTtcclxuXHRcdHRoaXMucGxheWluZyA9IHRydWU7XHJcblx0fTtcclxuXHJcblx0cGF1c2Uob2Zmc2V0KSB7XHJcblx0XHR0aGlzLnBhdXNlZEF0ID0gb2Zmc2V0ICE9PSB1bmRlZmluZWQgPyBvZmZzZXQgOiB0aGlzLnQ7XHJcblx0XHR0aGlzLnN0b3AoKTtcclxuXHR9O1xyXG5cclxuXHRzZWVrKG9mZnNldCkge1xyXG5cdFx0dmFyIG9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG9mZnNldCwgdGhpcy5kdXJhdGlvbikpO1xyXG5cdFx0dmFyIHRlbXAgPSB0aGlzLnBsYXlpbmc7XHJcblx0XHR0aGlzLnBhdXNlKG9mZnNldCk7XHJcblx0XHRpZih0ZW1wKVxyXG5cdFx0XHR0aGlzLnBsYXkoKTtcclxuXHR9XHJcblxyXG5cdHN0b3AoKSB7XHJcblx0XHRpZiAodGhpcy5zb3VyY2VOb2RlKSB7XHJcblx0XHRcdHRoaXMuc291cmNlTm9kZS5kaXNjb25uZWN0KCk7XHJcblx0XHRcdHRoaXMuc291cmNlTm9kZS5zdG9wKDApO1xyXG5cdFx0XHR0aGlzLnNvdXJjZU5vZGUgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5wbGF5aW5nID0gZmFsc2U7XHJcblx0fTtcclxuXHJcblx0Z2V0IHQoKSB7XHJcblx0XHRpZiAodGhpcy5wYXVzZWRBdCAhPT0gdW5kZWZpbmVkKVxyXG5cdFx0XHRyZXR1cm4gdGhpcy5wYXVzZWRBdDtcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRpZiAodGhpcy5wbGF5aW5nKVxyXG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0ZWRBdDtcclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZXQgdChvZmZzZXQpIHtcclxuXHRcdHRoaXMuc2VlayhvZmZzZXQpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGR1cmF0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuYnVmZmVyLmR1cmF0aW9uO1xyXG5cdH1cclxuXHJcblx0Z2V0IHZvbHVtZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl92b2x1bWU7XHJcblx0fVxyXG5cclxuXHRzZXQgdm9sdW1lKHgpIHtcclxuXHRcdHRoaXMuX3ZvbHVtZSA9IHg7XHJcblx0XHRpZih0aGlzLmdhaW4pIHRoaXMuZ2Fpbi5nYWluLnZhbHVlID0geDtcclxuXHR9XHJcbn1cclxuXHJcbndpbmRvdy5QbGF5ZXIgPSBFZGl0b3IuUGxheWVyID0gUGxheWVyOyJdLCJmaWxlIjoiUGxheWVyLmpzIn0=

var Editor = Editor || {};

class Skin {
    constructor(_name) {
        this._meta = {};
        this._meta.name = _name;
        this._meta.options = {};
    }

    static ParseIni(content) {
        var skin = {};
        var keyValReg = /^([a-zA-Z0-9]+)[ ]*:[ ]*(.+)$/;
        content.toString().split(/[\n\r]+/).forEach(function(line) {
            line = line.toString().trim();
            if (!line) {
                return;
            }
            var match = keyValReg.exec(line);
            if (match) { skin[match[1]] = match[2]; }
        });

        return skin;
    }

    static LoadSkin(name, callback, elements) {
        var skin = new Skin(name);
        elements = elements || ['sliderb0', 'sliderfollowcircle', /*'sliderstartcircle', 'sliderstartcircleoverlay', 'sliderendcircle', 'sliderendcircleoverlay',*/ 'sliderscorepoint',
            'cursor', 'cursortrail', 'hitcircle', 'hitcircleoverlay', 'approachcircle', 'hitcircleselect',
            'default-0', 'default-1', 'default-2', 'default-3', 'default-4', 'default-5', 'default-6', 'default-7', 'default-8', 'default-9',
            'spinner-bottom', 'spinner-top', 'spinner-middle', 'spinner-middle2',
        ];

        $.get(`../Skins/${name}/skin.ini`, function(ini) {
            skin._meta.options = Skin.ParseIni(ini);
            (function next(i) {
                if (i < elements.length) {
                    skin[elements[i]] = new Image();
                    skin[elements[i]].src = `../Skins/${skin._meta.name}/${elements[i]}.png`;
                    skin[elements[i]].onload = function() {
                        next(i + 1);
                    };
                    skin[elements[i]].onerror = function() {
                        next(i + 1);
                    };
                } else {
                    var n = 0;
                    var loaded = function() {
                        n++;
                        //status = "Loading Skin... " + (85 + n / 2).toFixed(2) + "%";
                        if (n >= 30) {
                            //status = "Loading Skin...100%";
                            callback(skin);
                        }
                    };
                    if (skin._meta.options.HitCirclePrefix && !skin[skin._meta.options.HitCirclePrefix + '-0']) {
                        for (var i = 0; i < 10; i++) {
                            skin[skin._meta.options.HitCirclePrefix + '-' + i] = new Image();
                            skin[skin._meta.options.HitCirclePrefix + '-' + i].src = `../Skins/${skin._meta.name}/${skin._meta.options.HitCirclePrefix}-${i}.png`;
                            skin[skin._meta.options.HitCirclePrefix + '-' + i].onload = function() {
                                loaded();
                            };
                        }
                    } else n += 10;
                    if (skin._meta.options.ScorePrefix && !skin[skin._meta.options.ScorePrefix + '-0']) {
                        for (var i = 0; i < 10; i++) {
                            skin[skin._meta.options.ScorePrefix + '-' + i] = new Image();
                            skin[skin._meta.options.ScorePrefix + '-' + i].src = `../Skins/${skin._meta.name}/${skin._meta.options.ScorePrefix}-${i}.png`;
                            skin[skin._meta.options.ScorePrefix + '-' + i].onload = function() {
                                loaded();
                            };
                        }
                    } else n += 10;
                    if (skin._meta.options.ComboPrefix && !skin[skin._meta.options.ComboPrefix + '-0']) {
                        for (var i = 0; i < 10; i++) {
                            skin[skin._meta.options.ComboPrefix + '-' + i] = new Image();
                            skin[skin._meta.options.ComboPrefix + '-' + i].src = `../Skins/${skin._meta.name}/${skin._meta.options.ComboPrefix}-${i}.png`;
                            skin[skin._meta.options.ComboPrefix + '-' + i].onload = function() {
                                loaded();
                            };
                        }
                    } else n += 10;;
                }
            })(0);
        });
    }

    addComboNumber(digits, n) {
        return this['default-' + n] = concatImages(digits, parseInt(this._meta.options.HitCircleOverlap || 2, 10));
    };

    addComboColor(col) {
        Editor.cols.push(col);
        var tintelements = ['hitcircle', 'approachcircle', 'sliderb0'];
        for (var i = 0; i < tintelements.length; i++) {
            if (tintelements[i] == 'sliderb0') {
                this[tintelements[i] + (Editor.cols.length - 1)] = tint(this[tintelements[i]], [0, 0, 0]);
            } else
                this[tintelements[i] + (Editor.cols.length - 1)] = tint(this[tintelements[i]], col);
        }
    };
}

if (typeof module !== "undefined") {
    module.exports = Skin;
} else {
    window.Skin = Editor.Skin = Skin;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL1NraW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVkaXRvciA9IEVkaXRvciB8fCB7fTtcclxuXHJcbmNsYXNzIFNraW4ge1xyXG4gICAgY29uc3RydWN0b3IoX25hbWUpIHtcclxuICAgICAgICB0aGlzLl9tZXRhID0ge307XHJcbiAgICAgICAgdGhpcy5fbWV0YS5uYW1lID0gX25hbWU7XHJcbiAgICAgICAgdGhpcy5fbWV0YS5vcHRpb25zID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIFBhcnNlSW5pKGNvbnRlbnQpIHtcclxuICAgICAgICB2YXIgc2tpbiA9IHt9O1xyXG4gICAgICAgIHZhciBrZXlWYWxSZWcgPSAvXihbYS16QS1aMC05XSspWyBdKjpbIF0qKC4rKSQvO1xyXG4gICAgICAgIGNvbnRlbnQudG9TdHJpbmcoKS5zcGxpdCgvW1xcblxccl0rLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XHJcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBrZXlWYWxSZWcuZXhlYyhsaW5lKTtcclxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7IHNraW5bbWF0Y2hbMV1dID0gbWF0Y2hbMl07IH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNraW47XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIExvYWRTa2luKG5hbWUsIGNhbGxiYWNrLCBlbGVtZW50cykge1xyXG4gICAgICAgIHZhciBza2luID0gbmV3IFNraW4obmFtZSk7XHJcbiAgICAgICAgZWxlbWVudHMgPSBlbGVtZW50cyB8fCBbJ3NsaWRlcmIwJywgJ3NsaWRlcmZvbGxvd2NpcmNsZScsIC8qJ3NsaWRlcnN0YXJ0Y2lyY2xlJywgJ3NsaWRlcnN0YXJ0Y2lyY2xlb3ZlcmxheScsICdzbGlkZXJlbmRjaXJjbGUnLCAnc2xpZGVyZW5kY2lyY2xlb3ZlcmxheScsKi8gJ3NsaWRlcnNjb3JlcG9pbnQnLFxyXG4gICAgICAgICAgICAnY3Vyc29yJywgJ2N1cnNvcnRyYWlsJywgJ2hpdGNpcmNsZScsICdoaXRjaXJjbGVvdmVybGF5JywgJ2FwcHJvYWNoY2lyY2xlJywgJ2hpdGNpcmNsZXNlbGVjdCcsXHJcbiAgICAgICAgICAgICdkZWZhdWx0LTAnLCAnZGVmYXVsdC0xJywgJ2RlZmF1bHQtMicsICdkZWZhdWx0LTMnLCAnZGVmYXVsdC00JywgJ2RlZmF1bHQtNScsICdkZWZhdWx0LTYnLCAnZGVmYXVsdC03JywgJ2RlZmF1bHQtOCcsICdkZWZhdWx0LTknLFxyXG4gICAgICAgICAgICAnc3Bpbm5lci1ib3R0b20nLCAnc3Bpbm5lci10b3AnLCAnc3Bpbm5lci1taWRkbGUnLCAnc3Bpbm5lci1taWRkbGUyJyxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAkLmdldChgLi4vU2tpbnMvJHtuYW1lfS9za2luLmluaWAsIGZ1bmN0aW9uKGluaSkge1xyXG4gICAgICAgICAgICBza2luLl9tZXRhLm9wdGlvbnMgPSBTa2luLlBhcnNlSW5pKGluaSk7XHJcbiAgICAgICAgICAgIChmdW5jdGlvbiBuZXh0KGkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbltlbGVtZW50c1tpXV0gPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBza2luW2VsZW1lbnRzW2ldXS5zcmMgPSBgLi4vU2tpbnMvJHtza2luLl9tZXRhLm5hbWV9LyR7ZWxlbWVudHNbaV19LnBuZ2A7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbltlbGVtZW50c1tpXV0ub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoaSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbltlbGVtZW50c1tpXV0ub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0KGkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvYWRlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc3RhdHVzID0gXCJMb2FkaW5nIFNraW4uLi4gXCIgKyAoODUgKyBuIC8gMikudG9GaXhlZCgyKSArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA+PSAzMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zdGF0dXMgPSBcIkxvYWRpbmcgU2tpbi4uLjEwMCVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHNraW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbi5fbWV0YS5vcHRpb25zLkhpdENpcmNsZVByZWZpeCAmJiAhc2tpbltza2luLl9tZXRhLm9wdGlvbnMuSGl0Q2lyY2xlUHJlZml4ICsgJy0wJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2luW3NraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVQcmVmaXggKyAnLScgKyBpXSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbltza2luLl9tZXRhLm9wdGlvbnMuSGl0Q2lyY2xlUHJlZml4ICsgJy0nICsgaV0uc3JjID0gYC4uL1NraW5zLyR7c2tpbi5fbWV0YS5uYW1lfS8ke3NraW4uX21ldGEub3B0aW9ucy5IaXRDaXJjbGVQcmVmaXh9LSR7aX0ucG5nYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLkhpdENpcmNsZVByZWZpeCArICctJyArIGldLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuICs9IDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChza2luLl9tZXRhLm9wdGlvbnMuU2NvcmVQcmVmaXggJiYgIXNraW5bc2tpbi5fbWV0YS5vcHRpb25zLlNjb3JlUHJlZml4ICsgJy0wJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2luW3NraW4uX21ldGEub3B0aW9ucy5TY29yZVByZWZpeCArICctJyArIGldID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2luW3NraW4uX21ldGEub3B0aW9ucy5TY29yZVByZWZpeCArICctJyArIGldLnNyYyA9IGAuLi9Ta2lucy8ke3NraW4uX21ldGEubmFtZX0vJHtza2luLl9tZXRhLm9wdGlvbnMuU2NvcmVQcmVmaXh9LSR7aX0ucG5nYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLlNjb3JlUHJlZml4ICsgJy0nICsgaV0ub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG4gKz0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraW4uX21ldGEub3B0aW9ucy5Db21ib1ByZWZpeCAmJiAhc2tpbltza2luLl9tZXRhLm9wdGlvbnMuQ29tYm9QcmVmaXggKyAnLTAnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLkNvbWJvUHJlZml4ICsgJy0nICsgaV0gPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraW5bc2tpbi5fbWV0YS5vcHRpb25zLkNvbWJvUHJlZml4ICsgJy0nICsgaV0uc3JjID0gYC4uL1NraW5zLyR7c2tpbi5fbWV0YS5uYW1lfS8ke3NraW4uX21ldGEub3B0aW9ucy5Db21ib1ByZWZpeH0tJHtpfS5wbmdgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpbltza2luLl9tZXRhLm9wdGlvbnMuQ29tYm9QcmVmaXggKyAnLScgKyBpXS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbiArPSAxMDs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENvbWJvTnVtYmVyKGRpZ2l0cywgbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzWydkZWZhdWx0LScgKyBuXSA9IGNvbmNhdEltYWdlcyhkaWdpdHMsIHBhcnNlSW50KHRoaXMuX21ldGEub3B0aW9ucy5IaXRDaXJjbGVPdmVybGFwIHx8IDIsIDEwKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGFkZENvbWJvQ29sb3IoY29sKSB7XHJcbiAgICAgICAgRWRpdG9yLmNvbHMucHVzaChjb2wpO1xyXG4gICAgICAgIHZhciB0aW50ZWxlbWVudHMgPSBbJ2hpdGNpcmNsZScsICdhcHByb2FjaGNpcmNsZScsICdzbGlkZXJiMCddO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGludGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aW50ZWxlbWVudHNbaV0gPT0gJ3NsaWRlcmIwJykge1xyXG4gICAgICAgICAgICAgICAgdGhpc1t0aW50ZWxlbWVudHNbaV0gKyAoRWRpdG9yLmNvbHMubGVuZ3RoIC0gMSldID0gdGludCh0aGlzW3RpbnRlbGVtZW50c1tpXV0sIFswLCAwLCAwXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpc1t0aW50ZWxlbWVudHNbaV0gKyAoRWRpdG9yLmNvbHMubGVuZ3RoIC0gMSldID0gdGludCh0aGlzW3RpbnRlbGVtZW50c1tpXV0sIGNvbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0gU2tpbjtcclxufSBlbHNlIHtcclxuICAgIHdpbmRvdy5Ta2luID0gRWRpdG9yLlNraW4gPSBTa2luO1xyXG59XHJcbiJdLCJmaWxlIjoiU2tpbi5qcyJ9

var Editor = Editor || {};
class Socket {
	static get_file(path, responseType, complete, progress) {
		var oReq = new XMLHttpRequest();
		oReq.open("GET", path, true);
		if (responseType) oReq.responseType = responseType;

		if (progress) oReq.addEventListener("progress", (e) => { progress(e.loaded / e.total) });
		oReq.addEventListener("load", (e) => { complete(responseType ? oReq.response : oReq.responseText) });

		oReq.send(null);
	}
	static get_osu(callback) {
		if (Editor.fileInfo && Editor.fileInfo.difficulty) {
			console.log(Editor.beatmap);
			document.title = `${Editor.beatmap.ArtistUnicode} - ${Editor.beatmap.TitleUnicode} [${Editor.beatmap.Version}]`;
			console.log("SHIET");
			if (callback) callback();
			// Socket.get_file(`/f/${Editor.roomID}/${Editor.fileInfo.difficulty}`, false, function(content) {
			// 	Editor.beatmap = Beatmap.ParseString(content);
			// 	document.title = Editor.beatmap.ArtistUnicode + ' - ' + Editor.beatmap.TitleUnicode + ' [' + Editor.beatmap.Version + ']';
			// 	if (callback) callback();
			// }, function(p) {
			// 	Editor.updateStatus(`Loading beatmap: ${Math.round(p*100)}%`);
			// });
		} else {
			console.log('%cDifficulty not found!', 'color: #F00');
			alert('Room does not exist. Redirecting to homepage...');
			window.location.href = window.location.origin;
		}
	}

	static get_mp3(callback) {
		var done = false;
		if (Editor.beatmap && Editor.beatmap.AudioFilename) {
			Socket.get_file(`/f/${Editor.roomID}/${Editor.beatmap.AudioFilename}`, 'arraybuffer', function (content) {
				Editor.audioCtx.decodeAudioData(content).then(function (buffer) {
					var t = localStorage[Editor.roomID];
					if (Editor.source) Editor.source.stop();
					Editor.source = new Player(buffer, Editor.audioCtx);
					if (t) Editor.source.t = t;
					if (callback) callback();
				});
			}, function (p) {
				if (done) return;
				if (p == 1) done = true;
				Editor.updateStatus(`Loading audio: ${Math.round(p * 100)}%`);
			});
		} else {
			console.log('%cThis map has no audio!', 'color: #F00');
			Editor.beatmap.AudioFilename = '';
			if (callback) callback();
		}
	}

	static get_bg(callback) {
		if (Editor.beatmap && Editor.beatmap.bgFilename) {
			Socket.get_file(`/f/${Editor.roomID}/${Editor.beatmap.bgFilename}`, 'blob', function (blob) {
				var $old = $('#backgrounds .bg')
				var $new = $old.clone();
				$new.css('background', `url(${URL.createObjectURL(blob)}) no-repeat center center fixed`)
					.css('background-size', 'cover')
					.css('display', 'none')
					.appendTo('#backgrounds');
				$new.fadeIn(1000);
				$old.fadeOut(1000, function () {
					$(this).remove();
				});
				if (callback) callback();
			}, function (p) {
				Editor.updateStatus(`Loading background: ${Math.round(p * 100)}%`);
			});

		} else {
			console.log('%cThis map has no background!', 'color: #F00');
			Editor.beatmap.bgFilename = '';
			if (callback) callback();
		}
	}
	constructor() {
		this.room = {};
		var socket = this.instance = io.connect(location.pathname);

		var _this = this;

		socket.on("news", function (data) {
			console.log("%cServer: " + data.status, "color:" + (data.color || "#000"));
		});
		socket.on('diffs', function (data) {
			Editor.diffs = data;
		});
		socket.on("disconnect", function () {
			console.log("disconnected");
			Editor.connected = false;
		});
		socket.on("connect", function () {
			Editor.connected = true;

			socket.on("hi", function (data) {
				socket.emit("join", 'placeholder'); //username will go here, passwords can be added through _this
				Editor.beatmap = Beatmap.unjson(data);
				Editor.fileInfo = { difficulty: Editor.beatmap.Version };
				// if (Editor.beatmap) return;
				Socket.get_osu(function () {
					Socket.get_bg(function () {
						Socket.get_mp3(function () {
							Editor.init();
							Editor.loading = false;
							$('#cover').fadeOut();
							$('#loading').fadeOut();
						});
					})
				});
			});

			socket.on('join', function (data) {
				if (!data[0].includes(socket.id)) {
					console.log(data[0] + " joined");
					_this.room[data[0]] = [];
				}
			});

			socket.on('leave', function (data) {
				console.log(data + " left");
				delete _this.room[data];
			});

			socket.on("badurl", function (data) {
				alert('Room does not exist. Redirecting to homepage...');
				window.location.href = window.location.origin;
			});

			socket.on("msg", function (data) {
				console.log("Message: ", data);
			});

			socket.on('edit move', function (data) {
				//var obj = beatmap.matchObj(data[0]);
				var obj = Editor.beatmap.HitObjects[Editor.beatmap.getIndexAt(HitObject.parse(data[0]).startTime)];
				if (obj) {
					var dx = data[1] - obj.position.x,
						dy = data[2] - obj.position.y;
					obj.position.x = data[1];
					obj.position.y = data[2];
					if (obj instanceof Slider) {
						for (var j = 1; j < obj.points.length; j++) {
							obj.points[j].x += dx;
							obj.points[j].y += dy;
						}
						if (obj.cache && obj.cache.render) {
							obj.cache.render[1][0] += dx;
							obj.cache.render[1][1] += dy;
						}
						obj.calculate();
					}
				} else {
					console.log('object not found!');
				}
				Editor.renderupdate();
			});
		});
	}

	send(msg) {
		this.instance.emit('msg', msg);
	}

	edit_move(obj, x, y) {
		this.instance.emit('edit move', [obj, x, y]);
	}
}
Editor.Socket = Socket;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL1NvY2tldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRWRpdG9yID0gRWRpdG9yIHx8IHt9O1xyXG5jbGFzcyBTb2NrZXQge1xyXG5cdHN0YXRpYyBnZXRfZmlsZShwYXRoLCByZXNwb25zZVR5cGUsIGNvbXBsZXRlLCBwcm9ncmVzcykge1xyXG5cdFx0dmFyIG9SZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdG9SZXEub3BlbihcIkdFVFwiLCBwYXRoLCB0cnVlKTtcclxuXHRcdGlmIChyZXNwb25zZVR5cGUpIG9SZXEucmVzcG9uc2VUeXBlID0gcmVzcG9uc2VUeXBlO1xyXG5cclxuXHRcdGlmIChwcm9ncmVzcykgb1JlcS5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgKGUpID0+IHsgcHJvZ3Jlc3MoZS5sb2FkZWQgLyBlLnRvdGFsKSB9KTtcclxuXHRcdG9SZXEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGUpID0+IHsgY29tcGxldGUocmVzcG9uc2VUeXBlID8gb1JlcS5yZXNwb25zZSA6IG9SZXEucmVzcG9uc2VUZXh0KSB9KTtcclxuXHJcblx0XHRvUmVxLnNlbmQobnVsbCk7XHJcblx0fVxyXG5cdHN0YXRpYyBnZXRfb3N1KGNhbGxiYWNrKSB7XHJcblx0XHRpZiAoRWRpdG9yLmZpbGVJbmZvICYmIEVkaXRvci5maWxlSW5mby5kaWZmaWN1bHR5KSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKEVkaXRvci5iZWF0bWFwKTtcclxuXHRcdFx0ZG9jdW1lbnQudGl0bGUgPSBgJHtFZGl0b3IuYmVhdG1hcC5BcnRpc3RVbmljb2RlfSAtICR7RWRpdG9yLmJlYXRtYXAuVGl0bGVVbmljb2RlfSBbJHtFZGl0b3IuYmVhdG1hcC5WZXJzaW9ufV1gO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlNISUVUXCIpO1xyXG5cdFx0XHRpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XHJcblx0XHRcdC8vIFNvY2tldC5nZXRfZmlsZShgL2YvJHtFZGl0b3Iucm9vbUlEfS8ke0VkaXRvci5maWxlSW5mby5kaWZmaWN1bHR5fWAsIGZhbHNlLCBmdW5jdGlvbihjb250ZW50KSB7XHJcblx0XHRcdC8vIFx0RWRpdG9yLmJlYXRtYXAgPSBCZWF0bWFwLlBhcnNlU3RyaW5nKGNvbnRlbnQpO1xyXG5cdFx0XHQvLyBcdGRvY3VtZW50LnRpdGxlID0gRWRpdG9yLmJlYXRtYXAuQXJ0aXN0VW5pY29kZSArICcgLSAnICsgRWRpdG9yLmJlYXRtYXAuVGl0bGVVbmljb2RlICsgJyBbJyArIEVkaXRvci5iZWF0bWFwLlZlcnNpb24gKyAnXSc7XHJcblx0XHRcdC8vIFx0aWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xyXG5cdFx0XHQvLyB9LCBmdW5jdGlvbihwKSB7XHJcblx0XHRcdC8vIFx0RWRpdG9yLnVwZGF0ZVN0YXR1cyhgTG9hZGluZyBiZWF0bWFwOiAke01hdGgucm91bmQocCoxMDApfSVgKTtcclxuXHRcdFx0Ly8gfSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnJWNEaWZmaWN1bHR5IG5vdCBmb3VuZCEnLCAnY29sb3I6ICNGMDAnKTtcclxuXHRcdFx0YWxlcnQoJ1Jvb20gZG9lcyBub3QgZXhpc3QuIFJlZGlyZWN0aW5nIHRvIGhvbWVwYWdlLi4uJyk7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHN0YXRpYyBnZXRfbXAzKGNhbGxiYWNrKSB7XHJcblx0XHR2YXIgZG9uZSA9IGZhbHNlO1xyXG5cdFx0aWYgKEVkaXRvci5iZWF0bWFwICYmIEVkaXRvci5iZWF0bWFwLkF1ZGlvRmlsZW5hbWUpIHtcclxuXHRcdFx0U29ja2V0LmdldF9maWxlKGAvZi8ke0VkaXRvci5yb29tSUR9LyR7RWRpdG9yLmJlYXRtYXAuQXVkaW9GaWxlbmFtZX1gLCAnYXJyYXlidWZmZXInLCBmdW5jdGlvbiAoY29udGVudCkge1xyXG5cdFx0XHRcdEVkaXRvci5hdWRpb0N0eC5kZWNvZGVBdWRpb0RhdGEoY29udGVudCkudGhlbihmdW5jdGlvbiAoYnVmZmVyKSB7XHJcblx0XHRcdFx0XHR2YXIgdCA9IGxvY2FsU3RvcmFnZVtFZGl0b3Iucm9vbUlEXTtcclxuXHRcdFx0XHRcdGlmIChFZGl0b3Iuc291cmNlKSBFZGl0b3Iuc291cmNlLnN0b3AoKTtcclxuXHRcdFx0XHRcdEVkaXRvci5zb3VyY2UgPSBuZXcgUGxheWVyKGJ1ZmZlciwgRWRpdG9yLmF1ZGlvQ3R4KTtcclxuXHRcdFx0XHRcdGlmICh0KSBFZGl0b3Iuc291cmNlLnQgPSB0O1xyXG5cdFx0XHRcdFx0aWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LCBmdW5jdGlvbiAocCkge1xyXG5cdFx0XHRcdGlmIChkb25lKSByZXR1cm47XHJcblx0XHRcdFx0aWYgKHAgPT0gMSkgZG9uZSA9IHRydWU7XHJcblx0XHRcdFx0RWRpdG9yLnVwZGF0ZVN0YXR1cyhgTG9hZGluZyBhdWRpbzogJHtNYXRoLnJvdW5kKHAgKiAxMDApfSVgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnJWNUaGlzIG1hcCBoYXMgbm8gYXVkaW8hJywgJ2NvbG9yOiAjRjAwJyk7XHJcblx0XHRcdEVkaXRvci5iZWF0bWFwLkF1ZGlvRmlsZW5hbWUgPSAnJztcclxuXHRcdFx0aWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldF9iZyhjYWxsYmFjaykge1xyXG5cdFx0aWYgKEVkaXRvci5iZWF0bWFwICYmIEVkaXRvci5iZWF0bWFwLmJnRmlsZW5hbWUpIHtcclxuXHRcdFx0U29ja2V0LmdldF9maWxlKGAvZi8ke0VkaXRvci5yb29tSUR9LyR7RWRpdG9yLmJlYXRtYXAuYmdGaWxlbmFtZX1gLCAnYmxvYicsIGZ1bmN0aW9uIChibG9iKSB7XHJcblx0XHRcdFx0dmFyICRvbGQgPSAkKCcjYmFja2dyb3VuZHMgLmJnJylcclxuXHRcdFx0XHR2YXIgJG5ldyA9ICRvbGQuY2xvbmUoKTtcclxuXHRcdFx0XHQkbmV3LmNzcygnYmFja2dyb3VuZCcsIGB1cmwoJHtVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpfSkgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIgZml4ZWRgKVxyXG5cdFx0XHRcdFx0LmNzcygnYmFja2dyb3VuZC1zaXplJywgJ2NvdmVyJylcclxuXHRcdFx0XHRcdC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXHJcblx0XHRcdFx0XHQuYXBwZW5kVG8oJyNiYWNrZ3JvdW5kcycpO1xyXG5cdFx0XHRcdCRuZXcuZmFkZUluKDEwMDApO1xyXG5cdFx0XHRcdCRvbGQuZmFkZU91dCgxMDAwLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcclxuXHRcdFx0fSwgZnVuY3Rpb24gKHApIHtcclxuXHRcdFx0XHRFZGl0b3IudXBkYXRlU3RhdHVzKGBMb2FkaW5nIGJhY2tncm91bmQ6ICR7TWF0aC5yb3VuZChwICogMTAwKX0lYCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCclY1RoaXMgbWFwIGhhcyBubyBiYWNrZ3JvdW5kIScsICdjb2xvcjogI0YwMCcpO1xyXG5cdFx0XHRFZGl0b3IuYmVhdG1hcC5iZ0ZpbGVuYW1lID0gJyc7XHJcblx0XHRcdGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcclxuXHRcdH1cclxuXHR9XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLnJvb20gPSB7fTtcclxuXHRcdHZhciBzb2NrZXQgPSB0aGlzLmluc3RhbmNlID0gaW8uY29ubmVjdChsb2NhdGlvbi5wYXRobmFtZSk7XHJcblxyXG5cdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHJcblx0XHRzb2NrZXQub24oXCJuZXdzXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiJWNTZXJ2ZXI6IFwiICsgZGF0YS5zdGF0dXMsIFwiY29sb3I6XCIgKyAoZGF0YS5jb2xvciB8fCBcIiMwMDBcIikpO1xyXG5cdFx0fSk7XHJcblx0XHRzb2NrZXQub24oJ2RpZmZzJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0RWRpdG9yLmRpZmZzID0gZGF0YTtcclxuXHRcdH0pO1xyXG5cdFx0c29ja2V0Lm9uKFwiZGlzY29ubmVjdFwiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiZGlzY29ubmVjdGVkXCIpO1xyXG5cdFx0XHRFZGl0b3IuY29ubmVjdGVkID0gZmFsc2U7XHJcblx0XHR9KTtcclxuXHRcdHNvY2tldC5vbihcImNvbm5lY3RcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRFZGl0b3IuY29ubmVjdGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdHNvY2tldC5vbihcImhpXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0c29ja2V0LmVtaXQoXCJqb2luXCIsICdwbGFjZWhvbGRlcicpOyAvL3VzZXJuYW1lIHdpbGwgZ28gaGVyZSwgcGFzc3dvcmRzIGNhbiBiZSBhZGRlZCB0aHJvdWdoIF90aGlzXHJcblx0XHRcdFx0RWRpdG9yLmJlYXRtYXAgPSBCZWF0bWFwLnVuanNvbihkYXRhKTtcclxuXHRcdFx0XHRFZGl0b3IuZmlsZUluZm8gPSB7IGRpZmZpY3VsdHk6IEVkaXRvci5iZWF0bWFwLlZlcnNpb24gfTtcclxuXHRcdFx0XHQvLyBpZiAoRWRpdG9yLmJlYXRtYXApIHJldHVybjtcclxuXHRcdFx0XHRTb2NrZXQuZ2V0X29zdShmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRTb2NrZXQuZ2V0X2JnKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0U29ja2V0LmdldF9tcDMoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRcdEVkaXRvci5pbml0KCk7XHJcblx0XHRcdFx0XHRcdFx0RWRpdG9yLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHQkKCcjY292ZXInKS5mYWRlT3V0KCk7XHJcblx0XHRcdFx0XHRcdFx0JCgnI2xvYWRpbmcnKS5mYWRlT3V0KCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzb2NrZXQub24oJ2pvaW4nLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdGlmICghZGF0YVswXS5pbmNsdWRlcyhzb2NrZXQuaWQpKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhWzBdICsgXCIgam9pbmVkXCIpO1xyXG5cdFx0XHRcdFx0X3RoaXMucm9vbVtkYXRhWzBdXSA9IFtdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzb2NrZXQub24oJ2xlYXZlJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhICsgXCIgbGVmdFwiKTtcclxuXHRcdFx0XHRkZWxldGUgX3RoaXMucm9vbVtkYXRhXTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzb2NrZXQub24oXCJiYWR1cmxcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHRhbGVydCgnUm9vbSBkb2VzIG5vdCBleGlzdC4gUmVkaXJlY3RpbmcgdG8gaG9tZXBhZ2UuLi4nKTtcclxuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c29ja2V0Lm9uKFwibXNnXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJNZXNzYWdlOiBcIiwgZGF0YSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c29ja2V0Lm9uKCdlZGl0IG1vdmUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdC8vdmFyIG9iaiA9IGJlYXRtYXAubWF0Y2hPYmooZGF0YVswXSk7XHJcblx0XHRcdFx0dmFyIG9iaiA9IEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbRWRpdG9yLmJlYXRtYXAuZ2V0SW5kZXhBdChIaXRPYmplY3QucGFyc2UoZGF0YVswXSkuc3RhcnRUaW1lKV07XHJcblx0XHRcdFx0aWYgKG9iaikge1xyXG5cdFx0XHRcdFx0dmFyIGR4ID0gZGF0YVsxXSAtIG9iai5wb3NpdGlvbi54LFxyXG5cdFx0XHRcdFx0XHRkeSA9IGRhdGFbMl0gLSBvYmoucG9zaXRpb24ueTtcclxuXHRcdFx0XHRcdG9iai5wb3NpdGlvbi54ID0gZGF0YVsxXTtcclxuXHRcdFx0XHRcdG9iai5wb3NpdGlvbi55ID0gZGF0YVsyXTtcclxuXHRcdFx0XHRcdGlmIChvYmogaW5zdGFuY2VvZiBTbGlkZXIpIHtcclxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaiA9IDE7IGogPCBvYmoucG9pbnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0b2JqLnBvaW50c1tqXS54ICs9IGR4O1xyXG5cdFx0XHRcdFx0XHRcdG9iai5wb2ludHNbal0ueSArPSBkeTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRpZiAob2JqLmNhY2hlICYmIG9iai5jYWNoZS5yZW5kZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRvYmouY2FjaGUucmVuZGVyWzFdWzBdICs9IGR4O1xyXG5cdFx0XHRcdFx0XHRcdG9iai5jYWNoZS5yZW5kZXJbMV1bMV0gKz0gZHk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0b2JqLmNhbGN1bGF0ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnb2JqZWN0IG5vdCBmb3VuZCEnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0RWRpdG9yLnJlbmRlcnVwZGF0ZSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c2VuZChtc2cpIHtcclxuXHRcdHRoaXMuaW5zdGFuY2UuZW1pdCgnbXNnJywgbXNnKTtcclxuXHR9XHJcblxyXG5cdGVkaXRfbW92ZShvYmosIHgsIHkpIHtcclxuXHRcdHRoaXMuaW5zdGFuY2UuZW1pdCgnZWRpdCBtb3ZlJywgW29iaiwgeCwgeV0pO1xyXG5cdH1cclxufVxyXG5FZGl0b3IuU29ja2V0ID0gU29ja2V0OyJdLCJmaWxlIjoiU29ja2V0LmpzIn0=

// Global Variables
var mouseX = 0, //actual mouse position in the coordinates of the playfield
	mouseY = 0,
	snapped_mouseX = 0, //position of object being edited, or snapped cursor location
	snapped_mouseY = 0,
	page_mouseX = 0, //absolute position on page (actual position on canvas has page_mouseY - 24)
	page_mouseY = 0;
var keyMap = Array(256);

// Debug variables
var keycodedbg = false;

Editor.roomID = location.pathname.split('/').splice(-1)[0];

Editor.updateStatus = function(status) {
	$('#statuslabel').html(status).stop().fadeIn(0).fadeOut(3000);
}

$('#statuslabel').mouseover(function() {
	$(this).fadeOut(1000);
});

Editor.align = function() {
	var height = $(window).height() * 0.75;
	var width = height * 4 / 3;

	$("#canvases > canvas").attr("width", $(document).width())
		.attr("height", $(document).height());

	var grid = $("#grid");
	grid.attr("width", width)
		.attr("height", height)
		.css({
			'left': ($(window).width() - width) / 2,
			'top': $(window).height() * 0.16
		});
	Editor.drawGrid();

	$("#righttoolbar > img").width($("#lefttoolbar > img")[0].width);
	$("#righttoolbar").css("top", 14 + (1 - $("#righttoolbar").height() / ($("#container").height() - $("#topsection").height() - $("#bottomsection").height())) * 50 + "%");

	if (Editor.source && Editor.timelinemarks) {
		var track = $('#timelinetrack');
		for (var time in Editor.timelinemarks) {
			if (Editor.timelinemarks.hasOwnProperty(time)) {
				for (var point in Editor.timelinemarks[time]) {
					if (Editor.timelinemarks[time].hasOwnProperty(point)) {
						$(Editor.timelinemarks[time][point]).css({
							left: track.position().left + track.width() * (time / Editor.source.duration)
						});
					}
				}
			}
		}
	}
};

Editor.render = function() {
	var height = $(window).height() * .75;
	var width = height * 4 / 3;
	var t = Editor.source.t;
	var ar = ars(Editor.beatmap['ApproachRate']);
	var cs = cspx(Editor.beatmap['CircleSize']);
	var ctx = document.getElementById('gridcanvas').getContext('2d');
	ctx.save();
	ctx.clearRect(0, 0, $(window).width(), $(window).height());
	ctx.translate(($(window).width() - width) / 2, $(window).height() * .16);
	ctx.scale(width / 512, height / 384);

	var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
	ctx2.save();
	ctx2.clearRect(0, 0, $(window).width(), $(window).height());
	ctx2.translate(($(window).width() - width) / 2, $(window).height() * .16);
	ctx2.scale(width / 512, height / 384);

	Editor.rendered = [];
	var renderFrom = Editor.beatmap.getIndexAt((t - .8 - Editor.maxsliderdur) * 1000);
	var renderTo = Editor.beatmap.getIndexAt((t + ar) * 1000);
	for (var i = renderTo; i >= renderFrom; i--) {
		if (Editor.beatmap.HitObjects[i].render(t, Editor.objc[i][0] % Editor.cols.length, Editor.objc[i][1]))
			Editor.rendered.push(Editor.beatmap.HitObjects[i]);
	}
	ctx.globalAlpha = 1;
	for (var i = 0; i < Editor.selected.length; i++) {
		ctx.drawImage(Editor.skin['hitcircleselect'], Editor.selected[i].position.x - cs / 2, Editor.selected[i].position.y - cs / 2, cs, cs);
	}
	ctx2.lineWidth = cs * 11 / 12;
	ctx2.lineJoin = 'round';
	ctx2.lineCap = 'round';
	for (var i = renderFrom; i <= renderTo; i++) {
		var obj = Editor.beatmap.HitObjects[i];
		if (!(obj instanceof Slider) || t > obj.endTime / 1000 + obj.fadetime || t < obj.startTime / 1000 - ar) continue;
		if (!obj.path) {
			ctx2.beginPath();
			for (var j = 0; j < obj.spline.length; j++) {
				ctx2.lineTo(obj.spline[j][0], obj.spline[j][1]);
			}
			var temp = ctx2.isPointInStroke(page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
		} else
			var temp = ctx2.isPointInStroke(obj.path, page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
		if (temp) {
			obj.hover();
			ctx.restore();
			ctx2.restore();
			return;
		}
	}
	ctx.restore();
	ctx2.restore();
};

Editor.renderupdate = function() { // for updates that only change rendering
	if (!Editor.beatmap || !Editor.source || Editor.source.playing) return;
	Editor.render();
};

Editor.setGridLevel = function(n) { //2^(n+1) pixels per cell
	Editor.options.gridlevel = n;
	Editor.drawGrid();
	Editor.updateMouseLocation();
};

var copyTextToClipboard = function(text) {
	try {
		var textArea = document.createElement("textarea");
		textArea.style.position = 'fixed';
		textArea.style.top = 0;
		textArea.style.left = 0;
		textArea.style.width = '2em';
		textArea.style.height = '2em';
		textArea.style.padding = 0;
		textArea.style.border = 'none';
		textArea.style.outline = 'none';
		textArea.style.boxShadow = 'none';
		textArea.style.background = 'transparent';
		textArea.value = text;
		document.body.appendChild(textArea);
		textArea.select();
		document.execCommand('copy');
	} catch (err) {
		console.log('copy failed');
	}
	document.body.removeChild(textArea);
};

Editor.drawGrid = function(level, grid) {
	if (!level) level = Editor.options.gridlevel;
	if (!grid) grid = $('#grid');
	var h = grid.height();
	var w = grid.width();
	var px = h / 384;
	var ctx = grid[0].getContext('2d');
	var cs = Math.pow(2, level + 1);

	ctx.clearRect(0, 0, w, h);
	ctx.strokeStyle = '#FFF';
	ctx.lineWidth = px;

	for (var i = 0; i <= 384; i += cs) {
		ctx.globalAlpha = i == 384 / 2 ? .2 : .06;
		ctx.beginPath();
		ctx.moveTo(0, i * px);
		ctx.lineTo(512 * px, i * px);
		ctx.stroke();
	}

	for (i = 0; i <= 512; i += cs) {
		ctx.globalAlpha = i == 512 / 2 ? .2 : .06;
		ctx.beginPath();
		ctx.moveTo(i * px, 0);
		ctx.lineTo(i * px, 384 * px);
		ctx.stroke();
	}
}

Editor.updateCounter = 0;
Editor.updateTime = function() {
	var t = Editor.source ? Editor.source.t : 0;
	var pct = Editor.source ? t / Editor.source.duration : 0;
	var rounded = (pct * 100).toFixed(1);
	$('#time').html(new Date(Math.round(t * 1000)).toISOString().substr(14, 9).replace('.', ':'));
	$('#progress').html((rounded > 100 ? 'outro' : rounded) + '%');
	var track = $('#timelinetrack');
	//$('#timelinebar').css({left:track.position().left + track.width()*pct});
	$('#timelinebar').css({
		left: track.position().left + track.width() * pct
	});
	if (pct >= 1) {
		Editor.source.pause(Editor.source.duration);
	}
	Editor.updateCounter++;
	if (Editor.updateCounter > 60) {
		Editor.updateCounter = 0;
		localStorage.setItem(Editor.roomID, Editor.source.t);
	}
}

Editor.createTimelineMark = function(time, type) {
	if (Editor.source) {
		var mark = document.createElement('div');
		mark.classList.add('timelinemark', type);
		var track = $('#timelinetrack');
		$(mark).css({
			left: track.position().left + track.width() * (time / Editor.source.duration)
		});
		$('#timeline1c').append(mark);
		if (!Editor.timelinemarks[time])
			Editor.timelinemarks[time] = {};
		Editor.timelinemarks[time][type] = mark;
	}
};

Editor.removeTimelineMark = function(time, type) {
	if (Editor.timelinemarks[time] && Editor.timelinemarks[time][type]) {
		Editor.timelinemarks[time][type].parentNode.removeChild(Editor.timelinemarks[time][type]);
	}
};

Editor.addComboNumber = function(digits, n) {
	Editor.skin['default-' + n] = concatImages(digits, parseInt(Editor.skin._meta.options.HitCircleOverlap || 2, 10));
};

Editor.addComboColor = function(col) {
	Editor.cols.push(col);
	var tintelements = ['hitcircle', 'approachcircle', 'sliderb0'];
	for (var i = 0; i < tintelements.length; i++) {
		if (tintelements[i] == 'sliderb0') {
			Editor.skin[tintelements[i] + (vars.cols.length - 1)] = tint(Editor.skin[tintelements[i]], [0, 0, 0]);
		} else
			Editor.skin[tintelements[i] + (vars.cols.length - 1)] = tint(Editor.skin[tintelements[i]], col);
	}
};

Editor.init = function(callback) {
	Editor.options.distancespacing = Editor.beatmap.DistanceSpacing;
	Editor.options.gridlevel = Math.log2(Editor.beatmap.GridSize) - 1;
	var breaks = Editor.beatmap['breakTimes'],
		tptn = 0,
		n = 1,
		skinopts = Editor.skin._meta.options;
	if (Editor.skin._meta.name != 'Default' && skinopts.Combo1 && !skinopts.ignoreSkinColors) {
		Editor.cols = [];
		while (skinopts['Combo' + n]) {
			Editor.cols.push(colorToArray(skinopts['Combo' + n]));
			n++;
		}
	} else if (Editor.beatmap.ComboColors.length == 0) {
		console.log('using default colors');
		Editor.cols = [
			[255, 192, 0],
			[0, 202, 0],
			[18, 124, 255],
			[242, 24, 57]
		];
	} else {
		Editor.cols = [];
		for (i = 0; i < Editor.beatmap.ComboColors.length; i++) {
			Editor.cols.push(Editor.beatmap.ComboColors[i].toArray());
		}
	}
	Editor.objc = [];
	n = 0, j = 1;
	var maxc = 1,
		tptn = -1;
	for (i = 0; i < Editor.beatmap.HitObjects.length; i++) {
		if (i == 0 || Editor.beatmap.HitObjects[i].newCombo) {
			if (j > maxc) {
				maxc = j;
			}
			n++;
			j = 1;
		}
		Editor.objc.push([n, j]);
		j++;

		if (Editor.beatmap.HitObjects[i].startTime >= Editor.beatmap.TimingPoints[tptn])
			Editor.beatmap.HitObjects[i].tptn = tptn;
	}
	n = 10;
	while (n <= maxc) {
		var digits = [];
		var n2 = n.toString();
		for (j = 0; j < n2.length; j++) {
			digits.push(Editor.skin['default-' + n2.charAt(j)]);
		}
		Editor.addComboNumber(digits, n);
		n++;
	}
	var si = [];
	Editor.maxsliderdur = 0;
	for (var i = 0; i < Editor.beatmap.HitObjects.length; i++) {
		if (Editor.beatmap.HitObjects[i] instanceof Slider) {
			if (Editor.beatmap.HitObjects[i].duration / 1000 > Editor.maxsliderdur) Editor.maxsliderdur = Editor.beatmap.HitObjects[i].duration / 1000;
			si.push(i);
		}
	}
	var tintelements = ['hitcircle', 'approachcircle', 'sliderb0'];
	for (i = 0; i < tintelements.length; i++) {
		for (j = 0; j < Editor.cols.length; j++) {
			if (tintelements[i] == 'sliderb0') {
				Editor.skin[tintelements[i] + j] = tint(Editor.skin[tintelements[i]], [0, 0, 0]);
			} else
				Editor.skin[tintelements[i] + j] = tint(Editor.skin[tintelements[i]], Editor.cols[j]);
		}
	}
	$('#timeline1c .timelinemark').remove();
	Editor.timelinemarks = {};
	if (Editor.beatmap.Bookmarks) {
		var pts = Editor.beatmap.Bookmarks;
		for (var i in pts) {
			if (pts.hasOwnProperty(i)) {
				Editor.createTimelineMark(pts[i] / 1000, 'bookmark');
			}
		}
	}
	if (Editor.beatmap.PreviewTime) Editor.createTimelineMark(Editor.beatmap.PreviewTime / 1000, 'previewtime');
	if (Editor.beatmap.TimingPoints) {
		pts = Editor.beatmap.TimingPoints;
		for (i = 0; i < pts.length; i++) {
			if (pts[i].timingChange)
				Editor.createTimelineMark(pts[i].offset / 1000, 'uninheritedpoint');
			else
				Editor.createTimelineMark(pts[i].offset / 1000, 'inheritedpoint');
		}
	}
	Editor.setGridLevel(Editor.options.gridlevel);
	Editor.update();
	//setTimeout(function(){renderslidersasync(si, 10, function(){console.log('sliders done')})}, 0); //async
	//rendersliders(si, 0, callback);
};

Editor.update = function() { // for updates that change the time
	if (!Editor.drawing) frame();
}

var frame = function() {
	Editor.updateTime();
	if (Editor.source && Editor.beatmap) {
		Editor.render();
		if (Editor.source.playing) {
			if (Editor.prevt) {
				var from = Editor.beatmap.getIndexAt(Editor.prevt * 1000);
				var to = Editor.beatmap.getIndexAt(Editor.source.t * 1000);
				for (var i = from; i <= to; i++) {
					var obj = Editor.beatmap.HitObjects[i];
					// play sfx
				}
			}
			Editor.prevt = Editor.source.t;
			Editor.drawing = true;
			window.requestAnimationFrame(frame);
		} else {
			Editor.drawing = false;
			Editor.prevt = false;
		}
	}
};

$(window).on("resize", function() {
	Editor.align();
	if (Editor.source) {
		var track = $('#timelinetrack');
		for (var time in Editor.timelinemarks) {
			if (Editor.timelinemarks.hasOwnProperty(time)) {
				for (var point in Editor.timelinemarks[time]) {
					if (Editor.timelinemarks[time].hasOwnProperty(point)) {
						$(Editor.timelinemarks[time][point]).css({
							left: track.position().left + track.width() * (time / Editor.source.duration)
						});
					}
				}
			}
		}
	}
	Editor.update();
});

$(document).ready(function main() {
	Editor.options = {
		beatsnapdivisor: 4,
		distancespacing: 1,
		distancesnap: true,
		gridlevel: 2,
		gridsnap: true,
		locknotes: false,
		tool: 0, //0-3 for select, circle, slider, and spinner
		soundopts: [false, false, false], //whistle, finish, clap
		ncopt: false,
		ignoreSkinColors: false
	};
	Editor.copyData = '';
	Editor.selected = [];
	Editor.rendered = [];

	$("#menubar>div").mouseover(function() {
		var a = $(this).offset();
		a.top += 18;
		$(this).find(".dropdown").offset(a);
	});

	Editor.getCurObj = function() {
		var clicked;
		var cs = cspx(Editor.beatmap.CircleSize);
		var t = Editor.source.t * 1000;
		Editor.rendered.sort(function(a, b) {
			var dta = a.startTime - t,
				dtb = b.startTime - t;
			if (Math.abs(Math.abs(dta) - Math.abs(dtb)) == 1) dta = Math.sign(dta) * dtb;
			if (dta == -dtb) return dta;
			return Math.abs(b.startTime - t) - Math.abs(a.startTime - t);
		});
		var objsToCheck = Editor.selected.concat(Editor.rendered);
		for (var i = Editor.rendered.length - 1; i >= 0; i--) {
			var obj = objsToCheck[i];
			if (obj instanceof HitCircle) {
				if (obj.position.distanceTo(new Vector(mouseX, mouseY)) <= cs / 2) {
					clicked = obj;
					break;
				}
			} else if (obj instanceof Slider) {
				var height = $(window).height() * .75;
				var width = height * 4 / 3;
				var ctx2 = document.getElementById('gridcanvas2').getContext('2d');
				ctx2.save();
				ctx2.translate(($(window).width() - width) / 2, $(window).height() * .16);
				ctx2.scale(width / 512, height / 384);
				ctx2.lineWidth = cs * 11 / 12;
				ctx2.lineJoin = 'round';
				ctx2.lineCap = 'round';
				if (!obj.path) {
					ctx2.beginPath();
					for (var j = 0; j < obj.spline.length; j++) {
						ctx2.lineTo(obj.spline[j][0], obj.spline[j][1]);
					}
					var temp = ctx2.isPointInStroke(page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
				} else
					var temp = ctx2.isPointInStroke(obj.path, page_mouseX, page_mouseY - $('#gridcanvas2').offset().top);
				ctx2.restore();
				if (temp) {
					clicked = obj;
					break;
				}
			}
		}
		return clicked;
	}

	Editor.deleteSelected = function() { // CURRENTLY WHEN STUFF GETS DELETED COMBOS GET MESSED UP, CALLING init() CAN BE A TEMPORARY FIX
		for (var j = 0; j < Editor.selected.length; j++) {
			Editor.beatmap.HitObjects.splice(Editor.beatmap.HitObjects.indexOf(Editor.selected[j]), 1);
			// collabTODO
		}
		Editor.selected = [];
	};

	document.addEventListener("contextmenu", function(e) { // right click handling
		e.preventDefault();
		var clicked = Editor.getCurObj();
		var i = Editor.selected.indexOf(clicked)
		if (i != -1) {
			Editor.deleteSelected();
		} else { // SEE LINE 415
			Editor.beatmap.HitObjects.splice(Editor.beatmap.HitObjects.indexOf(clicked), 1);
			// collabTODO
		}
		var o = (e.srcElement || e.originalTarget);
		if (o.matches('#righttoolbar img, #lefttoolbar img, #timeline1c, #playcontrols img')) {
			var ev = document.createEvent('HTMLEvents');
			ev.initEvent('click', true, false);
			o.dispatchEvent(ev);
		}
	});

	$('#gridcanvas2, #grid').dblclick(function(e) { // clicks in play area
		var clicked = Editor.getCurObj();
		if (clicked) Editor.source.t = clicked.startTime / 1000;
		// handle slider end/edge editing one day
	});

	var timelinemove = function(e) {
		if (!Editor.source) return
		var track = $('#timelinetrack');
		var w = track.width();
		var pct = Math.max(0, Math.min(page_mouseX - track.position().left, w)) / w;
		var pos = pct * Editor.source.duration;
		if (pct >= 1) Editor.source.pause(Editor.source.duration);
		else
			Editor.source.seek(pos);
		Editor.update();
	};

	Editor.deselectAll = function() {
		for (var i = 0; i < Editor.selected.length; i++) {
			Editor.selected[i].selected = false;
		}
		Editor.selected = [];
	}

	var edit_mousedown = false;
	var selected_offsetx = selected_offsety = 0;
	var selectedi = 0;
	$('#gridcanvas2, #grid').mousedown(function(e) { // clicks in play area
		if (!Editor.beatmap) return;
		edit_mousedown = true;
		if (Editor.options.tool == 0) {
			var clicked = Editor.getCurObj();
			if (clicked) {
				clicked.selected = true;
				selected_offsetx = mouseX - clicked.position.x;
				selected_offsety = mouseY - clicked.position.y;
			}
			i = Editor.selected.indexOf(clicked);
			if (i != -1) {
				selectedi = i;
				return;
			}
			if (!e.ctrlKey || !clicked) {
				Editor.deselectAll();
				if (clicked) Editor.selected = [clicked];
			} else {
				Editor.selected.push(clicked);
			}
			selectedi = Editor.selected.length - 1;
		}
		Editor.renderupdate();
	});

	var timeline_mousedown = false;
	$('#timeline1c').mousedown(function(e) {
		timeline_mousedown = true;
		timelinemove(e);
	});
	$(document).mouseup(function() {
		timeline_mousedown = false;
		edit_mousedown = false;
	});

	var snap_grid = function(n) {
		var d = Editor.options.gridsnap ? Math.pow(2, Editor.options.gridlevel + 1) : 1;
		return Math.round(n / d) * d;
	}

	Editor.updateMouseLocation = function() {
		var height = $(window).height() * .75;
		var width = height * 4 / 3;
		var prevmouseX = mouseX,
			prevmouseY = mouseY;
		mouseX = (page_mouseX - $('#grid').offset().left) / width * 512;
		mouseY = (page_mouseY - $('#grid').offset().top) / height * 384;
		snapped_mouseX = snap_grid(mouseX);
		snapped_mouseY = snap_grid(mouseY);

		if (timeline_mousedown)
			timelinemove(e);
		else if (edit_mousedown && Editor.selected.length > 0) {
			var newx = Math.min(512, Math.max(0, snap_grid(mouseX - selected_offsetx)));
			var newy = Math.min(384, Math.max(0, snap_grid(mouseY - selected_offsety)));
			var dx = newx - Editor.selected[selectedi].position.x,
				dy = newy - Editor.selected[selectedi].position.y;
			for (var i = 0; i < Editor.selected.length; i++) {
				var obj = Editor.selected[i];
				var serialized = obj.serialize();
				if (obj instanceof Slider) {
					for (var j = 1; j < obj.points.length; j++) {
						obj.points[j].x += dx;
						obj.points[j].y += dy;
					}
					obj.cache.render[1][0] += dx;
					obj.cache.render[1][1] += dy;
					obj.calculate();
				}
				obj.position.x += dx;
				obj.position.y += dy;

				// collabTODO
				Editor.socket.edit_move(serialized, obj.position.x, obj.position.y);
			}
		} else {}
		Editor.renderupdate();

		if (Editor.selected.length > 0) {
			$('#mousepos').html('x:' + Editor.selected[selectedi].position.x + ' y:' + Editor.selected[selectedi].position.y);
		} else {
			$('#mousepos').html('x:' + snapped_mouseX + ' y:' + snapped_mouseY);
		}
	};

	var captureMouseLocation = function(e) {
		page_mouseX = e.pageX;
		page_mouseY = e.pageY;
		Editor.updateMouseLocation();
	};

	var wheelupdate = function(e) {
		var t = $('#grid');
		if (e.altKey) {
			if (page_mouseX >= t.offset().left && page_mouseX <= t.offset().left + t.width() && page_mouseY >= t.offset().top && page_mouseY <= t.offset().top + t.height())
				Editor.options.distancespacing = Math.min(6, Math.max(.1, Editor.options.distancespacing + (e.wheelDelta || -e.detail) / 1200));
			else if (Editor.source)
				Editor.source.volume = Math.min(2, Math.max(0, Editor.source.volume + (e.wheelDelta || -e.detail) / 2400));
		} else if (e.ctrlKey) {

		} else if (Editor.source && Editor.beatmap) {
			var tpt = Editor.beatmap.getTimingPoint(Editor.source.t * 1000);
			var pos = Math.min(Editor.source.duration,
				Math.max(0, Editor.source.t - ((e.wheelDelta || -e.detail) / 120 *
					tpt.beatLength / 1000 /
					(Editor.source.playing ? 1 : Editor.options.beatsnapdivisor) *
					(e.shiftKey ? tpt.timingSignature : 1))));
			tpt = Editor.beatmap.getTimingPoint(pos * 1000);
			if (pos >= Editor.source.duration) Editor.source.pause(Editor.source.duration);
			else if (Editor.source.playing)
				Editor.source.play(pos);
			else {
				Editor.source.pause(snap(pos, tpt.baseOffset / 1000, tpt.beatLength / 1000 / (e.shiftKey ? 1 : Editor.options.beatsnapdivisor)));
			}
			Editor.update();
		}
	};

	document.addEventListener("mousemove", captureMouseLocation, false);
	document.addEventListener("mousewheel", wheelupdate, {
		passive: true
	});

	var controlclicked = function(elem) {
		elem.removeClass("scalable");
		setTimeout(function() {
			elem.addClass("scalable")
		}, 40);
	};

	$('#editorplay').click(function() {
		if (Editor.source) {
			if (Editor.source.playing) Editor.source.play(0);
			else Editor.source.play();
			update();
		}
		controlclicked($(this));
	});

	$('#editorpause').click(function() {
		if (Editor.source) {
			if (Editor.source.playing) Editor.source.pause();
			else Editor.source.play();
		}
		controlclicked($(this));
	});

	$('#editorstop').click(function() {
		if (Editor.source)
			Editor.source.pause(0);
		controlclicked($(this));
	});

	$('#righttoolbar img').click(function() {
		$(this).toggleClass('button_selected');
		switch (this.id) {
			case 'draw_newcombo':
				Editor.options.ncopt = !Editor.options.ncopt;
				break;
			case 'sound_whistle':
				Editor.options.soundopts[0] = !Editor.options.soundopts[0];
				break;
			case 'sound_finish':
				Editor.options.soundopts[1] = !Editor.options.soundopts[1];
				break;
			case 'sound_clap':
				Editor.options.soundopts[2] = !Editor.options.soundopts[2];
				break;
			case 'draw_beatsnap':
				Editor.options.gridsnap = !Editor.options.gridsnap;
				Editor.updateMouseLocation();
				break;
			case 'draw_distsnap':
				Editor.options.distancesnap = !Editor.options.distancesnap;
				break;
		}

	});

	$('#lefttoolbar img').click(function() {
		$('#lefttoolbar img').removeClass('button_selected');
		$(this).addClass('button_selected');
		Editor.options.tool = $(this).index();
	});

	var keypresshandler = function(e) {
		var code = (window.event) ? event.keyCode : e.keyCode;
		if (!(code == 122 || code == 123)) {
			e.preventDefault();
		}
		if (keycodedbg) console.log("keycode: ", code);
		if (!keyMap[16] && code == 16) {
			$('#draw_beatsnap').toggleClass('button_selected');
			Editor.options.gridsnap = !Editor.options.gridsnap;
			Editor.updateMouseLocation();
		}
		if (!keyMap[18] && code == 18) {
			$('#draw_distsnap').toggleClass('button_selected');
			Editor.options.distancesnap = !Editor.options.distancesnap;
		}
		keyMap[code] = true;
		if ((code == 67 || code == 32) && Editor.source) { //c, space
			if (code == 67 && e.ctrlKey) { //ctrl-c
				var data = 'hi';
				copyTextToClipboard(data);
				Editor.copyData = data;
				console.log('copy');
			} else if (!e.ctrlKey) {
				if (Editor.source.playing) Editor.source.pause();
				else {
					Editor.source.play();
				}
			}
		} else if (code == 89) { //y
			if (e.ctrlKey) {
				console.log('redo');
			}
		} else if (code == 90) { //z
			if (e.ctrlKey) {
				console.log('undo');
			} else {
				Editor.source.seek(Editor.beatmap.HitObjects[0].startTime / 1000);
			}
		} else if (code == 88) { //x
			if (e.ctrlKey) { //ctrl-x
				console.log('cut');
				var data = 'hi';
				copyTextToClipboard(data);
				Editor.copyData = data;
			} else {
				if (Editor.source)
					Editor.source.play(0);
			}
		} else if (code == 86) { //v
			if (e.ctrlKey) {
				console.log('paste');
			}
		} else if (code == 37 || code == 39) { //left
			if (Editor.source) {
				var tpt = Editor.beatmap.getTimingPoint(Editor.source.t * 1000);
				var pos = Editor.source.t + (code == 37 ? -1 : 1) * tpt.beatLength / 1000 / (Editor.source.playing ? 1 : Editor.options.beatsnapdivisor) * (e.shiftKey ? 4 : 1);
				tpt = Editor.beatmap.getTimingPoint(pos * 1000);
				if (!Editor.source.playing)
					pos = snap(pos, tpt.baseOffset / 1000, tpt.beatLength / 1000 / Editor.options.beatsnapdivisor);
				Editor.source.seek(pos);
			}
		} else if (code == 46) { //delete
			Editor.deleteSelected();
		} else if (code == 49) { //1
			if (e.ctrlKey) {
				Editor.setGridLevel(1);
			} else {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_select').addClass('button_selected');
				Editor.options.tool = 0;
				Editor.deselectAll();
			}
		} else if (code == 50) { //2
			if (e.ctrlKey) {
				Editor.setGridLevel(2);
			} else {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_normal').addClass('button_selected');
				Editor.options.tool = 1;
			}
		} else if (code == 51) { //3
			if (e.ctrlKey) {
				Editor.setGridLevel(3);
			} else {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_slider').addClass('button_selected');
				Editor.options.tool = 2;
			}
		} else if (code == 52) { //4
			if (e.ctrlKey) {
				Editor.setGridLevel(4);
			} else {
				$('#lefttoolbar img').removeClass('button_selected');
				$('#draw_spinner').addClass('button_selected');
				Editor.options.tool = 3;
			}
		} else if (code == 81) { //q
			$('#draw_newcombo').toggleClass('button_selected');
			Editor.options.ncopt = !Editor.options.ncopt;
		} else if (code == 87) { //w
			$('#sound_whistle').toggleClass('button_selected');
			Editor.options.soundopts[0] = !Editor.options.soundopts[0];
		} else if (code == 69) { //e
			$('#sound_finish').toggleClass('button_selected');
			Editor.options.soundopts[1] = !Editor.options.soundopts[1];
		} else if (code == 82) { //r
			$('#sound_clap').toggleClass('button_selected');
			Editor.options.soundopts[2] = !Editor.options.soundopts[2];
		} else if (code == 84) { //t
			$('#draw_beatsnap').toggleClass('button_selected');
			Editor.options.gridsnap = !Editor.options.gridsnap;
			Editor.updateMouseLocation();
		} else if (code == 89) { //y
			$('#draw_distsnap').toggleClass('button_selected');
			Editor.options.distsnap = !Editor.options.distsnap;
		} else if (code == 76) { //l
			$('#draw_lock').toggleClass('button_selected');
			Editor.options.locknotes = !Editor.options.locknotes;
		} else if (code == 71) { //g
			Editor.setGridLevel(Editor.options.gridlevel % 4 + 1);
		}
		Editor.update();
	};

	var keyuphandler = function(e) {
		e.preventDefault();
		var code = (window.event) ? event.keyCode : e.keyCode;
		keyMap[code] = false;
		if (code == 16) {
			$('#draw_beatsnap').toggleClass('button_selected');
			Editor.options.gridsnap = !Editor.options.gridsnap;
			Editor.updateMouseLocation();
		}
		if (code == 18) {
			$('#draw_distsnap').toggleClass('button_selected');
			Editor.options.distancesnap = !Editor.options.distancesnap;
		}
	};

	document.addEventListener('keydown', keypresshandler, false);
	document.addEventListener('keyup', keyuphandler, false);

	Editor.align();
	Skin.LoadSkin('Default', function(skin) {
		Editor.skin = skin;
		Editor.audioCtx = new AudioContext();
		Editor.socket = new Socket();
		Editor.align();
		Editor.update();
	});
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyIvbGliL01haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR2xvYmFsIFZhcmlhYmxlc1xyXG52YXIgbW91c2VYID0gMCwgLy9hY3R1YWwgbW91c2UgcG9zaXRpb24gaW4gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBwbGF5ZmllbGRcclxuXHRtb3VzZVkgPSAwLFxyXG5cdHNuYXBwZWRfbW91c2VYID0gMCwgLy9wb3NpdGlvbiBvZiBvYmplY3QgYmVpbmcgZWRpdGVkLCBvciBzbmFwcGVkIGN1cnNvciBsb2NhdGlvblxyXG5cdHNuYXBwZWRfbW91c2VZID0gMCxcclxuXHRwYWdlX21vdXNlWCA9IDAsIC8vYWJzb2x1dGUgcG9zaXRpb24gb24gcGFnZSAoYWN0dWFsIHBvc2l0aW9uIG9uIGNhbnZhcyBoYXMgcGFnZV9tb3VzZVkgLSAyNClcclxuXHRwYWdlX21vdXNlWSA9IDA7XHJcbnZhciBrZXlNYXAgPSBBcnJheSgyNTYpO1xyXG5cclxuLy8gRGVidWcgdmFyaWFibGVzXHJcbnZhciBrZXljb2RlZGJnID0gZmFsc2U7XHJcblxyXG5FZGl0b3Iucm9vbUlEID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKS5zcGxpY2UoLTEpWzBdO1xyXG5cclxuRWRpdG9yLnVwZGF0ZVN0YXR1cyA9IGZ1bmN0aW9uKHN0YXR1cykge1xyXG5cdCQoJyNzdGF0dXNsYWJlbCcpLmh0bWwoc3RhdHVzKS5zdG9wKCkuZmFkZUluKDApLmZhZGVPdXQoMzAwMCk7XHJcbn1cclxuXHJcbiQoJyNzdGF0dXNsYWJlbCcpLm1vdXNlb3ZlcihmdW5jdGlvbigpIHtcclxuXHQkKHRoaXMpLmZhZGVPdXQoMTAwMCk7XHJcbn0pO1xyXG5cclxuRWRpdG9yLmFsaWduID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSAqIDAuNzU7XHJcblx0dmFyIHdpZHRoID0gaGVpZ2h0ICogNCAvIDM7XHJcblxyXG5cdCQoXCIjY2FudmFzZXMgPiBjYW52YXNcIikuYXR0cihcIndpZHRoXCIsICQoZG9jdW1lbnQpLndpZHRoKCkpXHJcblx0XHQuYXR0cihcImhlaWdodFwiLCAkKGRvY3VtZW50KS5oZWlnaHQoKSk7XHJcblxyXG5cdHZhciBncmlkID0gJChcIiNncmlkXCIpO1xyXG5cdGdyaWQuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxyXG5cdFx0LmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxyXG5cdFx0LmNzcyh7XHJcblx0XHRcdCdsZWZ0JzogKCQod2luZG93KS53aWR0aCgpIC0gd2lkdGgpIC8gMixcclxuXHRcdFx0J3RvcCc6ICQod2luZG93KS5oZWlnaHQoKSAqIDAuMTZcclxuXHRcdH0pO1xyXG5cdEVkaXRvci5kcmF3R3JpZCgpO1xyXG5cclxuXHQkKFwiI3JpZ2h0dG9vbGJhciA+IGltZ1wiKS53aWR0aCgkKFwiI2xlZnR0b29sYmFyID4gaW1nXCIpWzBdLndpZHRoKTtcclxuXHQkKFwiI3JpZ2h0dG9vbGJhclwiKS5jc3MoXCJ0b3BcIiwgMTQgKyAoMSAtICQoXCIjcmlnaHR0b29sYmFyXCIpLmhlaWdodCgpIC8gKCQoXCIjY29udGFpbmVyXCIpLmhlaWdodCgpIC0gJChcIiN0b3BzZWN0aW9uXCIpLmhlaWdodCgpIC0gJChcIiNib3R0b21zZWN0aW9uXCIpLmhlaWdodCgpKSkgKiA1MCArIFwiJVwiKTtcclxuXHJcblx0aWYgKEVkaXRvci5zb3VyY2UgJiYgRWRpdG9yLnRpbWVsaW5lbWFya3MpIHtcclxuXHRcdHZhciB0cmFjayA9ICQoJyN0aW1lbGluZXRyYWNrJyk7XHJcblx0XHRmb3IgKHZhciB0aW1lIGluIEVkaXRvci50aW1lbGluZW1hcmtzKSB7XHJcblx0XHRcdGlmIChFZGl0b3IudGltZWxpbmVtYXJrcy5oYXNPd25Qcm9wZXJ0eSh0aW1lKSkge1xyXG5cdFx0XHRcdGZvciAodmFyIHBvaW50IGluIEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdKSB7XHJcblx0XHRcdFx0XHRpZiAoRWRpdG9yLnRpbWVsaW5lbWFya3NbdGltZV0uaGFzT3duUHJvcGVydHkocG9pbnQpKSB7XHJcblx0XHRcdFx0XHRcdCQoRWRpdG9yLnRpbWVsaW5lbWFya3NbdGltZV1bcG9pbnRdKS5jc3Moe1xyXG5cdFx0XHRcdFx0XHRcdGxlZnQ6IHRyYWNrLnBvc2l0aW9uKCkubGVmdCArIHRyYWNrLndpZHRoKCkgKiAodGltZSAvIEVkaXRvci5zb3VyY2UuZHVyYXRpb24pXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbkVkaXRvci5yZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpICogLjc1O1xyXG5cdHZhciB3aWR0aCA9IGhlaWdodCAqIDQgLyAzO1xyXG5cdHZhciB0ID0gRWRpdG9yLnNvdXJjZS50O1xyXG5cdHZhciBhciA9IGFycyhFZGl0b3IuYmVhdG1hcFsnQXBwcm9hY2hSYXRlJ10pO1xyXG5cdHZhciBjcyA9IGNzcHgoRWRpdG9yLmJlYXRtYXBbJ0NpcmNsZVNpemUnXSk7XHJcblx0dmFyIGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHRjdHguc2F2ZSgpO1xyXG5cdGN0eC5jbGVhclJlY3QoMCwgMCwgJCh3aW5kb3cpLndpZHRoKCksICQod2luZG93KS5oZWlnaHQoKSk7XHJcblx0Y3R4LnRyYW5zbGF0ZSgoJCh3aW5kb3cpLndpZHRoKCkgLSB3aWR0aCkgLyAyLCAkKHdpbmRvdykuaGVpZ2h0KCkgKiAuMTYpO1xyXG5cdGN0eC5zY2FsZSh3aWR0aCAvIDUxMiwgaGVpZ2h0IC8gMzg0KTtcclxuXHJcblx0dmFyIGN0eDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JpZGNhbnZhczInKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdGN0eDIuc2F2ZSgpO1xyXG5cdGN0eDIuY2xlYXJSZWN0KDAsIDAsICQod2luZG93KS53aWR0aCgpLCAkKHdpbmRvdykuaGVpZ2h0KCkpO1xyXG5cdGN0eDIudHJhbnNsYXRlKCgkKHdpbmRvdykud2lkdGgoKSAtIHdpZHRoKSAvIDIsICQod2luZG93KS5oZWlnaHQoKSAqIC4xNik7XHJcblx0Y3R4Mi5zY2FsZSh3aWR0aCAvIDUxMiwgaGVpZ2h0IC8gMzg0KTtcclxuXHJcblx0RWRpdG9yLnJlbmRlcmVkID0gW107XHJcblx0dmFyIHJlbmRlckZyb20gPSBFZGl0b3IuYmVhdG1hcC5nZXRJbmRleEF0KCh0IC0gLjggLSBFZGl0b3IubWF4c2xpZGVyZHVyKSAqIDEwMDApO1xyXG5cdHZhciByZW5kZXJUbyA9IEVkaXRvci5iZWF0bWFwLmdldEluZGV4QXQoKHQgKyBhcikgKiAxMDAwKTtcclxuXHRmb3IgKHZhciBpID0gcmVuZGVyVG87IGkgPj0gcmVuZGVyRnJvbTsgaS0tKSB7XHJcblx0XHRpZiAoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXS5yZW5kZXIodCwgRWRpdG9yLm9iamNbaV1bMF0gJSBFZGl0b3IuY29scy5sZW5ndGgsIEVkaXRvci5vYmpjW2ldWzFdKSlcclxuXHRcdFx0RWRpdG9yLnJlbmRlcmVkLnB1c2goRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXSk7XHJcblx0fVxyXG5cdGN0eC5nbG9iYWxBbHBoYSA9IDE7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdGN0eC5kcmF3SW1hZ2UoRWRpdG9yLnNraW5bJ2hpdGNpcmNsZXNlbGVjdCddLCBFZGl0b3Iuc2VsZWN0ZWRbaV0ucG9zaXRpb24ueCAtIGNzIC8gMiwgRWRpdG9yLnNlbGVjdGVkW2ldLnBvc2l0aW9uLnkgLSBjcyAvIDIsIGNzLCBjcyk7XHJcblx0fVxyXG5cdGN0eDIubGluZVdpZHRoID0gY3MgKiAxMSAvIDEyO1xyXG5cdGN0eDIubGluZUpvaW4gPSAncm91bmQnO1xyXG5cdGN0eDIubGluZUNhcCA9ICdyb3VuZCc7XHJcblx0Zm9yICh2YXIgaSA9IHJlbmRlckZyb207IGkgPD0gcmVuZGVyVG87IGkrKykge1xyXG5cdFx0dmFyIG9iaiA9IEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbaV07XHJcblx0XHRpZiAoIShvYmogaW5zdGFuY2VvZiBTbGlkZXIpIHx8IHQgPiBvYmouZW5kVGltZSAvIDEwMDAgKyBvYmouZmFkZXRpbWUgfHwgdCA8IG9iai5zdGFydFRpbWUgLyAxMDAwIC0gYXIpIGNvbnRpbnVlO1xyXG5cdFx0aWYgKCFvYmoucGF0aCkge1xyXG5cdFx0XHRjdHgyLmJlZ2luUGF0aCgpO1xyXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IG9iai5zcGxpbmUubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRjdHgyLmxpbmVUbyhvYmouc3BsaW5lW2pdWzBdLCBvYmouc3BsaW5lW2pdWzFdKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgdGVtcCA9IGN0eDIuaXNQb2ludEluU3Ryb2tlKHBhZ2VfbW91c2VYLCBwYWdlX21vdXNlWSAtICQoJyNncmlkY2FudmFzMicpLm9mZnNldCgpLnRvcCk7XHJcblx0XHR9IGVsc2VcclxuXHRcdFx0dmFyIHRlbXAgPSBjdHgyLmlzUG9pbnRJblN0cm9rZShvYmoucGF0aCwgcGFnZV9tb3VzZVgsIHBhZ2VfbW91c2VZIC0gJCgnI2dyaWRjYW52YXMyJykub2Zmc2V0KCkudG9wKTtcclxuXHRcdGlmICh0ZW1wKSB7XHJcblx0XHRcdG9iai5ob3ZlcigpO1xyXG5cdFx0XHRjdHgucmVzdG9yZSgpO1xyXG5cdFx0XHRjdHgyLnJlc3RvcmUoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRjdHgucmVzdG9yZSgpO1xyXG5cdGN0eDIucmVzdG9yZSgpO1xyXG59O1xyXG5cclxuRWRpdG9yLnJlbmRlcnVwZGF0ZSA9IGZ1bmN0aW9uKCkgeyAvLyBmb3IgdXBkYXRlcyB0aGF0IG9ubHkgY2hhbmdlIHJlbmRlcmluZ1xyXG5cdGlmICghRWRpdG9yLmJlYXRtYXAgfHwgIUVkaXRvci5zb3VyY2UgfHwgRWRpdG9yLnNvdXJjZS5wbGF5aW5nKSByZXR1cm47XHJcblx0RWRpdG9yLnJlbmRlcigpO1xyXG59O1xyXG5cclxuRWRpdG9yLnNldEdyaWRMZXZlbCA9IGZ1bmN0aW9uKG4pIHsgLy8yXihuKzEpIHBpeGVscyBwZXIgY2VsbFxyXG5cdEVkaXRvci5vcHRpb25zLmdyaWRsZXZlbCA9IG47XHJcblx0RWRpdG9yLmRyYXdHcmlkKCk7XHJcblx0RWRpdG9yLnVwZGF0ZU1vdXNlTG9jYXRpb24oKTtcclxufTtcclxuXHJcbnZhciBjb3B5VGV4dFRvQ2xpcGJvYXJkID0gZnVuY3Rpb24odGV4dCkge1xyXG5cdHRyeSB7XHJcblx0XHR2YXIgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS50b3AgPSAwO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUubGVmdCA9IDA7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS53aWR0aCA9ICcyZW0nO1xyXG5cdFx0dGV4dEFyZWEuc3R5bGUuaGVpZ2h0ID0gJzJlbSc7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS5wYWRkaW5nID0gMDtcclxuXHRcdHRleHRBcmVhLnN0eWxlLmJvcmRlciA9ICdub25lJztcclxuXHRcdHRleHRBcmVhLnN0eWxlLm91dGxpbmUgPSAnbm9uZSc7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS5ib3hTaGFkb3cgPSAnbm9uZSc7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3RyYW5zcGFyZW50JztcclxuXHRcdHRleHRBcmVhLnZhbHVlID0gdGV4dDtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dEFyZWEpO1xyXG5cdFx0dGV4dEFyZWEuc2VsZWN0KCk7XHJcblx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xyXG5cdH0gY2F0Y2ggKGVycikge1xyXG5cdFx0Y29uc29sZS5sb2coJ2NvcHkgZmFpbGVkJyk7XHJcblx0fVxyXG5cdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dEFyZWEpO1xyXG59O1xyXG5cclxuRWRpdG9yLmRyYXdHcmlkID0gZnVuY3Rpb24obGV2ZWwsIGdyaWQpIHtcclxuXHRpZiAoIWxldmVsKSBsZXZlbCA9IEVkaXRvci5vcHRpb25zLmdyaWRsZXZlbDtcclxuXHRpZiAoIWdyaWQpIGdyaWQgPSAkKCcjZ3JpZCcpO1xyXG5cdHZhciBoID0gZ3JpZC5oZWlnaHQoKTtcclxuXHR2YXIgdyA9IGdyaWQud2lkdGgoKTtcclxuXHR2YXIgcHggPSBoIC8gMzg0O1xyXG5cdHZhciBjdHggPSBncmlkWzBdLmdldENvbnRleHQoJzJkJyk7XHJcblx0dmFyIGNzID0gTWF0aC5wb3coMiwgbGV2ZWwgKyAxKTtcclxuXHJcblx0Y3R4LmNsZWFyUmVjdCgwLCAwLCB3LCBoKTtcclxuXHRjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGRic7XHJcblx0Y3R4LmxpbmVXaWR0aCA9IHB4O1xyXG5cclxuXHRmb3IgKHZhciBpID0gMDsgaSA8PSAzODQ7IGkgKz0gY3MpIHtcclxuXHRcdGN0eC5nbG9iYWxBbHBoYSA9IGkgPT0gMzg0IC8gMiA/IC4yIDogLjA2O1xyXG5cdFx0Y3R4LmJlZ2luUGF0aCgpO1xyXG5cdFx0Y3R4Lm1vdmVUbygwLCBpICogcHgpO1xyXG5cdFx0Y3R4LmxpbmVUbyg1MTIgKiBweCwgaSAqIHB4KTtcclxuXHRcdGN0eC5zdHJva2UoKTtcclxuXHR9XHJcblxyXG5cdGZvciAoaSA9IDA7IGkgPD0gNTEyOyBpICs9IGNzKSB7XHJcblx0XHRjdHguZ2xvYmFsQWxwaGEgPSBpID09IDUxMiAvIDIgPyAuMiA6IC4wNjtcclxuXHRcdGN0eC5iZWdpblBhdGgoKTtcclxuXHRcdGN0eC5tb3ZlVG8oaSAqIHB4LCAwKTtcclxuXHRcdGN0eC5saW5lVG8oaSAqIHB4LCAzODQgKiBweCk7XHJcblx0XHRjdHguc3Ryb2tlKCk7XHJcblx0fVxyXG59XHJcblxyXG5FZGl0b3IudXBkYXRlQ291bnRlciA9IDA7XHJcbkVkaXRvci51cGRhdGVUaW1lID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIHQgPSBFZGl0b3Iuc291cmNlID8gRWRpdG9yLnNvdXJjZS50IDogMDtcclxuXHR2YXIgcGN0ID0gRWRpdG9yLnNvdXJjZSA/IHQgLyBFZGl0b3Iuc291cmNlLmR1cmF0aW9uIDogMDtcclxuXHR2YXIgcm91bmRlZCA9IChwY3QgKiAxMDApLnRvRml4ZWQoMSk7XHJcblx0JCgnI3RpbWUnKS5odG1sKG5ldyBEYXRlKE1hdGgucm91bmQodCAqIDEwMDApKS50b0lTT1N0cmluZygpLnN1YnN0cigxNCwgOSkucmVwbGFjZSgnLicsICc6JykpO1xyXG5cdCQoJyNwcm9ncmVzcycpLmh0bWwoKHJvdW5kZWQgPiAxMDAgPyAnb3V0cm8nIDogcm91bmRlZCkgKyAnJScpO1xyXG5cdHZhciB0cmFjayA9ICQoJyN0aW1lbGluZXRyYWNrJyk7XHJcblx0Ly8kKCcjdGltZWxpbmViYXInKS5jc3Moe2xlZnQ6dHJhY2sucG9zaXRpb24oKS5sZWZ0ICsgdHJhY2sud2lkdGgoKSpwY3R9KTtcclxuXHQkKCcjdGltZWxpbmViYXInKS5jc3Moe1xyXG5cdFx0bGVmdDogdHJhY2sucG9zaXRpb24oKS5sZWZ0ICsgdHJhY2sud2lkdGgoKSAqIHBjdFxyXG5cdH0pO1xyXG5cdGlmIChwY3QgPj0gMSkge1xyXG5cdFx0RWRpdG9yLnNvdXJjZS5wYXVzZShFZGl0b3Iuc291cmNlLmR1cmF0aW9uKTtcclxuXHR9XHJcblx0RWRpdG9yLnVwZGF0ZUNvdW50ZXIrKztcclxuXHRpZiAoRWRpdG9yLnVwZGF0ZUNvdW50ZXIgPiA2MCkge1xyXG5cdFx0RWRpdG9yLnVwZGF0ZUNvdW50ZXIgPSAwO1xyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oRWRpdG9yLnJvb21JRCwgRWRpdG9yLnNvdXJjZS50KTtcclxuXHR9XHJcbn1cclxuXHJcbkVkaXRvci5jcmVhdGVUaW1lbGluZU1hcmsgPSBmdW5jdGlvbih0aW1lLCB0eXBlKSB7XHJcblx0aWYgKEVkaXRvci5zb3VyY2UpIHtcclxuXHRcdHZhciBtYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRtYXJrLmNsYXNzTGlzdC5hZGQoJ3RpbWVsaW5lbWFyaycsIHR5cGUpO1xyXG5cdFx0dmFyIHRyYWNrID0gJCgnI3RpbWVsaW5ldHJhY2snKTtcclxuXHRcdCQobWFyaykuY3NzKHtcclxuXHRcdFx0bGVmdDogdHJhY2sucG9zaXRpb24oKS5sZWZ0ICsgdHJhY2sud2lkdGgoKSAqICh0aW1lIC8gRWRpdG9yLnNvdXJjZS5kdXJhdGlvbilcclxuXHRcdH0pO1xyXG5cdFx0JCgnI3RpbWVsaW5lMWMnKS5hcHBlbmQobWFyayk7XHJcblx0XHRpZiAoIUVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdKVxyXG5cdFx0XHRFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXSA9IHt9O1xyXG5cdFx0RWRpdG9yLnRpbWVsaW5lbWFya3NbdGltZV1bdHlwZV0gPSBtYXJrO1xyXG5cdH1cclxufTtcclxuXHJcbkVkaXRvci5yZW1vdmVUaW1lbGluZU1hcmsgPSBmdW5jdGlvbih0aW1lLCB0eXBlKSB7XHJcblx0aWYgKEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdICYmIEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdW3R5cGVdKSB7XHJcblx0XHRFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXVt0eXBlXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEVkaXRvci50aW1lbGluZW1hcmtzW3RpbWVdW3R5cGVdKTtcclxuXHR9XHJcbn07XHJcblxyXG5FZGl0b3IuYWRkQ29tYm9OdW1iZXIgPSBmdW5jdGlvbihkaWdpdHMsIG4pIHtcclxuXHRFZGl0b3Iuc2tpblsnZGVmYXVsdC0nICsgbl0gPSBjb25jYXRJbWFnZXMoZGlnaXRzLCBwYXJzZUludChFZGl0b3Iuc2tpbi5fbWV0YS5vcHRpb25zLkhpdENpcmNsZU92ZXJsYXAgfHwgMiwgMTApKTtcclxufTtcclxuXHJcbkVkaXRvci5hZGRDb21ib0NvbG9yID0gZnVuY3Rpb24oY29sKSB7XHJcblx0RWRpdG9yLmNvbHMucHVzaChjb2wpO1xyXG5cdHZhciB0aW50ZWxlbWVudHMgPSBbJ2hpdGNpcmNsZScsICdhcHByb2FjaGNpcmNsZScsICdzbGlkZXJiMCddO1xyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgdGludGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAodGludGVsZW1lbnRzW2ldID09ICdzbGlkZXJiMCcpIHtcclxuXHRcdFx0RWRpdG9yLnNraW5bdGludGVsZW1lbnRzW2ldICsgKHZhcnMuY29scy5sZW5ndGggLSAxKV0gPSB0aW50KEVkaXRvci5za2luW3RpbnRlbGVtZW50c1tpXV0sIFswLCAwLCAwXSk7XHJcblx0XHR9IGVsc2VcclxuXHRcdFx0RWRpdG9yLnNraW5bdGludGVsZW1lbnRzW2ldICsgKHZhcnMuY29scy5sZW5ndGggLSAxKV0gPSB0aW50KEVkaXRvci5za2luW3RpbnRlbGVtZW50c1tpXV0sIGNvbCk7XHJcblx0fVxyXG59O1xyXG5cclxuRWRpdG9yLmluaXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG5cdEVkaXRvci5vcHRpb25zLmRpc3RhbmNlc3BhY2luZyA9IEVkaXRvci5iZWF0bWFwLkRpc3RhbmNlU3BhY2luZztcclxuXHRFZGl0b3Iub3B0aW9ucy5ncmlkbGV2ZWwgPSBNYXRoLmxvZzIoRWRpdG9yLmJlYXRtYXAuR3JpZFNpemUpIC0gMTtcclxuXHR2YXIgYnJlYWtzID0gRWRpdG9yLmJlYXRtYXBbJ2JyZWFrVGltZXMnXSxcclxuXHRcdHRwdG4gPSAwLFxyXG5cdFx0biA9IDEsXHJcblx0XHRza2lub3B0cyA9IEVkaXRvci5za2luLl9tZXRhLm9wdGlvbnM7XHJcblx0aWYgKEVkaXRvci5za2luLl9tZXRhLm5hbWUgIT0gJ0RlZmF1bHQnICYmIHNraW5vcHRzLkNvbWJvMSAmJiAhc2tpbm9wdHMuaWdub3JlU2tpbkNvbG9ycykge1xyXG5cdFx0RWRpdG9yLmNvbHMgPSBbXTtcclxuXHRcdHdoaWxlIChza2lub3B0c1snQ29tYm8nICsgbl0pIHtcclxuXHRcdFx0RWRpdG9yLmNvbHMucHVzaChjb2xvclRvQXJyYXkoc2tpbm9wdHNbJ0NvbWJvJyArIG5dKSk7XHJcblx0XHRcdG4rKztcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKEVkaXRvci5iZWF0bWFwLkNvbWJvQ29sb3JzLmxlbmd0aCA9PSAwKSB7XHJcblx0XHRjb25zb2xlLmxvZygndXNpbmcgZGVmYXVsdCBjb2xvcnMnKTtcclxuXHRcdEVkaXRvci5jb2xzID0gW1xyXG5cdFx0XHRbMjU1LCAxOTIsIDBdLFxyXG5cdFx0XHRbMCwgMjAyLCAwXSxcclxuXHRcdFx0WzE4LCAxMjQsIDI1NV0sXHJcblx0XHRcdFsyNDIsIDI0LCA1N11cclxuXHRcdF07XHJcblx0fSBlbHNlIHtcclxuXHRcdEVkaXRvci5jb2xzID0gW107XHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgRWRpdG9yLmJlYXRtYXAuQ29tYm9Db2xvcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0RWRpdG9yLmNvbHMucHVzaChFZGl0b3IuYmVhdG1hcC5Db21ib0NvbG9yc1tpXS50b0FycmF5KCkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRFZGl0b3Iub2JqYyA9IFtdO1xyXG5cdG4gPSAwLCBqID0gMTtcclxuXHR2YXIgbWF4YyA9IDEsXHJcblx0XHR0cHRuID0gLTE7XHJcblx0Zm9yIChpID0gMDsgaSA8IEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmIChpID09IDAgfHwgRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXS5uZXdDb21ibykge1xyXG5cdFx0XHRpZiAoaiA+IG1heGMpIHtcclxuXHRcdFx0XHRtYXhjID0gajtcclxuXHRcdFx0fVxyXG5cdFx0XHRuKys7XHJcblx0XHRcdGogPSAxO1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLm9iamMucHVzaChbbiwgal0pO1xyXG5cdFx0aisrO1xyXG5cclxuXHRcdGlmIChFZGl0b3IuYmVhdG1hcC5IaXRPYmplY3RzW2ldLnN0YXJ0VGltZSA+PSBFZGl0b3IuYmVhdG1hcC5UaW1pbmdQb2ludHNbdHB0bl0pXHJcblx0XHRcdEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbaV0udHB0biA9IHRwdG47XHJcblx0fVxyXG5cdG4gPSAxMDtcclxuXHR3aGlsZSAobiA8PSBtYXhjKSB7XHJcblx0XHR2YXIgZGlnaXRzID0gW107XHJcblx0XHR2YXIgbjIgPSBuLnRvU3RyaW5nKCk7XHJcblx0XHRmb3IgKGogPSAwOyBqIDwgbjIubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0ZGlnaXRzLnB1c2goRWRpdG9yLnNraW5bJ2RlZmF1bHQtJyArIG4yLmNoYXJBdChqKV0pO1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLmFkZENvbWJvTnVtYmVyKGRpZ2l0cywgbik7XHJcblx0XHRuKys7XHJcblx0fVxyXG5cdHZhciBzaSA9IFtdO1xyXG5cdEVkaXRvci5tYXhzbGlkZXJkdXIgPSAwO1xyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbaV0gaW5zdGFuY2VvZiBTbGlkZXIpIHtcclxuXHRcdFx0aWYgKEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbaV0uZHVyYXRpb24gLyAxMDAwID4gRWRpdG9yLm1heHNsaWRlcmR1cikgRWRpdG9yLm1heHNsaWRlcmR1ciA9IEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbaV0uZHVyYXRpb24gLyAxMDAwO1xyXG5cdFx0XHRzaS5wdXNoKGkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHR2YXIgdGludGVsZW1lbnRzID0gWydoaXRjaXJjbGUnLCAnYXBwcm9hY2hjaXJjbGUnLCAnc2xpZGVyYjAnXTtcclxuXHRmb3IgKGkgPSAwOyBpIDwgdGludGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRmb3IgKGogPSAwOyBqIDwgRWRpdG9yLmNvbHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0aWYgKHRpbnRlbGVtZW50c1tpXSA9PSAnc2xpZGVyYjAnKSB7XHJcblx0XHRcdFx0RWRpdG9yLnNraW5bdGludGVsZW1lbnRzW2ldICsgal0gPSB0aW50KEVkaXRvci5za2luW3RpbnRlbGVtZW50c1tpXV0sIFswLCAwLCAwXSk7XHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdEVkaXRvci5za2luW3RpbnRlbGVtZW50c1tpXSArIGpdID0gdGludChFZGl0b3Iuc2tpblt0aW50ZWxlbWVudHNbaV1dLCBFZGl0b3IuY29sc1tqXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdCQoJyN0aW1lbGluZTFjIC50aW1lbGluZW1hcmsnKS5yZW1vdmUoKTtcclxuXHRFZGl0b3IudGltZWxpbmVtYXJrcyA9IHt9O1xyXG5cdGlmIChFZGl0b3IuYmVhdG1hcC5Cb29rbWFya3MpIHtcclxuXHRcdHZhciBwdHMgPSBFZGl0b3IuYmVhdG1hcC5Cb29rbWFya3M7XHJcblx0XHRmb3IgKHZhciBpIGluIHB0cykge1xyXG5cdFx0XHRpZiAocHRzLmhhc093blByb3BlcnR5KGkpKSB7XHJcblx0XHRcdFx0RWRpdG9yLmNyZWF0ZVRpbWVsaW5lTWFyayhwdHNbaV0gLyAxMDAwLCAnYm9va21hcmsnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoRWRpdG9yLmJlYXRtYXAuUHJldmlld1RpbWUpIEVkaXRvci5jcmVhdGVUaW1lbGluZU1hcmsoRWRpdG9yLmJlYXRtYXAuUHJldmlld1RpbWUgLyAxMDAwLCAncHJldmlld3RpbWUnKTtcclxuXHRpZiAoRWRpdG9yLmJlYXRtYXAuVGltaW5nUG9pbnRzKSB7XHJcblx0XHRwdHMgPSBFZGl0b3IuYmVhdG1hcC5UaW1pbmdQb2ludHM7XHJcblx0XHRmb3IgKGkgPSAwOyBpIDwgcHRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGlmIChwdHNbaV0udGltaW5nQ2hhbmdlKVxyXG5cdFx0XHRcdEVkaXRvci5jcmVhdGVUaW1lbGluZU1hcmsocHRzW2ldLm9mZnNldCAvIDEwMDAsICd1bmluaGVyaXRlZHBvaW50Jyk7XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRFZGl0b3IuY3JlYXRlVGltZWxpbmVNYXJrKHB0c1tpXS5vZmZzZXQgLyAxMDAwLCAnaW5oZXJpdGVkcG9pbnQnKTtcclxuXHRcdH1cclxuXHR9XHJcblx0RWRpdG9yLnNldEdyaWRMZXZlbChFZGl0b3Iub3B0aW9ucy5ncmlkbGV2ZWwpO1xyXG5cdEVkaXRvci51cGRhdGUoKTtcclxuXHQvL3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyZW5kZXJzbGlkZXJzYXN5bmMoc2ksIDEwLCBmdW5jdGlvbigpe2NvbnNvbGUubG9nKCdzbGlkZXJzIGRvbmUnKX0pfSwgMCk7IC8vYXN5bmNcclxuXHQvL3JlbmRlcnNsaWRlcnMoc2ksIDAsIGNhbGxiYWNrKTtcclxufTtcclxuXHJcbkVkaXRvci51cGRhdGUgPSBmdW5jdGlvbigpIHsgLy8gZm9yIHVwZGF0ZXMgdGhhdCBjaGFuZ2UgdGhlIHRpbWVcclxuXHRpZiAoIUVkaXRvci5kcmF3aW5nKSBmcmFtZSgpO1xyXG59XHJcblxyXG52YXIgZnJhbWUgPSBmdW5jdGlvbigpIHtcclxuXHRFZGl0b3IudXBkYXRlVGltZSgpO1xyXG5cdGlmIChFZGl0b3Iuc291cmNlICYmIEVkaXRvci5iZWF0bWFwKSB7XHJcblx0XHRFZGl0b3IucmVuZGVyKCk7XHJcblx0XHRpZiAoRWRpdG9yLnNvdXJjZS5wbGF5aW5nKSB7XHJcblx0XHRcdGlmIChFZGl0b3IucHJldnQpIHtcclxuXHRcdFx0XHR2YXIgZnJvbSA9IEVkaXRvci5iZWF0bWFwLmdldEluZGV4QXQoRWRpdG9yLnByZXZ0ICogMTAwMCk7XHJcblx0XHRcdFx0dmFyIHRvID0gRWRpdG9yLmJlYXRtYXAuZ2V0SW5kZXhBdChFZGl0b3Iuc291cmNlLnQgKiAxMDAwKTtcclxuXHRcdFx0XHRmb3IgKHZhciBpID0gZnJvbTsgaSA8PSB0bzsgaSsrKSB7XHJcblx0XHRcdFx0XHR2YXIgb2JqID0gRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0c1tpXTtcclxuXHRcdFx0XHRcdC8vIHBsYXkgc2Z4XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdEVkaXRvci5wcmV2dCA9IEVkaXRvci5zb3VyY2UudDtcclxuXHRcdFx0RWRpdG9yLmRyYXdpbmcgPSB0cnVlO1xyXG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZyYW1lKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdEVkaXRvci5kcmF3aW5nID0gZmFsc2U7XHJcblx0XHRcdEVkaXRvci5wcmV2dCA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbiQod2luZG93KS5vbihcInJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcclxuXHRFZGl0b3IuYWxpZ24oKTtcclxuXHRpZiAoRWRpdG9yLnNvdXJjZSkge1xyXG5cdFx0dmFyIHRyYWNrID0gJCgnI3RpbWVsaW5ldHJhY2snKTtcclxuXHRcdGZvciAodmFyIHRpbWUgaW4gRWRpdG9yLnRpbWVsaW5lbWFya3MpIHtcclxuXHRcdFx0aWYgKEVkaXRvci50aW1lbGluZW1hcmtzLmhhc093blByb3BlcnR5KHRpbWUpKSB7XHJcblx0XHRcdFx0Zm9yICh2YXIgcG9pbnQgaW4gRWRpdG9yLnRpbWVsaW5lbWFya3NbdGltZV0pIHtcclxuXHRcdFx0XHRcdGlmIChFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXS5oYXNPd25Qcm9wZXJ0eShwb2ludCkpIHtcclxuXHRcdFx0XHRcdFx0JChFZGl0b3IudGltZWxpbmVtYXJrc1t0aW1lXVtwb2ludF0pLmNzcyh7XHJcblx0XHRcdFx0XHRcdFx0bGVmdDogdHJhY2sucG9zaXRpb24oKS5sZWZ0ICsgdHJhY2sud2lkdGgoKSAqICh0aW1lIC8gRWRpdG9yLnNvdXJjZS5kdXJhdGlvbilcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdEVkaXRvci51cGRhdGUoKTtcclxufSk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiBtYWluKCkge1xyXG5cdEVkaXRvci5vcHRpb25zID0ge1xyXG5cdFx0YmVhdHNuYXBkaXZpc29yOiA0LFxyXG5cdFx0ZGlzdGFuY2VzcGFjaW5nOiAxLFxyXG5cdFx0ZGlzdGFuY2VzbmFwOiB0cnVlLFxyXG5cdFx0Z3JpZGxldmVsOiAyLFxyXG5cdFx0Z3JpZHNuYXA6IHRydWUsXHJcblx0XHRsb2Nrbm90ZXM6IGZhbHNlLFxyXG5cdFx0dG9vbDogMCwgLy8wLTMgZm9yIHNlbGVjdCwgY2lyY2xlLCBzbGlkZXIsIGFuZCBzcGlubmVyXHJcblx0XHRzb3VuZG9wdHM6IFtmYWxzZSwgZmFsc2UsIGZhbHNlXSwgLy93aGlzdGxlLCBmaW5pc2gsIGNsYXBcclxuXHRcdG5jb3B0OiBmYWxzZSxcclxuXHRcdGlnbm9yZVNraW5Db2xvcnM6IGZhbHNlXHJcblx0fTtcclxuXHRFZGl0b3IuY29weURhdGEgPSAnJztcclxuXHRFZGl0b3Iuc2VsZWN0ZWQgPSBbXTtcclxuXHRFZGl0b3IucmVuZGVyZWQgPSBbXTtcclxuXHJcblx0JChcIiNtZW51YmFyPmRpdlwiKS5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYSA9ICQodGhpcykub2Zmc2V0KCk7XHJcblx0XHRhLnRvcCArPSAxODtcclxuXHRcdCQodGhpcykuZmluZChcIi5kcm9wZG93blwiKS5vZmZzZXQoYSk7XHJcblx0fSk7XHJcblxyXG5cdEVkaXRvci5nZXRDdXJPYmogPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjbGlja2VkO1xyXG5cdFx0dmFyIGNzID0gY3NweChFZGl0b3IuYmVhdG1hcC5DaXJjbGVTaXplKTtcclxuXHRcdHZhciB0ID0gRWRpdG9yLnNvdXJjZS50ICogMTAwMDtcclxuXHRcdEVkaXRvci5yZW5kZXJlZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuXHRcdFx0dmFyIGR0YSA9IGEuc3RhcnRUaW1lIC0gdCxcclxuXHRcdFx0XHRkdGIgPSBiLnN0YXJ0VGltZSAtIHQ7XHJcblx0XHRcdGlmIChNYXRoLmFicyhNYXRoLmFicyhkdGEpIC0gTWF0aC5hYnMoZHRiKSkgPT0gMSkgZHRhID0gTWF0aC5zaWduKGR0YSkgKiBkdGI7XHJcblx0XHRcdGlmIChkdGEgPT0gLWR0YikgcmV0dXJuIGR0YTtcclxuXHRcdFx0cmV0dXJuIE1hdGguYWJzKGIuc3RhcnRUaW1lIC0gdCkgLSBNYXRoLmFicyhhLnN0YXJ0VGltZSAtIHQpO1xyXG5cdFx0fSk7XHJcblx0XHR2YXIgb2Jqc1RvQ2hlY2sgPSBFZGl0b3Iuc2VsZWN0ZWQuY29uY2F0KEVkaXRvci5yZW5kZXJlZCk7XHJcblx0XHRmb3IgKHZhciBpID0gRWRpdG9yLnJlbmRlcmVkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdHZhciBvYmogPSBvYmpzVG9DaGVja1tpXTtcclxuXHRcdFx0aWYgKG9iaiBpbnN0YW5jZW9mIEhpdENpcmNsZSkge1xyXG5cdFx0XHRcdGlmIChvYmoucG9zaXRpb24uZGlzdGFuY2VUbyhuZXcgVmVjdG9yKG1vdXNlWCwgbW91c2VZKSkgPD0gY3MgLyAyKSB7XHJcblx0XHRcdFx0XHRjbGlja2VkID0gb2JqO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFNsaWRlcikge1xyXG5cdFx0XHRcdHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCkgKiAuNzU7XHJcblx0XHRcdFx0dmFyIHdpZHRoID0gaGVpZ2h0ICogNCAvIDM7XHJcblx0XHRcdFx0dmFyIGN0eDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JpZGNhbnZhczInKS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cdFx0XHRcdGN0eDIuc2F2ZSgpO1xyXG5cdFx0XHRcdGN0eDIudHJhbnNsYXRlKCgkKHdpbmRvdykud2lkdGgoKSAtIHdpZHRoKSAvIDIsICQod2luZG93KS5oZWlnaHQoKSAqIC4xNik7XHJcblx0XHRcdFx0Y3R4Mi5zY2FsZSh3aWR0aCAvIDUxMiwgaGVpZ2h0IC8gMzg0KTtcclxuXHRcdFx0XHRjdHgyLmxpbmVXaWR0aCA9IGNzICogMTEgLyAxMjtcclxuXHRcdFx0XHRjdHgyLmxpbmVKb2luID0gJ3JvdW5kJztcclxuXHRcdFx0XHRjdHgyLmxpbmVDYXAgPSAncm91bmQnO1xyXG5cdFx0XHRcdGlmICghb2JqLnBhdGgpIHtcclxuXHRcdFx0XHRcdGN0eDIuYmVnaW5QYXRoKCk7XHJcblx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IG9iai5zcGxpbmUubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0Y3R4Mi5saW5lVG8ob2JqLnNwbGluZVtqXVswXSwgb2JqLnNwbGluZVtqXVsxXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR2YXIgdGVtcCA9IGN0eDIuaXNQb2ludEluU3Ryb2tlKHBhZ2VfbW91c2VYLCBwYWdlX21vdXNlWSAtICQoJyNncmlkY2FudmFzMicpLm9mZnNldCgpLnRvcCk7XHJcblx0XHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0XHR2YXIgdGVtcCA9IGN0eDIuaXNQb2ludEluU3Ryb2tlKG9iai5wYXRoLCBwYWdlX21vdXNlWCwgcGFnZV9tb3VzZVkgLSAkKCcjZ3JpZGNhbnZhczInKS5vZmZzZXQoKS50b3ApO1xyXG5cdFx0XHRcdGN0eDIucmVzdG9yZSgpO1xyXG5cdFx0XHRcdGlmICh0ZW1wKSB7XHJcblx0XHRcdFx0XHRjbGlja2VkID0gb2JqO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY2xpY2tlZDtcclxuXHR9XHJcblxyXG5cdEVkaXRvci5kZWxldGVTZWxlY3RlZCA9IGZ1bmN0aW9uKCkgeyAvLyBDVVJSRU5UTFkgV0hFTiBTVFVGRiBHRVRTIERFTEVURUQgQ09NQk9TIEdFVCBNRVNTRUQgVVAsIENBTExJTkcgaW5pdCgpIENBTiBCRSBBIFRFTVBPUkFSWSBGSVhcclxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgRWRpdG9yLnNlbGVjdGVkLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHMuc3BsaWNlKEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHMuaW5kZXhPZihFZGl0b3Iuc2VsZWN0ZWRbal0pLCAxKTtcclxuXHRcdFx0Ly8gY29sbGFiVE9ET1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLnNlbGVjdGVkID0gW107XHJcblx0fTtcclxuXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGZ1bmN0aW9uKGUpIHsgLy8gcmlnaHQgY2xpY2sgaGFuZGxpbmdcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHZhciBjbGlja2VkID0gRWRpdG9yLmdldEN1ck9iaigpO1xyXG5cdFx0dmFyIGkgPSBFZGl0b3Iuc2VsZWN0ZWQuaW5kZXhPZihjbGlja2VkKVxyXG5cdFx0aWYgKGkgIT0gLTEpIHtcclxuXHRcdFx0RWRpdG9yLmRlbGV0ZVNlbGVjdGVkKCk7XHJcblx0XHR9IGVsc2UgeyAvLyBTRUUgTElORSA0MTVcclxuXHRcdFx0RWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0cy5zcGxpY2UoRWRpdG9yLmJlYXRtYXAuSGl0T2JqZWN0cy5pbmRleE9mKGNsaWNrZWQpLCAxKTtcclxuXHRcdFx0Ly8gY29sbGFiVE9ET1xyXG5cdFx0fVxyXG5cdFx0dmFyIG8gPSAoZS5zcmNFbGVtZW50IHx8IGUub3JpZ2luYWxUYXJnZXQpO1xyXG5cdFx0aWYgKG8ubWF0Y2hlcygnI3JpZ2h0dG9vbGJhciBpbWcsICNsZWZ0dG9vbGJhciBpbWcsICN0aW1lbGluZTFjLCAjcGxheWNvbnRyb2xzIGltZycpKSB7XHJcblx0XHRcdHZhciBldiA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyk7XHJcblx0XHRcdGV2LmluaXRFdmVudCgnY2xpY2snLCB0cnVlLCBmYWxzZSk7XHJcblx0XHRcdG8uZGlzcGF0Y2hFdmVudChldik7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQoJyNncmlkY2FudmFzMiwgI2dyaWQnKS5kYmxjbGljayhmdW5jdGlvbihlKSB7IC8vIGNsaWNrcyBpbiBwbGF5IGFyZWFcclxuXHRcdHZhciBjbGlja2VkID0gRWRpdG9yLmdldEN1ck9iaigpO1xyXG5cdFx0aWYgKGNsaWNrZWQpIEVkaXRvci5zb3VyY2UudCA9IGNsaWNrZWQuc3RhcnRUaW1lIC8gMTAwMDtcclxuXHRcdC8vIGhhbmRsZSBzbGlkZXIgZW5kL2VkZ2UgZWRpdGluZyBvbmUgZGF5XHJcblx0fSk7XHJcblxyXG5cdHZhciB0aW1lbGluZW1vdmUgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRpZiAoIUVkaXRvci5zb3VyY2UpIHJldHVyblxyXG5cdFx0dmFyIHRyYWNrID0gJCgnI3RpbWVsaW5ldHJhY2snKTtcclxuXHRcdHZhciB3ID0gdHJhY2sud2lkdGgoKTtcclxuXHRcdHZhciBwY3QgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihwYWdlX21vdXNlWCAtIHRyYWNrLnBvc2l0aW9uKCkubGVmdCwgdykpIC8gdztcclxuXHRcdHZhciBwb3MgPSBwY3QgKiBFZGl0b3Iuc291cmNlLmR1cmF0aW9uO1xyXG5cdFx0aWYgKHBjdCA+PSAxKSBFZGl0b3Iuc291cmNlLnBhdXNlKEVkaXRvci5zb3VyY2UuZHVyYXRpb24pO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRFZGl0b3Iuc291cmNlLnNlZWsocG9zKTtcclxuXHRcdEVkaXRvci51cGRhdGUoKTtcclxuXHR9O1xyXG5cclxuXHRFZGl0b3IuZGVzZWxlY3RBbGwgPSBmdW5jdGlvbigpIHtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgRWRpdG9yLnNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdEVkaXRvci5zZWxlY3RlZFtpXS5zZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLnNlbGVjdGVkID0gW107XHJcblx0fVxyXG5cclxuXHR2YXIgZWRpdF9tb3VzZWRvd24gPSBmYWxzZTtcclxuXHR2YXIgc2VsZWN0ZWRfb2Zmc2V0eCA9IHNlbGVjdGVkX29mZnNldHkgPSAwO1xyXG5cdHZhciBzZWxlY3RlZGkgPSAwO1xyXG5cdCQoJyNncmlkY2FudmFzMiwgI2dyaWQnKS5tb3VzZWRvd24oZnVuY3Rpb24oZSkgeyAvLyBjbGlja3MgaW4gcGxheSBhcmVhXHJcblx0XHRpZiAoIUVkaXRvci5iZWF0bWFwKSByZXR1cm47XHJcblx0XHRlZGl0X21vdXNlZG93biA9IHRydWU7XHJcblx0XHRpZiAoRWRpdG9yLm9wdGlvbnMudG9vbCA9PSAwKSB7XHJcblx0XHRcdHZhciBjbGlja2VkID0gRWRpdG9yLmdldEN1ck9iaigpO1xyXG5cdFx0XHRpZiAoY2xpY2tlZCkge1xyXG5cdFx0XHRcdGNsaWNrZWQuc2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdHNlbGVjdGVkX29mZnNldHggPSBtb3VzZVggLSBjbGlja2VkLnBvc2l0aW9uLng7XHJcblx0XHRcdFx0c2VsZWN0ZWRfb2Zmc2V0eSA9IG1vdXNlWSAtIGNsaWNrZWQucG9zaXRpb24ueTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpID0gRWRpdG9yLnNlbGVjdGVkLmluZGV4T2YoY2xpY2tlZCk7XHJcblx0XHRcdGlmIChpICE9IC0xKSB7XHJcblx0XHRcdFx0c2VsZWN0ZWRpID0gaTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCFlLmN0cmxLZXkgfHwgIWNsaWNrZWQpIHtcclxuXHRcdFx0XHRFZGl0b3IuZGVzZWxlY3RBbGwoKTtcclxuXHRcdFx0XHRpZiAoY2xpY2tlZCkgRWRpdG9yLnNlbGVjdGVkID0gW2NsaWNrZWRdO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdEVkaXRvci5zZWxlY3RlZC5wdXNoKGNsaWNrZWQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNlbGVjdGVkaSA9IEVkaXRvci5zZWxlY3RlZC5sZW5ndGggLSAxO1xyXG5cdFx0fVxyXG5cdFx0RWRpdG9yLnJlbmRlcnVwZGF0ZSgpO1xyXG5cdH0pO1xyXG5cclxuXHR2YXIgdGltZWxpbmVfbW91c2Vkb3duID0gZmFsc2U7XHJcblx0JCgnI3RpbWVsaW5lMWMnKS5tb3VzZWRvd24oZnVuY3Rpb24oZSkge1xyXG5cdFx0dGltZWxpbmVfbW91c2Vkb3duID0gdHJ1ZTtcclxuXHRcdHRpbWVsaW5lbW92ZShlKTtcclxuXHR9KTtcclxuXHQkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uKCkge1xyXG5cdFx0dGltZWxpbmVfbW91c2Vkb3duID0gZmFsc2U7XHJcblx0XHRlZGl0X21vdXNlZG93biA9IGZhbHNlO1xyXG5cdH0pO1xyXG5cclxuXHR2YXIgc25hcF9ncmlkID0gZnVuY3Rpb24obikge1xyXG5cdFx0dmFyIGQgPSBFZGl0b3Iub3B0aW9ucy5ncmlkc25hcCA/IE1hdGgucG93KDIsIEVkaXRvci5vcHRpb25zLmdyaWRsZXZlbCArIDEpIDogMTtcclxuXHRcdHJldHVybiBNYXRoLnJvdW5kKG4gLyBkKSAqIGQ7XHJcblx0fVxyXG5cclxuXHRFZGl0b3IudXBkYXRlTW91c2VMb2NhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSAqIC43NTtcclxuXHRcdHZhciB3aWR0aCA9IGhlaWdodCAqIDQgLyAzO1xyXG5cdFx0dmFyIHByZXZtb3VzZVggPSBtb3VzZVgsXHJcblx0XHRcdHByZXZtb3VzZVkgPSBtb3VzZVk7XHJcblx0XHRtb3VzZVggPSAocGFnZV9tb3VzZVggLSAkKCcjZ3JpZCcpLm9mZnNldCgpLmxlZnQpIC8gd2lkdGggKiA1MTI7XHJcblx0XHRtb3VzZVkgPSAocGFnZV9tb3VzZVkgLSAkKCcjZ3JpZCcpLm9mZnNldCgpLnRvcCkgLyBoZWlnaHQgKiAzODQ7XHJcblx0XHRzbmFwcGVkX21vdXNlWCA9IHNuYXBfZ3JpZChtb3VzZVgpO1xyXG5cdFx0c25hcHBlZF9tb3VzZVkgPSBzbmFwX2dyaWQobW91c2VZKTtcclxuXHJcblx0XHRpZiAodGltZWxpbmVfbW91c2Vkb3duKVxyXG5cdFx0XHR0aW1lbGluZW1vdmUoZSk7XHJcblx0XHRlbHNlIGlmIChlZGl0X21vdXNlZG93biAmJiBFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xyXG5cdFx0XHR2YXIgbmV3eCA9IE1hdGgubWluKDUxMiwgTWF0aC5tYXgoMCwgc25hcF9ncmlkKG1vdXNlWCAtIHNlbGVjdGVkX29mZnNldHgpKSk7XHJcblx0XHRcdHZhciBuZXd5ID0gTWF0aC5taW4oMzg0LCBNYXRoLm1heCgwLCBzbmFwX2dyaWQobW91c2VZIC0gc2VsZWN0ZWRfb2Zmc2V0eSkpKTtcclxuXHRcdFx0dmFyIGR4ID0gbmV3eCAtIEVkaXRvci5zZWxlY3RlZFtzZWxlY3RlZGldLnBvc2l0aW9uLngsXHJcblx0XHRcdFx0ZHkgPSBuZXd5IC0gRWRpdG9yLnNlbGVjdGVkW3NlbGVjdGVkaV0ucG9zaXRpb24ueTtcclxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgb2JqID0gRWRpdG9yLnNlbGVjdGVkW2ldO1xyXG5cdFx0XHRcdHZhciBzZXJpYWxpemVkID0gb2JqLnNlcmlhbGl6ZSgpO1xyXG5cdFx0XHRcdGlmIChvYmogaW5zdGFuY2VvZiBTbGlkZXIpIHtcclxuXHRcdFx0XHRcdGZvciAodmFyIGogPSAxOyBqIDwgb2JqLnBvaW50cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0XHRvYmoucG9pbnRzW2pdLnggKz0gZHg7XHJcblx0XHRcdFx0XHRcdG9iai5wb2ludHNbal0ueSArPSBkeTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdG9iai5jYWNoZS5yZW5kZXJbMV1bMF0gKz0gZHg7XHJcblx0XHRcdFx0XHRvYmouY2FjaGUucmVuZGVyWzFdWzFdICs9IGR5O1xyXG5cdFx0XHRcdFx0b2JqLmNhbGN1bGF0ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvYmoucG9zaXRpb24ueCArPSBkeDtcclxuXHRcdFx0XHRvYmoucG9zaXRpb24ueSArPSBkeTtcclxuXHJcblx0XHRcdFx0Ly8gY29sbGFiVE9ET1xyXG5cdFx0XHRcdEVkaXRvci5zb2NrZXQuZWRpdF9tb3ZlKHNlcmlhbGl6ZWQsIG9iai5wb3NpdGlvbi54LCBvYmoucG9zaXRpb24ueSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7fVxyXG5cdFx0RWRpdG9yLnJlbmRlcnVwZGF0ZSgpO1xyXG5cclxuXHRcdGlmIChFZGl0b3Iuc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQkKCcjbW91c2Vwb3MnKS5odG1sKCd4OicgKyBFZGl0b3Iuc2VsZWN0ZWRbc2VsZWN0ZWRpXS5wb3NpdGlvbi54ICsgJyB5OicgKyBFZGl0b3Iuc2VsZWN0ZWRbc2VsZWN0ZWRpXS5wb3NpdGlvbi55KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJyNtb3VzZXBvcycpLmh0bWwoJ3g6JyArIHNuYXBwZWRfbW91c2VYICsgJyB5OicgKyBzbmFwcGVkX21vdXNlWSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0dmFyIGNhcHR1cmVNb3VzZUxvY2F0aW9uID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0cGFnZV9tb3VzZVggPSBlLnBhZ2VYO1xyXG5cdFx0cGFnZV9tb3VzZVkgPSBlLnBhZ2VZO1xyXG5cdFx0RWRpdG9yLnVwZGF0ZU1vdXNlTG9jYXRpb24oKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgd2hlZWx1cGRhdGUgPSBmdW5jdGlvbihlKSB7XHJcblx0XHR2YXIgdCA9ICQoJyNncmlkJyk7XHJcblx0XHRpZiAoZS5hbHRLZXkpIHtcclxuXHRcdFx0aWYgKHBhZ2VfbW91c2VYID49IHQub2Zmc2V0KCkubGVmdCAmJiBwYWdlX21vdXNlWCA8PSB0Lm9mZnNldCgpLmxlZnQgKyB0LndpZHRoKCkgJiYgcGFnZV9tb3VzZVkgPj0gdC5vZmZzZXQoKS50b3AgJiYgcGFnZV9tb3VzZVkgPD0gdC5vZmZzZXQoKS50b3AgKyB0LmhlaWdodCgpKVxyXG5cdFx0XHRcdEVkaXRvci5vcHRpb25zLmRpc3RhbmNlc3BhY2luZyA9IE1hdGgubWluKDYsIE1hdGgubWF4KC4xLCBFZGl0b3Iub3B0aW9ucy5kaXN0YW5jZXNwYWNpbmcgKyAoZS53aGVlbERlbHRhIHx8IC1lLmRldGFpbCkgLyAxMjAwKSk7XHJcblx0XHRcdGVsc2UgaWYgKEVkaXRvci5zb3VyY2UpXHJcblx0XHRcdFx0RWRpdG9yLnNvdXJjZS52b2x1bWUgPSBNYXRoLm1pbigyLCBNYXRoLm1heCgwLCBFZGl0b3Iuc291cmNlLnZvbHVtZSArIChlLndoZWVsRGVsdGEgfHwgLWUuZGV0YWlsKSAvIDI0MDApKTtcclxuXHRcdH0gZWxzZSBpZiAoZS5jdHJsS2V5KSB7XHJcblxyXG5cdFx0fSBlbHNlIGlmIChFZGl0b3Iuc291cmNlICYmIEVkaXRvci5iZWF0bWFwKSB7XHJcblx0XHRcdHZhciB0cHQgPSBFZGl0b3IuYmVhdG1hcC5nZXRUaW1pbmdQb2ludChFZGl0b3Iuc291cmNlLnQgKiAxMDAwKTtcclxuXHRcdFx0dmFyIHBvcyA9IE1hdGgubWluKEVkaXRvci5zb3VyY2UuZHVyYXRpb24sXHJcblx0XHRcdFx0TWF0aC5tYXgoMCwgRWRpdG9yLnNvdXJjZS50IC0gKChlLndoZWVsRGVsdGEgfHwgLWUuZGV0YWlsKSAvIDEyMCAqXHJcblx0XHRcdFx0XHR0cHQuYmVhdExlbmd0aCAvIDEwMDAgL1xyXG5cdFx0XHRcdFx0KEVkaXRvci5zb3VyY2UucGxheWluZyA/IDEgOiBFZGl0b3Iub3B0aW9ucy5iZWF0c25hcGRpdmlzb3IpICpcclxuXHRcdFx0XHRcdChlLnNoaWZ0S2V5ID8gdHB0LnRpbWluZ1NpZ25hdHVyZSA6IDEpKSkpO1xyXG5cdFx0XHR0cHQgPSBFZGl0b3IuYmVhdG1hcC5nZXRUaW1pbmdQb2ludChwb3MgKiAxMDAwKTtcclxuXHRcdFx0aWYgKHBvcyA+PSBFZGl0b3Iuc291cmNlLmR1cmF0aW9uKSBFZGl0b3Iuc291cmNlLnBhdXNlKEVkaXRvci5zb3VyY2UuZHVyYXRpb24pO1xyXG5cdFx0XHRlbHNlIGlmIChFZGl0b3Iuc291cmNlLnBsYXlpbmcpXHJcblx0XHRcdFx0RWRpdG9yLnNvdXJjZS5wbGF5KHBvcyk7XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdEVkaXRvci5zb3VyY2UucGF1c2Uoc25hcChwb3MsIHRwdC5iYXNlT2Zmc2V0IC8gMTAwMCwgdHB0LmJlYXRMZW5ndGggLyAxMDAwIC8gKGUuc2hpZnRLZXkgPyAxIDogRWRpdG9yLm9wdGlvbnMuYmVhdHNuYXBkaXZpc29yKSkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdEVkaXRvci51cGRhdGUoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGNhcHR1cmVNb3VzZUxvY2F0aW9uLCBmYWxzZSk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgd2hlZWx1cGRhdGUsIHtcclxuXHRcdHBhc3NpdmU6IHRydWVcclxuXHR9KTtcclxuXHJcblx0dmFyIGNvbnRyb2xjbGlja2VkID0gZnVuY3Rpb24oZWxlbSkge1xyXG5cdFx0ZWxlbS5yZW1vdmVDbGFzcyhcInNjYWxhYmxlXCIpO1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0ZWxlbS5hZGRDbGFzcyhcInNjYWxhYmxlXCIpXHJcblx0XHR9LCA0MCk7XHJcblx0fTtcclxuXHJcblx0JCgnI2VkaXRvcnBsYXknKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdGlmIChFZGl0b3Iuc291cmNlKSB7XHJcblx0XHRcdGlmIChFZGl0b3Iuc291cmNlLnBsYXlpbmcpIEVkaXRvci5zb3VyY2UucGxheSgwKTtcclxuXHRcdFx0ZWxzZSBFZGl0b3Iuc291cmNlLnBsYXkoKTtcclxuXHRcdFx0dXBkYXRlKCk7XHJcblx0XHR9XHJcblx0XHRjb250cm9sY2xpY2tlZCgkKHRoaXMpKTtcclxuXHR9KTtcclxuXHJcblx0JCgnI2VkaXRvcnBhdXNlJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoRWRpdG9yLnNvdXJjZSkge1xyXG5cdFx0XHRpZiAoRWRpdG9yLnNvdXJjZS5wbGF5aW5nKSBFZGl0b3Iuc291cmNlLnBhdXNlKCk7XHJcblx0XHRcdGVsc2UgRWRpdG9yLnNvdXJjZS5wbGF5KCk7XHJcblx0XHR9XHJcblx0XHRjb250cm9sY2xpY2tlZCgkKHRoaXMpKTtcclxuXHR9KTtcclxuXHJcblx0JCgnI2VkaXRvcnN0b3AnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdGlmIChFZGl0b3Iuc291cmNlKVxyXG5cdFx0XHRFZGl0b3Iuc291cmNlLnBhdXNlKDApO1xyXG5cdFx0Y29udHJvbGNsaWNrZWQoJCh0aGlzKSk7XHJcblx0fSk7XHJcblxyXG5cdCQoJyNyaWdodHRvb2xiYXIgaW1nJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdHN3aXRjaCAodGhpcy5pZCkge1xyXG5cdFx0XHRjYXNlICdkcmF3X25ld2NvbWJvJzpcclxuXHRcdFx0XHRFZGl0b3Iub3B0aW9ucy5uY29wdCA9ICFFZGl0b3Iub3B0aW9ucy5uY29wdDtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnc291bmRfd2hpc3RsZSc6XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMuc291bmRvcHRzWzBdID0gIUVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1swXTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnc291bmRfZmluaXNoJzpcclxuXHRcdFx0XHRFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMV0gPSAhRWRpdG9yLm9wdGlvbnMuc291bmRvcHRzWzFdO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdzb3VuZF9jbGFwJzpcclxuXHRcdFx0XHRFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMl0gPSAhRWRpdG9yLm9wdGlvbnMuc291bmRvcHRzWzJdO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdkcmF3X2JlYXRzbmFwJzpcclxuXHRcdFx0XHRFZGl0b3Iub3B0aW9ucy5ncmlkc25hcCA9ICFFZGl0b3Iub3B0aW9ucy5ncmlkc25hcDtcclxuXHRcdFx0XHRFZGl0b3IudXBkYXRlTW91c2VMb2NhdGlvbigpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdkcmF3X2Rpc3RzbmFwJzpcclxuXHRcdFx0XHRFZGl0b3Iub3B0aW9ucy5kaXN0YW5jZXNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZGlzdGFuY2VzbmFwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcblx0JCgnI2xlZnR0b29sYmFyIGltZycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdCQodGhpcykuYWRkQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9ICQodGhpcykuaW5kZXgoKTtcclxuXHR9KTtcclxuXHJcblx0dmFyIGtleXByZXNzaGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdHZhciBjb2RlID0gKHdpbmRvdy5ldmVudCkgPyBldmVudC5rZXlDb2RlIDogZS5rZXlDb2RlO1xyXG5cdFx0aWYgKCEoY29kZSA9PSAxMjIgfHwgY29kZSA9PSAxMjMpKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH1cclxuXHRcdGlmIChrZXljb2RlZGJnKSBjb25zb2xlLmxvZyhcImtleWNvZGU6IFwiLCBjb2RlKTtcclxuXHRcdGlmICgha2V5TWFwWzE2XSAmJiBjb2RlID09IDE2KSB7XHJcblx0XHRcdCQoJyNkcmF3X2JlYXRzbmFwJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5ncmlkc25hcCA9ICFFZGl0b3Iub3B0aW9ucy5ncmlkc25hcDtcclxuXHRcdFx0RWRpdG9yLnVwZGF0ZU1vdXNlTG9jYXRpb24oKTtcclxuXHRcdH1cclxuXHRcdGlmICgha2V5TWFwWzE4XSAmJiBjb2RlID09IDE4KSB7XHJcblx0XHRcdCQoJyNkcmF3X2Rpc3RzbmFwJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5kaXN0YW5jZXNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZGlzdGFuY2VzbmFwO1xyXG5cdFx0fVxyXG5cdFx0a2V5TWFwW2NvZGVdID0gdHJ1ZTtcclxuXHRcdGlmICgoY29kZSA9PSA2NyB8fCBjb2RlID09IDMyKSAmJiBFZGl0b3Iuc291cmNlKSB7IC8vYywgc3BhY2VcclxuXHRcdFx0aWYgKGNvZGUgPT0gNjcgJiYgZS5jdHJsS2V5KSB7IC8vY3RybC1jXHJcblx0XHRcdFx0dmFyIGRhdGEgPSAnaGknO1xyXG5cdFx0XHRcdGNvcHlUZXh0VG9DbGlwYm9hcmQoZGF0YSk7XHJcblx0XHRcdFx0RWRpdG9yLmNvcHlEYXRhID0gZGF0YTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnY29weScpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCFlLmN0cmxLZXkpIHtcclxuXHRcdFx0XHRpZiAoRWRpdG9yLnNvdXJjZS5wbGF5aW5nKSBFZGl0b3Iuc291cmNlLnBhdXNlKCk7XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRFZGl0b3Iuc291cmNlLnBsYXkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA4OSkgeyAvL3lcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZWRvJyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA5MCkgeyAvL3pcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCd1bmRvJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0RWRpdG9yLnNvdXJjZS5zZWVrKEVkaXRvci5iZWF0bWFwLkhpdE9iamVjdHNbMF0uc3RhcnRUaW1lIC8gMTAwMCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA4OCkgeyAvL3hcclxuXHRcdFx0aWYgKGUuY3RybEtleSkgeyAvL2N0cmwteFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjdXQnKTtcclxuXHRcdFx0XHR2YXIgZGF0YSA9ICdoaSc7XHJcblx0XHRcdFx0Y29weVRleHRUb0NsaXBib2FyZChkYXRhKTtcclxuXHRcdFx0XHRFZGl0b3IuY29weURhdGEgPSBkYXRhO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmIChFZGl0b3Iuc291cmNlKVxyXG5cdFx0XHRcdFx0RWRpdG9yLnNvdXJjZS5wbGF5KDApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gODYpIHsgLy92XHJcblx0XHRcdGlmIChlLmN0cmxLZXkpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygncGFzdGUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDM3IHx8IGNvZGUgPT0gMzkpIHsgLy9sZWZ0XHJcblx0XHRcdGlmIChFZGl0b3Iuc291cmNlKSB7XHJcblx0XHRcdFx0dmFyIHRwdCA9IEVkaXRvci5iZWF0bWFwLmdldFRpbWluZ1BvaW50KEVkaXRvci5zb3VyY2UudCAqIDEwMDApO1xyXG5cdFx0XHRcdHZhciBwb3MgPSBFZGl0b3Iuc291cmNlLnQgKyAoY29kZSA9PSAzNyA/IC0xIDogMSkgKiB0cHQuYmVhdExlbmd0aCAvIDEwMDAgLyAoRWRpdG9yLnNvdXJjZS5wbGF5aW5nID8gMSA6IEVkaXRvci5vcHRpb25zLmJlYXRzbmFwZGl2aXNvcikgKiAoZS5zaGlmdEtleSA/IDQgOiAxKTtcclxuXHRcdFx0XHR0cHQgPSBFZGl0b3IuYmVhdG1hcC5nZXRUaW1pbmdQb2ludChwb3MgKiAxMDAwKTtcclxuXHRcdFx0XHRpZiAoIUVkaXRvci5zb3VyY2UucGxheWluZylcclxuXHRcdFx0XHRcdHBvcyA9IHNuYXAocG9zLCB0cHQuYmFzZU9mZnNldCAvIDEwMDAsIHRwdC5iZWF0TGVuZ3RoIC8gMTAwMCAvIEVkaXRvci5vcHRpb25zLmJlYXRzbmFwZGl2aXNvcik7XHJcblx0XHRcdFx0RWRpdG9yLnNvdXJjZS5zZWVrKHBvcyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA0NikgeyAvL2RlbGV0ZVxyXG5cdFx0XHRFZGl0b3IuZGVsZXRlU2VsZWN0ZWQoKTtcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA0OSkgeyAvLzFcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdEVkaXRvci5zZXRHcmlkTGV2ZWwoMSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19zZWxlY3QnKS5hZGRDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9IDA7XHJcblx0XHRcdFx0RWRpdG9yLmRlc2VsZWN0QWxsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA1MCkgeyAvLzJcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdEVkaXRvci5zZXRHcmlkTGV2ZWwoMik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19ub3JtYWwnKS5hZGRDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9IDE7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA1MSkgeyAvLzNcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdEVkaXRvci5zZXRHcmlkTGV2ZWwoMyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19zbGlkZXInKS5hZGRDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0RWRpdG9yLm9wdGlvbnMudG9vbCA9IDI7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA1MikgeyAvLzRcclxuXHRcdFx0aWYgKGUuY3RybEtleSkge1xyXG5cdFx0XHRcdEVkaXRvci5zZXRHcmlkTGV2ZWwoNCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnI2xlZnR0b29sYmFyIGltZycpLnJlbW92ZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHQkKCcjZHJhd19zcGlubmVyJykuYWRkQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRcdEVkaXRvci5vcHRpb25zLnRvb2wgPSAzO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gODEpIHsgLy9xXHJcblx0XHRcdCQoJyNkcmF3X25ld2NvbWJvJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5uY29wdCA9ICFFZGl0b3Iub3B0aW9ucy5uY29wdDtcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA4NykgeyAvL3dcclxuXHRcdFx0JCgnI3NvdW5kX3doaXN0bGUnKS50b2dnbGVDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdEVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1swXSA9ICFFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMF07XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gNjkpIHsgLy9lXHJcblx0XHRcdCQoJyNzb3VuZF9maW5pc2gnKS50b2dnbGVDbGFzcygnYnV0dG9uX3NlbGVjdGVkJyk7XHJcblx0XHRcdEVkaXRvci5vcHRpb25zLnNvdW5kb3B0c1sxXSA9ICFFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMV07XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gODIpIHsgLy9yXHJcblx0XHRcdCQoJyNzb3VuZF9jbGFwJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5zb3VuZG9wdHNbMl0gPSAhRWRpdG9yLm9wdGlvbnMuc291bmRvcHRzWzJdO1xyXG5cdFx0fSBlbHNlIGlmIChjb2RlID09IDg0KSB7IC8vdFxyXG5cdFx0XHQkKCcjZHJhd19iZWF0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXA7XHJcblx0XHRcdEVkaXRvci51cGRhdGVNb3VzZUxvY2F0aW9uKCk7XHJcblx0XHR9IGVsc2UgaWYgKGNvZGUgPT0gODkpIHsgLy95XHJcblx0XHRcdCQoJyNkcmF3X2Rpc3RzbmFwJykudG9nZ2xlQ2xhc3MoJ2J1dHRvbl9zZWxlY3RlZCcpO1xyXG5cdFx0XHRFZGl0b3Iub3B0aW9ucy5kaXN0c25hcCA9ICFFZGl0b3Iub3B0aW9ucy5kaXN0c25hcDtcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA3NikgeyAvL2xcclxuXHRcdFx0JCgnI2RyYXdfbG9jaycpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMubG9ja25vdGVzID0gIUVkaXRvci5vcHRpb25zLmxvY2tub3RlcztcclxuXHRcdH0gZWxzZSBpZiAoY29kZSA9PSA3MSkgeyAvL2dcclxuXHRcdFx0RWRpdG9yLnNldEdyaWRMZXZlbChFZGl0b3Iub3B0aW9ucy5ncmlkbGV2ZWwgJSA0ICsgMSk7XHJcblx0XHR9XHJcblx0XHRFZGl0b3IudXBkYXRlKCk7XHJcblx0fTtcclxuXHJcblx0dmFyIGtleXVwaGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHZhciBjb2RlID0gKHdpbmRvdy5ldmVudCkgPyBldmVudC5rZXlDb2RlIDogZS5rZXlDb2RlO1xyXG5cdFx0a2V5TWFwW2NvZGVdID0gZmFsc2U7XHJcblx0XHRpZiAoY29kZSA9PSAxNikge1xyXG5cdFx0XHQkKCcjZHJhd19iZWF0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXAgPSAhRWRpdG9yLm9wdGlvbnMuZ3JpZHNuYXA7XHJcblx0XHRcdEVkaXRvci51cGRhdGVNb3VzZUxvY2F0aW9uKCk7XHJcblx0XHR9XHJcblx0XHRpZiAoY29kZSA9PSAxOCkge1xyXG5cdFx0XHQkKCcjZHJhd19kaXN0c25hcCcpLnRvZ2dsZUNsYXNzKCdidXR0b25fc2VsZWN0ZWQnKTtcclxuXHRcdFx0RWRpdG9yLm9wdGlvbnMuZGlzdGFuY2VzbmFwID0gIUVkaXRvci5vcHRpb25zLmRpc3RhbmNlc25hcDtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5cHJlc3NoYW5kbGVyLCBmYWxzZSk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBrZXl1cGhhbmRsZXIsIGZhbHNlKTtcclxuXHJcblx0RWRpdG9yLmFsaWduKCk7XHJcblx0U2tpbi5Mb2FkU2tpbignRGVmYXVsdCcsIGZ1bmN0aW9uKHNraW4pIHtcclxuXHRcdEVkaXRvci5za2luID0gc2tpbjtcclxuXHRcdEVkaXRvci5hdWRpb0N0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcclxuXHRcdEVkaXRvci5zb2NrZXQgPSBuZXcgU29ja2V0KCk7XHJcblx0XHRFZGl0b3IuYWxpZ24oKTtcclxuXHRcdEVkaXRvci51cGRhdGUoKTtcclxuXHR9KTtcclxufSk7XHJcbiJdLCJmaWxlIjoiTWFpbi5qcyJ9
